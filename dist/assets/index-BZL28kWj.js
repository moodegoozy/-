function ET(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function TT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Mv={exports:{}},Iu={},Fv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),IT=Symbol.for("react.portal"),NT=Symbol.for("react.fragment"),bT=Symbol.for("react.strict_mode"),ST=Symbol.for("react.profiler"),AT=Symbol.for("react.provider"),RT=Symbol.for("react.context"),kT=Symbol.for("react.forward_ref"),CT=Symbol.for("react.suspense"),PT=Symbol.for("react.memo"),jT=Symbol.for("react.lazy"),Qm=Symbol.iterator;function DT(t){return t===null||typeof t!="object"?null:(t=Qm&&t[Qm]||t["@@iterator"],typeof t=="function"?t:null)}var Uv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Bv=Object.assign,$v={};function Ei(t,e,n){this.props=t,this.context=e,this.refs=$v,this.updater=n||Uv}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function zv(){}zv.prototype=Ei.prototype;function Kh(t,e,n){this.props=t,this.context=e,this.refs=$v,this.updater=n||Uv}var Gh=Kh.prototype=new zv;Gh.constructor=Kh;Bv(Gh,Ei.prototype);Gh.isPureReactComponent=!0;var Ym=Array.isArray,qv=Object.prototype.hasOwnProperty,Qh={current:null},Wv={key:!0,ref:!0,__self:!0,__source:!0};function Hv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)qv.call(e,r)&&!Wv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:sa,type:t,key:i,ref:o,props:s,_owner:Qh.current}}function OT(t,e){return{$$typeof:sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yh(t){return typeof t=="object"&&t!==null&&t.$$typeof===sa}function LT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Xm=/\/+/g;function Lc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LT(""+t.key):e.toString(36)}function pl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sa:case IT:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Lc(o,0):r,Ym(s)?(n="",t!=null&&(n=t.replace(Xm,"$&/")+"/"),pl(s,e,n,"",function(d){return d})):s!=null&&(Yh(s)&&(s=OT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Xm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Ym(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Lc(i,l);o+=pl(i,e,n,u,s)}else if(u=DT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Lc(i,l++),o+=pl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ba(t,e,n){if(t==null)return t;var r=[],s=0;return pl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function VT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},ml={transition:null},MT={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:ml,ReactCurrentOwner:Qh};function Kv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ba,forEach:function(t,e,n){Ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ba(t,function(){e++}),e},toArray:function(t){return Ba(t,function(e){return e})||[]},only:function(t){if(!Yh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Ei;ne.Fragment=NT;ne.Profiler=ST;ne.PureComponent=Kh;ne.StrictMode=bT;ne.Suspense=CT;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=MT;ne.act=Kv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Bv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)qv.call(e,u)&&!Wv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:sa,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:RT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:AT,_context:t},t.Consumer=t};ne.createElement=Hv;ne.createFactory=function(t){var e=Hv.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:kT,render:t}};ne.isValidElement=Yh;ne.lazy=function(t){return{$$typeof:jT,_payload:{_status:-1,_result:t},_init:VT}};ne.memo=function(t,e){return{$$typeof:PT,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=ml.transition;ml.transition={};try{t()}finally{ml.transition=e}};ne.unstable_act=Kv;ne.useCallback=function(t,e){return It.current.useCallback(t,e)};ne.useContext=function(t){return It.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ne.useEffect=function(t,e){return It.current.useEffect(t,e)};ne.useId=function(){return It.current.useId()};ne.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return It.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ne.useRef=function(t){return It.current.useRef(t)};ne.useState=function(t){return It.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return It.current.useTransition()};ne.version="18.3.1";Fv.exports=ne;var j=Fv.exports;const Gv=TT(j),FT=ET({__proto__:null,default:Gv},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UT=j,BT=Symbol.for("react.element"),$T=Symbol.for("react.fragment"),zT=Object.prototype.hasOwnProperty,qT=UT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,WT={key:!0,ref:!0,__self:!0,__source:!0};function Qv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)zT.call(e,r)&&!WT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:BT,type:t,key:i,ref:o,props:s,_owner:qT.current}}Iu.Fragment=$T;Iu.jsx=Qv;Iu.jsxs=Qv;Mv.exports=Iu;var c=Mv.exports,bd={},Yv={exports:{}},$t={},Xv={exports:{}},Jv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Z=$.length;$.push(Q);e:for(;0<Z;){var pe=Z-1>>>1,H=$[pe];if(0<s(H,Q))$[pe]=Q,$[Z]=H,Z=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Z=$.pop();if(Z!==Q){$[0]=Z;e:for(var pe=0,H=$.length,te=H>>>1;pe<te;){var de=2*(pe+1)-1,Se=$[de],rt=de+1,Ge=$[rt];if(0>s(Se,Z))rt<H&&0>s(Ge,Se)?($[pe]=Ge,$[rt]=Z,pe=rt):($[pe]=Se,$[de]=Z,pe=de);else if(rt<H&&0>s(Ge,Z))$[pe]=Ge,$[rt]=Z,pe=rt;else break e}}return Q}function s($,Q){var Z=$.sortIndex-Q.sortIndex;return Z!==0?Z:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,x=!1,w=!1,A=!1,R=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function P($){if(A=!1,T($),!w)if(n(u)!==null)w=!0,qt(O);else{var Q=n(d);Q!==null&&yt(P,Q.startTime-$)}}function O($,Q){w=!1,A&&(A=!1,y(E),E=-1),x=!0;var Z=g;try{for(T(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||$&&!k());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var H=pe(p.expirationTime<=Q);Q=t.unstable_now(),typeof H=="function"?p.callback=H:p===n(u)&&r(u),T(Q)}else r(u);p=n(u)}if(p!==null)var te=!0;else{var de=n(d);de!==null&&yt(P,de.startTime-Q),te=!1}return te}finally{p=null,g=Z,x=!1}}var M=!1,N=null,E=-1,b=5,I=-1;function k(){return!(t.unstable_now()-I<b)}function C(){if(N!==null){var $=t.unstable_now();I=$;var Q=!0;try{Q=N(!0,$)}finally{Q?S():(M=!1,N=null)}}else M=!1}var S;if(typeof v=="function")S=function(){v(C)};else if(typeof MessageChannel<"u"){var qe=new MessageChannel,gt=qe.port2;qe.port1.onmessage=C,S=function(){gt.postMessage(null)}}else S=function(){R(C,0)};function qt($){N=$,M||(M=!0,S())}function yt($,Q){E=R(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){w||x||(w=!0,qt(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Z=g;g=Q;try{return $()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=g;g=$;try{return Q()}finally{g=Z}},t.unstable_scheduleCallback=function($,Q,Z){var pe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,$){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,$={id:f++,callback:Q,priorityLevel:$,startTime:Z,expirationTime:H,sortIndex:-1},Z>pe?($.sortIndex=Z,e(d,$),n(u)===null&&$===n(d)&&(A?(y(E),E=-1):A=!0,yt(P,Z-pe))):($.sortIndex=H,e(u,$),w||x||(w=!0,qt(O))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var Q=g;return function(){var Z=g;g=Q;try{return $.apply(this,arguments)}finally{g=Z}}}})(Jv);Xv.exports=Jv;var HT=Xv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KT=j,Bt=HT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Zv=new Set,Ao={};function Es(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ao[t]=e,t=0;t<e.length;t++)Zv.add(e[t])}var $n=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sd=Object.prototype.hasOwnProperty,GT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jm={},Zm={};function QT(t){return Sd.call(Zm,t)?!0:Sd.call(Jm,t)?!1:GT.test(t)?Zm[t]=!0:(Jm[t]=!0,!1)}function YT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XT(t,e,n,r){if(e===null||typeof e>"u"||YT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xh=/[\-:]([a-z])/g;function Jh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xh,Jh);tt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xh,Jh);tt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xh,Jh);tt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zh(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XT(e,n,s,r)&&(n=null),r||s===null?QT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=KT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),ef=Symbol.for("react.strict_mode"),Ad=Symbol.for("react.profiler"),e0=Symbol.for("react.provider"),t0=Symbol.for("react.context"),tf=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),kd=Symbol.for("react.suspense_list"),nf=Symbol.for("react.memo"),ir=Symbol.for("react.lazy"),n0=Symbol.for("react.offscreen"),eg=Symbol.iterator;function Hi(t){return t===null||typeof t!="object"?null:(t=eg&&t[eg]||t["@@iterator"],typeof t=="function"?t:null)}var Ne=Object.assign,Vc;function no(t){if(Vc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Vc=e&&e[1]||""}return`
`+Vc+t}var Mc=!1;function Fc(t,e){if(!t||Mc)return"";Mc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Mc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?no(t):""}function JT(t){switch(t.tag){case 5:return no(t.type);case 16:return no("Lazy");case 13:return no("Suspense");case 19:return no("SuspenseList");case 0:case 2:case 15:return t=Fc(t.type,!1),t;case 11:return t=Fc(t.type.render,!1),t;case 1:return t=Fc(t.type,!0),t;default:return""}}function Cd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ms:return"Fragment";case Vs:return"Portal";case Ad:return"Profiler";case ef:return"StrictMode";case Rd:return"Suspense";case kd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case t0:return(t.displayName||"Context")+".Consumer";case e0:return(t._context.displayName||"Context")+".Provider";case tf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nf:return e=t.displayName||null,e!==null?e:Cd(t.type)||"Memo";case ir:e=t._payload,t=t._init;try{return Cd(t(e))}catch{}}return null}function ZT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Cd(e);case 8:return e===ef?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function r0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function eI(t){var e=r0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function za(t){t._valueTracker||(t._valueTracker=eI(t))}function s0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=r0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ll(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Pd(t,e){var n=e.checked;return Ne({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function i0(t,e){e=e.checked,e!=null&&Zh(t,"checked",e,!1)}function jd(t,e){i0(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Dd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Dd(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ng(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Dd(t,e,n){(e!=="number"||Ll(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ro=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Od(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ne({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ro(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function o0(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function sg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function a0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ld(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?a0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qa,l0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Ro(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tI=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(t){tI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fo[e]=fo[t]})});function u0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fo.hasOwnProperty(t)&&fo[t]?(""+e).trim():e+"px"}function c0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=u0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var nI=Ne({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(nI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Md(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fd=null;function rf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ud=null,Xs=null,Js=null;function ig(t){if(t=aa(t)){if(typeof Ud!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ru(e),Ud(t.stateNode,t.type,e))}}function d0(t){Xs?Js?Js.push(t):Js=[t]:Xs=t}function h0(){if(Xs){var t=Xs,e=Js;if(Js=Xs=null,ig(t),e)for(t=0;t<e.length;t++)ig(e[t])}}function f0(t,e){return t(e)}function p0(){}var Uc=!1;function m0(t,e,n){if(Uc)return t(e,n);Uc=!0;try{return f0(t,e,n)}finally{Uc=!1,(Xs!==null||Js!==null)&&(p0(),h0())}}function ko(t,e){var n=t.stateNode;if(n===null)return null;var r=Ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Bd=!1;if($n)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Bd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Bd=!1}function rI(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var po=!1,Vl=null,Ml=!1,$d=null,sI={onError:function(t){po=!0,Vl=t}};function iI(t,e,n,r,s,i,o,l,u){po=!1,Vl=null,rI.apply(sI,arguments)}function oI(t,e,n,r,s,i,o,l,u){if(iI.apply(this,arguments),po){if(po){var d=Vl;po=!1,Vl=null}else throw Error(U(198));Ml||(Ml=!0,$d=d)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function g0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function og(t){if(Ts(t)!==t)throw Error(U(188))}function aI(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return og(s),t;if(i===r)return og(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function y0(t){return t=aI(t),t!==null?v0(t):null}function v0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=v0(t);if(e!==null)return e;t=t.sibling}return null}var _0=Bt.unstable_scheduleCallback,ag=Bt.unstable_cancelCallback,lI=Bt.unstable_shouldYield,uI=Bt.unstable_requestPaint,De=Bt.unstable_now,cI=Bt.unstable_getCurrentPriorityLevel,sf=Bt.unstable_ImmediatePriority,x0=Bt.unstable_UserBlockingPriority,Fl=Bt.unstable_NormalPriority,dI=Bt.unstable_LowPriority,w0=Bt.unstable_IdlePriority,Nu=null,yn=null;function hI(t){if(yn&&typeof yn.onCommitFiberRoot=="function")try{yn.onCommitFiberRoot(Nu,t,void 0,(t.current.flags&128)===128)}catch{}}var on=Math.clz32?Math.clz32:mI,fI=Math.log,pI=Math.LN2;function mI(t){return t>>>=0,t===0?32:31-(fI(t)/pI|0)|0}var Wa=64,Ha=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ul(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=so(l):(i&=o,i!==0&&(r=so(i)))}else o=n&~s,o!==0?r=so(o):i!==0&&(r=so(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-on(e),s=1<<n,r|=t[n],e&=~s;return r}function gI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-on(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=gI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function zd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function E0(){var t=Wa;return Wa<<=1,!(Wa&4194240)&&(Wa=64),t}function Bc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-on(e),t[e]=n}function vI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-on(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function of(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-on(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function T0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var I0,af,N0,b0,S0,qd=!1,Ka=[],vr=null,_r=null,xr=null,Co=new Map,Po=new Map,ar=[],_I="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lg(t,e){switch(t){case"focusin":case"focusout":vr=null;break;case"dragenter":case"dragleave":_r=null;break;case"mouseover":case"mouseout":xr=null;break;case"pointerover":case"pointerout":Co.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function Gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=aa(e),e!==null&&af(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function xI(t,e,n,r,s){switch(e){case"focusin":return vr=Gi(vr,t,e,n,r,s),!0;case"dragenter":return _r=Gi(_r,t,e,n,r,s),!0;case"mouseover":return xr=Gi(xr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Co.set(i,Gi(Co.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Po.set(i,Gi(Po.get(i)||null,t,e,n,r,s)),!0}return!1}function A0(t){var e=es(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=g0(n),e!==null){t.blockedOn=e,S0(t.priority,function(){N0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function gl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Wd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Fd=r,n.target.dispatchEvent(r),Fd=null}else return e=aa(n),e!==null&&af(e),t.blockedOn=n,!1;e.shift()}return!0}function ug(t,e,n){gl(t)&&n.delete(e)}function wI(){qd=!1,vr!==null&&gl(vr)&&(vr=null),_r!==null&&gl(_r)&&(_r=null),xr!==null&&gl(xr)&&(xr=null),Co.forEach(ug),Po.forEach(ug)}function Qi(t,e){t.blockedOn===e&&(t.blockedOn=null,qd||(qd=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,wI)))}function jo(t){function e(s){return Qi(s,t)}if(0<Ka.length){Qi(Ka[0],t);for(var n=1;n<Ka.length;n++){var r=Ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(vr!==null&&Qi(vr,t),_r!==null&&Qi(_r,t),xr!==null&&Qi(xr,t),Co.forEach(e),Po.forEach(e),n=0;n<ar.length;n++)r=ar[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ar.length&&(n=ar[0],n.blockedOn===null);)A0(n),n.blockedOn===null&&ar.shift()}var Zs=Xn.ReactCurrentBatchConfig,Bl=!0;function EI(t,e,n,r){var s=ue,i=Zs.transition;Zs.transition=null;try{ue=1,lf(t,e,n,r)}finally{ue=s,Zs.transition=i}}function TI(t,e,n,r){var s=ue,i=Zs.transition;Zs.transition=null;try{ue=4,lf(t,e,n,r)}finally{ue=s,Zs.transition=i}}function lf(t,e,n,r){if(Bl){var s=Wd(t,e,n,r);if(s===null)Xc(t,e,r,$l,n),lg(t,r);else if(xI(s,t,e,n,r))r.stopPropagation();else if(lg(t,r),e&4&&-1<_I.indexOf(t)){for(;s!==null;){var i=aa(s);if(i!==null&&I0(i),i=Wd(t,e,n,r),i===null&&Xc(t,e,r,$l,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Xc(t,e,r,null,n)}}var $l=null;function Wd(t,e,n,r){if($l=null,t=rf(r),t=es(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=g0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return $l=t,null}function R0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cI()){case sf:return 1;case x0:return 4;case Fl:case dI:return 16;case w0:return 536870912;default:return 16}default:return 16}}var pr=null,uf=null,yl=null;function k0(){if(yl)return yl;var t,e=uf,n=e.length,r,s="value"in pr?pr.value:pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return yl=s.slice(t,1<r?1-r:void 0)}function vl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ga(){return!0}function cg(){return!1}function zt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ga:cg,this.isPropagationStopped=cg,this}return Ne(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),e}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cf=zt(Ti),oa=Ne({},Ti,{view:0,detail:0}),II=zt(oa),$c,zc,Yi,bu=Ne({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:df,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?($c=t.screenX-Yi.screenX,zc=t.screenY-Yi.screenY):zc=$c=0,Yi=t),$c)},movementY:function(t){return"movementY"in t?t.movementY:zc}}),dg=zt(bu),NI=Ne({},bu,{dataTransfer:0}),bI=zt(NI),SI=Ne({},oa,{relatedTarget:0}),qc=zt(SI),AI=Ne({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),RI=zt(AI),kI=Ne({},Ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),CI=zt(kI),PI=Ne({},Ti,{data:0}),hg=zt(PI),jI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},OI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=OI[t])?!!e[t]:!1}function df(){return LI}var VI=Ne({},oa,{key:function(t){if(t.key){var e=jI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=vl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?DI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:df,charCode:function(t){return t.type==="keypress"?vl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?vl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),MI=zt(VI),FI=Ne({},bu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fg=zt(FI),UI=Ne({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:df}),BI=zt(UI),$I=Ne({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),zI=zt($I),qI=Ne({},bu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WI=zt(qI),HI=[9,13,27,32],hf=$n&&"CompositionEvent"in window,mo=null;$n&&"documentMode"in document&&(mo=document.documentMode);var KI=$n&&"TextEvent"in window&&!mo,C0=$n&&(!hf||mo&&8<mo&&11>=mo),pg=" ",mg=!1;function P0(t,e){switch(t){case"keyup":return HI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function j0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function GI(t,e){switch(t){case"compositionend":return j0(e);case"keypress":return e.which!==32?null:(mg=!0,pg);case"textInput":return t=e.data,t===pg&&mg?null:t;default:return null}}function QI(t,e){if(Fs)return t==="compositionend"||!hf&&P0(t,e)?(t=k0(),yl=uf=pr=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return C0&&e.locale!=="ko"?null:e.data;default:return null}}var YI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YI[t.type]:e==="textarea"}function D0(t,e,n,r){d0(r),e=zl(e,"onChange"),0<e.length&&(n=new cf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var go=null,Do=null;function XI(t){W0(t,0)}function Su(t){var e=$s(t);if(s0(e))return t}function JI(t,e){if(t==="change")return e}var O0=!1;if($n){var Wc;if($n){var Hc="oninput"in document;if(!Hc){var yg=document.createElement("div");yg.setAttribute("oninput","return;"),Hc=typeof yg.oninput=="function"}Wc=Hc}else Wc=!1;O0=Wc&&(!document.documentMode||9<document.documentMode)}function vg(){go&&(go.detachEvent("onpropertychange",L0),Do=go=null)}function L0(t){if(t.propertyName==="value"&&Su(Do)){var e=[];D0(e,Do,t,rf(t)),m0(XI,e)}}function ZI(t,e,n){t==="focusin"?(vg(),go=e,Do=n,go.attachEvent("onpropertychange",L0)):t==="focusout"&&vg()}function eN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Su(Do)}function tN(t,e){if(t==="click")return Su(e)}function nN(t,e){if(t==="input"||t==="change")return Su(e)}function rN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ln=typeof Object.is=="function"?Object.is:rN;function Oo(t,e){if(ln(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sd.call(e,s)||!ln(t[s],e[s]))return!1}return!0}function _g(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function xg(t,e){var n=_g(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_g(n)}}function V0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function M0(){for(var t=window,e=Ll();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ll(t.document)}return e}function ff(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sN(t){var e=M0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V0(n.ownerDocument.documentElement,n)){if(r!==null&&ff(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=xg(n,i);var o=xg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var iN=$n&&"documentMode"in document&&11>=document.documentMode,Us=null,Hd=null,yo=null,Kd=!1;function wg(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kd||Us==null||Us!==Ll(r)||(r=Us,"selectionStart"in r&&ff(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yo&&Oo(yo,r)||(yo=r,r=zl(Hd,"onSelect"),0<r.length&&(e=new cf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function Qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Kc={},F0={};$n&&(F0=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Au(t){if(Kc[t])return Kc[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in F0)return Kc[t]=e[n];return t}var U0=Au("animationend"),B0=Au("animationiteration"),$0=Au("animationstart"),z0=Au("transitionend"),q0=new Map,Eg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(t,e){q0.set(t,e),Es(e,[t])}for(var Gc=0;Gc<Eg.length;Gc++){var Qc=Eg[Gc],oN=Qc.toLowerCase(),aN=Qc[0].toUpperCase()+Qc.slice(1);Mr(oN,"on"+aN)}Mr(U0,"onAnimationEnd");Mr(B0,"onAnimationIteration");Mr($0,"onAnimationStart");Mr("dblclick","onDoubleClick");Mr("focusin","onFocus");Mr("focusout","onBlur");Mr(z0,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),lN=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Tg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,oI(r,e,void 0,t),t.currentTarget=null}function W0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;Tg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;Tg(s,l,d),i=u}}}if(Ml)throw t=$d,Ml=!1,$d=null,t}function ge(t,e){var n=e[Jd];n===void 0&&(n=e[Jd]=new Set);var r=t+"__bubble";n.has(r)||(H0(e,t,2,!1),n.add(r))}function Yc(t,e,n){var r=0;e&&(r|=4),H0(n,t,r,e)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Ya]){t[Ya]=!0,Zv.forEach(function(n){n!=="selectionchange"&&(lN.has(n)||Yc(n,!1,t),Yc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ya]||(e[Ya]=!0,Yc("selectionchange",!1,e))}}function H0(t,e,n,r){switch(R0(e)){case 1:var s=EI;break;case 4:s=TI;break;default:s=lf}n=s.bind(null,e,n,t),s=void 0,!Bd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Xc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=es(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}m0(function(){var d=i,f=rf(n),p=[];e:{var g=q0.get(t);if(g!==void 0){var x=cf,w=t;switch(t){case"keypress":if(vl(n)===0)break e;case"keydown":case"keyup":x=MI;break;case"focusin":w="focus",x=qc;break;case"focusout":w="blur",x=qc;break;case"beforeblur":case"afterblur":x=qc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=dg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=bI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=BI;break;case U0:case B0:case $0:x=RI;break;case z0:x=zI;break;case"scroll":x=II;break;case"wheel":x=WI;break;case"copy":case"cut":case"paste":x=CI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=fg}var A=(e&4)!==0,R=!A&&t==="scroll",y=A?g!==null?g+"Capture":null:g;A=[];for(var v=d,T;v!==null;){T=v;var P=T.stateNode;if(T.tag===5&&P!==null&&(T=P,y!==null&&(P=ko(v,y),P!=null&&A.push(Vo(v,P,T)))),R)break;v=v.return}0<A.length&&(g=new x(g,w,null,n,f),p.push({event:g,listeners:A}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",g&&n!==Fd&&(w=n.relatedTarget||n.fromElement)&&(es(w)||w[zn]))break e;if((x||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,x?(w=n.relatedTarget||n.toElement,x=d,w=w?es(w):null,w!==null&&(R=Ts(w),w!==R||w.tag!==5&&w.tag!==6)&&(w=null)):(x=null,w=d),x!==w)){if(A=dg,P="onMouseLeave",y="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(A=fg,P="onPointerLeave",y="onPointerEnter",v="pointer"),R=x==null?g:$s(x),T=w==null?g:$s(w),g=new A(P,v+"leave",x,n,f),g.target=R,g.relatedTarget=T,P=null,es(f)===d&&(A=new A(y,v+"enter",w,n,f),A.target=T,A.relatedTarget=R,P=A),R=P,x&&w)t:{for(A=x,y=w,v=0,T=A;T;T=js(T))v++;for(T=0,P=y;P;P=js(P))T++;for(;0<v-T;)A=js(A),v--;for(;0<T-v;)y=js(y),T--;for(;v--;){if(A===y||y!==null&&A===y.alternate)break t;A=js(A),y=js(y)}A=null}else A=null;x!==null&&Ig(p,g,x,A,!1),w!==null&&R!==null&&Ig(p,R,w,A,!0)}}e:{if(g=d?$s(d):window,x=g.nodeName&&g.nodeName.toLowerCase(),x==="select"||x==="input"&&g.type==="file")var O=JI;else if(gg(g))if(O0)O=nN;else{O=eN;var M=ZI}else(x=g.nodeName)&&x.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=tN);if(O&&(O=O(t,d))){D0(p,O,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Dd(g,"number",g.value)}switch(M=d?$s(d):window,t){case"focusin":(gg(M)||M.contentEditable==="true")&&(Us=M,Hd=d,yo=null);break;case"focusout":yo=Hd=Us=null;break;case"mousedown":Kd=!0;break;case"contextmenu":case"mouseup":case"dragend":Kd=!1,wg(p,n,f);break;case"selectionchange":if(iN)break;case"keydown":case"keyup":wg(p,n,f)}var N;if(hf)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Fs?P0(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(C0&&n.locale!=="ko"&&(Fs||E!=="onCompositionStart"?E==="onCompositionEnd"&&Fs&&(N=k0()):(pr=f,uf="value"in pr?pr.value:pr.textContent,Fs=!0)),M=zl(d,E),0<M.length&&(E=new hg(E,t,null,n,f),p.push({event:E,listeners:M}),N?E.data=N:(N=j0(n),N!==null&&(E.data=N)))),(N=KI?GI(t,n):QI(t,n))&&(d=zl(d,"onBeforeInput"),0<d.length&&(f=new hg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=N))}W0(p,e)})}function Vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function zl(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ko(t,n),i!=null&&r.unshift(Vo(t,i,s)),i=ko(t,e),i!=null&&r.push(Vo(t,i,s))),t=t.return}return r}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ig(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=ko(n,i),u!=null&&o.unshift(Vo(n,u,l))):s||(u=ko(n,i),u!=null&&o.push(Vo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var uN=/\r\n?/g,cN=/\u0000|\uFFFD/g;function Ng(t){return(typeof t=="string"?t:""+t).replace(uN,`
`).replace(cN,"")}function Xa(t,e,n){if(e=Ng(e),Ng(t)!==e&&n)throw Error(U(425))}function ql(){}var Gd=null,Qd=null;function Yd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xd=typeof setTimeout=="function"?setTimeout:void 0,dN=typeof clearTimeout=="function"?clearTimeout:void 0,bg=typeof Promise=="function"?Promise:void 0,hN=typeof queueMicrotask=="function"?queueMicrotask:typeof bg<"u"?function(t){return bg.resolve(null).then(t).catch(fN)}:Xd;function fN(t){setTimeout(function(){throw t})}function Jc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),pn="__reactFiber$"+Ii,Mo="__reactProps$"+Ii,zn="__reactContainer$"+Ii,Jd="__reactEvents$"+Ii,pN="__reactListeners$"+Ii,mN="__reactHandles$"+Ii;function es(t){var e=t[pn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[zn]||n[pn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sg(t);t!==null;){if(n=t[pn])return n;t=Sg(t)}return e}t=n,n=t.parentNode}return null}function aa(t){return t=t[pn]||t[zn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ru(t){return t[Mo]||null}var Zd=[],zs=-1;function Fr(t){return{current:t}}function _e(t){0>zs||(t.current=Zd[zs],Zd[zs]=null,zs--)}function fe(t,e){zs++,Zd[zs]=t.current,t.current=e}var Pr={},pt=Fr(Pr),kt=Fr(!1),us=Pr;function ai(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ct(t){return t=t.childContextTypes,t!=null}function Wl(){_e(kt),_e(pt)}function Ag(t,e,n){if(pt.current!==Pr)throw Error(U(168));fe(pt,e),fe(kt,n)}function K0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,ZT(t)||"Unknown",s));return Ne({},n,r)}function Hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,us=pt.current,fe(pt,t),fe(kt,kt.current),!0}function Rg(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=K0(t,e,us),r.__reactInternalMemoizedMergedChildContext=t,_e(kt),_e(pt),fe(pt,t)):_e(kt),fe(kt,n)}var jn=null,ku=!1,Zc=!1;function G0(t){jn===null?jn=[t]:jn.push(t)}function gN(t){ku=!0,G0(t)}function Ur(){if(!Zc&&jn!==null){Zc=!0;var t=0,e=ue;try{var n=jn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}jn=null,ku=!1}catch(s){throw jn!==null&&(jn=jn.slice(t+1)),_0(sf,Ur),s}finally{ue=e,Zc=!1}}return null}var qs=[],Ws=0,Kl=null,Gl=0,Wt=[],Ht=0,cs=null,Dn=1,On="";function Xr(t,e){qs[Ws++]=Gl,qs[Ws++]=Kl,Kl=t,Gl=e}function Q0(t,e,n){Wt[Ht++]=Dn,Wt[Ht++]=On,Wt[Ht++]=cs,cs=t;var r=Dn;t=On;var s=32-on(r)-1;r&=~(1<<s),n+=1;var i=32-on(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Dn=1<<32-on(e)+s|n<<s|r,On=i+t}else Dn=1<<i|n<<s|r,On=t}function pf(t){t.return!==null&&(Xr(t,1),Q0(t,1,0))}function mf(t){for(;t===Kl;)Kl=qs[--Ws],qs[Ws]=null,Gl=qs[--Ws],qs[Ws]=null;for(;t===cs;)cs=Wt[--Ht],Wt[Ht]=null,On=Wt[--Ht],Wt[Ht]=null,Dn=Wt[--Ht],Wt[Ht]=null}var Ft=null,Lt=null,Ee=!1,sn=null;function Y0(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function kg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ft=t,Lt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:Dn,overflow:On}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ft=t,Lt=null,!0):!1;default:return!1}}function eh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function th(t){if(Ee){var e=Lt;if(e){var n=e;if(!kg(t,e)){if(eh(t))throw Error(U(418));e=wr(n.nextSibling);var r=Ft;e&&kg(t,e)?Y0(r,n):(t.flags=t.flags&-4097|2,Ee=!1,Ft=t)}}else{if(eh(t))throw Error(U(418));t.flags=t.flags&-4097|2,Ee=!1,Ft=t}}}function Cg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ft=t}function Ja(t){if(t!==Ft)return!1;if(!Ee)return Cg(t),Ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yd(t.type,t.memoizedProps)),e&&(e=Lt)){if(eh(t))throw X0(),Error(U(418));for(;e;)Y0(t,e),e=wr(e.nextSibling)}if(Cg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Lt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Lt=null}}else Lt=Ft?wr(t.stateNode.nextSibling):null;return!0}function X0(){for(var t=Lt;t;)t=wr(t.nextSibling)}function li(){Lt=Ft=null,Ee=!1}function gf(t){sn===null?sn=[t]:sn.push(t)}var yN=Xn.ReactCurrentBatchConfig;function Xi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pg(t){var e=t._init;return e(t._payload)}function J0(t){function e(y,v){if(t){var T=y.deletions;T===null?(y.deletions=[v],y.flags|=16):T.push(v)}}function n(y,v){if(!t)return null;for(;v!==null;)e(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function s(y,v){return y=Nr(y,v),y.index=0,y.sibling=null,y}function i(y,v,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<v?(y.flags|=2,v):T):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,v,T,P){return v===null||v.tag!==6?(v=od(T,y.mode,P),v.return=y,v):(v=s(v,T),v.return=y,v)}function u(y,v,T,P){var O=T.type;return O===Ms?f(y,v,T.props.children,P,T.key):v!==null&&(v.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ir&&Pg(O)===v.type)?(P=s(v,T.props),P.ref=Xi(y,v,T),P.return=y,P):(P=Nl(T.type,T.key,T.props,null,y.mode,P),P.ref=Xi(y,v,T),P.return=y,P)}function d(y,v,T,P){return v===null||v.tag!==4||v.stateNode.containerInfo!==T.containerInfo||v.stateNode.implementation!==T.implementation?(v=ad(T,y.mode,P),v.return=y,v):(v=s(v,T.children||[]),v.return=y,v)}function f(y,v,T,P,O){return v===null||v.tag!==7?(v=is(T,y.mode,P,O),v.return=y,v):(v=s(v,T),v.return=y,v)}function p(y,v,T){if(typeof v=="string"&&v!==""||typeof v=="number")return v=od(""+v,y.mode,T),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case $a:return T=Nl(v.type,v.key,v.props,null,y.mode,T),T.ref=Xi(y,null,v),T.return=y,T;case Vs:return v=ad(v,y.mode,T),v.return=y,v;case ir:var P=v._init;return p(y,P(v._payload),T)}if(ro(v)||Hi(v))return v=is(v,y.mode,T,null),v.return=y,v;Za(y,v)}return null}function g(y,v,T,P){var O=v!==null?v.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:l(y,v,""+T,P);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:return T.key===O?u(y,v,T,P):null;case Vs:return T.key===O?d(y,v,T,P):null;case ir:return O=T._init,g(y,v,O(T._payload),P)}if(ro(T)||Hi(T))return O!==null?null:f(y,v,T,P,null);Za(y,T)}return null}function x(y,v,T,P,O){if(typeof P=="string"&&P!==""||typeof P=="number")return y=y.get(T)||null,l(v,y,""+P,O);if(typeof P=="object"&&P!==null){switch(P.$$typeof){case $a:return y=y.get(P.key===null?T:P.key)||null,u(v,y,P,O);case Vs:return y=y.get(P.key===null?T:P.key)||null,d(v,y,P,O);case ir:var M=P._init;return x(y,v,T,M(P._payload),O)}if(ro(P)||Hi(P))return y=y.get(T)||null,f(v,y,P,O,null);Za(v,P)}return null}function w(y,v,T,P){for(var O=null,M=null,N=v,E=v=0,b=null;N!==null&&E<T.length;E++){N.index>E?(b=N,N=null):b=N.sibling;var I=g(y,N,T[E],P);if(I===null){N===null&&(N=b);break}t&&N&&I.alternate===null&&e(y,N),v=i(I,v,E),M===null?O=I:M.sibling=I,M=I,N=b}if(E===T.length)return n(y,N),Ee&&Xr(y,E),O;if(N===null){for(;E<T.length;E++)N=p(y,T[E],P),N!==null&&(v=i(N,v,E),M===null?O=N:M.sibling=N,M=N);return Ee&&Xr(y,E),O}for(N=r(y,N);E<T.length;E++)b=x(N,y,E,T[E],P),b!==null&&(t&&b.alternate!==null&&N.delete(b.key===null?E:b.key),v=i(b,v,E),M===null?O=b:M.sibling=b,M=b);return t&&N.forEach(function(k){return e(y,k)}),Ee&&Xr(y,E),O}function A(y,v,T,P){var O=Hi(T);if(typeof O!="function")throw Error(U(150));if(T=O.call(T),T==null)throw Error(U(151));for(var M=O=null,N=v,E=v=0,b=null,I=T.next();N!==null&&!I.done;E++,I=T.next()){N.index>E?(b=N,N=null):b=N.sibling;var k=g(y,N,I.value,P);if(k===null){N===null&&(N=b);break}t&&N&&k.alternate===null&&e(y,N),v=i(k,v,E),M===null?O=k:M.sibling=k,M=k,N=b}if(I.done)return n(y,N),Ee&&Xr(y,E),O;if(N===null){for(;!I.done;E++,I=T.next())I=p(y,I.value,P),I!==null&&(v=i(I,v,E),M===null?O=I:M.sibling=I,M=I);return Ee&&Xr(y,E),O}for(N=r(y,N);!I.done;E++,I=T.next())I=x(N,y,E,I.value,P),I!==null&&(t&&I.alternate!==null&&N.delete(I.key===null?E:I.key),v=i(I,v,E),M===null?O=I:M.sibling=I,M=I);return t&&N.forEach(function(C){return e(y,C)}),Ee&&Xr(y,E),O}function R(y,v,T,P){if(typeof T=="object"&&T!==null&&T.type===Ms&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:e:{for(var O=T.key,M=v;M!==null;){if(M.key===O){if(O=T.type,O===Ms){if(M.tag===7){n(y,M.sibling),v=s(M,T.props.children),v.return=y,y=v;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===ir&&Pg(O)===M.type){n(y,M.sibling),v=s(M,T.props),v.ref=Xi(y,M,T),v.return=y,y=v;break e}n(y,M);break}else e(y,M);M=M.sibling}T.type===Ms?(v=is(T.props.children,y.mode,P,T.key),v.return=y,y=v):(P=Nl(T.type,T.key,T.props,null,y.mode,P),P.ref=Xi(y,v,T),P.return=y,y=P)}return o(y);case Vs:e:{for(M=T.key;v!==null;){if(v.key===M)if(v.tag===4&&v.stateNode.containerInfo===T.containerInfo&&v.stateNode.implementation===T.implementation){n(y,v.sibling),v=s(v,T.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else e(y,v);v=v.sibling}v=ad(T,y.mode,P),v.return=y,y=v}return o(y);case ir:return M=T._init,R(y,v,M(T._payload),P)}if(ro(T))return w(y,v,T,P);if(Hi(T))return A(y,v,T,P);Za(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,v!==null&&v.tag===6?(n(y,v.sibling),v=s(v,T),v.return=y,y=v):(n(y,v),v=od(T,y.mode,P),v.return=y,y=v),o(y)):n(y,v)}return R}var ui=J0(!0),Z0=J0(!1),Ql=Fr(null),Yl=null,Hs=null,yf=null;function vf(){yf=Hs=Yl=null}function _f(t){var e=Ql.current;_e(Ql),t._currentValue=e}function nh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ei(t,e){Yl=t,yf=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Yt(t){var e=t._currentValue;if(yf!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(Yl===null)throw Error(U(308));Hs=t,Yl.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var ts=null;function xf(t){ts===null?ts=[t]:ts.push(t)}function e_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,xf(e)):(n.next=s.next,s.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var or=!1;function wf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function t_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Er(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,qn(t,n)}return s=r.interleaved,s===null?(e.next=e,xf(r)):(e.next=s.next,s.next=e),r.interleaved=e,qn(t,n)}function _l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}function jg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Xl(t,e,n,r){var s=t.updateQueue;or=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,x=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var w=t,A=l;switch(g=e,x=n,A.tag){case 1:if(w=A.payload,typeof w=="function"){p=w.call(x,p,g);break e}p=w;break e;case 3:w.flags=w.flags&-65537|128;case 0:if(w=A.payload,g=typeof w=="function"?w.call(x,p,g):w,g==null)break e;p=Ne({},p,g);break e;case 2:or=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else x={eventTime:x,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,u=p):f=f.next=x,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=p}}function Dg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var la={},vn=Fr(la),Fo=Fr(la),Uo=Fr(la);function ns(t){if(t===la)throw Error(U(174));return t}function Ef(t,e){switch(fe(Uo,e),fe(Fo,t),fe(vn,la),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ld(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ld(e,t)}_e(vn),fe(vn,e)}function ci(){_e(vn),_e(Fo),_e(Uo)}function n_(t){ns(Uo.current);var e=ns(vn.current),n=Ld(e,t.type);e!==n&&(fe(Fo,t),fe(vn,n))}function Tf(t){Fo.current===t&&(_e(vn),_e(Fo))}var Te=Fr(0);function Jl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var ed=[];function If(){for(var t=0;t<ed.length;t++)ed[t]._workInProgressVersionPrimary=null;ed.length=0}var xl=Xn.ReactCurrentDispatcher,td=Xn.ReactCurrentBatchConfig,ds=0,Ie=null,Be=null,He=null,Zl=!1,vo=!1,Bo=0,vN=0;function at(){throw Error(U(321))}function Nf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ln(t[n],e[n]))return!1;return!0}function bf(t,e,n,r,s,i){if(ds=i,Ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,xl.current=t===null||t.memoizedState===null?EN:TN,t=n(r,s),vo){i=0;do{if(vo=!1,Bo=0,25<=i)throw Error(U(301));i+=1,He=Be=null,e.updateQueue=null,xl.current=IN,t=n(r,s)}while(vo)}if(xl.current=eu,e=Be!==null&&Be.next!==null,ds=0,He=Be=Ie=null,Zl=!1,e)throw Error(U(300));return t}function Sf(){var t=Bo!==0;return Bo=0,t}function fn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ie.memoizedState=He=t:He=He.next=t,He}function Xt(){if(Be===null){var t=Ie.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=He===null?Ie.memoizedState:He.next;if(e!==null)He=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},He===null?Ie.memoizedState=He=t:He=He.next=t}return He}function $o(t,e){return typeof e=="function"?e(t):e}function nd(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((ds&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Ie.lanes|=f,hs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,ln(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ie.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rd(t){var e=Xt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);ln(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function r_(){}function s_(t,e){var n=Ie,r=Xt(),s=e(),i=!ln(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,Af(a_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,zo(9,o_.bind(null,n,r,s,e),void 0,null),Ke===null)throw Error(U(349));ds&30||i_(n,e,s)}return s}function i_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function o_(t,e,n,r){e.value=n,e.getSnapshot=r,l_(e)&&u_(t)}function a_(t,e,n){return n(function(){l_(e)&&u_(t)})}function l_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ln(t,n)}catch{return!0}}function u_(t){var e=qn(t,1);e!==null&&an(e,t,1,-1)}function Og(t){var e=fn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},e.queue=t,t=t.dispatch=wN.bind(null,Ie,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ie.updateQueue,e===null?(e={lastEffect:null,stores:null},Ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function c_(){return Xt().memoizedState}function wl(t,e,n,r){var s=fn();Ie.flags|=t,s.memoizedState=zo(1|e,n,void 0,r===void 0?null:r)}function Cu(t,e,n,r){var s=Xt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var o=Be.memoizedState;if(i=o.destroy,r!==null&&Nf(r,o.deps)){s.memoizedState=zo(e,n,i,r);return}}Ie.flags|=t,s.memoizedState=zo(1|e,n,i,r)}function Lg(t,e){return wl(8390656,8,t,e)}function Af(t,e){return Cu(2048,8,t,e)}function d_(t,e){return Cu(4,2,t,e)}function h_(t,e){return Cu(4,4,t,e)}function f_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function p_(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4,4,f_.bind(null,e,t),n)}function Rf(){}function m_(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function g_(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function y_(t,e,n){return ds&21?(ln(n,e)||(n=E0(),Ie.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function _N(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=td.transition;td.transition={};try{t(!1),e()}finally{ue=n,td.transition=r}}function v_(){return Xt().memoizedState}function xN(t,e,n){var r=Ir(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},__(t))x_(e,n);else if(n=e_(t,e,n,r),n!==null){var s=Et();an(n,t,r,s),w_(n,e,r)}}function wN(t,e,n){var r=Ir(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(__(t))x_(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,ln(l,o)){var u=e.interleaved;u===null?(s.next=s,xf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=e_(t,e,s,r),n!==null&&(s=Et(),an(n,t,r,s),w_(n,e,r))}}function __(t){var e=t.alternate;return t===Ie||e!==null&&e===Ie}function x_(t,e){vo=Zl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function w_(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,of(t,n)}}var eu={readContext:Yt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},EN={readContext:Yt,useCallback:function(t,e){return fn().memoizedState=[t,e===void 0?null:e],t},useContext:Yt,useEffect:Lg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wl(4194308,4,f_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return wl(4,2,t,e)},useMemo:function(t,e){var n=fn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=fn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=xN.bind(null,Ie,t),[r.memoizedState,t]},useRef:function(t){var e=fn();return t={current:t},e.memoizedState=t},useState:Og,useDebugValue:Rf,useDeferredValue:function(t){return fn().memoizedState=t},useTransition:function(){var t=Og(!1),e=t[0];return t=_N.bind(null,t[1]),fn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ie,s=fn();if(Ee){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ke===null)throw Error(U(349));ds&30||i_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Lg(a_.bind(null,r,i,t),[t]),r.flags|=2048,zo(9,o_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=fn(),e=Ke.identifierPrefix;if(Ee){var n=On,r=Dn;n=(r&~(1<<32-on(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=vN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},TN={readContext:Yt,useCallback:m_,useContext:Yt,useEffect:Af,useImperativeHandle:p_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:nd,useRef:c_,useState:function(){return nd($o)},useDebugValue:Rf,useDeferredValue:function(t){var e=Xt();return y_(e,Be.memoizedState,t)},useTransition:function(){var t=nd($o)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:r_,useSyncExternalStore:s_,useId:v_,unstable_isNewReconciler:!1},IN={readContext:Yt,useCallback:m_,useContext:Yt,useEffect:Af,useImperativeHandle:p_,useInsertionEffect:d_,useLayoutEffect:h_,useMemo:g_,useReducer:rd,useRef:c_,useState:function(){return rd($o)},useDebugValue:Rf,useDeferredValue:function(t){var e=Xt();return Be===null?e.memoizedState=t:y_(e,Be.memoizedState,t)},useTransition:function(){var t=rd($o)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:r_,useSyncExternalStore:s_,useId:v_,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Ne({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ne({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Pu={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Ir(t),i=Fn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(an(e,t,s,r),_l(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Ir(t),i=Fn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Er(t,i,s),e!==null&&(an(e,t,s,r),_l(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Ir(t),s=Fn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Er(t,s,r),e!==null&&(an(e,t,r,n),_l(e,t,r))}};function Vg(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function E_(t,e,n){var r=!1,s=Pr,i=e.contextType;return typeof i=="object"&&i!==null?i=Yt(i):(s=Ct(e)?us:pt.current,r=e.contextTypes,i=(r=r!=null)?ai(t,s):Pr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Pu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Mg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Pu.enqueueReplaceState(e,e.state,null)}function sh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},wf(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Yt(i):(i=Ct(e)?us:pt.current,s.context=ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&Pu.enqueueReplaceState(s,s.state,null),Xl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function di(t,e){try{var n="",r=e;do n+=JT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function sd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ih(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var NN=typeof WeakMap=="function"?WeakMap:Map;function T_(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){nu||(nu=!0,mh=r),ih(t,e)},n}function I_(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){ih(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ih(t,e),typeof r!="function"&&(Tr===null?Tr=new Set([this]):Tr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new NN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=FN.bind(null,t,e,n),e.then(t,t))}function Ug(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Bg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,Er(n,e,1))),n.lanes|=1),t)}var bN=Xn.ReactCurrentOwner,Rt=!1;function wt(t,e,n,r){e.child=t===null?Z0(e,null,n,r):ui(e,t.child,n,r)}function $g(t,e,n,r,s){n=n.render;var i=e.ref;return ei(e,s),r=bf(t,e,n,r,i,s),n=Sf(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&n&&pf(e),e.flags|=1,wt(t,e,r,s),e.child)}function zg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Vf(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,N_(t,e,i,r,s)):(t=Nl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return Wn(t,e,s)}return e.flags|=1,t=Nr(i,r),t.ref=e.ref,t.return=e,e.child=t}function N_(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,Wn(t,e,s)}return oh(t,e,n,r,s)}function b_(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Gs,Ot),Ot|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Gs,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe(Gs,Ot),Ot|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,fe(Gs,Ot),Ot|=r;return wt(t,e,s,n),e.child}function S_(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function oh(t,e,n,r,s){var i=Ct(n)?us:pt.current;return i=ai(e,i),ei(e,s),n=bf(t,e,n,r,i,s),r=Sf(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Wn(t,e,s)):(Ee&&r&&pf(e),e.flags|=1,wt(t,e,n,s),e.child)}function qg(t,e,n,r,s){if(Ct(n)){var i=!0;Hl(e)}else i=!1;if(ei(e,s),e.stateNode===null)El(t,e),E_(e,n,r),sh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Yt(d):(d=Ct(n)?us:pt.current,d=ai(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Mg(e,o,r,d),or=!1;var g=e.memoizedState;o.state=g,Xl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||kt.current||or?(typeof f=="function"&&(rh(e,n,f,r),u=e.memoizedState),(l=or||Vg(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,t_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:nn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Yt(u):(u=Ct(n)?us:pt.current,u=ai(e,u));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Mg(e,o,r,u),or=!1,g=e.memoizedState,o.state=g,Xl(e,r,o,s);var w=e.memoizedState;l!==p||g!==w||kt.current||or?(typeof x=="function"&&(rh(e,n,x,r),w=e.memoizedState),(d=or||Vg(e,n,d,r,g,w,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,w,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,w,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=w),o.props=r,o.state=w,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ah(t,e,n,r,i,s)}function ah(t,e,n,r,s,i){S_(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Rg(e,n,!1),Wn(t,e,i);r=e.stateNode,bN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,i),e.child=ui(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&Rg(e,n,!0),e.child}function A_(t){var e=t.stateNode;e.pendingContext?Ag(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ag(t,e.context,!1),Ef(t,e.containerInfo)}function Wg(t,e,n,r,s){return li(),gf(s),e.flags|=256,wt(t,e,n,r),e.child}var lh={dehydrated:null,treeContext:null,retryLane:0};function uh(t){return{baseLanes:t,cachePool:null,transitions:null}}function R_(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),fe(Te,s&1),t===null)return th(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Ou(o,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uh(n),e.memoizedState=lh,t):kf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return SN(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Nr(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Nr(l,i):(i=is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=lh,r}return i=t.child,t=i.sibling,r=Nr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function kf(t,e){return e=Ou({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&gf(r),ui(e,t.child,null,n),t=kf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=sd(Error(U(422))),el(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Ou({mode:"visible",children:r.children},s,0,null),i=is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=uh(o),e.memoizedState=lh,i);if(!(e.mode&1))return el(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=sd(i,r,void 0),el(t,e,o,r)}if(l=(o&t.childLanes)!==0,Rt||l){if(r=Ke,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,qn(t,s),an(r,t,s,-1))}return Lf(),r=sd(Error(U(421))),el(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=UN.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Lt=wr(s.nextSibling),Ft=e,Ee=!0,sn=null,t!==null&&(Wt[Ht++]=Dn,Wt[Ht++]=On,Wt[Ht++]=cs,Dn=t.id,On=t.overflow,cs=e),e=kf(e,r.children),e.flags|=4096,e)}function Hg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nh(t.return,e,n)}function id(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function k_(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Hg(t,n,e);else if(t.tag===19)Hg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Jl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),id(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Jl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}id(e,!0,n,null,i);break;case"together":id(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function El(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Wn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Nr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Nr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function AN(t,e,n){switch(e.tag){case 3:A_(e),li();break;case 5:n_(e);break;case 1:Ct(e.type)&&Hl(e);break;case 4:Ef(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;fe(Ql,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?R_(t,e,n):(fe(Te,Te.current&1),t=Wn(t,e,n),t!==null?t.sibling:null);fe(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return k_(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,b_(t,e,n)}return Wn(t,e,n)}var C_,ch,P_,j_;C_=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ch=function(){};P_=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ns(vn.current);var i=null;switch(n){case"input":s=Pd(t,s),r=Pd(t,r),i=[];break;case"select":s=Ne({},s,{value:void 0}),r=Ne({},r,{value:void 0}),i=[];break;case"textarea":s=Od(t,s),r=Od(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ql)}Vd(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ao.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ao.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};j_=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ji(t,e){if(!Ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function RN(t,e,n){var r=e.pendingProps;switch(mf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Ct(e.type)&&Wl(),lt(e),null;case 3:return r=e.stateNode,ci(),_e(kt),_e(pt),If(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(vh(sn),sn=null))),ch(t,e),lt(e),null;case 5:Tf(e);var s=ns(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)P_(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return lt(e),null}if(t=ns(vn.current),Ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[pn]=e,r[Mo]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<io.length;s++)ge(io[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":tg(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":rg(r,i),ge("invalid",r)}Vd(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),s=["children",""+l]):Ao.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":za(r),ng(r,i,!0);break;case"textarea":za(r),sg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=ql)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=a0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[pn]=e,t[Mo]=r,C_(t,e,!1,!1),e.stateNode=t;e:{switch(o=Md(n,r),n){case"dialog":ge("cancel",t),ge("close",t),s=r;break;case"iframe":case"object":case"embed":ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<io.length;s++)ge(io[s],t);s=r;break;case"source":ge("error",t),s=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),s=r;break;case"details":ge("toggle",t),s=r;break;case"input":tg(t,r),s=Pd(t,r),ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ne({},r,{value:void 0}),ge("invalid",t);break;case"textarea":rg(t,r),s=Od(t,r),ge("invalid",t);break;default:s=r}Vd(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?c0(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&l0(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Ro(t,u):typeof u=="number"&&Ro(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ao.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",t):u!=null&&Zh(t,i,u,o))}switch(n){case"input":za(t),ng(t,r,!1);break;case"textarea":za(t),sg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ys(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=ql)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)j_(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ns(Uo.current),ns(vn.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[pn]=e,(i=r.nodeValue!==n)&&(t=Ft,t!==null))switch(t.tag){case 3:Xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[pn]=e,e.stateNode=r}return lt(e),null;case 13:if(_e(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ee&&Lt!==null&&e.mode&1&&!(e.flags&128))X0(),li(),e.flags|=98560,i=!1;else if(i=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[pn]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else sn!==null&&(vh(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?$e===0&&($e=3):Lf())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return ci(),ch(t,e),t===null&&Lo(e.stateNode.containerInfo),lt(e),null;case 10:return _f(e.type._context),lt(e),null;case 17:return Ct(e.type)&&Wl(),lt(e),null;case 19:if(_e(Te),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ji(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Jl(t),o!==null){for(e.flags|=128,Ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>hi&&(e.flags|=128,r=!0,Ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=Jl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ee)return lt(e),null}else 2*De()-i.renderingStartTime>hi&&n!==1073741824&&(e.flags|=128,r=!0,Ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Te.current,fe(Te,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ot&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function kN(t,e){switch(mf(e),e.tag){case 1:return Ct(e.type)&&Wl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ci(),_e(kt),_e(pt),If(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Tf(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return ci(),null;case 10:return _f(e.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var tl=!1,dt=!1,CN=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Re(t,e,r)}else n.current=null}function dh(t,e,n){try{n()}catch(r){Re(t,e,r)}}var Kg=!1;function PN(t,e){if(Gd=Bl,t=M0(),ff(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var x;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(x=p.firstChild)!==null;)g=p,p=x;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(x=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=x}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qd={focusedElem:t,selectionRange:n},Bl=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var w=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(w!==null){var A=w.memoizedProps,R=w.memoizedState,y=e.stateNode,v=y.getSnapshotBeforeUpdate(e.elementType===e.type?A:nn(e.type,A),R);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(P){Re(e,e.return,P)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return w=Kg,Kg=!1,w}function _o(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&dh(e,n,i)}s=s.next}while(s!==r)}}function ju(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function D_(t){var e=t.alternate;e!==null&&(t.alternate=null,D_(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[pn],delete e[Mo],delete e[Jd],delete e[pN],delete e[mN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function O_(t){return t.tag===5||t.tag===3||t.tag===4}function Gg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||O_(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function fh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ql));else if(r!==4&&(t=t.child,t!==null))for(fh(t,e,n),t=t.sibling;t!==null;)fh(t,e,n),t=t.sibling}function ph(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ph(t,e,n),t=t.sibling;t!==null;)ph(t,e,n),t=t.sibling}var Ye=null,rn=!1;function rr(t,e,n){for(n=n.child;n!==null;)L_(t,e,n),n=n.sibling}function L_(t,e,n){if(yn&&typeof yn.onCommitFiberUnmount=="function")try{yn.onCommitFiberUnmount(Nu,n)}catch{}switch(n.tag){case 5:dt||Ks(n,e);case 6:var r=Ye,s=rn;Ye=null,rr(t,e,n),Ye=r,rn=s,Ye!==null&&(rn?(t=Ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ye.removeChild(n.stateNode));break;case 18:Ye!==null&&(rn?(t=Ye,n=n.stateNode,t.nodeType===8?Jc(t.parentNode,n):t.nodeType===1&&Jc(t,n),jo(t)):Jc(Ye,n.stateNode));break;case 4:r=Ye,s=rn,Ye=n.stateNode.containerInfo,rn=!0,rr(t,e,n),Ye=r,rn=s;break;case 0:case 11:case 14:case 15:if(!dt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&dh(n,e,o),s=s.next}while(s!==r)}rr(t,e,n);break;case 1:if(!dt&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Re(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(dt=(r=dt)||n.memoizedState!==null,rr(t,e,n),dt=r):rr(t,e,n);break;default:rr(t,e,n)}}function Qg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new CN),e.forEach(function(r){var s=BN.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Zt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ye=l.stateNode,rn=!1;break e;case 3:Ye=l.stateNode.containerInfo,rn=!0;break e;case 4:Ye=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Ye===null)throw Error(U(160));L_(i,o,s),Ye=null,rn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){Re(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)V_(e,t),e=e.sibling}function V_(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Zt(e,t),dn(t),r&4){try{_o(3,t,t.return),ju(3,t)}catch(A){Re(t,t.return,A)}try{_o(5,t,t.return)}catch(A){Re(t,t.return,A)}}break;case 1:Zt(e,t),dn(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(Zt(e,t),dn(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var s=t.stateNode;try{Ro(s,"")}catch(A){Re(t,t.return,A)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&i0(s,i),Md(l,o);var d=Md(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?c0(s,p):f==="dangerouslySetInnerHTML"?l0(s,p):f==="children"?Ro(s,p):Zh(s,f,p,d)}switch(l){case"input":jd(s,i);break;case"textarea":o0(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?Ys(s,!!i.multiple,x,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ys(s,!!i.multiple,i.defaultValue,!0):Ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mo]=i}catch(A){Re(t,t.return,A)}}break;case 6:if(Zt(e,t),dn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(A){Re(t,t.return,A)}}break;case 3:if(Zt(e,t),dn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(A){Re(t,t.return,A)}break;case 4:Zt(e,t),dn(t);break;case 13:Zt(e,t),dn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(jf=De())),r&4&&Qg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(dt=(d=dt)||f,Zt(e,t),dt=d):Zt(e,t),dn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(p=q=f;q!==null;){switch(g=q,x=g.child,g.tag){case 0:case 11:case 14:case 15:_o(4,g,g.return);break;case 1:Ks(g,g.return);var w=g.stateNode;if(typeof w.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,w.props=e.memoizedProps,w.state=e.memoizedState,w.componentWillUnmount()}catch(A){Re(r,n,A)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){Xg(p);continue}}x!==null?(x.return=g,q=x):Xg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=u0("display",o))}catch(A){Re(t,t.return,A)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(A){Re(t,t.return,A)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Zt(e,t),dn(t),r&4&&Qg(t);break;case 21:break;default:Zt(e,t),dn(t)}}function dn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(O_(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Ro(s,""),r.flags&=-33);var i=Gg(t);ph(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Gg(t);fh(t,l,o);break;default:throw Error(U(161))}}catch(u){Re(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function jN(t,e,n){q=t,M_(t)}function M_(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||dt;l=tl;var d=dt;if(tl=o,(dt=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Jg(s):u!==null?(u.return=o,q=u):Jg(s);for(;i!==null;)q=i,M_(i),i=i.sibling;q=s,tl=l,dt=d}Yg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Yg(t)}}function Yg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:dt||ju(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!dt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Dg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Dg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}dt||e.flags&512&&hh(e)}catch(g){Re(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Xg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Jg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{ju(4,e)}catch(u){Re(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){Re(e,s,u)}}var i=e.return;try{hh(e)}catch(u){Re(e,i,u)}break;case 5:var o=e.return;try{hh(e)}catch(u){Re(e,o,u)}}}catch(u){Re(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var DN=Math.ceil,tu=Xn.ReactCurrentDispatcher,Cf=Xn.ReactCurrentOwner,Gt=Xn.ReactCurrentBatchConfig,oe=0,Ke=null,Me=null,Ze=0,Ot=0,Gs=Fr(0),$e=0,qo=null,hs=0,Du=0,Pf=0,xo=null,St=null,jf=0,hi=1/0,Pn=null,nu=!1,mh=null,Tr=null,nl=!1,mr=null,ru=0,wo=0,gh=null,Tl=-1,Il=0;function Et(){return oe&6?De():Tl!==-1?Tl:Tl=De()}function Ir(t){return t.mode&1?oe&2&&Ze!==0?Ze&-Ze:yN.transition!==null?(Il===0&&(Il=E0()),Il):(t=ue,t!==0||(t=window.event,t=t===void 0?16:R0(t.type)),t):1}function an(t,e,n,r){if(50<wo)throw wo=0,gh=null,Error(U(185));ia(t,n,r),(!(oe&2)||t!==Ke)&&(t===Ke&&(!(oe&2)&&(Du|=n),$e===4&&lr(t,Ze)),Pt(t,r),n===1&&oe===0&&!(e.mode&1)&&(hi=De()+500,ku&&Ur()))}function Pt(t,e){var n=t.callbackNode;yI(t,e);var r=Ul(t,t===Ke?Ze:0);if(r===0)n!==null&&ag(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ag(n),e===1)t.tag===0?gN(Zg.bind(null,t)):G0(Zg.bind(null,t)),hN(function(){!(oe&6)&&Ur()}),n=null;else{switch(T0(r)){case 1:n=sf;break;case 4:n=x0;break;case 16:n=Fl;break;case 536870912:n=w0;break;default:n=Fl}n=H_(n,F_.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function F_(t,e){if(Tl=-1,Il=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(ti()&&t.callbackNode!==n)return null;var r=Ul(t,t===Ke?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=su(t,r);else{e=r;var s=oe;oe|=2;var i=B_();(Ke!==t||Ze!==e)&&(Pn=null,hi=De()+500,ss(t,e));do try{VN();break}catch(l){U_(t,l)}while(!0);vf(),tu.current=i,oe=s,Me!==null?e=0:(Ke=null,Ze=0,e=$e)}if(e!==0){if(e===2&&(s=zd(t),s!==0&&(r=s,e=yh(t,s))),e===1)throw n=qo,ss(t,0),lr(t,r),Pt(t,De()),n;if(e===6)lr(t,r);else{if(s=t.current.alternate,!(r&30)&&!ON(s)&&(e=su(t,r),e===2&&(i=zd(t),i!==0&&(r=i,e=yh(t,i))),e===1))throw n=qo,ss(t,0),lr(t,r),Pt(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Jr(t,St,Pn);break;case 3:if(lr(t,r),(r&130023424)===r&&(e=jf+500-De(),10<e)){if(Ul(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xd(Jr.bind(null,t,St,Pn),e);break}Jr(t,St,Pn);break;case 4:if(lr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-on(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*DN(r/1960))-r,10<r){t.timeoutHandle=Xd(Jr.bind(null,t,St,Pn),r);break}Jr(t,St,Pn);break;case 5:Jr(t,St,Pn);break;default:throw Error(U(329))}}}return Pt(t,De()),t.callbackNode===n?F_.bind(null,t):null}function yh(t,e){var n=xo;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=su(t,e),t!==2&&(e=St,St=n,e!==null&&vh(e)),t}function vh(t){St===null?St=t:St.push.apply(St,t)}function ON(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!ln(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function lr(t,e){for(e&=~Pf,e&=~Du,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-on(e),r=1<<n;t[n]=-1,e&=~r}}function Zg(t){if(oe&6)throw Error(U(327));ti();var e=Ul(t,0);if(!(e&1))return Pt(t,De()),null;var n=su(t,e);if(t.tag!==0&&n===2){var r=zd(t);r!==0&&(e=r,n=yh(t,r))}if(n===1)throw n=qo,ss(t,0),lr(t,e),Pt(t,De()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,St,Pn),Pt(t,De()),null}function Df(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(hi=De()+500,ku&&Ur())}}function fs(t){mr!==null&&mr.tag===0&&!(oe&6)&&ti();var e=oe;oe|=1;var n=Gt.transition,r=ue;try{if(Gt.transition=null,ue=1,t)return t()}finally{ue=r,Gt.transition=n,oe=e,!(oe&6)&&Ur()}}function Of(){Ot=Gs.current,_e(Gs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,dN(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(mf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Wl();break;case 3:ci(),_e(kt),_e(pt),If();break;case 5:Tf(r);break;case 4:ci();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:_f(r.type._context);break;case 22:case 23:Of()}n=n.return}if(Ke=t,Me=t=Nr(t.current,null),Ze=Ot=e,$e=0,qo=null,Pf=Du=hs=0,St=xo=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ts=null}return t}function U_(t,e){do{var n=Me;try{if(vf(),xl.current=eu,Zl){for(var r=Ie.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Zl=!1}if(ds=0,He=Be=Ie=null,vo=!1,Bo=0,Cf.current=null,n===null||n.return===null){$e=1,qo=e,Me=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=Ug(o);if(x!==null){x.flags&=-257,Bg(x,o,l,i,e),x.mode&1&&Fg(i,d,e),e=x,u=d;var w=e.updateQueue;if(w===null){var A=new Set;A.add(u),e.updateQueue=A}else w.add(u);break e}else{if(!(e&1)){Fg(i,d,e),Lf();break e}u=Error(U(426))}}else if(Ee&&l.mode&1){var R=Ug(o);if(R!==null){!(R.flags&65536)&&(R.flags|=256),Bg(R,o,l,i,e),gf(di(u,l));break e}}i=u=di(u,l),$e!==4&&($e=2),xo===null?xo=[i]:xo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=T_(i,u,e);jg(i,y);break e;case 1:l=u;var v=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof v.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Tr===null||!Tr.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var P=I_(i,l,e);jg(i,P);break e}}i=i.return}while(i!==null)}z_(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function B_(){var t=tu.current;return tu.current=eu,t===null?eu:t}function Lf(){($e===0||$e===3||$e===2)&&($e=4),Ke===null||!(hs&268435455)&&!(Du&268435455)||lr(Ke,Ze)}function su(t,e){var n=oe;oe|=2;var r=B_();(Ke!==t||Ze!==e)&&(Pn=null,ss(t,e));do try{LN();break}catch(s){U_(t,s)}while(!0);if(vf(),oe=n,tu.current=r,Me!==null)throw Error(U(261));return Ke=null,Ze=0,$e}function LN(){for(;Me!==null;)$_(Me)}function VN(){for(;Me!==null&&!lI();)$_(Me)}function $_(t){var e=W_(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?z_(t):Me=e,Cf.current=null}function z_(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=kN(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=RN(n,e,Ot),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function Jr(t,e,n){var r=ue,s=Gt.transition;try{Gt.transition=null,ue=1,MN(t,e,n,r)}finally{Gt.transition=s,ue=r}return null}function MN(t,e,n,r){do ti();while(mr!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(vI(t,i),t===Ke&&(Me=Ke=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,H_(Fl,function(){return ti(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=ue;ue=1;var l=oe;oe|=4,Cf.current=null,PN(t,n),V_(n,t),sN(Qd),Bl=!!Gd,Qd=Gd=null,t.current=n,jN(n),uI(),oe=l,ue=o,Gt.transition=i}else t.current=n;if(nl&&(nl=!1,mr=t,ru=s),i=t.pendingLanes,i===0&&(Tr=null),hI(n.stateNode),Pt(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(nu)throw nu=!1,t=mh,mh=null,t;return ru&1&&t.tag!==0&&ti(),i=t.pendingLanes,i&1?t===gh?wo++:(wo=0,gh=t):wo=0,Ur(),null}function ti(){if(mr!==null){var t=T0(ru),e=Gt.transition,n=ue;try{if(Gt.transition=null,ue=16>t?16:t,mr===null)var r=!1;else{if(t=mr,mr=null,ru=0,oe&6)throw Error(U(331));var s=oe;for(oe|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:_o(8,f,i)}var p=f.child;if(p!==null)p.return=f,q=p;else for(;q!==null;){f=q;var g=f.sibling,x=f.return;if(D_(f),f===d){q=null;break}if(g!==null){g.return=x,q=g;break}q=x}}}var w=i.alternate;if(w!==null){var A=w.child;if(A!==null){w.child=null;do{var R=A.sibling;A.sibling=null,A=R}while(A!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_o(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,q=y;break e}q=i.return}}var v=t.current;for(q=v;q!==null;){o=q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,q=T;else e:for(o=v;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:ju(9,l)}}catch(O){Re(l,l.return,O)}if(l===o){q=null;break e}var P=l.sibling;if(P!==null){P.return=l.return,q=P;break e}q=l.return}}if(oe=s,Ur(),yn&&typeof yn.onPostCommitFiberRoot=="function")try{yn.onPostCommitFiberRoot(Nu,t)}catch{}r=!0}return r}finally{ue=n,Gt.transition=e}}return!1}function ey(t,e,n){e=di(n,e),e=T_(t,e,1),t=Er(t,e,1),e=Et(),t!==null&&(ia(t,1,e),Pt(t,e))}function Re(t,e,n){if(t.tag===3)ey(t,t,n);else for(;e!==null;){if(e.tag===3){ey(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Tr===null||!Tr.has(r))){t=di(n,t),t=I_(e,t,1),e=Er(e,t,1),t=Et(),e!==null&&(ia(e,1,t),Pt(e,t));break}}e=e.return}}function FN(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,Ke===t&&(Ze&n)===n&&($e===4||$e===3&&(Ze&130023424)===Ze&&500>De()-jf?ss(t,0):Pf|=n),Pt(t,e)}function q_(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=Et();t=qn(t,e),t!==null&&(ia(t,e,n),Pt(t,n))}function UN(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),q_(t,n)}function BN(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),q_(t,n)}var W_;W_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||kt.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,AN(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,Ee&&e.flags&1048576&&Q0(e,Gl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;El(t,e),t=e.pendingProps;var s=ai(e,pt.current);ei(e,n),s=bf(null,e,r,t,s,n);var i=Sf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ct(r)?(i=!0,Hl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,wf(e),s.updater=Pu,e.stateNode=s,s._reactInternals=e,sh(e,r,t,n),e=ah(null,e,r,!0,i,n)):(e.tag=0,Ee&&i&&pf(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(El(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=zN(r),t=nn(r,t),s){case 0:e=oh(null,e,r,t,n);break e;case 1:e=qg(null,e,r,t,n);break e;case 11:e=$g(null,e,r,t,n);break e;case 14:e=zg(null,e,r,nn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),oh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),qg(t,e,r,s,n);case 3:e:{if(A_(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,t_(t,e),Xl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=di(Error(U(423)),e),e=Wg(t,e,r,n,s);break e}else if(r!==s){s=di(Error(U(424)),e),e=Wg(t,e,r,n,s);break e}else for(Lt=wr(e.stateNode.containerInfo.firstChild),Ft=e,Ee=!0,sn=null,n=Z0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===s){e=Wn(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return n_(e),t===null&&th(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yd(r,s)?o=null:i!==null&&Yd(r,i)&&(e.flags|=32),S_(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&th(e),null;case 13:return R_(t,e,n);case 4:return Ef(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),$g(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,fe(Ql,r._currentValue),r._currentValue=o,i!==null)if(ln(i.value,o)){if(i.children===s.children&&!kt.current){e=Wn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Fn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),nh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ei(e,n),s=Yt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),zg(t,e,r,s,n);case 15:return N_(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),El(t,e),e.tag=1,Ct(r)?(t=!0,Hl(e)):t=!1,ei(e,n),E_(e,r,s),sh(e,r,s,n),ah(null,e,r,!0,t,n);case 19:return k_(t,e,n);case 22:return b_(t,e,n)}throw Error(U(156,e.tag))};function H_(t,e){return _0(t,e)}function $N(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new $N(t,e,n,r)}function Vf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function zN(t){if(typeof t=="function")return Vf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tf)return 11;if(t===nf)return 14}return 2}function Nr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Nl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Vf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ms:return is(n.children,s,i,e);case ef:o=8,s|=8;break;case Ad:return t=Kt(12,n,e,s|2),t.elementType=Ad,t.lanes=i,t;case Rd:return t=Kt(13,n,e,s),t.elementType=Rd,t.lanes=i,t;case kd:return t=Kt(19,n,e,s),t.elementType=kd,t.lanes=i,t;case n0:return Ou(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case e0:o=10;break e;case t0:o=9;break e;case tf:o=11;break e;case nf:o=14;break e;case ir:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function Ou(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=n0,t.lanes=n,t.stateNode={isHidden:!1},t}function od(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function ad(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function qN(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bc(0),this.expirationTimes=Bc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mf(t,e,n,r,s,i,o,l,u){return t=new qN(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},wf(i),t}function WN(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function K_(t){if(!t)return Pr;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ct(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Ct(n))return K0(t,n,e)}return e}function G_(t,e,n,r,s,i,o,l,u){return t=Mf(n,r,!0,t,s,i,o,l,u),t.context=K_(null),n=t.current,r=Et(),s=Ir(n),i=Fn(r,s),i.callback=e??null,Er(n,i,s),t.current.lanes=s,ia(t,s,r),Pt(t,r),t}function Lu(t,e,n,r){var s=e.current,i=Et(),o=Ir(s);return n=K_(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Er(s,e,o),t!==null&&(an(t,s,o,i),_l(t,s,o)),o}function iu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function ty(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Ff(t,e){ty(t,e),(t=t.alternate)&&ty(t,e)}function HN(){return null}var Q_=typeof reportError=="function"?reportError:function(t){console.error(t)};function Uf(t){this._internalRoot=t}Vu.prototype.render=Uf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Lu(t,e,null,null)};Vu.prototype.unmount=Uf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Lu(null,t,null,null)}),e[zn]=null}};function Vu(t){this._internalRoot=t}Vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=b0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ar.length&&e!==0&&e<ar[n].priority;n++);ar.splice(n,0,t),n===0&&A0(t)}};function Bf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Mu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ny(){}function KN(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=iu(o);i.call(d)}}var o=G_(e,r,t,0,null,!1,!1,"",ny);return t._reactRootContainer=o,t[zn]=o.current,Lo(t.nodeType===8?t.parentNode:t),fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=iu(u);l.call(d)}}var u=Mf(t,0,!1,null,null,!1,!1,"",ny);return t._reactRootContainer=u,t[zn]=u.current,Lo(t.nodeType===8?t.parentNode:t),fs(function(){Lu(e,u,n,r)}),u}function Fu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=iu(o);l.call(u)}}Lu(e,o,t,s)}else o=KN(n,e,t,s,r);return iu(o)}I0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(of(e,n|1),Pt(e,De()),!(oe&6)&&(hi=De()+500,Ur()))}break;case 13:fs(function(){var r=qn(t,1);if(r!==null){var s=Et();an(r,t,1,s)}}),Ff(t,1)}};af=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=Et();an(e,t,134217728,n)}Ff(t,134217728)}};N0=function(t){if(t.tag===13){var e=Ir(t),n=qn(t,e);if(n!==null){var r=Et();an(n,t,e,r)}Ff(t,e)}};b0=function(){return ue};S0=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Ud=function(t,e,n){switch(e){case"input":if(jd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ru(r);if(!s)throw Error(U(90));s0(r),jd(r,s)}}}break;case"textarea":o0(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};f0=Df;p0=fs;var GN={usingClientEntryPoint:!1,Events:[aa,$s,Ru,d0,h0,Df]},Zi={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},QN={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=y0(t),t===null?null:t.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||HN,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Nu=rl.inject(QN),yn=rl}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=GN;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Bf(e))throw Error(U(200));return WN(t,e,null,n)};$t.createRoot=function(t,e){if(!Bf(t))throw Error(U(299));var n=!1,r="",s=Q_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mf(t,1,!1,null,null,n,!1,r,s),t[zn]=e.current,Lo(t.nodeType===8?t.parentNode:t),new Uf(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=y0(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return fs(t)};$t.hydrate=function(t,e,n){if(!Mu(e))throw Error(U(200));return Fu(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!Bf(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Q_;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=G_(e,null,t,1,n??null,s,!1,i,o),t[zn]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Vu(e)};$t.render=function(t,e,n){if(!Mu(e))throw Error(U(200));return Fu(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!Mu(t))throw Error(U(40));return t._reactRootContainer?(fs(function(){Fu(null,null,t,!1,function(){t._reactRootContainer=null,t[zn]=null})}),!0):!1};$t.unstable_batchedUpdates=Df;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Mu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Fu(t,e,n,!1,r)};$t.version="18.3.1-next-f1338f8080-20240426";function Y_(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Y_)}catch(t){console.error(t)}}Y_(),Yv.exports=$t;var YN=Yv.exports,ry=YN;bd.createRoot=ry.createRoot,bd.hydrateRoot=ry.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wo.apply(this,arguments)}var gr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gr||(gr={}));const sy="popstate";function XN(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return _h("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ou(s)}return ZN(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function X_(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function JN(){return Math.random().toString(36).substr(2,8)}function iy(t,e){return{usr:t.state,key:t.key,idx:e}}function _h(t,e,n,r){return n===void 0&&(n=null),Wo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ni(e):e,{state:n,key:e&&e.key||r||JN()})}function ou(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ni(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function ZN(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=gr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Wo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=gr.Pop;let R=f(),y=R==null?null:R-d;d=R,u&&u({action:l,location:A.location,delta:y})}function g(R,y){l=gr.Push;let v=_h(A.location,R,y);d=f()+1;let T=iy(v,d),P=A.createHref(v);try{o.pushState(T,"",P)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(P)}i&&u&&u({action:l,location:A.location,delta:1})}function x(R,y){l=gr.Replace;let v=_h(A.location,R,y);d=f();let T=iy(v,d),P=A.createHref(v);o.replaceState(T,"",P),i&&u&&u({action:l,location:A.location,delta:0})}function w(R){let y=s.location.origin!=="null"?s.location.origin:s.location.href,v=typeof R=="string"?R:ou(R);return v=v.replace(/ $/,"%20"),Le(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let A={get action(){return l},get location(){return t(s,o)},listen(R){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(sy,p),u=R,()=>{s.removeEventListener(sy,p),u=null}},createHref(R){return e(s,R)},createURL:w,encodeLocation(R){let y=w(R);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:x,go(R){return o.go(R)}};return A}var oy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(oy||(oy={}));function eb(t,e,n){return n===void 0&&(n="/"),tb(t,e,n)}function tb(t,e,n,r){let s=typeof e=="string"?Ni(e):e,i=$f(s.pathname||"/",n);if(i==null)return null;let o=J_(t);nb(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=pb(i);l=db(o[u],d)}return l}function J_(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Le(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=br([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),J_(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:ub(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of Z_(i.path))s(i,o,u)}),e}function Z_(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Z_(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function nb(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:cb(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rb=/^:[\w-]+$/,sb=3,ib=2,ob=1,ab=10,lb=-2,ay=t=>t==="*";function ub(t,e){let n=t.split("/"),r=n.length;return n.some(ay)&&(r+=lb),e&&(r+=ib),n.filter(s=>!ay(s)).reduce((s,i)=>s+(rb.test(i)?sb:i===""?ob:ab),r)}function cb(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function db(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=hb({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:br([i,p.pathname]),pathnameBase:vb(br([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=br([i,p.pathnameBase]))}return o}function hb(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=fb(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:x}=f;if(g==="*"){let A=l[p]||"";o=i.slice(0,i.length-A.length).replace(/(.)\/+$/,"$1")}const w=l[p];return x&&!w?d[g]=void 0:d[g]=(w||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function fb(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),X_(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function pb(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return X_(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function $f(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function mb(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ni(t):t;return{pathname:n?n.startsWith("/")?n:gb(n,e):e,search:_b(r),hash:xb(s)}}function gb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ld(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yb(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function zf(t,e){let n=yb(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function qf(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ni(t):(s=Wo({},t),Le(!s.pathname||!s.pathname.includes("?"),ld("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),ld("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),ld("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=mb(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const br=t=>t.join("/").replace(/\/\/+/g,"/"),vb=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_b=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,xb=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function wb(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const ex=["post","put","patch","delete"];new Set(ex);const Eb=["get",...ex];new Set(Eb);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(this,arguments)}const Wf=j.createContext(null),Tb=j.createContext(null),Br=j.createContext(null),Uu=j.createContext(null),$r=j.createContext({outlet:null,matches:[],isDataRoute:!1}),tx=j.createContext(null);function Ib(t,e){let{relative:n}=e===void 0?{}:e;bi()||Le(!1);let{basename:r,navigator:s}=j.useContext(Br),{hash:i,pathname:o,search:l}=rx(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:br([r,o])),s.createHref({pathname:u,search:l,hash:i})}function bi(){return j.useContext(Uu)!=null}function Si(){return bi()||Le(!1),j.useContext(Uu).location}function nx(t){j.useContext(Br).static||j.useLayoutEffect(t)}function Is(){let{isDataRoute:t}=j.useContext($r);return t?Vb():Nb()}function Nb(){bi()||Le(!1);let t=j.useContext(Wf),{basename:e,future:n,navigator:r}=j.useContext(Br),{matches:s}=j.useContext($r),{pathname:i}=Si(),o=JSON.stringify(zf(s,n.v7_relativeSplatPath)),l=j.useRef(!1);return nx(()=>{l.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=qf(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:br([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function rx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(Br),{matches:s}=j.useContext($r),{pathname:i}=Si(),o=JSON.stringify(zf(s,r.v7_relativeSplatPath));return j.useMemo(()=>qf(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function bb(t,e){return Sb(t,e)}function Sb(t,e,n,r){bi()||Le(!1);let{navigator:s}=j.useContext(Br),{matches:i}=j.useContext($r),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Si(),f;if(e){var p;let R=typeof e=="string"?Ni(e):e;u==="/"||(p=R.pathname)!=null&&p.startsWith(u)||Le(!1),f=R}else f=d;let g=f.pathname||"/",x=g;if(u!=="/"){let R=u.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(R.length).join("/")}let w=eb(t,{pathname:x}),A=Pb(w&&w.map(R=>Object.assign({},R,{params:Object.assign({},l,R.params),pathname:br([u,s.encodeLocation?s.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?u:br([u,s.encodeLocation?s.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),i,n,r);return e&&A?j.createElement(Uu.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:gr.Pop}},A):A}function Ab(){let t=Lb(),e=wb(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const Rb=j.createElement(Ab,null);class kb extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement($r.Provider,{value:this.props.routeContext},j.createElement(tx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function Cb(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Wf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement($r.Provider,{value:e},r)}function Pb(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Le(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:x}=n,w=p.route.loader&&g[p.route.id]===void 0&&(!x||x[p.route.id]===void 0);if(p.route.lazy||w){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let x,w=!1,A=null,R=null;n&&(x=l&&p.route.id?l[p.route.id]:void 0,A=p.route.errorElement||Rb,u&&(d<0&&g===0?(Mb("route-fallback"),w=!0,R=null):d===g&&(w=!0,R=p.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),v=()=>{let T;return x?T=A:w?T=R:p.route.Component?T=j.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,j.createElement(Cb,{match:p,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?j.createElement(kb,{location:n.location,revalidation:n.revalidation,component:A,error:x,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var sx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(sx||{}),ix=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(ix||{});function jb(t){let e=j.useContext(Wf);return e||Le(!1),e}function Db(t){let e=j.useContext(Tb);return e||Le(!1),e}function Ob(t){let e=j.useContext($r);return e||Le(!1),e}function ox(t){let e=Ob(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function Lb(){var t;let e=j.useContext(tx),n=Db(),r=ox();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function Vb(){let{router:t}=jb(sx.UseNavigateStable),e=ox(ix.UseNavigateStable),n=j.useRef(!1);return nx(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ho({fromRouteId:e},i)))},[t,e])}const ly={};function Mb(t,e,n){ly[t]||(ly[t]=!0)}function Fb(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function ax(t){let{to:e,replace:n,state:r,relative:s}=t;bi()||Le(!1);let{future:i,static:o}=j.useContext(Br),{matches:l}=j.useContext($r),{pathname:u}=Si(),d=Is(),f=qf(e,zf(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function ye(t){Le(!1)}function Ub(t){let{basename:e="/",children:n=null,location:r,navigationType:s=gr.Pop,navigator:i,static:o=!1,future:l}=t;bi()&&Le(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:o,future:Ho({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Ni(r));let{pathname:f="/",search:p="",hash:g="",state:x=null,key:w="default"}=r,A=j.useMemo(()=>{let R=$f(f,u);return R==null?null:{location:{pathname:R,search:p,hash:g,state:x,key:w},navigationType:s}},[u,f,p,g,x,w,s]);return A==null?null:j.createElement(Br.Provider,{value:d},j.createElement(Uu.Provider,{children:n,value:A}))}function Bb(t){let{children:e,location:n}=t;return bb(xh(e),n)}new Promise(()=>{});function xh(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,xh(r.props.children,i));return}r.type!==ye&&Le(!1),!r.props.index||!r.props.children||Le(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=xh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function wh(){return wh=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},wh.apply(this,arguments)}function $b(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function zb(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function qb(t,e){return t.button===0&&(!e||e==="_self")&&!zb(t)}const Wb=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Hb="6";try{window.__reactRouterVersion=Hb}catch{}const Kb="startTransition",uy=FT[Kb];function Gb(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=XN({window:s,v5Compat:!0}));let o=i.current,[l,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&uy?uy(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>Fb(r),[r]),j.createElement(Ub,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const Qb=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Yb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Tt=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=$b(e,Wb),{basename:x}=j.useContext(Br),w,A=!1;if(typeof d=="string"&&Yb.test(d)&&(w=d,Qb))try{let T=new URL(window.location.href),P=d.startsWith("//")?new URL(T.protocol+d):new URL(d),O=$f(P.pathname,x);P.origin===T.origin&&O!=null?d=O+P.search+P.hash:A=!0}catch{}let R=Ib(d,{relative:s}),y=Xb(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function v(T){r&&r(T),T.defaultPrevented||y(T)}return j.createElement("a",wh({},g,{href:w||R,onClick:A||i?r:v,ref:n,target:u}))});var cy;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(cy||(cy={}));var dy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dy||(dy={}));function Xb(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Is(),d=Si(),f=rx(t,{relative:o});return j.useCallback(p=>{if(qb(p,n)){p.preventDefault();let g=r!==void 0?r:ou(d)===ou(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}var hy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},Jb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ux={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,x=d&63;u||(x=64,o||(g=64)),r.push(n[f],n[p],n[g],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(lx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):Jb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new Zb;const g=i<<2|l>>4;if(r.push(g),d!==64){const x=l<<4&240|d>>2;if(r.push(x),p!==64){const w=d<<6&192|p;r.push(w)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class Zb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const eS=function(t){const e=lx(t);return ux.encodeByteArray(e,!0)},au=function(t){return eS(t).replace(/\./g,"")},cx=function(t){try{return ux.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nS=()=>tS().__FIREBASE_DEFAULTS__,rS=()=>{if(typeof process>"u"||typeof hy>"u")return;const t=hy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},sS=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&cx(t[1]);return e&&JSON.parse(e)},Bu=()=>{try{return nS()||rS()||sS()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},dx=t=>{var e,n;return(n=(e=Bu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},hx=t=>{const e=dx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},fx=()=>{var t;return(t=Bu())===null||t===void 0?void 0:t.config},px=t=>{var e;return(e=Bu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[au(JSON.stringify(n)),au(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function oS(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mt())}function aS(){var t;const e=(t=Bu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function lS(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function uS(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function cS(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function dS(){const t=mt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function hS(){return!aS()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function fS(){try{return typeof indexedDB=="object"}catch{return!1}}function pS(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=mS,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?gS(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Sn(s,l,r)}}function gS(t,e){return t.replace(yS,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const yS=/\{\$([^}]+)}/g;function vS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function lu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(fy(i)&&fy(o)){if(!lu(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function fy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function _S(t,e){const n=new xS(t,e);return n.subscribe.bind(n)}class xS{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");wS(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ud),s.error===void 0&&(s.error=ud),s.complete===void 0&&(s.complete=ud);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wS(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ud(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xe(t){return t&&t._delegate?t._delegate:t}class jr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ES{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new iS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(IS(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:TS(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function TS(t){return t===Zr?void 0:t}function IS(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NS{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ES(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const bS={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},SS=se.INFO,AS={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},RS=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=AS[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hf{constructor(e){this.name=e,this._logLevel=SS,this._logHandler=RS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bS[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const kS=(t,e)=>e.some(n=>t instanceof n);let py,my;function CS(){return py||(py=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function PS(){return my||(my=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const gx=new WeakMap,Eh=new WeakMap,yx=new WeakMap,cd=new WeakMap,Kf=new WeakMap;function jS(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Sr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&gx.set(n,t)}).catch(()=>{}),Kf.set(e,t),e}function DS(t){if(Eh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Eh.set(t,e)}let Th={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Eh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||yx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Sr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function OS(t){Th=t(Th)}function LS(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(dd(this),e,...n);return yx.set(r,e.sort?e.sort():[e]),Sr(r)}:PS().includes(t)?function(...e){return t.apply(dd(this),e),Sr(gx.get(this))}:function(...e){return Sr(t.apply(dd(this),e))}}function VS(t){return typeof t=="function"?LS(t):(t instanceof IDBTransaction&&DS(t),kS(t,CS())?new Proxy(t,Th):t)}function Sr(t){if(t instanceof IDBRequest)return jS(t);if(cd.has(t))return cd.get(t);const e=VS(t);return e!==t&&(cd.set(t,e),Kf.set(e,t)),e}const dd=t=>Kf.get(t);function MS(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Sr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Sr(o.result),u.oldVersion,u.newVersion,Sr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const FS=["get","getKey","getAll","getAllKeys","count"],US=["put","add","delete","clear"],hd=new Map;function gy(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(hd.get(e))return hd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=US.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||FS.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return hd.set(e,i),i}OS(t=>({...t,get:(e,n,r)=>gy(e,n)||t.get(e,n,r),has:(e,n)=>!!gy(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if($S(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function $S(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ih="@firebase/app",yy="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hn=new Hf("@firebase/app"),zS="@firebase/app-compat",qS="@firebase/analytics-compat",WS="@firebase/analytics",HS="@firebase/app-check-compat",KS="@firebase/app-check",GS="@firebase/auth",QS="@firebase/auth-compat",YS="@firebase/database",XS="@firebase/data-connect",JS="@firebase/database-compat",ZS="@firebase/functions",eA="@firebase/functions-compat",tA="@firebase/installations",nA="@firebase/installations-compat",rA="@firebase/messaging",sA="@firebase/messaging-compat",iA="@firebase/performance",oA="@firebase/performance-compat",aA="@firebase/remote-config",lA="@firebase/remote-config-compat",uA="@firebase/storage",cA="@firebase/storage-compat",dA="@firebase/firestore",hA="@firebase/vertexai-preview",fA="@firebase/firestore-compat",pA="firebase",mA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="[DEFAULT]",gA={[Ih]:"fire-core",[zS]:"fire-core-compat",[WS]:"fire-analytics",[qS]:"fire-analytics-compat",[KS]:"fire-app-check",[HS]:"fire-app-check-compat",[GS]:"fire-auth",[QS]:"fire-auth-compat",[YS]:"fire-rtdb",[XS]:"fire-data-connect",[JS]:"fire-rtdb-compat",[ZS]:"fire-fn",[eA]:"fire-fn-compat",[tA]:"fire-iid",[nA]:"fire-iid-compat",[rA]:"fire-fcm",[sA]:"fire-fcm-compat",[iA]:"fire-perf",[oA]:"fire-perf-compat",[aA]:"fire-rc",[lA]:"fire-rc-compat",[uA]:"fire-gcs",[cA]:"fire-gcs-compat",[dA]:"fire-fst",[fA]:"fire-fst-compat",[hA]:"fire-vertex","fire-js":"fire-js",[pA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new Map,yA=new Map,bh=new Map;function vy(t,e){try{t.container.addComponent(e)}catch(n){Hn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ps(t){const e=t.name;if(bh.has(e))return Hn.debug(`There were multiple attempts to register component ${e}.`),!1;bh.set(e,t);for(const n of uu.values())vy(n,t);for(const n of yA.values())vy(n,t);return!0}function $u(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function mn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new ua("app","Firebase",vA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=mA;function vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Nh,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=fx()),!n)throw Ar.create("no-options");const i=uu.get(s);if(i){if(lu(n,i.options)&&lu(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const o=new NS(s);for(const u of bh.values())o.addComponent(u);const l=new _A(n,r,o);return uu.set(s,l),l}function Gf(t=Nh){const e=uu.get(t);if(!e&&t===Nh&&fx())return vx();if(!e)throw Ar.create("no-app",{appName:t});return e}function _n(t,e,n){var r;let s=(r=gA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Hn.warn(l.join(" "));return}ps(new jr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xA="firebase-heartbeat-database",wA=1,Ko="firebase-heartbeat-store";let fd=null;function _x(){return fd||(fd=MS(xA,wA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),fd}async function EA(t){try{const n=(await _x()).transaction(Ko),r=await n.objectStore(Ko).get(xx(t));return await n.done,r}catch(e){if(e instanceof Sn)Hn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Hn.warn(n.message)}}}async function _y(t,e){try{const r=(await _x()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,xx(t)),await r.done}catch(n){if(n instanceof Sn)Hn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Hn.warn(r.message)}}}function xx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TA=1024,IA=30*24*60*60*1e3;class NA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=xy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=IA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Hn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=xy(),{heartbeatsToSend:r,unsentEntries:s}=bA(this._heartbeatsCache.heartbeats),i=au(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Hn.warn(n),""}}}function xy(){return new Date().toISOString().substring(0,10)}function bA(t,e=TA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),wy(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),wy(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return fS()?pS().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await EA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return _y(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function wy(t){return au(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AA(t){ps(new jr("platform-logger",e=>new BS(e),"PRIVATE")),ps(new jr("heartbeat",e=>new NA(e),"PRIVATE")),_n(Ih,yy,t),_n(Ih,yy,"esm2017"),_n("fire-js","")}AA("");function Qf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function wx(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RA=wx,Ex=new ua("auth","Firebase",wx());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cu=new Hf("@firebase/auth");function kA(t,...e){cu.logLevel<=se.WARN&&cu.warn(`Auth (${Ns}): ${t}`,...e)}function bl(t,...e){cu.logLevel<=se.ERROR&&cu.error(`Auth (${Ns}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw Yf(t,...e)}function xn(t,...e){return Yf(t,...e)}function Tx(t,e,n){const r=Object.assign(Object.assign({},RA()),{[e]:n});return new ua("auth","Firebase",r).create(e,{appName:t.name})}function Un(t){return Tx(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Yf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ex.create(t,...e)}function G(t,e,...n){if(!t)throw Yf(e,...n)}function Ln(t){const e="INTERNAL ASSERTION FAILED: "+t;throw bl(e),new Error(e)}function Kn(t,e){t||Ln(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function CA(){return Ey()==="http:"||Ey()==="https:"}function Ey(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(CA()||uS()||"connection"in navigator)?navigator.onLine:!0}function jA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.shortDelay=e,this.longDelay=n,Kn(n>e,"Short delay should be less than long delay!"),this.isMobile=oS()||cS()}get(){return PA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xf(t,e){Kn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ln("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ln("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ln("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=new da(3e4,6e4);function zr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Jn(t,e,n,r,s={}){return Nx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ca(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return lS()||(d.referrerPolicy="no-referrer"),Ix.fetch()(bx(t,t.config.apiHost,n,l),d)})}async function Nx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},DA),e);try{const s=new VA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Tx(t,f,d);un(t,f)}}catch(s){if(s instanceof Sn)throw s;un(t,"network-request-failed",{message:String(s)})}}async function ha(t,e,n,r,s={}){const i=await Jn(t,e,n,r,s);return"mfaPendingCredential"in i&&un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function bx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Xf(t.config,s):`${t.config.apiScheme}://${s}`}function LA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class VA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(xn(this.auth,"network-request-failed")),OA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=xn(t,e,r);return s.customData._tokenResponse=n,s}function Ty(t){return t!==void 0&&t.enterprise!==void 0}class MA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return LA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function FA(t,e){return Jn(t,"GET","/v2/recaptchaConfig",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function UA(t,e){return Jn(t,"POST","/v1/accounts:delete",e)}async function Sx(t,e){return Jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function BA(t,e=!1){const n=xe(t),r=await n.getIdToken(e),s=Jf(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eo(pd(s.auth_time)),issuedAtTime:Eo(pd(s.iat)),expirationTime:Eo(pd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function pd(t){return Number(t)*1e3}function Jf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return bl("JWT malformed, contained fewer than 3 sections"),null;try{const s=cx(n);return s?JSON.parse(s):(bl("Failed to decode base64 JWT payload"),null)}catch(s){return bl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Iy(t){const e=Jf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&$A(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function $A({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eo(this.lastLoginAt),this.creationTime=Eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function du(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fi(t,Sx(n,{idToken:r}));G(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Ax(i.providerUserInfo):[],l=WA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Ah(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function qA(t){const e=xe(t);await du(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function WA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Ax(t){return t.map(e=>{var{providerId:n}=e,r=Qf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HA(t,e){const n=await Nx(t,{},async()=>{const r=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=bx(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Ix.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function KA(t,e){return Jn(t,"POST","/v2/accounts:revokeToken",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Iy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=Iy(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await HA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ni;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ni,this.toJSON())}_performRefresh(){return Ln("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Vn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Qf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new zA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ah(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fi(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return BA(this,e)}reload(){return qA(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Vn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await du(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(mn(this.auth.app))return Promise.reject(Un(this.auth));const e=await this.getIdToken();return await fi(this,UA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,w=(o=n.photoURL)!==null&&o!==void 0?o:void 0,A=(l=n.tenantId)!==null&&l!==void 0?l:void 0,R=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,v=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:P,isAnonymous:O,providerData:M,stsTokenManager:N}=n;G(T&&N,e,"internal-error");const E=ni.fromJSON(this.name,N);G(typeof T=="string",e,"internal-error"),sr(p,e.name),sr(g,e.name),G(typeof P=="boolean",e,"internal-error"),G(typeof O=="boolean",e,"internal-error"),sr(x,e.name),sr(w,e.name),sr(A,e.name),sr(R,e.name),sr(y,e.name),sr(v,e.name);const b=new Vn({uid:T,auth:e,email:g,emailVerified:P,displayName:p,isAnonymous:O,photoURL:w,phoneNumber:x,tenantId:A,stsTokenManager:E,createdAt:y,lastLoginAt:v});return M&&Array.isArray(M)&&(b.providerData=M.map(I=>Object.assign({},I))),R&&(b._redirectEventId=R),b}static async _fromIdTokenResponse(e,n,r=!1){const s=new ni;s.updateFromServerResponse(n);const i=new Vn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await du(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Ax(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ni;l.updateFromIdToken(r);const u=new Vn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ah(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny=new Map;function Mn(t){Kn(t instanceof Function,"Expected a class definition");let e=Ny.get(t);return e?(Kn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ny.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Rx.type="NONE";const by=Rx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t,e,n){return`firebase:${t}:${e}:${n}`}class ri{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Sl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Sl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Vn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ri(Mn(by),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Mn(by);const o=Sl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Vn._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ri(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ri(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(kx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ox(e))return"Blackberry";if(Lx(e))return"Webos";if(Cx(e))return"Safari";if((e.includes("chrome/")||Px(e))&&!e.includes("edge/"))return"Chrome";if(Dx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function kx(t=mt()){return/firefox\//i.test(t)}function Cx(t=mt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Px(t=mt()){return/crios\//i.test(t)}function jx(t=mt()){return/iemobile/i.test(t)}function Dx(t=mt()){return/android/i.test(t)}function Ox(t=mt()){return/blackberry/i.test(t)}function Lx(t=mt()){return/webos/i.test(t)}function Zf(t=mt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function GA(t=mt()){var e;return Zf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QA(){return dS()&&document.documentMode===10}function Vx(t=mt()){return Zf(t)||Dx(t)||Lx(t)||Ox(t)||/windows phone/i.test(t)||jx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mx(t,e=[]){let n;switch(t){case"Browser":n=Sy(mt());break;case"Worker":n=`${Sy(mt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ns}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XA(t,e={}){return Jn(t,"GET","/v2/passwordPolicy",zr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA=6;class ZA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:JA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ay(this),this.idTokenSubscription=new Ay(this),this.beforeStateQueue=new YA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ex,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Mn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ri.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sx(this,{idToken:e}),r=await Vn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(mn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await du(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=jA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(mn(this.app))return Promise.reject(Un(this));const n=e?xe(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return mn(this.app)?Promise.reject(Un(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return mn(this.app)?Promise.reject(Un(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Mn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await XA(this),n=new ZA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await KA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Mn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await ri.create(this,[Mn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mx(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&kA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function bs(t){return xe(t)}class Ay{constructor(e){this.auth=e,this.observer=null,this.addObserver=_S(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function t1(t){zu=t}function Fx(t){return zu.loadJS(t)}function n1(){return zu.recaptchaEnterpriseScript}function r1(){return zu.gapiScript}function s1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const i1="recaptcha-enterprise",o1="NO_RECAPTCHA";class a1{constructor(e){this.type=i1,this.auth=bs(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{FA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new MA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;Ty(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(o1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Ty(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=n1();u.length!==0&&(u+=l),Fx(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ry(t,e,n,r=!1){const s=new a1(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Rh(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ry(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ry(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l1(t,e){const n=$u(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(lu(i,e??{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function u1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Mn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function c1(t,e,n){const r=bs(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Ux(e),{host:o,port:l}=d1(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),h1()}function Ux(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function d1(t){const e=Ux(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:ky(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:ky(o)}}}function ky(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function h1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ep{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Ln("not implemented")}_getIdTokenResponse(e){return Ln("not implemented")}_linkToIdToken(e,n){return Ln("not implemented")}_getReauthenticationResolver(e){return Ln("not implemented")}}async function f1(t,e){return Jn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function p1(t,e){return ha(t,"POST","/v1/accounts:signInWithPassword",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function m1(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}async function g1(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends ep{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Go(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Go(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,n,"signInWithPassword",p1);case"emailLink":return m1(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Rh(e,r,"signUpPassword",f1);case"emailLink":return g1(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t,e){return ha(t,"POST","/v1/accounts:signInWithIdp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y1="http://localhost";class ms extends ep{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Qf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}buildRequest(){const e={requestUri:y1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function _1(t){const e=oo(ao(t)).link,n=e?oo(ao(e)).deep_link_id:null,r=oo(ao(t)).deep_link_id;return(r?oo(ao(r)).link:null)||r||n||e||t}class tp{constructor(e){var n,r,s,i,o,l;const u=oo(ao(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=v1((s=u.mode)!==null&&s!==void 0?s:null);G(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=_1(e);try{return new tp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ai{constructor(){this.providerId=Ai.PROVIDER_ID}static credential(e,n){return Go._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=tp.parseLink(n);return G(r,"argument-error"),Go._fromEmailAndCode(e,r.code,r.tenantId)}}Ai.PROVIDER_ID="password";Ai.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ai.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Bx{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends fa{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ur.credential(e.oauthAccessToken)}catch{return null}}}ur.FACEBOOK_SIGN_IN_METHOD="facebook.com";ur.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return cr.credential(n,r)}catch{return null}}}cr.GOOGLE_SIGN_IN_METHOD="google.com";cr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends fa{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return dr.credential(e.oauthAccessToken)}catch{return null}}}dr.GITHUB_SIGN_IN_METHOD="github.com";dr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr extends fa{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:hr.PROVIDER_ID,signInMethod:hr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return hr.credentialFromTaggedObject(e)}static credentialFromError(e){return hr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return hr.credential(n,r)}catch{return null}}}hr.TWITTER_SIGN_IN_METHOD="twitter.com";hr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x1(t,e){return ha(t,"POST","/v1/accounts:signUp",zr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Vn._fromIdTokenResponse(e,r,s),o=Cy(r);return new gs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Cy(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Cy(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu extends Sn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,hu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new hu(e,n,r,s)}}function $x(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?hu._fromErrorAndOperation(t,i,e,r):i})}async function w1(t,e,n=!1){const r=await fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e,n=!1){const{auth:r}=t;if(mn(r.app))return Promise.reject(Un(r));const s="reauthenticate";try{const i=await fi(t,$x(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Jf(i.idToken);G(o,r,"internal-error");const{sub:l}=o;return G(t.uid===l,r,"user-mismatch"),gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zx(t,e,n=!1){if(mn(t.app))return Promise.reject(Un(t));const r="signIn",s=await $x(t,r,e),i=await gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function T1(t,e){return zx(bs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qx(t){const e=bs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Wx(t,e,n){if(mn(t.app))return Promise.reject(Un(t));const r=bs(t),o=await Rh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",x1).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&qx(t),u}),l=await gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Al(t,e,n){return mn(t.app)?Promise.reject(Un(t)):T1(xe(t),Ai.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&qx(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I1(t,e){return Jn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=xe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await fi(r,I1(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function b1(t,e,n,r){return xe(t).onIdTokenChanged(e,n,r)}function S1(t,e,n){return xe(t).beforeAuthStateChanged(e,n)}function A1(t,e,n,r){return xe(t).onAuthStateChanged(e,n,r)}function tn(t){return xe(t).signOut()}async function R1(t){return xe(t).delete()}const fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hx{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(fu,"1"),this.storage.removeItem(fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k1=1e3,C1=10;class Kx extends Hx{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Vx(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);QA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,C1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},k1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kx.type="LOCAL";const P1=Kx;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx extends Hx{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gx.type="SESSION";const Qx=Gx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new qu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await j1(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function np(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=np("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function O1(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function L1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function V1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function M1(){return Yx()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xx="firebaseLocalStorageDb",F1=1,pu="firebaseLocalStorage",Jx="fbase_key";class pa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Wu(t,e){return t.transaction([pu],e?"readwrite":"readonly").objectStore(pu)}function U1(){const t=indexedDB.deleteDatabase(Xx);return new pa(t).toPromise()}function kh(){const t=indexedDB.open(Xx,F1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(pu,{keyPath:Jx})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(pu)?e(r):(r.close(),await U1(),e(await kh()))})})}async function Py(t,e,n){const r=Wu(t,!0).put({[Jx]:e,value:n});return new pa(r).toPromise()}async function B1(t,e){const n=Wu(t,!1).get(e),r=await new pa(n).toPromise();return r===void 0?null:r.value}function jy(t,e){const n=Wu(t,!0).delete(e);return new pa(n).toPromise()}const $1=800,z1=3;class Zx{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>z1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yx()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qu._getInstance(M1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await L1(),!this.activeServiceWorker)return;this.sender=new D1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||V1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kh();return await Py(e,fu,"1"),await jy(e,fu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Py(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>B1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>jy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Wu(s,!1).getAll();return new pa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zx.type="LOCAL";const q1=Zx;new da(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(t,e){return e?Mn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp extends ep{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function H1(t){return zx(t.auth,new rp(t),t.bypassAuthState)}function K1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),E1(n,new rp(t),t.bypassAuthState)}async function G1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),w1(n,new rp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return H1;case"linkViaPopup":case"linkViaRedirect":return G1;case"reauthViaPopup":case"reauthViaRedirect":return K1;default:un(this.auth,"internal-error")}}resolve(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Kn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q1=new da(2e3,1e4);class Qs extends ew{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Kn(this.filter.length===1,"Popup operations only handle one event");const e=np();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(xn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(xn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(xn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Q1.get())};e()}}Qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1="pendingRedirect",Rl=new Map;class X1 extends ew{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rl.get(this.auth._key());if(!e){try{const r=await J1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rl.set(this.auth._key(),e)}return this.bypassAuthState||Rl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function J1(t,e){const n=tR(e),r=eR(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Z1(t,e){Rl.set(t._key(),e)}function eR(t){return Mn(t._redirectPersistence)}function tR(t){return Sl(Y1,t.config.apiKey,t.name)}async function nR(t,e,n=!1){if(mn(t.app))return Promise.reject(Un(t));const r=bs(t),s=W1(r,e),o=await new X1(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=10*60*1e3;class sR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!iR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(xn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=rR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Dy(e))}saveEventToCache(e){this.cachedEventUids.add(Dy(e)),this.lastProcessedEventTime=Date.now()}}function Dy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function iR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function oR(t,e={}){return Jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,lR=/^https?/;async function uR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await oR(t);for(const n of e)try{if(cR(n))return}catch{}un(t,"unauthorized-domain")}function cR(t){const e=Sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!lR.test(n))return!1;if(aR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dR=new da(3e4,6e4);function Oy(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function hR(t){return new Promise((e,n)=>{var r,s,i;function o(){Oy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Oy(),n(xn(t,"network-request-failed"))},timeout:dR.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)o();else{const l=s1("iframefcb");return wn()[l]=()=>{gapi.load?o():n(xn(t,"network-request-failed"))},Fx(`${r1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw kl=null,e})}let kl=null;function fR(t){return kl=kl||hR(t),kl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pR=new da(5e3,15e3),mR="__/auth/iframe",gR="emulator/auth/iframe",yR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},vR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function _R(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Xf(e,gR):`https://${t.config.authDomain}/${mR}`,r={apiKey:e.apiKey,appName:t.name,v:Ns},s=vR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ca(r).slice(1)}`}async function xR(t){const e=await fR(t),n=wn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:_R(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:yR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=xn(t,"network-request-failed"),l=wn().setTimeout(()=>{i(o)},pR.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ER=500,TR=600,IR="_blank",NR="http://localhost";class Ly{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(t,e,n,r=ER,s=TR){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},wR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=mt().toLowerCase();n&&(l=Px(d)?IR:n),kx(d)&&(e=e||NR,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[x,w])=>`${g}${x}=${w},`,"");if(GA(d)&&l!=="_self")return SR(e||"",l),new Ly(null);const p=window.open(e||"",l,f);G(p,t,"popup-blocked");try{p.focus()}catch{}return new Ly(p)}function SR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AR="__/auth/handler",RR="emulator/auth/handler",kR=encodeURIComponent("fac");async function Vy(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ns,eventId:s};if(e instanceof Bx){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",vS(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof fa){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${kR}=${encodeURIComponent(u)}`:"";return`${CR(t)}?${ca(l).slice(1)}${d}`}function CR({config:t}){return t.emulator?Xf(t,RR):`https://${t.authDomain}/${AR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const md="webStorageSupport";class PR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qx,this._completeRedirectFn=nR,this._overrideRedirectResult=Z1}async _openPopup(e,n,r,s){var i;Kn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Vy(e,n,r,Sh(),s);return bR(e,o,np())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Vy(e,n,r,Sh(),s);return O1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Kn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await xR(e),r=new sR(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(md,{type:md},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[md];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=uR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Vx()||Cx()||Zf()}}const jR=PR;var My="@firebase/auth",Fy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function LR(t){ps(new jr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mx(t)},d=new e1(r,s,i,u);return u1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ps(new jr("auth-internal",e=>{const n=bs(e.getProvider("auth").getImmediate());return(r=>new DR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),_n(My,Fy,OR(t)),_n(My,Fy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VR=5*60,MR=px("authIdTokenMaxAge")||VR;let Uy=null;const FR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MR)return;const s=n==null?void 0:n.token;Uy!==s&&(Uy=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UR(t=Gf()){const e=$u(t,"auth");if(e.isInitialized())return e.getImmediate();const n=l1(t,{popupRedirectResolver:jR,persistence:[q1,P1,Qx]}),r=px("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=FR(i.toString());S1(n,o,()=>o(n.currentUser)),b1(n,l=>o(l))}}const s=dx("auth");return s&&c1(n,`http://${s}`),n}function BR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}t1({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=xn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",BR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});LR("Browser");var $R="firebase",zR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_n($R,zR,"app");var By=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,nw;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,E){function b(){}b.prototype=E.prototype,N.D=E.prototype,N.prototype=new b,N.prototype.constructor=N,N.C=function(I,k,C){for(var S=Array(arguments.length-2),qe=2;qe<arguments.length;qe++)S[qe-2]=arguments[qe];return E.prototype[k].apply(I,S)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(N,E,b){b||(b=0);var I=Array(16);if(typeof E=="string")for(var k=0;16>k;++k)I[k]=E.charCodeAt(b++)|E.charCodeAt(b++)<<8|E.charCodeAt(b++)<<16|E.charCodeAt(b++)<<24;else for(k=0;16>k;++k)I[k]=E[b++]|E[b++]<<8|E[b++]<<16|E[b++]<<24;E=N.g[0],b=N.g[1],k=N.g[2];var C=N.g[3],S=E+(C^b&(k^C))+I[0]+3614090360&4294967295;E=b+(S<<7&4294967295|S>>>25),S=C+(k^E&(b^k))+I[1]+3905402710&4294967295,C=E+(S<<12&4294967295|S>>>20),S=k+(b^C&(E^b))+I[2]+606105819&4294967295,k=C+(S<<17&4294967295|S>>>15),S=b+(E^k&(C^E))+I[3]+3250441966&4294967295,b=k+(S<<22&4294967295|S>>>10),S=E+(C^b&(k^C))+I[4]+4118548399&4294967295,E=b+(S<<7&4294967295|S>>>25),S=C+(k^E&(b^k))+I[5]+1200080426&4294967295,C=E+(S<<12&4294967295|S>>>20),S=k+(b^C&(E^b))+I[6]+2821735955&4294967295,k=C+(S<<17&4294967295|S>>>15),S=b+(E^k&(C^E))+I[7]+4249261313&4294967295,b=k+(S<<22&4294967295|S>>>10),S=E+(C^b&(k^C))+I[8]+1770035416&4294967295,E=b+(S<<7&4294967295|S>>>25),S=C+(k^E&(b^k))+I[9]+2336552879&4294967295,C=E+(S<<12&4294967295|S>>>20),S=k+(b^C&(E^b))+I[10]+4294925233&4294967295,k=C+(S<<17&4294967295|S>>>15),S=b+(E^k&(C^E))+I[11]+2304563134&4294967295,b=k+(S<<22&4294967295|S>>>10),S=E+(C^b&(k^C))+I[12]+1804603682&4294967295,E=b+(S<<7&4294967295|S>>>25),S=C+(k^E&(b^k))+I[13]+4254626195&4294967295,C=E+(S<<12&4294967295|S>>>20),S=k+(b^C&(E^b))+I[14]+2792965006&4294967295,k=C+(S<<17&4294967295|S>>>15),S=b+(E^k&(C^E))+I[15]+1236535329&4294967295,b=k+(S<<22&4294967295|S>>>10),S=E+(k^C&(b^k))+I[1]+4129170786&4294967295,E=b+(S<<5&4294967295|S>>>27),S=C+(b^k&(E^b))+I[6]+3225465664&4294967295,C=E+(S<<9&4294967295|S>>>23),S=k+(E^b&(C^E))+I[11]+643717713&4294967295,k=C+(S<<14&4294967295|S>>>18),S=b+(C^E&(k^C))+I[0]+3921069994&4294967295,b=k+(S<<20&4294967295|S>>>12),S=E+(k^C&(b^k))+I[5]+3593408605&4294967295,E=b+(S<<5&4294967295|S>>>27),S=C+(b^k&(E^b))+I[10]+38016083&4294967295,C=E+(S<<9&4294967295|S>>>23),S=k+(E^b&(C^E))+I[15]+3634488961&4294967295,k=C+(S<<14&4294967295|S>>>18),S=b+(C^E&(k^C))+I[4]+3889429448&4294967295,b=k+(S<<20&4294967295|S>>>12),S=E+(k^C&(b^k))+I[9]+568446438&4294967295,E=b+(S<<5&4294967295|S>>>27),S=C+(b^k&(E^b))+I[14]+3275163606&4294967295,C=E+(S<<9&4294967295|S>>>23),S=k+(E^b&(C^E))+I[3]+4107603335&4294967295,k=C+(S<<14&4294967295|S>>>18),S=b+(C^E&(k^C))+I[8]+1163531501&4294967295,b=k+(S<<20&4294967295|S>>>12),S=E+(k^C&(b^k))+I[13]+2850285829&4294967295,E=b+(S<<5&4294967295|S>>>27),S=C+(b^k&(E^b))+I[2]+4243563512&4294967295,C=E+(S<<9&4294967295|S>>>23),S=k+(E^b&(C^E))+I[7]+1735328473&4294967295,k=C+(S<<14&4294967295|S>>>18),S=b+(C^E&(k^C))+I[12]+2368359562&4294967295,b=k+(S<<20&4294967295|S>>>12),S=E+(b^k^C)+I[5]+4294588738&4294967295,E=b+(S<<4&4294967295|S>>>28),S=C+(E^b^k)+I[8]+2272392833&4294967295,C=E+(S<<11&4294967295|S>>>21),S=k+(C^E^b)+I[11]+1839030562&4294967295,k=C+(S<<16&4294967295|S>>>16),S=b+(k^C^E)+I[14]+4259657740&4294967295,b=k+(S<<23&4294967295|S>>>9),S=E+(b^k^C)+I[1]+2763975236&4294967295,E=b+(S<<4&4294967295|S>>>28),S=C+(E^b^k)+I[4]+1272893353&4294967295,C=E+(S<<11&4294967295|S>>>21),S=k+(C^E^b)+I[7]+4139469664&4294967295,k=C+(S<<16&4294967295|S>>>16),S=b+(k^C^E)+I[10]+3200236656&4294967295,b=k+(S<<23&4294967295|S>>>9),S=E+(b^k^C)+I[13]+681279174&4294967295,E=b+(S<<4&4294967295|S>>>28),S=C+(E^b^k)+I[0]+3936430074&4294967295,C=E+(S<<11&4294967295|S>>>21),S=k+(C^E^b)+I[3]+3572445317&4294967295,k=C+(S<<16&4294967295|S>>>16),S=b+(k^C^E)+I[6]+76029189&4294967295,b=k+(S<<23&4294967295|S>>>9),S=E+(b^k^C)+I[9]+3654602809&4294967295,E=b+(S<<4&4294967295|S>>>28),S=C+(E^b^k)+I[12]+3873151461&4294967295,C=E+(S<<11&4294967295|S>>>21),S=k+(C^E^b)+I[15]+530742520&4294967295,k=C+(S<<16&4294967295|S>>>16),S=b+(k^C^E)+I[2]+3299628645&4294967295,b=k+(S<<23&4294967295|S>>>9),S=E+(k^(b|~C))+I[0]+4096336452&4294967295,E=b+(S<<6&4294967295|S>>>26),S=C+(b^(E|~k))+I[7]+1126891415&4294967295,C=E+(S<<10&4294967295|S>>>22),S=k+(E^(C|~b))+I[14]+2878612391&4294967295,k=C+(S<<15&4294967295|S>>>17),S=b+(C^(k|~E))+I[5]+4237533241&4294967295,b=k+(S<<21&4294967295|S>>>11),S=E+(k^(b|~C))+I[12]+1700485571&4294967295,E=b+(S<<6&4294967295|S>>>26),S=C+(b^(E|~k))+I[3]+2399980690&4294967295,C=E+(S<<10&4294967295|S>>>22),S=k+(E^(C|~b))+I[10]+4293915773&4294967295,k=C+(S<<15&4294967295|S>>>17),S=b+(C^(k|~E))+I[1]+2240044497&4294967295,b=k+(S<<21&4294967295|S>>>11),S=E+(k^(b|~C))+I[8]+1873313359&4294967295,E=b+(S<<6&4294967295|S>>>26),S=C+(b^(E|~k))+I[15]+4264355552&4294967295,C=E+(S<<10&4294967295|S>>>22),S=k+(E^(C|~b))+I[6]+2734768916&4294967295,k=C+(S<<15&4294967295|S>>>17),S=b+(C^(k|~E))+I[13]+1309151649&4294967295,b=k+(S<<21&4294967295|S>>>11),S=E+(k^(b|~C))+I[4]+4149444226&4294967295,E=b+(S<<6&4294967295|S>>>26),S=C+(b^(E|~k))+I[11]+3174756917&4294967295,C=E+(S<<10&4294967295|S>>>22),S=k+(E^(C|~b))+I[2]+718787259&4294967295,k=C+(S<<15&4294967295|S>>>17),S=b+(C^(k|~E))+I[9]+3951481745&4294967295,N.g[0]=N.g[0]+E&4294967295,N.g[1]=N.g[1]+(k+(S<<21&4294967295|S>>>11))&4294967295,N.g[2]=N.g[2]+k&4294967295,N.g[3]=N.g[3]+C&4294967295}r.prototype.u=function(N,E){E===void 0&&(E=N.length);for(var b=E-this.blockSize,I=this.B,k=this.h,C=0;C<E;){if(k==0)for(;C<=b;)s(this,N,C),C+=this.blockSize;if(typeof N=="string"){for(;C<E;)if(I[k++]=N.charCodeAt(C++),k==this.blockSize){s(this,I),k=0;break}}else for(;C<E;)if(I[k++]=N[C++],k==this.blockSize){s(this,I),k=0;break}}this.h=k,this.o+=E},r.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var E=1;E<N.length-8;++E)N[E]=0;var b=8*this.o;for(E=N.length-8;E<N.length;++E)N[E]=b&255,b/=256;for(this.u(N),N=Array(16),E=b=0;4>E;++E)for(var I=0;32>I;I+=8)N[b++]=this.g[E]>>>I&255;return N};function i(N,E){var b=l;return Object.prototype.hasOwnProperty.call(b,N)?b[N]:b[N]=E(N)}function o(N,E){this.h=E;for(var b=[],I=!0,k=N.length-1;0<=k;k--){var C=N[k]|0;I&&C==E||(b[k]=C,I=!1)}this.g=b}var l={};function u(N){return-128<=N&&128>N?i(N,function(E){return new o([E|0],0>E?-1:0)}):new o([N|0],0>N?-1:0)}function d(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return R(d(-N));for(var E=[],b=1,I=0;N>=b;I++)E[I]=N/b|0,b*=4294967296;return new o(E,0)}function f(N,E){if(N.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(N.charAt(0)=="-")return R(f(N.substring(1),E));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var b=d(Math.pow(E,8)),I=p,k=0;k<N.length;k+=8){var C=Math.min(8,N.length-k),S=parseInt(N.substring(k,k+C),E);8>C?(C=d(Math.pow(E,C)),I=I.j(C).add(d(S))):(I=I.j(b),I=I.add(d(S)))}return I}var p=u(0),g=u(1),x=u(16777216);t=o.prototype,t.m=function(){if(A(this))return-R(this).m();for(var N=0,E=1,b=0;b<this.g.length;b++){var I=this.i(b);N+=(0<=I?I:4294967296+I)*E,E*=4294967296}return N},t.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(w(this))return"0";if(A(this))return"-"+R(this).toString(N);for(var E=d(Math.pow(N,6)),b=this,I="";;){var k=P(b,E).g;b=y(b,k.j(E));var C=((0<b.g.length?b.g[0]:b.h)>>>0).toString(N);if(b=k,w(b))return C+I;for(;6>C.length;)C="0"+C;I=C+I}},t.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function w(N){if(N.h!=0)return!1;for(var E=0;E<N.g.length;E++)if(N.g[E]!=0)return!1;return!0}function A(N){return N.h==-1}t.l=function(N){return N=y(this,N),A(N)?-1:w(N)?0:1};function R(N){for(var E=N.g.length,b=[],I=0;I<E;I++)b[I]=~N.g[I];return new o(b,~N.h).add(g)}t.abs=function(){return A(this)?R(this):this},t.add=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],I=0,k=0;k<=E;k++){var C=I+(this.i(k)&65535)+(N.i(k)&65535),S=(C>>>16)+(this.i(k)>>>16)+(N.i(k)>>>16);I=S>>>16,C&=65535,S&=65535,b[k]=S<<16|C}return new o(b,b[b.length-1]&-2147483648?-1:0)};function y(N,E){return N.add(R(E))}t.j=function(N){if(w(this)||w(N))return p;if(A(this))return A(N)?R(this).j(R(N)):R(R(this).j(N));if(A(N))return R(this.j(R(N)));if(0>this.l(x)&&0>N.l(x))return d(this.m()*N.m());for(var E=this.g.length+N.g.length,b=[],I=0;I<2*E;I++)b[I]=0;for(I=0;I<this.g.length;I++)for(var k=0;k<N.g.length;k++){var C=this.i(I)>>>16,S=this.i(I)&65535,qe=N.i(k)>>>16,gt=N.i(k)&65535;b[2*I+2*k]+=S*gt,v(b,2*I+2*k),b[2*I+2*k+1]+=C*gt,v(b,2*I+2*k+1),b[2*I+2*k+1]+=S*qe,v(b,2*I+2*k+1),b[2*I+2*k+2]+=C*qe,v(b,2*I+2*k+2)}for(I=0;I<E;I++)b[I]=b[2*I+1]<<16|b[2*I];for(I=E;I<2*E;I++)b[I]=0;return new o(b,0)};function v(N,E){for(;(N[E]&65535)!=N[E];)N[E+1]+=N[E]>>>16,N[E]&=65535,E++}function T(N,E){this.g=N,this.h=E}function P(N,E){if(w(E))throw Error("division by zero");if(w(N))return new T(p,p);if(A(N))return E=P(R(N),E),new T(R(E.g),R(E.h));if(A(E))return E=P(N,R(E)),new T(R(E.g),E.h);if(30<N.g.length){if(A(N)||A(E))throw Error("slowDivide_ only works with positive integers.");for(var b=g,I=E;0>=I.l(N);)b=O(b),I=O(I);var k=M(b,1),C=M(I,1);for(I=M(I,2),b=M(b,2);!w(I);){var S=C.add(I);0>=S.l(N)&&(k=k.add(b),C=S),I=M(I,1),b=M(b,1)}return E=y(N,k.j(E)),new T(k,E)}for(k=p;0<=N.l(E);){for(b=Math.max(1,Math.floor(N.m()/E.m())),I=Math.ceil(Math.log(b)/Math.LN2),I=48>=I?1:Math.pow(2,I-48),C=d(b),S=C.j(E);A(S)||0<S.l(N);)b-=I,C=d(b),S=C.j(E);w(C)&&(C=g),k=k.add(C),N=y(N,S)}return new T(k,N)}t.A=function(N){return P(this,N).h},t.and=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],I=0;I<E;I++)b[I]=this.i(I)&N.i(I);return new o(b,this.h&N.h)},t.or=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],I=0;I<E;I++)b[I]=this.i(I)|N.i(I);return new o(b,this.h|N.h)},t.xor=function(N){for(var E=Math.max(this.g.length,N.g.length),b=[],I=0;I<E;I++)b[I]=this.i(I)^N.i(I);return new o(b,this.h^N.h)};function O(N){for(var E=N.g.length+1,b=[],I=0;I<E;I++)b[I]=N.i(I)<<1|N.i(I-1)>>>31;return new o(b,N.h)}function M(N,E){var b=E>>5;E%=32;for(var I=N.g.length-b,k=[],C=0;C<I;C++)k[C]=0<E?N.i(C+b)>>>E|N.i(C+b+1)<<32-E:N.i(C+b);return new o(k,N.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,nw=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,os=o}).apply(typeof By<"u"?By:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var rw,lo,sw,Cl,Ch,iw,ow,aw;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var D=a[_];if(!(D in m))break e;m=m[D]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,_=!1,D={next:function(){if(!_&&m<a.length){var L=m++;return{value:h(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,_),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function x(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function w(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,D,L){for(var B=Array(arguments.length-2),he=2;he<arguments.length;he++)B[he-2]=arguments[he];return h.prototype[D].apply(_,B)}}function A(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function R(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(u(_)){const D=a.length||0,L=_.length||0;a.length=D+L;for(let B=0;B<L;B++)a[D+B]=_[B]}else a.push(_)}}class y{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function v(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function P(a){return P[" "](a),a}P[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function N(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function E(a){const h={};for(const m in a)h[m]=a[m];return h}const b="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function I(a,h){let m,_;for(let D=1;D<arguments.length;D++){_=arguments[D];for(m in _)a[m]=_[m];for(let L=0;L<b.length;L++)m=b[L],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function C(a){l.setTimeout(()=>{throw a},0)}function S(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class qe{constructor(){this.h=this.g=null}add(h,m){const _=gt.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var gt=new y(()=>new qt,a=>a.reset());class qt{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let yt,$=!1,Q=new qe,Z=()=>{const a=l.Promise.resolve(void 0);yt=()=>{a.then(pe)}};var pe=()=>{for(var a;a=S();){try{a.h.call(a.g)}catch(m){C(m)}var h=gt;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Se(a,h){if(te.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{P(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:rt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Se.aa.h.call(this)}}w(Se,te);var rt={2:"touch",3:"pen",4:"mouse"};Se.prototype.h=function(){Se.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ge="closure_listenable_"+(1e6*Math.random()|0),Hr=0;function An(a,h,m,_,D){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=D,this.key=++Hr,this.da=this.fa=!1}function Ta(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ia(a){this.src=a,this.g={},this.h=0}Ia.prototype.add=function(a,h,m,_,D){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var B=pc(a,h,_,D);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new An(h,this.src,L,!!_,D),h.fa=m,a.push(h)),h};function fc(a,h){var m=h.type;if(m in a.g){var _=a.g[m],D=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=D)&&Array.prototype.splice.call(_,D,1),L&&(Ta(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function pc(a,h,m,_){for(var D=0;D<a.length;++D){var L=a[D];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==_)return D}return-1}var mc="closure_lm_"+(1e6*Math.random()|0),gc={};function Yp(a,h,m,_,D){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Yp(a,h[L],m,_,D);return null}return m=Zp(m),a&&a[Ge]?a.K(h,m,d(_)?!!_.capture:!1,D):KE(a,h,m,!1,_,D)}function KE(a,h,m,_,D,L){if(!h)throw Error("Invalid event type");var B=d(D)?!!D.capture:!!D,he=vc(a);if(he||(a[mc]=he=new Ia(a)),m=he.add(h,m,_,B,L),m.proxy)return m;if(_=GE(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)de||(D=B),D===void 0&&(D=!1),a.addEventListener(h.toString(),_,D);else if(a.attachEvent)a.attachEvent(Jp(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function GE(){function a(m){return h.call(a.src,a.listener,m)}const h=QE;return a}function Xp(a,h,m,_,D){if(Array.isArray(h))for(var L=0;L<h.length;L++)Xp(a,h[L],m,_,D);else _=d(_)?!!_.capture:!!_,m=Zp(m),a&&a[Ge]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],m=pc(L,m,_,D),-1<m&&(Ta(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=vc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=pc(h,m,_,D)),(m=-1<a?h[a]:null)&&yc(m))}function yc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ge])fc(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(Jp(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=vc(h))?(fc(m,a),m.h==0&&(m.src=null,h[mc]=null)):Ta(a)}}}function Jp(a){return a in gc?gc[a]:gc[a]="on"+a}function QE(a,h){if(a.da)a=!0;else{h=new Se(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&yc(a),a=m.call(_,h)}return a}function vc(a){return a=a[mc],a instanceof Ia?a:null}var _c="__closure_events_fn_"+(1e9*Math.random()>>>0);function Zp(a){return typeof a=="function"?a:(a[_c]||(a[_c]=function(h){return a.handleEvent(h)}),a[_c])}function st(){H.call(this),this.i=new Ia(this),this.M=this,this.F=null}w(st,H),st.prototype[Ge]=!0,st.prototype.removeEventListener=function(a,h,m,_){Xp(this,a,h,m,_)};function vt(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new te(h,a);else if(h instanceof te)h.target=h.target||a;else{var D=h;h=new te(_,a),I(h,D)}if(D=!0,m)for(var L=m.length-1;0<=L;L--){var B=h.g=m[L];D=Na(B,_,!0,h)&&D}if(B=h.g=a,D=Na(B,_,!0,h)&&D,D=Na(B,_,!1,h)&&D,m)for(L=0;L<m.length;L++)B=h.g=m[L],D=Na(B,_,!1,h)&&D}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)Ta(m[_]);delete a.g[h],a.h--}}this.F=null},st.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},st.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function Na(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,L=0;L<h.length;++L){var B=h[L];if(B&&!B.da&&B.capture==m){var he=B.listener,Qe=B.ha||B.src;B.fa&&fc(a.i,B),D=he.call(Qe,_)!==!1&&D}}return D&&!_.defaultPrevented}function em(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function tm(a){a.g=em(()=>{a.g=null,a.i&&(a.i=!1,tm(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class YE extends H{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:tm(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(a){H.call(this),this.h=a,this.g={}}w(ji,H);var nm=[];function rm(a){M(a.g,function(h,m){this.g.hasOwnProperty(m)&&yc(h)},a),a.g={}}ji.prototype.N=function(){ji.aa.N.call(this),rm(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var xc=l.JSON.stringify,XE=l.JSON.parse,JE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function wc(){}wc.prototype.h=null;function sm(a){return a.h||(a.h=a.i())}function im(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ec(){te.call(this,"d")}w(Ec,te);function Tc(){te.call(this,"c")}w(Tc,te);var Kr={},om=null;function ba(){return om=om||new st}Kr.La="serverreachability";function am(a){te.call(this,Kr.La,a)}w(am,te);function Oi(a){const h=ba();vt(h,new am(h))}Kr.STAT_EVENT="statevent";function lm(a,h){te.call(this,Kr.STAT_EVENT,a),this.stat=h}w(lm,te);function _t(a){const h=ba();vt(h,new lm(h,a))}Kr.Ma="timingevent";function um(a,h){te.call(this,Kr.Ma,a),this.size=h}w(um,te);function Li(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Vi(){this.g=!0}Vi.prototype.xa=function(){this.g=!1};function ZE(a,h,m,_,D,L){a.info(function(){if(a.g)if(L)for(var B="",he=L.split("&"),Qe=0;Qe<he.length;Qe++){var ae=he[Qe].split("=");if(1<ae.length){var it=ae[0];ae=ae[1];var ot=it.split("_");B=2<=ot.length&&ot[1]=="type"?B+(it+"="+ae+"&"):B+(it+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+_+") [attempt "+D+"]: "+h+`
`+m+`
`+B})}function eT(a,h,m,_,D,L,B){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+D+"]: "+h+`
`+m+`
`+L+" "+B})}function Rs(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+nT(a,m)+(_?" "+_:"")})}function tT(a,h){a.info(function(){return"TIMEOUT: "+h})}Vi.prototype.info=function(){};function nT(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var D=_[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return xc(m)}catch{return h}}var Sa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},cm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ic;function Aa(){}w(Aa,wc),Aa.prototype.g=function(){return new XMLHttpRequest},Aa.prototype.i=function(){return{}},Ic=new Aa;function er(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new dm}function dm(){this.i=null,this.g="",this.h=!1}var hm={},Nc={};function bc(a,h,m){a.L=1,a.v=Pa(Rn(h)),a.m=m,a.P=!0,fm(a,null)}function fm(a,h){a.F=Date.now(),Ra(a),a.A=Rn(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Sm(m.i,"t",_),a.C=0,m=a.j.J,a.h=new dm,a.g=Wm(a.j,m?h:null,!a.m),0<a.O&&(a.M=new YE(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(nm[0]=D.toString()),D=nm);for(var L=0;L<D.length;L++){var B=Yp(m,D[L],_||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?E(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Oi(),ZE(a.i,a.u,a.A,a.l,a.R,a.m)}er.prototype.ca=function(a){a=a.target;const h=this.M;h&&kn(a)==3?h.j():this.Y(a)},er.prototype.Y=function(a){try{if(a==this.g)e:{const ot=kn(this.g);var h=this.g.Ba();const Ps=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Dm(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Ps?Oi(3):Oi(2)),Sc(this);var m=this.g.Z();this.X=m;t:if(pm(this)){var _=Dm(this.g);a="";var D=_.length,L=kn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Mi(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(L&&h==D-1)});_.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,eT(this.i,this.u,this.A,this.l,this.R,ot,m),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Qe=this.g;if((he=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(he)){var ae=he;break t}}ae=null}if(m=ae)Rs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ac(this,m);else{this.o=!1,this.s=3,_t(12),Gr(this),Mi(this);break e}}if(this.P){m=!0;let Jt;for(;!this.J&&this.C<B.length;)if(Jt=rT(this,B),Jt==Nc){ot==4&&(this.s=4,_t(14),m=!1),Rs(this.i,this.l,null,"[Incomplete Response]");break}else if(Jt==hm){this.s=4,_t(15),Rs(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else Rs(this.i,this.l,Jt,null),Ac(this,Jt);if(pm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||B.length!=0||this.h.h||(this.s=1,_t(16),m=!1),this.o=this.o&&m,!m)Rs(this.i,this.l,B,"[Invalid Chunked Response]"),Gr(this),Mi(this);else if(0<B.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),Dc(it),it.M=!0,_t(11))}}else Rs(this.i,this.l,B,null),Ac(this,B);ot==4&&Gr(this),this.o&&!this.J&&(ot==4?Bm(this.j,this):(this.o=!1,Ra(this)))}else xT(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Gr(this),Mi(this)}}}catch{}finally{}};function pm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function rT(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?Nc:(m=Number(h.substring(m,_)),isNaN(m)?hm:(_+=1,_+m>h.length?Nc:(h=h.slice(_,_+m),a.C=_+m,h)))}er.prototype.cancel=function(){this.J=!0,Gr(this)};function Ra(a){a.S=Date.now()+a.I,mm(a,a.I)}function mm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Li(g(a.ba,a),h)}function Sc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}er.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(tT(this.i,this.A),this.L!=2&&(Oi(),_t(17)),Gr(this),this.s=2,Mi(this)):mm(this,this.S-a)};function Mi(a){a.j.G==0||a.J||Bm(a.j,a)}function Gr(a){Sc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,rm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ac(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||Rc(m.h,a))){if(!a.K&&Rc(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var D=_;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Ma(m),La(m);else break e;jc(m),_t(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=Li(g(m.Za,m),6e3));if(1>=vm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Yr(m,11)}else if((a.K||m.g==a)&&Ma(m),!v(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let ae=D[h];if(m.T=ae[0],ae=ae[1],m.G==2)if(ae[0]=="c"){m.K=ae[1],m.ia=ae[2];const it=ae[3];it!=null&&(m.la=it,m.j.info("VER="+m.la));const ot=ae[4];ot!=null&&(m.Aa=ot,m.j.info("SVER="+m.Aa));const Ps=ae[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(_=1.5*Ps,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const Jt=a.g;if(Jt){const Ua=Jt.g?Jt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var L=_.h;L.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(kc(L,L.h),L.h=null))}if(_.D){const Oc=Jt.g?Jt.g.getResponseHeader("X-HTTP-Session-Id"):null;Oc&&(_.ya=Oc,me(_.I,_.D,Oc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var B=a;if(_.qa=qm(_,_.J?_.ia:null,_.W),B.K){_m(_.h,B);var he=B,Qe=_.L;Qe&&(he.I=Qe),he.B&&(Sc(he),Ra(he)),_.g=B}else Fm(_);0<m.i.length&&Va(m)}else ae[0]!="stop"&&ae[0]!="close"||Yr(m,7);else m.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Yr(m,7):Pc(m):ae[0]!="noop"&&m.l&&m.l.ta(ae),m.v=0)}}Oi(4)}catch{}}var sT=class{constructor(a,h){this.g=a,this.map=h}};function gm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ym(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function vm(a){return a.h?1:a.g?a.g.size:0}function Rc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function kc(a,h){a.g?a.g.add(h):a.h=h}function _m(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}gm.prototype.cancel=function(){if(this.i=xm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function xm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return A(a.i)}function iT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function oT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function wm(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=oT(a),_=iT(a),D=_.length,L=0;L<D;L++)h.call(void 0,_[L],m&&m[L],a)}var Em=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function aT(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),D=null;if(0<=_){var L=a[m].substring(0,_);D=a[m].substring(_+1)}else L=a[m];h(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Qr){this.h=a.h,ka(this,a.j),this.o=a.o,this.g=a.g,Ca(this,a.s),this.l=a.l;var h=a.i,m=new Bi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Tm(this,m),this.m=a.m}else a&&(h=String(a).match(Em))?(this.h=!1,ka(this,h[1]||"",!0),this.o=Fi(h[2]||""),this.g=Fi(h[3]||"",!0),Ca(this,h[4]),this.l=Fi(h[5]||"",!0),Tm(this,h[6]||"",!0),this.m=Fi(h[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}Qr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ui(h,Im,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ui(h,Im,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Ui(m,m.charAt(0)=="/"?cT:uT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Ui(m,hT)),a.join("")};function Rn(a){return new Qr(a)}function ka(a,h,m){a.j=m?Fi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function Ca(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Tm(a,h,m){h instanceof Bi?(a.i=h,fT(a.i,a.h)):(m||(h=Ui(h,dT)),a.i=new Bi(h,a.h))}function me(a,h,m){a.i.set(h,m)}function Pa(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Fi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,lT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function lT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Im=/[#\/\?@]/g,uT=/[#\?:]/g,cT=/[#\?]/g,dT=/[#\?@]/g,hT=/#/g;function Bi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function tr(a){a.g||(a.g=new Map,a.h=0,a.i&&aT(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Bi.prototype,t.add=function(a,h){tr(this),this.i=null,a=ks(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Nm(a,h){tr(a),h=ks(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function bm(a,h){return tr(a),h=ks(a,h),a.g.has(h)}t.forEach=function(a,h){tr(this),this.g.forEach(function(m,_){m.forEach(function(D){a.call(h,D,_,this)},this)},this)},t.na=function(){tr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const D=a[_];for(let L=0;L<D.length;L++)m.push(h[_])}return m},t.V=function(a){tr(this);let h=[];if(typeof a=="string")bm(this,a)&&(h=h.concat(this.g.get(ks(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return tr(this),this.i=null,a=ks(this,a),bm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Sm(a,h,m){Nm(a,h),0<m.length&&(a.i=null,a.g.set(ks(a,h),A(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const L=encodeURIComponent(String(_)),B=this.V(_);for(_=0;_<B.length;_++){var D=L;B[_]!==""&&(D+="="+encodeURIComponent(String(B[_]))),a.push(D)}}return this.i=a.join("&")};function ks(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function fT(a,h){h&&!a.j&&(tr(a),a.i=null,a.g.forEach(function(m,_){var D=_.toLowerCase();_!=D&&(Nm(this,_),Sm(this,D,m))},a)),a.j=h}function pT(a,h){const m=new Vi;if(l.Image){const _=new Image;_.onload=x(nr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=x(nr,m,"TestLoadImage: error",!1,h,_),_.onabort=x(nr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=x(nr,m,"TestLoadImage: timeout",!1,h,_),l.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function mT(a,h){const m=new Vi,_=new AbortController,D=setTimeout(()=>{_.abort(),nr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(D),L.ok?nr(m,"TestPingServer: ok",!0,h):nr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),nr(m,"TestPingServer: error",!1,h)})}function nr(a,h,m,_,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),_(m)}catch{}}function gT(){this.g=new JE}function yT(a,h,m){const _=m||"";try{wm(a,function(D,L){let B=D;d(D)&&(B=xc(D)),h.push(_+L+"="+encodeURIComponent(B))})}catch(D){throw h.push(_+"type="+encodeURIComponent("_badmap")),D}}function ja(a){this.l=a.Ub||null,this.j=a.eb||!1}w(ja,wc),ja.prototype.g=function(){return new Da(this.l,this.j)},ja.prototype.i=function(a){return function(){return a}}({});function Da(a,h){st.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}w(Da,st),t=Da.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Am(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Am(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?$i(this):zi(this),this.readyState==3&&Am(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,$i(this))},t.Qa=function(a){this.g&&(this.response=a,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(a){a.readyState=4,a.l=null,a.j=null,a.v=null,zi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Rm(a){let h="";return M(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function Cc(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Rm(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):me(a,h,m))}function Ae(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}w(Ae,st);var vT=/^https?$/i,_T=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ic.g(),this.v=this.o?sm(this.o):sm(Ic),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){km(this,L);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var D in _)m.set(D,_[D]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(_T,h,void 0))||_||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of m)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{jm(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){km(this,L)}};function km(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Cm(a),Oa(a)}function Cm(a){a.A||(a.A=!0,vt(a,"complete"),vt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,vt(this,"complete"),vt(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Pm(this):this.bb())},t.bb=function(){Pm(this)};function Pm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||kn(a)!=4||a.Z()!=2)){if(a.u&&kn(a)==4)em(a.Ea,0,a);else if(vt(a,"readystatechange"),kn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=B===0){var D=String(a.D).match(Em)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),_=!vT.test(D?D.toLowerCase():"")}m=_}if(m)vt(a,"complete"),vt(a,"success");else{a.m=6;try{var L=2<kn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Cm(a)}}finally{Oa(a)}}}}function Oa(a,h){if(a.g){jm(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||vt(a,"ready");try{m.onreadystatechange=_}catch{}}}function jm(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function kn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<kn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),XE(h)}};function Dm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function xT(a){const h={};a=(a.g&&2<=kn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(v(a[_]))continue;var m=k(a[_]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=h[D]||[];h[D]=L,L.push(m)}N(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Om(a){this.Aa=0,this.i=[],this.j=new Vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qi("baseRetryDelayMs",5e3,a),this.cb=qi("retryDelaySeedMs",1e4,a),this.Wa=qi("forwardChannelMaxRetries",2,a),this.wa=qi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new gm(a&&a.concurrentRequestLimit),this.Da=new gT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Om.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){_t(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=qm(this,null,this.W),Va(this)};function Pc(a){if(Lm(a),a.G==3){var h=a.U++,m=Rn(a.I);if(me(m,"SID",a.K),me(m,"RID",h),me(m,"TYPE","terminate"),Wi(a,m),h=new er(a,a.j,h),h.L=2,h.v=Pa(Rn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=Wm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),Ra(h)}zm(a)}function La(a){a.g&&(Dc(a),a.g.cancel(),a.g=null)}function Lm(a){La(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ma(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Va(a){if(!ym(a.h)&&!a.s){a.s=!0;var h=a.Ga;yt||Z(),$||(yt(),$=!0),Q.add(h,a),a.B=0}}function wT(a,h){return vm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Li(g(a.Ga,a,h),$m(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new er(this,this.j,a);let L=this.o;if(this.S&&(L?(L=E(L),I(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Mm(this,D,h),m=Rn(this.I),me(m,"RID",a),me(m,"CVER",22),this.D&&me(m,"X-HTTP-Session-Id",this.D),Wi(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(Rm(L)))+"&"+h:this.m&&Cc(m,this.m,L)),kc(this.h,D),this.Ua&&me(m,"TYPE","init"),this.P?(me(m,"$req",h),me(m,"SID","null"),D.T=!0,bc(D,m,null)):bc(D,m,h),this.G=2}}else this.G==3&&(a?Vm(this,a):this.i.length==0||ym(this.h)||Vm(this))};function Vm(a,h){var m;h?m=h.l:m=a.U++;const _=Rn(a.I);me(_,"SID",a.K),me(_,"RID",m),me(_,"AID",a.T),Wi(a,_),a.m&&a.o&&Cc(_,a.m,a.o),m=new er(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Mm(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),kc(a.h,m),bc(m,_,h)}function Wi(a,h){a.H&&M(a.H,function(m,_){me(h,_,m)}),a.l&&wm({},function(m,_){me(h,_,m)})}function Mm(a,h,m){m=Math.min(a.i.length,m);var _=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let L=-1;for(;;){const B=["count="+m];L==-1?0<m?(L=D[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let he=!0;for(let Qe=0;Qe<m;Qe++){let ae=D[Qe].g;const it=D[Qe].map;if(ae-=L,0>ae)L=Math.max(0,D[Qe].g-100),he=!1;else try{yT(it,B,"req"+ae+"_")}catch{_&&_(it)}}if(he){_=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function Fm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;yt||Z(),$||(yt(),$=!0),Q.add(h,a),a.v=0}}function jc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Li(g(a.Fa,a),$m(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Um(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Li(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),La(this),Um(this))};function Dc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Um(a){a.g=new er(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Rn(a.qa);me(h,"RID","rpc"),me(h,"SID",a.K),me(h,"AID",a.T),me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(h,"TO",a.ja),me(h,"TYPE","xmlhttp"),Wi(a,h),a.m&&a.o&&Cc(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Pa(Rn(h)),m.m=null,m.P=!0,fm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,La(this),jc(this),_t(19))};function Ma(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Bm(a,h){var m=null;if(a.g==h){Ma(a),Dc(a),a.g=null;var _=2}else if(Rc(a.h,h))m=h.D,_m(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;_=ba(),vt(_,new um(_,m)),Va(a)}else Fm(a);else if(D=h.s,D==3||D==0&&0<h.X||!(_==1&&wT(a,h)||_==2&&jc(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),D){case 1:Yr(a,5);break;case 4:Yr(a,10);break;case 3:Yr(a,6);break;default:Yr(a,2)}}}function $m(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Yr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),_=a.Xa;const D=!_;_=new Qr(_||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ka(_,"https"),Pa(_),D?pT(_.toString(),m):mT(_.toString(),m)}else _t(2);a.G=0,a.l&&a.l.sa(h),zm(a),Lm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function zm(a){if(a.G=0,a.ka=[],a.l){const h=xm(a.h);(h.length!=0||a.i.length!=0)&&(R(a.ka,h),R(a.ka,a.i),a.h.i.length=0,A(a.i),a.i.length=0),a.l.ra()}}function qm(a,h,m){var _=m instanceof Qr?Rn(m):new Qr(m);if(_.g!="")h&&(_.g=h+"."+_.g),Ca(_,_.s);else{var D=l.location;_=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var L=new Qr(null);_&&ka(L,_),h&&(L.g=h),D&&Ca(L,D),m&&(L.l=m),_=L}return m=a.D,h=a.ya,m&&h&&me(_,m,h),me(_,"VER",a.la),Wi(a,_),_}function Wm(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ae(new ja({eb:m})):new Ae(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Hm(){}t=Hm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(a,h){return new Dt(a,h)};function Dt(a,h){st.call(this),this.g=new Om(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!v(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!v(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Cs(this)}w(Dt,st),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){Pc(this.g)},Dt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=xc(a),a=m);h.i.push(new sT(h.Ya++,a)),h.G==3&&Va(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,Pc(this.g),delete this.g,Dt.aa.N.call(this)};function Km(a){Ec.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}w(Km,Ec);function Gm(){Tc.call(this),this.status=1}w(Gm,Tc);function Cs(a){this.g=a}w(Cs,Hm),Cs.prototype.ua=function(){vt(this.g,"a")},Cs.prototype.ta=function(a){vt(this.g,new Km(a))},Cs.prototype.sa=function(a){vt(this.g,new Gm)},Cs.prototype.ra=function(){vt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,aw=function(){return new Fa},ow=function(){return ba()},iw=Kr,Ch={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Sa.NO_ERROR=0,Sa.TIMEOUT=8,Sa.HTTP_ERROR=6,Cl=Sa,cm.COMPLETE="complete",sw=cm,im.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",st.prototype.listen=st.prototype.K,lo=im,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,rw=Ae}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const $y="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ct{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ct.UNAUTHENTICATED=new ct(null),ct.GOOGLE_CREDENTIALS=new ct("google-credentials-uid"),ct.FIRST_PARTY=new ct("first-party-uid"),ct.MOCK_USER=new ct("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ri="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new Hf("@firebase/firestore");function eo(){return ys.logLevel}function W(t,...e){if(ys.logLevel<=se.DEBUG){const n=e.map(sp);ys.debug(`Firestore (${Ri}): ${t}`,...n)}}function Gn(t,...e){if(ys.logLevel<=se.ERROR){const n=e.map(sp);ys.error(`Firestore (${Ri}): ${t}`,...n)}}function pi(t,...e){if(ys.logLevel<=se.WARN){const n=e.map(sp);ys.warn(`Firestore (${Ri}): ${t}`,...n)}}function sp(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${Ri}) INTERNAL ASSERTION FAILED: `+t;throw Gn(e),new Error(e)}function ce(t,e){t||Y()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ct.UNAUTHENTICATED))}shutdown(){}}class WR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=ct.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Bn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Bn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Bn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new lw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new ct(e)}}class KR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ct.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class GR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new KR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ct.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class QR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class YR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new QR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=XR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new ze(0,0))}static max(){return new X(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ve extends Qo{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const JR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Je extends Qo{construct(e,n,r){return new Je(e,n,r)}static isValidIdentifier(e){return JR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Je.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Je(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Je(n)}static emptyPath(){return new Je([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ve.fromString(e))}static fromName(e){return new K(ve.fromString(e).popFirst(5))}static empty(){return new K(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ve(e.slice()))}}function ZR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Dr(s,K.empty(),e)}function ek(t){return new Dr(t.readTime,t.key,-1)}class Dr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Dr(X.min(),K.empty(),-1)}static max(){return new Dr(X.max(),K.empty(),-1)}}function tk(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class rk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==nk)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function sk(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}ip.oe=-1;function Hu(t){return t==null}function mu(t){return t===0&&1/t==-1/0}function ik(t){return typeof t=="number"&&Number.isInteger(t)&&!mu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zy(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Ss(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Xe.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Xe.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Xe.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Xe{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Xe.RED,this.left=s??Xe.EMPTY,this.right=i??Xe.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Xe(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Xe.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Xe.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Xe.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Xe.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Xe.EMPTY=null,Xe.RED=!0,Xe.BLACK=!1;Xe.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Xe(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new qy(this.data.getIterator())}getIteratorFrom(e){return new qy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class qy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vt{constructor(e){this.fields=e,e.sort(Je.comparator)}static empty(){return new Vt([])}unionWith(e){let n=new et(Je.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Vt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new dw("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const ok=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Or(t){if(ce(!!t),typeof t=="string"){let e=0;const n=ok.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ap(t){const e=t.mapValue.fields.__previous_value__;return op(e)?ap(e):e}function Yo(t){const e=Or(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ak{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?op(t)?4:uk(t)?9007199254740991:lk(t)?10:11:Y()}function Nn(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yo(t).isEqual(Yo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Or(s.timestampValue),l=Or(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?mu(o)===mu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return mi(t.arrayValue.values||[],e.arrayValue.values||[],Nn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(zy(o)!==zy(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!Nn(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Jo(t,e){return(t.values||[]).find(n=>Nn(n,e))!==void 0}function gi(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return Wy(t.timestampValue,e.timestampValue);case 4:return Wy(Yo(t),Yo(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vs(i),u=vs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(je(i.latitude),je(o.latitude));return l!==0?l:le(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Hy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},x=(l=p.value)===null||l===void 0?void 0:l.arrayValue,w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,A=le(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=w==null?void 0:w.values)===null||f===void 0?void 0:f.length)||0);return A!==0?A:Hy(x,w)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===al.mapValue&&o===al.mapValue)return 0;if(i===al.mapValue)return 1;if(o===al.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=le(u[p],f[p]);if(g!==0)return g;const x=gi(l[u[p]],d[f[p]]);if(x!==0)return x}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function Wy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Or(t),r=Or(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function Hy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=gi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function yi(t){return Ph(t)}function Ph(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Or(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ph(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ph(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Ky(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function jh(t){return!!t&&"integerValue"in t}function lp(t){return!!t&&"arrayValue"in t}function Gy(t){return!!t&&"nullValue"in t}function Qy(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Pl(t){return!!t&&"mapValue"in t}function lk(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Ss(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function uk(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Pl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Je.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=To(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Pl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Nn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Pl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Ss(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(To(this.value))}}function hw(t){const e=[];return Ss(t.fields,(n,r)=>{const s=new Je([n]);if(Pl(r)){const i=hw(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Vt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ht(e,0,X.min(),X.min(),X.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new ht(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ht(e,2,n,X.min(),X.min(),At.empty(),0)}static newUnknownDocument(e,n){return new ht(e,3,n,X.min(),X.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ht&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ht(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n){this.position=e,this.inclusive=n}}function Yy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=gi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Xy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Nn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function ck(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class Fe extends fw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new hk(e,n,r):n==="array-contains"?new mk(e,r):n==="in"?new gk(e,r):n==="not-in"?new yk(e,r):n==="array-contains-any"?new vk(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new fk(e,r):new pk(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gi(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class cn extends fw{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new cn(e,n)}matches(e){return pw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function pw(t){return t.op==="and"}function mw(t){return dk(t)&&pw(t)}function dk(t){for(const e of t.filters)if(e instanceof cn)return!1;return!0}function Dh(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+yi(t.value);if(mw(t))return t.filters.map(e=>Dh(e)).join(",");{const e=t.filters.map(n=>Dh(n)).join(",");return`${t.op}(${e})`}}function gw(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&Nn(r.value,s.value)}(t,e):t instanceof cn?function(r,s){return s instanceof cn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&gw(o,s.filters[l]),!0):!1}(t,e):void Y()}function yw(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${yi(n.value)}`}(t):t instanceof cn?function(n){return n.op.toString()+" {"+n.getFilters().map(yw).join(" ,")+"}"}(t):"Filter"}class hk extends Fe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class fk extends Fe{constructor(e,n){super(e,"in",n),this.keys=vw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class pk extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=vw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function vw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class mk extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return lp(n)&&Jo(n.arrayValue,this.value)}}class gk extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jo(this.value.arrayValue,n)}}class yk extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jo(this.value.arrayValue,n)}}class vk extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!lp(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Jy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new _k(t,e,n,r,s,i,o)}function up(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Dh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Hu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yi(r)).join(",")),e.ue=n}return e.ue}function cp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!ck(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!gw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Xy(t.startAt,e.startAt)&&Xy(t.endAt,e.endAt)}function Oh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function xk(t,e,n,r,s,i,o,l){return new ki(t,e,n,r,s,i,o,l)}function Ku(t){return new ki(t)}function Zy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function _w(t){return t.collectionGroup!==null}function Io(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new et(Je.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Zo(i,r))}),n.has(Je.keyField().canonicalString())||e.ce.push(new Zo(Je.keyField(),r))}return e.ce}function En(t){const e=J(t);return e.le||(e.le=wk(e,Io(t))),e.le}function wk(t,e){if(t.limitType==="F")return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Zo(s.field,i)});const n=t.endAt?new gu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new gu(t.startAt.position,t.startAt.inclusive):null;return Jy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lh(t,e){const n=t.filters.concat([e]);return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function yu(t,e,n){return new ki(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Gu(t,e){return cp(En(t),En(e))&&t.limitType===e.limitType}function xw(t){return`${up(En(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>yw(s)).join(", ")}]`),Hu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>yi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>yi(s)).join(",")),`Target(${r})`}(En(t))}; limitType=${t.limitType})`}function Qu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Yy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Io(r),s)||r.endAt&&!function(o,l,u){const d=Yy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Io(r),s))}(t,e)}function Ek(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function ww(t){return(e,n)=>{let r=!1;for(const s of Io(t)){const i=Tk(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function Tk(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?gi(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Ss(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return cw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ik=new be(K.comparator);function Qn(){return Ik}const Ew=new be(K.comparator);function uo(...t){let e=Ew;for(const n of t)e=e.insert(n.key,n);return e}function Tw(t){let e=Ew;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return No()}function Iw(){return No()}function No(){return new Ci(t=>t.toString(),(t,e)=>t.isEqual(e))}const Nk=new be(K.comparator),bk=new et(K.comparator);function re(...t){let e=bk;for(const n of t)e=e.add(n);return e}const Sk=new et(le);function Ak(){return Sk}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dp(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(e)?"-0":e}}function Nw(t){return{integerValue:""+t}}function Rk(t,e){return ik(e)?Nw(e):dp(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yu{constructor(){this._=void 0}}function kk(t,e,n){return t instanceof ea?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&op(i)&&(i=ap(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ta?Sw(t,e):t instanceof na?Aw(t,e):function(s,i){const o=bw(s,i),l=ev(o)+ev(s.Pe);return jh(o)&&jh(s.Pe)?Nw(l):dp(s.serializer,l)}(t,e)}function Ck(t,e,n){return t instanceof ta?Sw(t,e):t instanceof na?Aw(t,e):n}function bw(t,e){return t instanceof vu?function(r){return jh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ea extends Yu{}class ta extends Yu{constructor(e){super(),this.elements=e}}function Sw(t,e){const n=Rw(e);for(const r of t.elements)n.some(s=>Nn(s,r))||n.push(r);return{arrayValue:{values:n}}}class na extends Yu{constructor(e){super(),this.elements=e}}function Aw(t,e){let n=Rw(e);for(const r of t.elements)n=n.filter(s=>!Nn(s,r));return{arrayValue:{values:n}}}class vu extends Yu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function ev(t){return je(t.integerValue||t.doubleValue)}function Rw(t){return lp(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pk{constructor(e,n){this.field=e,this.transform=n}}function jk(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ta&&s instanceof ta||r instanceof na&&s instanceof na?mi(r.elements,s.elements,Nn):r instanceof vu&&s instanceof vu?Nn(r.Pe,s.Pe):r instanceof ea&&s instanceof ea}(t.transform,e.transform)}class Dk{constructor(e,n){this.version=e,this.transformResults=n}}class Qt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Qt}static exists(e){return new Qt(void 0,e)}static updateTime(e){return new Qt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function jl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Xu{}function kw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new hp(t.key,Qt.none()):new ya(t.key,t.data,Qt.none());{const n=t.data,r=At.empty();let s=new et(Je.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new qr(t.key,r,new Vt(s.toArray()),Qt.none())}}function Ok(t,e,n){t instanceof ya?function(s,i,o){const l=s.value.clone(),u=nv(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof qr?function(s,i,o){if(!jl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=nv(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(Cw(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function bo(t,e,n,r){return t instanceof ya?function(i,o,l,u){if(!jl(i.precondition,o))return l;const d=i.value.clone(),f=rv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof qr?function(i,o,l,u){if(!jl(i.precondition,o))return l;const d=rv(i.fieldTransforms,u,o),f=o.data;return f.setAll(Cw(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return jl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function Lk(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=bw(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function tv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mi(r,s,(i,o)=>jk(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ya extends Xu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class qr extends Xu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Cw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function nv(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,Ck(o,l,n[s]))}return r}function rv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,kk(i,o,e))}return r}class hp extends Xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Vk extends Xu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ok(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=bo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Iw();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=kw(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&mi(this.mutations,e.mutations,(n,r)=>tv(n,r))&&mi(this.baseMutations,e.baseMutations,(n,r)=>tv(n,r))}}class fp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return Nk}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new fp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ie;function Bk(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Pw(t){if(t===void 0)return Gn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ve.OK:return V.OK;case Ve.CANCELLED:return V.CANCELLED;case Ve.UNKNOWN:return V.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return V.INTERNAL;case Ve.UNAVAILABLE:return V.UNAVAILABLE;case Ve.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ve.NOT_FOUND:return V.NOT_FOUND;case Ve.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ve.ABORTED:return V.ABORTED;case Ve.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ve.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ie=Ve||(Ve={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zk=new os([4294967295,4294967295],0);function sv(t){const e=$k().encode(t),n=new nw;return n.update(e),new Uint8Array(n.digest())}function iv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new os([n,r],0),new os([s,i],0)]}class pp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=os.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(os.fromNumber(r)));return s.compare(zk)===1&&(s=new os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=sv(e),[r,s]=iv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new pp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=sv(e),[r,s]=iv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ju(X.min(),s,new be(le),Qn(),re())}}class va{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new va(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class jw{constructor(e,n){this.targetId=e,this.me=n}}class Dw{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class ov{constructor(){this.fe=0,this.ge=lv(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new va(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=lv()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class qk{constructor(e){this.Le=e,this.Be=new Map,this.ke=Qn(),this.qe=av(),this.Qe=new be(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Oh(i))if(r===0){const o=new K(i.path);this.Ue(n,o,ht.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=vs(r).toUint8Array()}catch(u){if(u instanceof dw)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new pp(o,s,i)}catch(u){return pi(u instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Oh(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ht.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=re();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Ju(e,n,this.Qe,this.ke,r);return this.ke=Qn(),this.qe=av(),this.Qe=new be(le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new ov,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new ov),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function av(){return new be(K.comparator)}function lv(){return new be(K.comparator)}const Wk={asc:"ASCENDING",desc:"DESCENDING"},Hk={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Kk={and:"AND",or:"OR"};class Gk{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vh(t,e){return t.useProto3Json||Hu(e)?e:{value:e}}function _u(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Ow(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Qk(t,e){return _u(t,e.toTimestamp())}function Tn(t){return ce(!!t),X.fromTimestamp(function(n){const r=Or(n);return new ze(r.seconds,r.nanos)}(t))}function mp(t,e){return Mh(t,e).canonicalString()}function Mh(t,e){const n=function(s){return new ve(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Lw(t){const e=ve.fromString(t);return ce(Bw(e)),e}function Fh(t,e){return mp(t.databaseId,e.path)}function gd(t,e){const n=Lw(e);if(n.get(1)!==t.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Mw(n))}function Vw(t,e){return mp(t.databaseId,e)}function Yk(t){const e=Lw(t);return e.length===4?ve.emptyPath():Mw(e)}function Uh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Mw(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function uv(t,e,n){return{name:Fh(t,e),fields:n.value.mapValue.fields}}function Xk(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ce(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?V.UNKNOWN:Pw(d.code);return new z(f,d.message||"")}(o);n=new Dw(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=gd(t,r.document.name),i=Tn(r.document.updateTime),o=r.document.createTime?Tn(r.document.createTime):X.min(),l=new At({mapValue:{fields:r.document.fields}}),u=ht.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new Dl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=gd(t,r.document),i=r.readTime?Tn(r.readTime):X.min(),o=ht.newNoDocument(s,i),l=r.removedTargetIds||[];n=new Dl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=gd(t,r.document),i=r.removedTargetIds||[];n=new Dl([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Uk(s,i),l=r.targetId;n=new jw(l,o)}}return n}function Jk(t,e){let n;if(e instanceof ya)n={update:uv(t,e.key,e.value)};else if(e instanceof hp)n={delete:Fh(t,e.key)};else if(e instanceof qr)n={update:uv(t,e.key,e.data),updateMask:aC(e.fieldMask)};else{if(!(e instanceof Vk))return Y();n={verify:Fh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ea)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ta)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof na)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof vu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Qk(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function Zk(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Tn(s.updateTime):Tn(i);return o.isEqual(X.min())&&(o=Tn(i)),new Dk(o,s.transformResults||[])}(n,e))):[]}function eC(t,e){return{documents:[Vw(t,e.path)]}}function tC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Vw(t,s);const i=function(d){if(d.length!==0)return Uw(cn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:sC(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Vh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function nC(t){let e=Yk(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=Fw(p);return g instanceof cn&&mw(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(w){return new Zo(Ls(w.field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(w.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Hu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,x=p.values||[];return new gu(x,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,x=p.values||[];return new gu(x,g)}(n.endAt)),xk(e,s,o,i,l,"F",u,d)}function rC(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Fw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ls(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ls(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ls(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ls(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return cn.create(n.compositeFilter.filters.map(r=>Fw(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function sC(t){return Wk[t]}function iC(t){return Hk[t]}function oC(t){return Kk[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ls(t){return Je.fromServerFormat(t.fieldPath)}function Uw(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Qy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(Gy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Qy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(Gy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:iC(n.op),value:n.value}}}(t):t instanceof cn?function(n){const r=n.getFilters().map(s=>Uw(s));return r.length===1?r[0]:{compositeFilter:{op:oC(n.op),filters:r}}}(t):Y()}function aC(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Bw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=nt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new yr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new yr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.ct=e}}function uC(t){const e=nC({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?yu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.un=new dC}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(Dr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(Dr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class dC{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(ve.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vi(0)}static kn(){return new vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.changes=new Ci(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ht.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fC{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pC{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&bo(r.mutation,s,Vt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=uo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Qn();const o=No(),l=function(){return No()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof qr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),bo(f.mutation,d,f.mutation.getFieldMask(),ze.now())):o.set(d.key,Vt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new fC(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=No();let s=new be((o,l)=>o-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Vt.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||re()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=Iw();f.forEach(g=>{if(!i.has(g)){const x=kw(n.get(g),r.get(g));x!==null&&p.set(g,x),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):_w(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(rs());let l=-1,u=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,re())).next(f=>({batchId:l,changes:Tw(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=uo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=uo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const d=function(p,g){return new ki(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ht.newInvalidDocument(f)))});let l=uo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&bo(f.mutation,d,Vt.empty(),ze.now()),Qu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Tn(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:uC(s.bundledQuery),readTime:Tn(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gC{constructor(){this.overlays=new be(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=rs(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=rs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new Fk(n,r));let i=this.Ir.get(n);i===void 0&&(i=re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(){this.Tr=new et(We.Er),this.dr=new et(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new ve([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new ve([])),r=new We(n,e),s=new We(n,e+1);let i=re();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(We.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Mk(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new We(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(le);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new We(new K(i),0);let l=new et(le);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e){this.Mr=e,this.docs=function(){return new be(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():ht.newInvalidDocument(n))}getEntries(e,n){let r=Qn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ht.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Qn();const o=n.path,l=new K(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||tk(ek(f),r)<=0||(s.has(f.key)||Qu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new xC(this)}getSize(e){return F.resolve(this.size)}}class xC extends hC{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e){this.persistence=e,this.Nr=new Ci(n=>up(n),cp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new gp,this.targetCount=0,this.kr=vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EC{constructor(e,n){this.qr={},this.overlays={},this.Qr=new ip(0),this.Kr=!1,this.Kr=!0,this.$r=new yC,this.referenceDelegate=e(this),this.Ur=new wC(this),this.indexManager=new cC,this.remoteDocumentCache=function(s){return new _C(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new lC(n),this.Gr=new mC(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new gC,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new vC(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new TC(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class TC extends rk{constructor(e){super(),this.currentSequenceNumber=e}}class yp{constructor(e){this.persistence=e,this.Jr=new gp,this.Yr=null}static Zr(e){return new yp(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new vp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return hS()?8:sk(mt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new IC;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(eo()<=se.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(eo()<=se.DEBUG&&W("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(eo()<=se.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,En(n))):F.resolve())}Yi(e,n){if(Zy(n))return F.resolve(null);let r=En(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=yu(n,null,"F"),r=En(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,yu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Zy(n)||s.isEqual(X.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(eo()<=se.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ds(n)),this.rs(e,o,n,ZR(s,-1)).next(l=>l))})}ts(e,n){let r=new et(ww(e));return n.forEach((s,i)=>{Qu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return eo()<=se.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,Dr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(le),this._s=new Ci(i=>up(i),cp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new pC(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function SC(t,e,n,r){return new bC(t,e,n,r)}async function $w(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=re();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function AC(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let x=F.resolve();return g.forEach(w=>{x=x.next(()=>f.getEntry(u,w)).next(A=>{const R=d.docVersions.get(w);ce(R!==null),A.version.compareTo(R)<0&&(p.applyToRemoteDocument(A,d),A.isValidDocument()&&(A.setReadTime(d.commitVersion),f.addEntry(A)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function zw(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function RC(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let x=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?x=x.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(p,x),function(A,R,y){return A.resumeToken.approximateByteSize()===0||R.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let u=Qn(),d=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(kC(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function kC(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Qn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function CC(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function PC(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new yr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Bh(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ga(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function cv(t,e,n){const r=J(t);let s=X.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=J(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,En(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:re())).next(l=>(jC(r,Ek(e),l),{documents:l,Ts:i})))}function jC(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class dv{constructor(){this.activeTargetIds=Ak()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class DC{constructor(){this.so=new dv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new dv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OC{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function yd(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LC={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class MC extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=yd(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw pi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ri}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=LC[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=yd();return new Promise((o,l)=>{const u=new rw;u.setWithCredentials(!0),u.listenOnce(sw.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Cl.NO_ERROR:const f=u.getResponseJson();W(ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Cl.TIMEOUT:W(ut,`RPC '${e}' ${i} timed out`),l(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:const p=u.getStatus();if(W(ut,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const x=g==null?void 0:g.error;if(x&&x.status&&x.message){const w=function(R){const y=R.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(x.status);l(new z(w,x.message))}else l(new z(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(ut,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(ut,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=yd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=aw(),l=ow(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");W(ut,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,x=!1;const w=new VC({Io:R=>{x?W(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,R):(g||(W(ut,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),W(ut,`RPC '${e}' stream ${s} sending:`,R),p.send(R))},To:()=>p.close()}),A=(R,y,v)=>{R.listen(y,T=>{try{v(T)}catch(P){setTimeout(()=>{throw P},0)}})};return A(p,lo.EventType.OPEN,()=>{x||(W(ut,`RPC '${e}' stream ${s} transport opened.`),w.yo())}),A(p,lo.EventType.CLOSE,()=>{x||(x=!0,W(ut,`RPC '${e}' stream ${s} transport closed`),w.So())}),A(p,lo.EventType.ERROR,R=>{x||(x=!0,pi(ut,`RPC '${e}' stream ${s} transport errored:`,R),w.So(new z(V.UNAVAILABLE,"The operation could not be completed")))}),A(p,lo.EventType.MESSAGE,R=>{var y;if(!x){const v=R.data[0];ce(!!v);const T=v,P=T.error||((y=T[0])===null||y===void 0?void 0:y.error);if(P){W(ut,`RPC '${e}' stream ${s} received error:`,P);const O=P.status;let M=function(b){const I=Ve[b];if(I!==void 0)return Pw(I)}(O),N=P.message;M===void 0&&(M=V.INTERNAL,N="Unknown error status: "+O+" with message "+P.message),x=!0,w.So(new z(M,N)),p.close()}else W(ut,`RPC '${e}' stream ${s} received:`,v),w.bo(v)}}),A(l,iw.STAT_EVENT,R=>{R.stat===Ch.PROXY?W(ut,`RPC '${e}' stream ${s} detected buffering proxy`):R.stat===Ch.NOPROXY&&W(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{w.wo()},0),w}}function vd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zu(t){return new Gk(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new qw(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Gn(n.toString()),Gn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class FC extends Ww{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Xk(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Tn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Uh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=Oh(u)?{documents:eC(i,u)}:{query:tC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Ow(i,o.resumeToken);const d=Vh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=_u(i,o.snapshotVersion.toTimestamp());const d=Vh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=rC(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Uh(this.serializer),n.removeTarget=e,this.a_(n)}}class UC extends Ww{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=Zk(e.writeResults,e.commitTime),r=Tn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Uh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Jk(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Mh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Mh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class $C{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Gn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zC{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{As(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await _a(d),d.q_.set("Unknown"),d.L_.delete(4),await ec(d)}(this))})}),this.q_=new $C(r,s)}}async function ec(t){if(As(t))for(const e of t.B_)await e(!0)}async function _a(t){for(const e of t.B_)await e(!1)}function Hw(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Ep(n)?wp(n):Pi(n).r_()&&xp(n,e))}function _p(t,e){const n=J(t),r=Pi(n);n.N_.delete(e),r.r_()&&Kw(n,e),n.N_.size===0&&(r.r_()?r.o_():As(n)&&n.q_.set("Unknown"))}function xp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pi(t).A_(e)}function Kw(t,e){t.Q_.xe(e),Pi(t).R_(e)}function wp(t){t.Q_=new qk({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pi(t).start(),t.q_.v_()}function Ep(t){return As(t)&&!Pi(t).n_()&&t.N_.size>0}function As(t){return J(t).L_.size===0}function Gw(t){t.Q_=void 0}async function qC(t){t.q_.set("Online")}async function WC(t){t.N_.forEach((e,n)=>{xp(t,e)})}async function HC(t,e){Gw(t),Ep(t)?(t.q_.M_(e),wp(t)):t.q_.set("Unknown")}async function KC(t,e,n){if(t.q_.set("Online"),e instanceof Dw&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await xu(t,r)}else if(e instanceof Dl?t.Q_.Ke(e):e instanceof jw?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await zw(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),Kw(i,u);const p=new yr(f.target,u,d,f.sequenceNumber);xp(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await xu(t,r)}}async function xu(t,e,n){if(!ga(e))throw e;t.L_.add(1),await _a(t),t.q_.set("Offline"),n||(n=()=>zw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await ec(t)})}function Qw(t,e){return e().catch(n=>xu(t,n,e))}async function tc(t){const e=J(t),n=Lr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;GC(e);)try{const s=await CC(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,QC(e,s)}catch(s){await xu(e,s)}Yw(e)&&Xw(e)}function GC(t){return As(t)&&t.O_.length<10}function QC(t,e){t.O_.push(e);const n=Lr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Yw(t){return As(t)&&!Lr(t).n_()&&t.O_.length>0}function Xw(t){Lr(t).start()}async function YC(t){Lr(t).p_()}async function XC(t){const e=Lr(t);for(const n of t.O_)e.m_(n.mutations)}async function JC(t,e,n){const r=t.O_.shift(),s=fp.from(r,e,n);await Qw(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await tc(t)}async function ZC(t,e){e&&Lr(t).V_&&await async function(r,s){if(function(o){return Bk(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Lr(r).s_(),await Qw(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await tc(r)}}(t,e),Yw(t)&&Xw(t)}async function fv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=As(n);n.L_.add(3),await _a(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await ec(n)}async function eP(t,e){const n=J(t);e?(n.L_.delete(2),await ec(n)):e||(n.L_.add(2),await _a(n),n.q_.set("Unknown"))}function Pi(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new FC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:qC.bind(null,t),Ro:WC.bind(null,t),mo:HC.bind(null,t),d_:KC.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Ep(t)?wp(t):t.q_.set("Unknown")):(await t.K_.stop(),Gw(t))})),t.K_}function Lr(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new UC(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:YC.bind(null,t),mo:ZC.bind(null,t),f_:XC.bind(null,t),g_:JC.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await tc(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Bn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Tp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ip(t,e){if(Gn("AsyncQueue",`${e}: ${t}`),ga(t))return new z(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=uo(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pv{constructor(){this.W_=new be(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _i{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new _i(e,n,ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tP{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class nP{constructor(){this.queries=mv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=mv(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new z(V.ABORTED,"Firestore shutting down"))}}function mv(){return new Ci(t=>xw(t),Gu)}async function Np(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new tP,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ip(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Sp(n)}async function bp(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function rP(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Sp(n)}function sP(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Sp(t){t.Y_.forEach(e=>{e.next()})}var $h,gv;(gv=$h||($h={})).ea="default",gv.Cache="cache";class Ap{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==$h.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e){this.key=e}}class Zw{constructor(e){this.key=e}}class iP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=ww(e),this.Ra=new ii(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new pv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),x=Qu(this.query,p)?p:null,w=!!g&&this.mutatedKeys.has(g.key),A=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let R=!1;g&&x?g.data.isEqual(x.data)?w!==A&&(r.track({type:3,doc:x}),R=!0):this.ga(g,x)||(r.track({type:2,doc:x}),R=!0,(u&&this.Aa(x,u)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!g&&x?(r.track({type:0,doc:x}),R=!0):g&&!x&&(r.track({type:1,doc:g}),R=!0,(u||d)&&(l=!0)),R&&(x?(o=o.add(x),i=A?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(x,w){const A=R=>{switch(R){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return A(x)-A(w)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new _i(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new pv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Zw(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Jw(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class oP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class aP{constructor(e){this.key=e,this.va=!1}}class lP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Ci(l=>xw(l),Gu),this.Ma=new Map,this.xa=new Set,this.Oa=new be(K.comparator),this.Na=new Map,this.La=new gp,this.Ba={},this.ka=new Map,this.qa=vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function uP(t,e,n=!0){const r=iE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await eE(r,e,n,!0),s}async function cP(t,e){const n=iE(t);await eE(n,e,!0,!1)}async function eE(t,e,n,r){const s=await PC(t.localStore,En(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await dP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&Hw(t.remoteStore,s),l}async function dP(t,e,n,r,s){t.Ka=(p,g,x)=>async function(A,R,y,v){let T=R.view.ma(y);T.ns&&(T=await cv(A.localStore,R.query,!1).then(({documents:N})=>R.view.ma(N,T)));const P=v&&v.targetChanges.get(R.targetId),O=v&&v.targetMismatches.get(R.targetId)!=null,M=R.view.applyChanges(T,A.isPrimaryClient,P,O);return vv(A,R.targetId,M.wa),M.snapshot}(t,p,g,x);const i=await cv(t.localStore,e,!0),o=new iP(e,i.Ts),l=o.ma(i.documents),u=va.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);vv(t,n,d.wa);const f=new oP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function hP(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Gu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&_p(r.remoteStore,s.targetId),zh(r,s.targetId)}).catch(ma)):(zh(r,s.targetId),await Bh(r.localStore,s.targetId,!0))}async function fP(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),_p(n.remoteStore,r.targetId))}async function pP(t,e,n){const r=wP(t);try{const s=await function(o,l){const u=J(o),d=ze.now(),f=l.reduce((x,w)=>x.add(w.key),re());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",x=>{let w=Qn(),A=re();return u.cs.getEntries(x,f).next(R=>{w=R,w.forEach((y,v)=>{v.isValidDocument()||(A=A.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(x,w)).next(R=>{p=R;const y=[];for(const v of l){const T=Lk(v,p.get(v.key).overlayedDocument);T!=null&&y.push(new qr(v.key,T,hw(T.value.mapValue),Qt.exists(!0)))}return u.mutationQueue.addMutationBatch(x,d,y,l)}).next(R=>{g=R;const y=R.applyToLocalDocumentSet(p,A);return u.documentOverlayCache.saveOverlays(x,R.batchId,y)})}).then(()=>({batchId:g.batchId,changes:Tw(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new be(le)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await xa(r,s.changes),await tc(r.remoteStore)}catch(s){const i=Ip(s,"Failed to persist write");n.reject(i)}}async function tE(t,e){const n=J(t);try{const r=await RC(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ce(o.va):s.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await xa(n,r,e)}catch(r){await ma(r)}}function yv(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&Sp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function mP(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(K.comparator);o=o.insert(i,ht.newNoDocument(i,X.min()));const l=re().add(i),u=new Ju(X.min(),new Map,new be(le),o,l);await tE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Rp(r)}else await Bh(r.localStore,e,!1).then(()=>zh(r,e,n)).catch(ma)}async function gP(t,e){const n=J(t),r=e.batch.batchId;try{const s=await AC(n.localStore,e);rE(n,r,null),nE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await xa(n,s)}catch(s){await ma(s)}}async function yP(t,e,n){const r=J(t);try{const s=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ce(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);rE(r,e,n),nE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await xa(r,s)}catch(s){await ma(s)}}function nE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function rE(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function zh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||sE(t,r)})}function sE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(_p(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rp(t))}function vv(t,e,n){for(const r of n)r instanceof Jw?(t.La.addReference(r.key,e),vP(t,r)):r instanceof Zw?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||sE(t,r.key)):Y()}function vP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Rp(t))}function Rp(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(ve.fromString(e)),r=t.qa.next();t.Na.set(r,new aP(n)),t.Oa=t.Oa.insert(n,r),Hw(t.remoteStore,new yr(En(Ku(n.path)),r,"TargetPurposeLimboResolution",ip.oe))}}async function xa(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=vp.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,x=>f.persistence.referenceDelegate.addReference(p,g.targetId,x)).next(()=>F.forEach(g.Ui,x=>f.persistence.referenceDelegate.removeReference(p,g.targetId,x)))))}catch(p){if(!ga(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const x=f.os.get(g),w=x.snapshotVersion,A=x.withLastLimboFreeSnapshotVersion(w);f.os=f.os.insert(g,A)}}}(r.localStore,i))}async function _P(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await $w(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new z(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await xa(n,r.hs)}}function xP(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let s=re();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function iE(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=tE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=xP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=mP.bind(null,e),e.Ca.d_=rP.bind(null,e.eventManager),e.Ca.$a=sP.bind(null,e.eventManager),e}function wP(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=yP.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Zu(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return SC(this.persistence,new NC,e.initialUser,this.serializer)}Ga(e){return new EC(yp.Zr,this.serializer)}Wa(e){return new DC}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class qh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>yv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=_P.bind(null,this.syncEngine),await eP(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new nP}()}createDatastore(e){const n=Zu(e.databaseInfo.databaseId),r=function(i){return new MC(i)}(e.databaseInfo);return function(i,o,l,u){return new BC(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new zC(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>yv(this.syncEngine,n,0),function(){return hv.D()?new hv:new OC}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new lP(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _a(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}qh.provider={build:()=>new qh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Gn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ct.UNAUTHENTICATED,this.clientId=uw.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Bn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ip(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function _d(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await $w(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function _v(t,e){t.asyncQueue.verifyOperationInProgress();const n=await TP(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>fv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>fv(e.remoteStore,s)),t._onlineComponents=e}async function TP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await _d(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await _d(t,new wu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await _d(t,new wu);return t._offlineComponents}async function oE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await _v(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await _v(t,new qh))),t._onlineComponents}function IP(t){return oE(t).then(e=>e.syncEngine)}async function Eu(t){const e=await oE(t),n=e.eventManager;return n.onListen=uP.bind(null,e.syncEngine),n.onUnlisten=hP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=cP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=fP.bind(null,e.syncEngine),n}function NP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new kp({next:g=>{f.Za(),o.enqueueAndForget(()=>bp(i,p));const x=g.docs.has(l);!x&&g.fromCache?d.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&g.fromCache&&u&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Ap(Ku(l.path),f,{includeMetadataChanges:!0,_a:!0});return Np(i,p)}(await Eu(t),t.asyncQueue,e,n,r)),r.promise}function bP(t,e,n={}){const r=new Bn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new kp({next:g=>{f.Za(),o.enqueueAndForget(()=>bp(i,p)),g.fromCache&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Ap(l,f,{includeMetadataChanges:!0,_a:!0});return Np(i,p)}(await Eu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lE(t,e,n){if(!n)throw new z(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SP(t,e,n,r){if(e===!0&&r===!0)throw new z(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function wv(t){if(!K.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Ev(t){if(K.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function nc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function jt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=nc(t);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function AP(t,e){if(e<=0)throw new z(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class rc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Tv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Tv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qR;switch(r.type){case"firstParty":return new GR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=xv.get(n);r&&(W("ComponentProvider","Removing Datastore"),xv.delete(n),r.terminate())}(this),Promise.resolve()}}function RP(t,e,n,r={}){var s;const i=(t=jt(t,rc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ct.MOCK_USER;else{l=mx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ct(d)}t._authCredentials=new WR(new lw(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Zn(this.firestore,e,this._query)}}class ft{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}}class Rr extends Zn{constructor(e,n,r){super(e,n,Ku(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new K(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function Oe(t,e,...n){if(t=xe(t),lE("collection","path",e),t instanceof rc){const r=ve.fromString(e,...n);return Ev(r),new Rr(t,null,r)}{if(!(t instanceof ft||t instanceof Rr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return Ev(r),new Rr(t.firestore,null,r)}}function ke(t,e,...n){if(t=xe(t),arguments.length===1&&(e=uw.newId()),lE("doc","path",e),t instanceof rc){const r=ve.fromString(e,...n);return wv(r),new ft(t,null,new K(r))}{if(!(t instanceof ft||t instanceof Rr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return wv(r),new ft(t.firestore,t instanceof Rr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iv{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new qw(this,"async_queue_retry"),this.Vu=()=>{const r=vd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=vd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=vd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Bn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ga(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Gn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Tp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Nv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Yn extends rc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Iv,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Iv(e),this._firestoreClient=void 0,await e}}}function kP(t,e){const n=typeof t=="object"?t:Gf(),r=typeof t=="string"?t:"(default)",s=$u(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=hx("firestore");i&&RP(s,...i)}return s}function sc(t){if(t._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||CP(t),t._firestoreClient}function CP(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new ak(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,aE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new EP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xi(nt.fromBase64String(e))}catch(n){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xi(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Je(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oc{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PP=/^__.*__$/;class jP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new qr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ya(e,this.data,n,this.fieldTransforms)}}class uE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new qr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function cE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class jp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new jp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Tu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cE(this.Cu)&&PP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class DP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Zu(e)}Qu(e,n,r,s=!1){return new jp({Cu:e,methodName:n,qu:r,path:Je.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function ac(t){const e=t._freezeSettings(),n=Zu(t._databaseId);return new DP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function dE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Op("Data must be an object, but it was:",o,r);const l=hE(r,o);let u,d;if(i.merge)u=new Vt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=Wh(e,p,n);if(!o.contains(g))throw new z(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);pE(f,g)||f.push(g)}u=new Vt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new jP(new At(l),u,d)}class lc extends oc{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof lc}}class Dp extends oc{_toFieldTransform(e){return new Pk(e.path,new ea)}isEqual(e){return e instanceof Dp}}function OP(t,e,n,r){const s=t.Qu(1,e,n);Op("Data must be an object, but it was:",s,r);const i=[],o=At.empty();Ss(r,(u,d)=>{const f=Lp(e,u,n);d=xe(d);const p=s.Nu(f);if(d instanceof lc)i.push(f);else{const g=wa(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Vt(i);return new uE(o,l,s.fieldTransforms)}function LP(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[Wh(e,r,n)],u=[s];if(i.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(Wh(e,i[g])),u.push(i[g+1]);const d=[],f=At.empty();for(let g=l.length-1;g>=0;--g)if(!pE(d,l[g])){const x=l[g];let w=u[g];w=xe(w);const A=o.Nu(x);if(w instanceof lc)d.push(x);else{const R=wa(w,A);R!=null&&(d.push(x),f.set(x,R))}}const p=new Vt(d);return new uE(f,p,o.fieldTransforms)}function VP(t,e,n,r=!1){return wa(n,t.Qu(r?4:3,e))}function wa(t,e){if(fE(t=xe(t)))return Op("Unsupported field value:",e,t),hE(t,e);if(t instanceof oc)return function(r,s){if(!cE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=wa(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=xe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Rk(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:_u(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:_u(s.serializer,i)}}if(r instanceof Cp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xi)return{bytesValue:Ow(s.serializer,r._byteString)};if(r instanceof ft){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:mp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Pp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return dp(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${nc(r)}`)}(t,e)}function hE(t,e){const n={};return cw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ss(t,(r,s)=>{const i=wa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function fE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Cp||t instanceof xi||t instanceof ft||t instanceof oc||t instanceof Pp)}function Op(t,e,n){if(!fE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=nc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Wh(t,e,n){if((e=xe(e))instanceof ic)return e._internalPath;if(typeof e=="string")return Lp(t,e);throw Tu("Field path arguments must be of type string or ",t,!1,void 0,n)}const MP=new RegExp("[~\\*/\\[\\]]");function Lp(t,e,n){if(e.search(MP)>=0)throw Tu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ic(...e.split("."))._internalPath}catch{throw Tu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Tu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(V.INVALID_ARGUMENT,l+t+u)}function pE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new FP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(uc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FP extends mE{data(){return super.data()}}function uc(t,e){return typeof e=="string"?Lp(t,e):e instanceof ic?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vp{}class Mp extends Vp{}function Ut(t,e,...n){let r=[];e instanceof Vp&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Fp).length,l=i.filter(u=>u instanceof cc).length;if(o>1||o>0&&l>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class cc extends Mp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new cc(e,n,r)}_apply(e){const n=this._parse(e);return vE(e._query,n),new Zn(e.firestore,e.converter,Lh(e._query,n))}_parse(e){const n=ac(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Sv(p,f);const x=[];for(const w of p)x.push(bv(u,i,w));g={arrayValue:{values:x}}}else g=bv(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Sv(p,f),g=VP(l,o,p,f==="in"||f==="not-in");return Fe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Vr(t,e,n){const r=e,s=uc("where",t);return cc._create(s,r,n)}class Fp extends Vp{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Fp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:cn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)vE(o,u),o=Lh(o,u)}(e._query,n),new Zn(e.firestore,e.converter,Lh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Up extends Mp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Up(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(i,o)}(e._query,this._field,this._direction);return new Zn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new ki(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function kr(t,e="asc"){const n=e,r=uc("orderBy",t);return Up._create(r,n)}class Bp extends Mp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Bp(e,n,r)}_apply(e){return new Zn(e.firestore,e.converter,yu(e._query,this._limit,this._limitType))}}function yE(t){return AP("limit",t),Bp._create("limit",t,"F")}function bv(t,e,n){if(typeof(n=xe(n))=="string"){if(n==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_w(e)&&n.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ve.fromString(n));if(!K.isDocumentKey(r))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ky(t,new K(r))}if(n instanceof ft)return Ky(t,n._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${nc(n)}.`)}function Sv(t,e){if(!Array.isArray(t)||t.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function vE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class UP{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Ss(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new Pp(i)}convertGeoPoint(e){return new Cp(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ap(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const n=Or(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);ce(Bw(r));const s=new Xo(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Gn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _E(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class xE extends mE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ol(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(uc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Ol extends xE{data(e={}){return super.data(e)}}class wE{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ol(this._firestore,this._userDataWriter,r.key,r,new ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Ol(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Ol(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:BP(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function BP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function In(t){t=jt(t,ft);const e=jt(t.firestore,Yn);return NP(sc(e),t._key).then(n=>TE(e,t,n))}class $p extends UP{constructor(e){super(),this.firestore=e}convertBytes(e){return new xi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,n)}}function bn(t){t=jt(t,Zn);const e=jt(t.firestore,Yn),n=sc(e),r=new $p(e);return gE(t._query),bP(n,t._query).then(s=>new wE(e,r,t,s))}function ra(t,e,n){t=jt(t,ft);const r=jt(t.firestore,Yn),s=_E(t.converter,e,n);return hc(r,[dE(ac(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Qt.none())])}function wi(t,e,n,...r){t=jt(t,ft);const s=jt(t.firestore,Yn),i=ac(s);let o;return o=typeof(e=xe(e))=="string"||e instanceof ic?LP(i,"updateDoc",t._key,e,n,r):OP(i,"updateDoc",t._key,e),hc(s,[o.toMutation(t._key,Qt.exists(!0))])}function EE(t){return hc(jt(t.firestore,Yn),[new hp(t._key,Qt.none())])}function dc(t,e){const n=jt(t.firestore,Yn),r=ke(t),s=_E(t.converter,e);return hc(n,[dE(ac(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Qt.exists(!1))]).then(()=>r)}function as(t,...e){var n,r,s;t=xe(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Nv(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Nv(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof ft)d=jt(t.firestore,Yn),f=Ku(t._key.path),u={next:p=>{e[o]&&e[o](TE(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=jt(t,Zn);d=jt(p.firestore,Yn),f=p._query;const g=new $p(d);u={next:x=>{e[o]&&e[o](new wE(d,g,p,x))},error:e[o+1],complete:e[o+2]},gE(t._query)}return function(g,x,w,A){const R=new kp(A),y=new Ap(x,R,w);return g.asyncQueue.enqueueAndForget(async()=>Np(await Eu(g),y)),()=>{R.Za(),g.asyncQueue.enqueueAndForget(async()=>bp(await Eu(g),y))}}(sc(d),f,l,u)}function hc(t,e){return function(r,s){const i=new Bn;return r.asyncQueue.enqueueAndForget(async()=>pP(await IP(r),s,i)),i.promise}(sc(t),e)}function TE(t,e,n){const r=n.docs.get(e._key),s=new $p(t);return new xE(t,s,e._key,r,new ho(n.hasPendingWrites,n.fromCache),e.converter)}function xs(){return new Dp("serverTimestamp")}(function(e,n=!0){(function(s){Ri=s})(Ns),ps(new jr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Yn(new HR(r.getProvider("auth-internal")),new YR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),_n($y,"4.7.3",e),_n($y,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IE="firebasestorage.googleapis.com",NE="storageBucket",$P=2*60*1e3,zP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe extends Sn{constructor(e,n,r=0){super(xd(e),`Firebase Storage: ${n} (${xd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return xd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ce;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ce||(Ce={}));function xd(t){return"storage/"+t}function zp(){const t="An unknown error occurred, please check the error payload for server response.";return new Pe(Ce.UNKNOWN,t)}function qP(t){return new Pe(Ce.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function WP(t){return new Pe(Ce.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function HP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pe(Ce.UNAUTHENTICATED,t)}function KP(){return new Pe(Ce.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function GP(t){return new Pe(Ce.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function QP(){return new Pe(Ce.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function YP(){return new Pe(Ce.CANCELED,"User canceled the upload/download.")}function XP(t){return new Pe(Ce.INVALID_URL,"Invalid URL '"+t+"'.")}function JP(t){return new Pe(Ce.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ZP(){return new Pe(Ce.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+NE+"' property when initializing the app?")}function e2(){return new Pe(Ce.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function t2(){return new Pe(Ce.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function n2(t){return new Pe(Ce.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hh(t){return new Pe(Ce.INVALID_ARGUMENT,t)}function bE(){return new Pe(Ce.APP_DELETED,"The Firebase app was deleted.")}function r2(t){return new Pe(Ce.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function So(t,e){return new Pe(Ce.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function to(t){throw new Pe(Ce.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Mt.makeFromUrl(e,n)}catch{return new Mt(e,"")}if(r.path==="")return r;throw JP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(P){P.path.charAt(P.path.length-1)==="/"&&(P.path_=P.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(P){P.path_=decodeURIComponent(P.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",x=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),w={bucket:1,path:3},A=n===IE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,R="([^?#]*)",y=new RegExp(`^https?://${A}/${s}/${R}`,"i"),T=[{regex:l,indices:u,postModify:i},{regex:x,indices:w,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let P=0;P<T.length;P++){const O=T[P],M=O.regex.exec(e);if(M){const N=M[O.indices.bucket];let E=M[O.indices.path];E||(E=""),r=new Mt(N,E),O.postModify(r);break}}if(r==null)throw XP(e);return r}}class s2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...R){d||(d=!0,e.apply(null,R))}function p(R){s=setTimeout(()=>{s=null,t(x,u())},R)}function g(){i&&clearTimeout(i)}function x(R,...y){if(d){g();return}if(R){g(),f.call(null,R,...y);return}if(u()||o){g(),f.call(null,R,...y);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,p(T)}let w=!1;function A(R){w||(w=!0,g(),!d&&(s!==null?(R||(l=2),clearTimeout(s),p(0)):R||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,A(!0)},n),A}function o2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t){return t!==void 0}function l2(t){return typeof t=="object"&&!Array.isArray(t)}function qp(t){return typeof t=="string"||t instanceof String}function Av(t){return Wp()&&t instanceof Blob}function Wp(){return typeof Blob<"u"}function Rv(t,e,n,r){if(r<e)throw Hh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function SE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ls;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ls||(ls={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u2(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n,r,s,i,o,l,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,w)=>{this.resolve_=x,this.reject_=w,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ul(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ls.NO_ERROR,u=i.getStatus();if(!l||u2(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ls.ABORT;r(!1,new ul(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ul(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());a2(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=zp();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?bE():YP();o(u)}else{const u=QP();o(u)}};this.canceled_?n(!1,new ul(!1,null,!0)):this.backoffId_=i2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&o2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ul{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function d2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function h2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function f2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function p2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function m2(t,e,n,r,s,i,o=!0){const l=SE(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return f2(d,e),d2(d,n),h2(d,i),p2(d,r),new c2(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function y2(...t){const e=g2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Wp())return new Blob(t);throw new Pe(Ce.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function v2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _2(t){if(typeof atob>"u")throw n2("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wd{constructor(e,n){this.data=e,this.contentType=n||null}}function x2(t,e){switch(t){case gn.RAW:return new wd(AE(e));case gn.BASE64:case gn.BASE64URL:return new wd(RE(t,e));case gn.DATA_URL:return new wd(E2(e),T2(e))}throw zp()}function AE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function w2(t){let e;try{e=decodeURIComponent(t)}catch{throw So(gn.DATA_URL,"Malformed data URL.")}return AE(e)}function RE(t,e){switch(t){case gn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw So(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case gn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw So(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=_2(e)}catch(s){throw s.message.includes("polyfill")?s:So(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class kE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw So(gn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=I2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function E2(t){const e=new kE(t);return e.base64?RE(gn.BASE64,e.rest):w2(e.rest)}function T2(t){return new kE(t).contentType}function I2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n){let r=0,s="";Av(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Av(this.data_)){const r=this.data_,s=v2(r,e,n);return s===null?null:new fr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new fr(r,!0)}}static getBlob(...e){if(Wp()){const n=e.map(r=>r instanceof fr?r.data_:r);return new fr(y2.apply(null,n))}else{const n=e.map(o=>qp(o)?x2(gn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new fr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CE(t){let e;try{e=JSON.parse(t)}catch{return null}return l2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function b2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function PE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){return e}class xt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||S2}}let cl=null;function A2(t){return!qp(t)||t.length<2?t:PE(t)}function jE(){if(cl)return cl;const t=[];t.push(new xt("bucket")),t.push(new xt("generation")),t.push(new xt("metageneration")),t.push(new xt("name","fullPath",!0));function e(i,o){return A2(o)}const n=new xt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new xt("size");return s.xform=r,t.push(s),t.push(new xt("timeCreated")),t.push(new xt("updated")),t.push(new xt("md5Hash",null,!0)),t.push(new xt("cacheControl",null,!0)),t.push(new xt("contentDisposition",null,!0)),t.push(new xt("contentEncoding",null,!0)),t.push(new xt("contentLanguage",null,!0)),t.push(new xt("contentType",null,!0)),t.push(new xt("metadata","customMetadata",!0)),cl=t,cl}function R2(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Mt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function k2(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return R2(r,t),r}function DE(t,e,n){const r=CE(e);return r===null?null:k2(t,r,n)}function C2(t,e,n,r){const s=CE(e);if(s===null||!qp(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),x=Hp(g,n,r),w=SE({alt:"media",token:d});return x+w})[0]}function P2(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class OE{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LE(t){if(!t)throw zp()}function j2(t,e){function n(r,s){const i=DE(t,s,e);return LE(i!==null),i}return n}function D2(t,e){function n(r,s){const i=DE(t,s,e);return LE(i!==null),C2(i,s,t.host,t._protocol)}return n}function VE(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=KP():s=HP():n.getStatus()===402?s=WP(t.bucket):n.getStatus()===403?s=GP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function O2(t){const e=VE(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=qP(t.path)),i.serverResponse=s.serverResponse,i}return n}function L2(t,e,n){const r=e.fullServerUrl(),s=Hp(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new OE(s,i,D2(t,n),o);return l.errorHandler=O2(e),l}function V2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function M2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=V2(null,e)),r}function F2(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let T="";for(let P=0;P<2;P++)T=T+Math.random().toString().slice(2);return T}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=M2(e,r,s),f=P2(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",x=fr.getBlob(p,r,g);if(x===null)throw e2();const w={name:d.fullPath},A=Hp(i,t.host,t._protocol),R="POST",y=t.maxUploadRetryTime,v=new OE(A,R,j2(t,n),y);return v.urlParams=w,v.headers=o,v.body=x.uploadData(),v.errorHandler=VE(e),v}class U2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ls.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ls.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ls.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw to("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw to("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw to("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw to("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw to("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class B2 extends U2{initXhr(){this.xhr_.responseType="text"}}function ME(){return new B2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(e,n){this._service=e,n instanceof Mt?this._location=n:this._location=Mt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ws(e,n)}get root(){const e=new Mt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return PE(this._location.path)}get storage(){return this._service}get parent(){const e=N2(this._location.path);if(e===null)return null;const n=new Mt(this._location.bucket,e);return new ws(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw r2(e)}}function $2(t,e,n){t._throwIfRoot("uploadBytes");const r=F2(t.storage,t._location,jE(),new fr(e,!0),n);return t.storage.makeRequestWithTokens(r,ME).then(s=>({metadata:s,ref:t}))}function z2(t){t._throwIfRoot("getDownloadURL");const e=L2(t.storage,t._location,jE());return t.storage.makeRequestWithTokens(e,ME).then(n=>{if(n===null)throw t2();return n})}function q2(t,e){const n=b2(t._location.path,e),r=new Mt(t._location.bucket,n);return new ws(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){return/^[A-Za-z]+:\/\//.test(t)}function H2(t,e){return new ws(t,e)}function FE(t,e){if(t instanceof Kp){const n=t;if(n._bucket==null)throw ZP();const r=new ws(n,n._bucket);return e!=null?FE(r,e):r}else return e!==void 0?q2(t,e):t}function K2(t,e){if(e&&W2(e)){if(t instanceof Kp)return H2(t,e);throw Hh("To use ref(service, url), the first argument must be a Storage instance.")}else return FE(t,e)}function kv(t,e){const n=e==null?void 0:e[NE];return n==null?null:Mt.makeFromBucketSpec(n,t)}function G2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:mx(s,t.app.options.projectId))}class Kp{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=IE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$P,this._maxUploadRetryTime=zP,this._requests=new Set,s!=null?this._bucket=Mt.makeFromBucketSpec(s,this._host):this._bucket=kv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Mt.makeFromBucketSpec(this._url,e):this._bucket=kv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Rv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Rv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ws(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new s2(bE());{const o=m2(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Cv="@firebase/storage",Pv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UE="storage";function BE(t,e,n){return t=xe(t),$2(t,e,n)}function $E(t){return t=xe(t),z2(t)}function zE(t,e){return t=xe(t),K2(t,e)}function qE(t=Gf(),e){t=xe(t);const r=$u(t,UE).getImmediate({identifier:e}),s=hx("storage");return s&&Q2(r,...s),r}function Q2(t,e,n,r={}){G2(t,e,n,r)}function Y2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Kp(n,r,s,e,Ns)}function X2(){ps(new jr(UE,Y2,"PUBLIC").setMultipleInstances(!0)),_n(Cv,Pv,""),_n(Cv,Pv,"esm2017")}X2();const J2={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.appspot.com",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},Ea=vx(J2),Ue=UR(Ea),ee=kP(Ea),Z2=qE(Ea,"gs://albayt-sofra.firebasestorage.app"),WE=j.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),ej=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{const u=A1(Ue,async d=>{if(n(d),d){const f=await In(ke(ee,"users",d.uid)),p=f.exists()?f.data().role:null;s(p)}else s(null);o(!1)});return()=>u()},[]);const l=async()=>{await tn(Ue)};return c.jsx(WE.Provider,{value:{user:e,role:r,loading:i,logout:l},children:t})},bt=()=>j.useContext(WE);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tj=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nj=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),jv=t=>{const e=nj(t);return e.charAt(0).toUpperCase()+e.slice(1)},HE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),rj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var sj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ij=j.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>j.createElement("svg",{ref:u,...sj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:HE("lucide",s),...!i&&!rj(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,f])=>j.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wr=(t,e)=>{const n=j.forwardRef(({className:r,...s},i)=>j.createElement(ij,{ref:i,iconNode:e,className:HE(`lucide-${tj(jv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=jv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],aj=Wr("briefcase",oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],uj=Wr("circle-check",lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],dj=Wr("circle-x",cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],fj=Wr("clipboard-list",hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],mj=Wr("clock",pj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],yj=Wr("menu",gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],_j=Wr("settings",vj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xj=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],wj=Wr("utensils",xj),we=({to:t,label:e,onClick:n})=>{const{pathname:r}=Si(),s=r===t;return c.jsx(Tt,{to:t,onClick:n,className:"px-3 py-2 rounded-xl text-sm font-semibold transition-all duration-300 "+(s?"bg-accent text-primary shadow-md scale-105":"text-secondary hover:text-yellow-300 hover:bg-primary/60"),children:e})},Ej=()=>{const{user:t,role:e,logout:n}=bt(),[r,s]=j.useState(!1);return c.jsxs("header",{className:"sticky top-0 bg-gradient-to-r from-primary via-primary/90 to-dark shadow-lg border-b-4 border-accent z-30",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[c.jsx(Tt,{to:"/",className:"text-2xl font-extrabold text-accent flex items-center gap-2 hover:scale-105 transition-transform",children:"🍗 سفرة البيت"}),c.jsxs("nav",{className:"hidden md:flex items-center gap-3",children:[c.jsx(we,{to:"/restaurants",label:"المطاعم"}),c.jsx(we,{to:"/ads",label:"الإعلانات"}),e==="customer"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/cart",label:"🛒 السلة"}),c.jsx(we,{to:"/orders",label:"طلباتي"})]}),e==="owner"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/owner",label:"لوحة المطعم"}),c.jsx(we,{to:"/owner/orders",label:"طلبات المطعم"}),c.jsx(we,{to:"/owner/courier-requests",label:"طلبات المندوبين"})," "]}),e==="courier"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/courier",label:"واجهة المندوب"}),c.jsx(we,{to:"/courier/hiring",label:"طلبات التوظيف"})," "]}),e==="admin"&&c.jsx(we,{to:"/admin/panel",label:"لوحة المشرفات"}),t?c.jsx("button",{onClick:n,className:"px-4 py-2 rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-red-700 to-red-500 hover:scale-105 hover:shadow-md transition-all duration-300",children:"خروج"}):c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/login",label:"دخول"}),c.jsx(we,{to:"/admin/login",label:"دخول المشرفات"})]})]}),c.jsx("button",{className:"md:hidden p-2 rounded-xl hover:bg-primary/40 transition",onClick:()=>s(!r),children:c.jsx(yj,{className:"w-6 h-6 text-accent"})})]}),r&&c.jsxs("div",{className:"md:hidden bg-primary border-t-2 border-accent px-4 py-3 flex flex-col gap-2 text-secondary shadow-inner",children:[c.jsx(we,{to:"/restaurants",label:"المطاعم",onClick:()=>s(!1)}),c.jsx(we,{to:"/ads",label:"الإعلانات",onClick:()=>s(!1)}),e==="customer"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/cart",label:"🛒 السلة",onClick:()=>s(!1)}),c.jsx(we,{to:"/orders",label:"طلباتي",onClick:()=>s(!1)})]}),e==="owner"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/owner",label:"لوحة المطعم",onClick:()=>s(!1)}),c.jsx(we,{to:"/owner/orders",label:"طلبات المطعم",onClick:()=>s(!1)}),c.jsx(we,{to:"/owner/courier-requests",label:"طلبات المندوبين",onClick:()=>s(!1)})]}),e==="courier"&&c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/courier",label:"واجهة المندوب",onClick:()=>s(!1)}),c.jsx(we,{to:"/courier/hiring",label:"طلبات التوظيف",onClick:()=>s(!1)})]}),e==="admin"&&c.jsx(we,{to:"/admin/panel",label:"لوحة المشرفات",onClick:()=>s(!1)}),t?c.jsx("button",{onClick:()=>{n(),s(!1)},className:"mt-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-red-700 to-red-500 hover:scale-105 transition-all duration-300",children:"خروج"}):c.jsxs(c.Fragment,{children:[c.jsx(we,{to:"/login",label:"دخول",onClick:()=>s(!1)}),c.jsx(we,{to:"/admin/login",label:"دخول المشرفات",onClick:()=>s(!1)})]})]})]})},Tj=()=>{const{user:t}=bt(),e=Is(),n=async()=>{if(!(!t||!window.confirm("هل أنت متأكد أنك تريد حذف حسابك نهائيًا؟")))try{await EE(ke(ee,"users",t.uid)),await R1(Ue.currentUser),alert("تم حذف حسابك بنجاح ✅"),e("/account-deleted")}catch(s){console.error("Error deleting account:",s),alert("حدث خطأ أثناء حذف الحساب. يرجى المحاولة لاحقًا.")}};return c.jsx("footer",{className:"bg-[#7b0000] text-yellow-100 text-center py-8 mt-20 border-t-4 border-yellow-500 shadow-[0_-4px_12px_rgba(0,0,0,0.4)]",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 px-3",children:[c.jsxs("p",{className:"text-sm md:text-base font-medium tracking-wide",children:["جميع الحقوق محفوظة © ",new Date().getFullYear()," 🍗"," ",c.jsx("span",{className:"font-bold text-yellow-400",children:"سفرة البيت"})," |",c.jsx(Tt,{to:"/developer",className:"text-yellow-300 hover:text-yellow-200 font-semibold ml-1 transition-all duration-300",children:"المطور"})]}),c.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 w-full",children:[c.jsx(Tt,{to:"/privacy-policy",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-[#4a0000] font-bold px-5 py-2 rounded-full shadow-md hover:scale-105 hover:shadow-lg transition-transform duration-300 whitespace-nowrap w-[170px]",children:"📜 سياسة الخصوصية"}),c.jsx("span",{className:"hidden sm:inline text-yellow-400 text-xl font-bold",children:"|"}),t&&c.jsx("button",{onClick:n,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-red-700 to-red-500 text-white font-semibold px-5 py-2 rounded-full shadow-md hover:scale-105 hover:shadow-lg transition-transform duration-300 whitespace-nowrap w-[170px]",children:"🗑️ حذف حسابي"})]})]})})},Ij=()=>c.jsx("div",{className:"w-full bg-red-600 text-white py-2 overflow-hidden",children:c.jsx("div",{className:"marquee whitespace-nowrap font-bold text-sm",children:'"جوعان؟ 🤤 اطلب أكلك من سفرة البيت ونوصل أكلك لين باب بيتك!"'})}),Dv="broast_cart",dl=1.15;function Gp(){const[t,e]=j.useState(()=>{try{const p=localStorage.getItem(Dv);return p?JSON.parse(p):[]}catch{return[]}});j.useEffect(()=>{localStorage.setItem(Dv,JSON.stringify(t))},[t]);const n=(p,g=1)=>{e(x=>{const w=x.findIndex(A=>A.id===p.id);if(w>=0){const A=[...x];return A[w]={...A[w],qty:A[w].qty+g,ownerId:p.ownerId??A[w].ownerId},A}return[...x,{...p,qty:g}]})},r=p=>e(g=>g.filter(x=>x.id!==p)),s=(p,g)=>e(x=>x.map(w=>w.id===p?{...w,qty:g}:w)),i=()=>e([]),o=t.reduce((p,g)=>p+g.price*g.qty,0),l=t.reduce((p,g)=>p+dl*g.qty,0),u=o+l;return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:o,totalWithFees:u,applicationFeePerItem:dl,applicationFeeTotal:l,getItemTotalWithFees:p=>(p.price+dl)*p.qty,getUnitPriceWithFees:p=>p+dl}}const Nj=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0),{add:s,subtotal:i,items:o,applicationFeePerItem:l,getUnitPriceWithFees:u,totalWithFees:d}=Gp(),{role:f}=bt();j.useEffect(()=>{(async()=>{const w=Ut(Oe(ee,"menuItems"),Vr("available","==",!0)),R=(await bn(w)).docs.map(v=>({id:v.id,...v.data()})),y=await Promise.all(R.map(async v=>{if(!v.ownerId)return v;const T=await In(ke(ee,"restaurants",v.ownerId));return T.exists()?{...v,restaurant:T.data()}:v}));e(y),r(!1)})()},[]);const p=t.filter(w=>w.featured),g=p.length>0?p:t.slice(0,4),x=w=>{var R;if(!w.ownerId){alert("⚠️ الصنف غير مرتبط بمطعم (ownerId مفقود)");return}const A=(R=o[0])==null?void 0:R.ownerId;if(A&&A!==w.ownerId){alert("⚠️ لا يمكن إضافة منتجات من أكثر من مطعم في نفس الطلب");return}s({id:w.id,name:w.name,price:w.price,ownerId:w.ownerId})};return n?c.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"⏳ جارِ تحميل القائمة..."}):c.jsxs("div",{className:"py-10",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"🍗 قائمة الأصناف"}),g.length>0&&c.jsxs("section",{className:"mb-10",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"⭐ المنتجات المميزة"}),c.jsx("span",{className:"text-sm text-gray-300",children:"يتم تحديث هذه القائمة بناءً على اختيارات المشرفات وأداء الطلبات"})]}),c.jsx("div",{className:"grid md:grid-cols-2 xl:grid-cols-4 gap-4",children:g.map(w=>c.jsxs("article",{className:"relative overflow-hidden rounded-3xl bg-gradient-to-br from-yellow-500/20 via-accent/20 to-yellow-500/10 border border-yellow-400/40 shadow-lg",children:[c.jsx("div",{className:"absolute top-3 left-3 bg-yellow-400 text-black text-xs font-bold px-3 py-1 rounded-full shadow",children:"مميز"}),c.jsx("div",{className:"h-40 w-full overflow-hidden",children:w.imageUrl?c.jsx("img",{src:w.imageUrl,alt:w.name,className:"h-full w-full object-cover transition-transform duration-500 hover:scale-105"}):c.jsx("div",{className:"h-full flex items-center justify-center text-yellow-200 text-4xl",children:"🍽️"})}),c.jsxs("div",{className:"p-4 space-y-2",children:[c.jsxs("div",{className:"flex items-center justify-between gap-2",children:[c.jsx("h3",{className:"text-lg font-bold text-white line-clamp-1",children:w.name}),c.jsxs("span",{className:"text-sm text-yellow-300 font-semibold",children:[u(w.price).toFixed(2)," ر.س"]})]}),w.desc&&c.jsx("p",{className:"text-sm text-gray-200 line-clamp-2",children:w.desc}),w.restaurant&&c.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-300",children:[w.restaurant.logoUrl?c.jsx("img",{src:w.restaurant.logoUrl,alt:w.restaurant.name,className:"w-6 h-6 rounded-full border border-yellow-300/60 object-cover"}):c.jsx("span",{className:"w-6 h-6 flex items-center justify-center rounded-full bg-yellow-400/20 text-yellow-200 text-base",children:"🍴"}),c.jsx("span",{children:w.restaurant.name})]})]})]},`featured-${w.id}`))})]}),t.length===0&&c.jsx("div",{className:"text-center text-gray-400",children:"😔 لا توجد أصناف حالياً"}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(w=>c.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[w.restaurant&&c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[w.restaurant.logoUrl?c.jsx("img",{src:w.restaurant.logoUrl,alt:w.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):c.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:"🍴"}),c.jsx("span",{className:"font-semibold",children:w.restaurant.name})]}),c.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:w.imageUrl?c.jsx("img",{src:w.imageUrl,alt:w.name,className:"w-full h-full object-cover rounded-xl"}):c.jsx("span",{className:"text-gray-400",children:"بدون صورة"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:w.name}),w.desc&&c.jsx("p",{className:"text-sm text-gray-300 mt-1",children:w.desc})]}),c.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[c.jsxs("div",{className:"flex flex-col",children:[c.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[u(w.price).toFixed(2)," ر.س"]}),c.jsxs("span",{className:"text-xs text-gray-300",children:["السعر الأصلي ",w.price.toFixed(2)," ر.س + رسوم التشغيل ",l.toFixed(2)," ر.س"]})]}),f==="customer"&&c.jsx("button",{onClick:()=>x(w),disabled:!w.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${w.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"🛒 أضف للسلة"})]})]},w.id))}),i>0&&f==="customer"&&c.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2",children:[c.jsxs(Tt,{to:"/checkout",className:"px-6 py-3 rounded-full bg-yellow-500 text-black shadow-xl font-bold hover:bg-yellow-600 transition",children:["إتمام الطلب • المجموع: ",d.toFixed(2)," ر.س"]}),c.jsxs("div",{className:"mt-1 text-center text-xs text-gray-200",children:["يشمل رسوم تشغيل التطبيق (",l.toFixed(2)," ر.س لكل منتج)"]})]})]})},Ov=t=>{const e=[t.accountType,t.ownerType].find(n=>typeof n=="string");return e?e.trim().toLowerCase():""},bj=t=>([t.freelancerCertificate,t.freelanceCertificate].find(n=>typeof n=="string")||"").trim(),Sj=t=>([t.commercialRegistration,t.crNumber].find(n=>typeof n=="string")||"").trim(),Aj=["family","productive-family","productive_family","productive"],Rj=["restaurant","resturant","commercial"],Qp=({defaultMode:t="general"})=>{const e=Is(),[n,r]=j.useState(t),[s,i]=j.useState(""),[o,l]=j.useState(""),[u,d]=j.useState(!1),[f,p]=j.useState(null),[g,x]=j.useState(""),[w,A]=j.useState(""),[R,y]=j.useState(""),[v,T]=j.useState(!1),[P,O]=j.useState(null),[M,N]=j.useState(""),[E,b]=j.useState(""),[I,k]=j.useState(""),[C,S]=j.useState(!1),[qe,gt]=j.useState(null);j.useEffect(()=>{r(t)},[t]);const qt=j.useMemo(()=>[{id:"general",title:"العملاء والمندوبين",subtitle:"دخولك المعتاد لحساب العميل أو المندوب."},{id:"family",title:"الأسر المنتجة",subtitle:"دخول خاص بالأسر المنتجة مع التحقق من شهادة العمل الحر."},{id:"restaurant",title:"المطاعم",subtitle:"دخول أصحاب المطاعم مع التحقق من السجل التجاري."}],[]),yt=()=>{p(null),O(null),gt(null)},$=async H=>{H.preventDefault(),p(null),d(!0);try{const de=(await Al(Ue,s.trim(),o)).user.uid,Se=await In(ke(ee,"users",de));if(!Se.exists())throw await tn(Ue),new Error("⚠️ الحساب موجود في النظام ولكن لا توجد له بيانات في السجلات الداخلية.");switch(Se.data().role){case"owner":e("/owner");break;case"courier":e("/courier");break;case"admin":e("/admin/panel");break;default:e("/")}}catch(te){const de=te instanceof Error&&te.message?te.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";p(de)}finally{d(!1)}},Q=async H=>{H.preventDefault();const te=R.trim();if(!te){O("الرجاء إدخال رقم شهادة العمل الحر المعتمدة.");return}O(null),T(!0);try{const de=await Al(Ue,g.trim(),w),Se=ke(ee,"users",de.user.uid),rt=await In(Se);if(!rt.exists())throw await tn(Ue),new Error("تعذّر العثور على بيانات الحساب. يرجى التواصل مع الدعم.");const Ge=rt.data();if(Ge.role!=="owner")throw await tn(Ue),new Error("هذا الحساب غير مسجل كحساب أسرة منتجة.");const Hr=Ov(Ge);if(Hr&&!Aj.includes(Hr))throw await tn(Ue),new Error("هذا الحساب مسجل كنوع مختلف. استخدمي الوضع المناسب للحساب.");const An=bj(Ge);if(An&&An!==te)throw await tn(Ue),new Error("رقم شهادة العمل الحر غير مطابق للسجل لدينا.");An||await ra(Se,{accountType:"family",freelancerCertificate:te},{merge:!0}),e("/owner",{replace:!0})}catch(de){const Se=de instanceof Error&&de.message?de.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";O(Se)}finally{T(!1)}},Z=async H=>{H.preventDefault();const te=I.trim();if(!te){gt("الرجاء إدخال رقم السجل التجاري المرتبط بالحساب.");return}gt(null),S(!0);try{const de=await Al(Ue,M.trim(),E),Se=ke(ee,"users",de.user.uid),rt=await In(Se);if(!rt.exists())throw await tn(Ue),new Error("تعذّر العثور على بيانات الحساب. يرجى التواصل مع الدعم.");const Ge=rt.data();if(Ge.role!=="owner")throw await tn(Ue),new Error("هذا الحساب غير مسجل كحساب مطعم.");const Hr=Ov(Ge);if(Hr&&!Rj.includes(Hr))throw await tn(Ue),new Error("هذا الحساب مسجل كنوع مختلف. استخدم الوضع المناسب للحساب.");const An=Sj(Ge);if(An&&An!==te)throw await tn(Ue),new Error("رقم السجل التجاري غير مطابق للسجل لدينا.");An||await ra(Se,{accountType:"restaurant",commercialRegistration:te},{merge:!0}),e("/owner",{replace:!0})}catch(de){const Se=de instanceof Error&&de.message?de.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";gt(Se)}finally{S(!1)}},pe=()=>{switch(n){case"family":return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-amber-300/70",children:"برنامج الأسر المنتجة"}),c.jsx("h2",{className:"text-3xl font-extrabold text-amber-200",children:"تسجيل دخول الأسر المنتجة"}),c.jsx("p",{className:"text-sm text-amber-100/80",children:"استخدمي بيانات الدخول الخاصة بك وأدخلي رقم شهادة العمل الحر للتحقق."})]}),P&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:P}),c.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-email",className:"block text-sm font-medium text-amber-100/90",children:"البريد الإلكتروني المسجل"}),c.jsx("input",{id:"family-email",type:"email",autoComplete:"email",required:!0,value:g,onChange:H=>x(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:v})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-password",className:"block text-sm font-medium text-amber-100/90",children:"كلمة المرور"}),c.jsx("input",{id:"family-password",type:"password",autoComplete:"current-password",required:!0,value:w,onChange:H=>A(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:v})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-certificate",className:"block text-sm font-medium text-amber-100/90",children:"رقم شهادة العمل الحر"}),c.jsx("input",{id:"family-certificate",type:"text",inputMode:"numeric",autoComplete:"off",value:R,onChange:H=>y(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:v}),c.jsx("p",{className:"text-xs text-amber-100/70",children:"يمكنك العثور على الرقم في شهادة العمل الحر الصادرة من منصة العمل الحر."})]}),c.jsx("button",{type:"submit",disabled:v,className:"w-full rounded-2xl bg-amber-300/90 py-3 text-base font-semibold text-[#2c1b17] shadow-lg transition hover:bg-amber-200 focus:outline-none focus:ring-2 focus:ring-amber-400/70 disabled:cursor-not-allowed disabled:opacity-70",children:v?"جارٍ التحقق...":"تسجيل الدخول"})]})]});case"restaurant":return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-sky-300/70",children:"منصة المطاعم"}),c.jsx("h2",{className:"text-3xl font-extrabold text-sky-200",children:"تسجيل دخول المطاعم"}),c.jsx("p",{className:"text-sm text-sky-100/80",children:"أدخل بيانات حساب المطعم مع رقم السجل التجاري للتحقق من الهوية."})]}),qe&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:qe}),c.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-email",className:"block text-sm font-medium text-sky-100/90",children:"البريد الإلكتروني للمطعم"}),c.jsx("input",{id:"restaurant-email",type:"email",autoComplete:"email",required:!0,value:M,onChange:H=>N(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:C})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-password",className:"block text-sm font-medium text-sky-100/90",children:"كلمة المرور"}),c.jsx("input",{id:"restaurant-password",type:"password",autoComplete:"current-password",required:!0,value:E,onChange:H=>b(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:C})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-cr",className:"block text-sm font-medium text-sky-100/90",children:"رقم السجل التجاري"}),c.jsx("input",{id:"restaurant-cr",type:"text",inputMode:"numeric",autoComplete:"off",value:I,onChange:H=>k(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:C}),c.jsx("p",{className:"text-xs text-sky-100/70",children:"أدخل الرقم كما هو مسجل في وزارة التجارة."})]}),c.jsx("button",{type:"submit",disabled:C,className:"w-full rounded-2xl bg-sky-300/90 py-3 text-base font-semibold text-[#102026] shadow-lg transition hover:bg-sky-200 focus:outline-none focus:ring-2 focus:ring-sky-400/70 disabled:cursor-not-allowed disabled:opacity-70",children:C?"جارٍ التحقق...":"تسجيل الدخول"})]})]});default:return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-accent",children:"دخول العملاء والمندوبين"}),c.jsx("p",{className:"text-sm text-secondary/80",children:"سجّل دخولك باستخدام البريد الإلكتروني وكلمة المرور لاستكمال طلباتك."})]}),f&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:f}),c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsx("input",{type:"email",placeholder:"الإيميل",className:"w-full rounded-xl border border-accent/30 bg-[#3c211c] p-3 text-secondary placeholder-[#f8deb0b3] focus:outline-none focus:ring-2 focus:ring-accent",value:s,onChange:H=>i(H.target.value),disabled:u,required:!0,autoComplete:"email"}),c.jsx("input",{type:"password",placeholder:"كلمة المرور",className:"w-full rounded-xl border border-accent/30 bg-[#3c211c] p-3 text-secondary placeholder-[#f8deb0b3] focus:outline-none focus:ring-2 focus:ring-accent",value:o,onChange:H=>l(H.target.value),disabled:u,required:!0,autoComplete:"current-password"}),c.jsx("button",{disabled:u,className:"w-full rounded-xl bg-accent p-3 font-bold text-primary shadow-lg transition hover:scale-105 hover:bg-[#d3a442] disabled:cursor-not-allowed disabled:opacity-70",children:u?"جارٍ الدخول...":"دخول"})]}),c.jsxs("p",{className:"mt-6 text-center text-sm text-secondary/80",children:["ليس لديك حساب؟"," ",c.jsx(Tt,{className:"font-semibold text-accent hover:text-[#e0b861]",to:"/register",children:"سجّل الآن"})]})]})}};return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-10 bg-gradient-to-br from-primary via-dark to-[#3a1a1a] px-4 py-16",children:[c.jsx("section",{className:"w-full max-w-4xl space-y-6",children:c.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:qt.map(H=>{const te=n===H.id,de=H.id==="family"?"border-amber-200/30 bg-[rgba(39,22,19,0.88)] text-amber-50 hover:border-amber-300 hover:shadow-amber-500/30":H.id==="restaurant"?"border-sky-200/30 bg-[rgba(12,24,30,0.9)] text-sky-50 hover:border-sky-300 hover:shadow-sky-500/30":"border-accent/30 bg-[rgba(43,26,22,0.85)] text-secondary hover:border-accent hover:shadow-amber-400/30";return c.jsxs("button",{type:"button",onClick:()=>{yt(),r(H.id)},className:`group flex flex-col justify-between rounded-3xl border p-5 text-right shadow-xl transition focus:outline-none focus:ring-2 focus:ring-accent/60 ${de} ${te?"ring-2 ring-accent/60":"opacity-80 hover:opacity-100"}`,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:H.title}),c.jsx("p",{className:"text-sm opacity-80",children:H.subtitle})]}),c.jsx("span",{className:`mt-4 inline-flex items-center justify-center rounded-2xl px-5 py-2 text-sm font-semibold transition ${H.id==="family"?"bg-amber-300/90 text-[#2c1b17]":H.id==="restaurant"?"bg-sky-300/90 text-[#102026]":"bg-accent text-primary"} ${te?"":"group-hover:scale-105 group-hover:brightness-110"}`,children:te?"الوضع الحالي":"اختيار"})]},H.id)})})}),c.jsx("div",{className:`w-full max-w-xl rounded-3xl border p-8 shadow-2xl backdrop-blur-xl ${n==="family"?"border-amber-200/30 bg-[rgba(39,22,19,0.88)] text-amber-50":n==="restaurant"?"border-sky-200/30 bg-[rgba(12,24,30,0.9)] text-sky-50":"border-accent/30 bg-[rgba(43,26,22,0.85)] text-secondary"}`,children:pe()})]})},kj=()=>{const[t,e]=j.useState(""),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(""),[u,d]=j.useState(""),[f,p]=j.useState(!1),g=Is(),x=async w=>{if(w.preventDefault(),!u)return alert("اختر نوع الحساب");if(u==="owner"&&!o)return alert("أدخل اسم المطعم");p(!0);try{const A=await Wx(Ue,t,n);await ra(ke(ee,"users",A.user.uid),{name:s,email:t,role:u,restaurantName:u==="owner"?o:null}),g("/")}catch(A){alert(A.message)}finally{p(!1)}};return c.jsxs("div",{className:"max-w-md mx-auto bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 rounded-2xl shadow-xl p-6 text-white",children:[c.jsx("h1",{className:"text-xl font-bold mb-4 text-center",children:"إنشاء حساب"}),c.jsxs("form",{onSubmit:x,className:"space-y-3",children:[c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"الاسم",value:s,onChange:w=>i(w.target.value)}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"الإيميل",value:t,onChange:w=>e(w.target.value)}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"كلمة المرور",type:"password",value:n,onChange:w=>r(w.target.value)}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="customer"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"customer",className:"hidden",onChange:()=>d("customer")})," عميل"]}),c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="courier"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"courier",className:"hidden",onChange:()=>d("courier")})," مندوب"]}),c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="owner"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"owner",className:"hidden",onChange:()=>d("owner")})," صاحب المطعم"]})]}),u==="owner"&&c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"اسم المطعم",value:o,onChange:w=>l(w.target.value)}),c.jsx("button",{disabled:f,className:"w-full rounded-xl p-3 bg-yellow-500 text-black font-bold hover:bg-yellow-600 transition",children:f?"...":"تسجيل"})]})]})},en=({allow:t,children:e})=>{const{role:n,loading:r}=bt();return r?c.jsx("div",{className:"p-8 text-center",children:"جارِ التحميل..."}):!n||!t.includes(n)?c.jsx(ax,{to:"/",replace:!0}):c.jsx(c.Fragment,{children:e})},Cj=()=>{const{items:t,subtotal:e,clear:n,applicationFeePerItem:r,applicationFeeTotal:s,getItemTotalWithFees:i,getUnitPriceWithFees:o,totalWithFees:l}=Gp(),{user:u}=bt(),d=Is(),[f,p]=j.useState(""),[g,x]=j.useState(!1),[w,A]=j.useState(null),[R,y]=j.useState(null),v=7,T=.15,P=+(e*T).toFixed(2),O=e+P+s,M=O+v,N=t.reduce((I,k)=>I+k.qty,0);j.useEffect(()=>{(async()=>{var qe,gt;if(t.length===0)return;let k=(qe=t[0])==null?void 0:qe.ownerId;if(!k&&((gt=t[0])!=null&&gt.id))try{const qt=await In(ke(ee,"menuItems",t[0].id)),yt=qt.exists()?qt.data():null;k=(yt==null?void 0:yt.ownerId)||null}catch(qt){console.error("خطأ في جلب بيانات الصنف:",qt)}if(!k){A(null);return}const C=await In(ke(ee,"restaurants",k)),S=C.exists()?C.data():null;A({id:k,name:(S==null?void 0:S.name)||"مطعم"})})()},[t]);const E=()=>{if(!navigator.geolocation)return alert("المتصفح لا يدعم تحديد الموقع");navigator.geolocation.getCurrentPosition(I=>{console.log("📍 موقعك الحالي:",I.coords),y({lat:I.coords.latitude,lng:I.coords.longitude})},I=>{console.error("خطأ في تحديد الموقع:",I),alert("تعذر تحديد الموقع. تأكد من منح إذن الوصول للموقع.")},{enableHighAccuracy:!0})},b=async()=>{var k;if(!u)return;if(t.length===0)return alert("السلة فارغة");if(!f)return alert("أدخل العنوان");if(!R)return alert("حدّد موقعك على الخريطة");let I=w==null?void 0:w.id;if(!I&&((k=t[0])!=null&&k.id)){const C=await In(ke(ee,"menuItems",t[0].id)),S=C.exists()?C.data():null;I=(S==null?void 0:S.ownerId)||null}if(!I){alert("تعذر تحديد المطعم للطلب. أعد الإضافة من القائمة.");return}x(!0),await dc(Oe(ee,"orders"),{customerId:u.uid,restaurantId:I,restaurantName:(w==null?void 0:w.name)||"مطعم",items:t.map(C=>({id:C.id,name:C.name,price:C.price,priceWithFee:o(C.price),qty:C.qty,ownerId:C.ownerId??I})),subtotal:e,deliveryFee:v,total:M,commissionRate:T,commissionAmount:P,totalBeforeDelivery:O,applicationFeePerItem:r,applicationFeeTotal:s,restaurantPayout:e,applicationShare:P,status:"pending",address:f,location:R,createdAt:xs(),updatedAt:xs(),paymentMethod:"cod"}),n(),x(!1),d("/orders")};return c.jsx(en,{allow:["customer"],children:c.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-gray-900",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"إتمام الطلب"}),c.jsx("div",{className:"border rounded-xl p-3 text-gray-800",children:t.map(I=>c.jsxs("div",{className:"flex flex-col gap-1 py-2 border-b last:border-b-0",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{children:[I.name," × ",I.qty]}),c.jsxs("span",{className:"font-semibold",children:[i(I).toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-[11px] text-gray-500",children:[c.jsx("span",{children:"لكل وجبة"}),c.jsxs("span",{children:[o(I.price).toFixed(2)," ر.س = ",I.price.toFixed(2)," ر.س + ",r.toFixed(2)," ر.س رسوم"]})]})]},I.id))}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-gray-900 placeholder-gray-500 mt-3",placeholder:"العنوان التفصيلي",value:f,onChange:I=>p(I.target.value)}),c.jsx("button",{onClick:E,className:"w-full mt-3 rounded-xl p-3 bg-blue-600 text-white font-semibold hover:bg-blue-700",children:"📍 تحديد موقعي الحالي"}),R&&c.jsx("iframe",{title:"خريطة الموقع",width:"100%",height:"250",style:{borderRadius:"12px",marginTop:"10px"},loading:"lazy",allowFullScreen:!0,src:`https://maps.google.com/maps?hl=ar&q=${R.lat},${R.lng}&z=15&output=embed`}),c.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-800 mt-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"المجموع الأساسي"}),c.jsxs("span",{children:[e.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsxs("span",{children:["رسوم تشغيل التطبيق (",r.toFixed(2)," ر.س × ",N,")"]}),c.jsxs("span",{children:[s.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"ضريبة التطبيق (15٪)"}),c.jsxs("span",{children:[P.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"رسوم التوصيل"}),c.jsxs("span",{children:[v.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"مجموع الوجبات بعد رسوم التشغيل"}),c.jsxs("span",{children:[l.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between font-bold text-lg mt-1 text-gray-900",children:[c.jsx("span",{children:"الإجمالي"}),c.jsxs("span",{children:[M.toFixed(2)," ر.س"]})]}),c.jsxs("p",{className:"text-[11px] text-gray-500 mt-2",children:["يصل للمطعم ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[e.toFixed(2)," ر.س"]}),"، وتُضاف ضريبة التطبيق آلياً بقيمة ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[P.toFixed(2)," ر.س"]}),"، بالإضافة إلى رسوم تشغيل التطبيق ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[s.toFixed(2)," ر.س"]})," لحساب المنصة."]})]}),c.jsx("button",{disabled:g,onClick:b,className:"w-full rounded-xl p-3 bg-green-600 hover:bg-green-700 text-white font-bold mt-3",children:g?"...":"تأكيد الطلب (دفع عند الاستلام)"})]})})},Pj=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState(null),[i,o]=j.useState(null);j.useEffect(()=>{if(!t)return;s(null),o(null);const u=Ut(Oe(ee,"orders"),Vr("customerId","==",t.uid),kr("createdAt","desc")),d=as(u,f=>{n(f.docs.map(p=>({id:p.id,...p.data()}))),s(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),s("⚠️ احتمال تحتاج Composite Index لـ customerId + createdAt. بنعرض البيانات بدون ترتيب مؤقتًا.");const p=Ut(Oe(ee,"orders"),Vr("customerId","==",t.uid)),x=(await bn(p)).docs.map(R=>({id:R.id,...R.data()})),w=Ut(Oe(ee,"orders"),kr("createdAt","desc"),yE(5));let A=[];try{A=(await bn(w)).docs.map(y=>{var T,P,O,M;const v=y.data();return{id:y.id,customerId:v.customerId,restaurantId:v.restaurantId,createdAt:((M=(O=(P=(T=v.createdAt)==null?void 0:T.toDate)==null?void 0:P.call(T))==null?void 0:O.toISOString)==null?void 0:M.call(O))??null}})}catch{}o({uid:t.uid,fallbackCount:x.length,sample:A}),n(x)});return()=>d()},[t]);const l=u=>({pending:"قيد المراجعة",accepted:"تم القبول",preparing:"قيد التحضير",ready:"جاهز للتسليم",out_for_delivery:"في الطريق",delivered:"تم التسليم",cancelled:"ملغي"})[u]||u;return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h1",{className:"text-xl font-bold",children:"طلباتي"}),r&&c.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[r,i&&c.jsxs("div",{className:"mt-1",children:[c.jsxs("div",{children:["UID: ",c.jsx("b",{children:i.uid})]}),c.jsxs("div",{children:["عدد نتائج الفولبّاك: ",c.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&c.jsxs("div",{className:"mt-1",children:[c.jsx("div",{className:"font-semibold",children:"عينة (أحدث 5):"}),i.sample.map(u=>c.jsxs("div",{className:"truncate",children:["#",u.id," • customerId: ",String(u.customerId)," • restaurantId: ",String(u.restaurantId)," • createdAt: ",u.createdAt||"—"]},u.id))]})]})]}),e.map(u=>{var y;const d=Number(u.deliveryFee??0),f=Number(u.restaurantPayout??u.subtotal??0),p=Number(u.commissionRate??.15),g=u.applicationShare??u.commissionAmount??(Number.isFinite(f)?+(f*p).toFixed(2):0),x=Number(g),w=Number.isFinite(f)&&Number.isFinite(x)&&Number.isFinite(d)?f+x+d:0,A=Number(u.total??w),R=v=>Number.isFinite(v)?v.toFixed(2):"0.00";return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"font-bold",children:["طلب #",u.id.slice(-6)]}),c.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:l(u.status)})]}),u.restaurantName&&c.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:["المطعم: ",u.restaurantName]}),c.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(y=u.items)==null?void 0:y.map(v=>`${v.name}×${v.qty}`).join(" • ")}),c.jsxs("div",{className:"mt-2 font-bold",children:["الإجمالي المدفوع: ",R(A)," ر.س"]}),c.jsxs("div",{className:"mt-1 text-xs text-gray-500 leading-relaxed",children:["يشمل حصة المطعم بقيمة ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[R(f)," ر.س"]})," ","وضريبة التطبيق بنسبة 15٪ بمبلغ"," ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[R(x)," ر.س"]})," بالإضافة إلى رسوم التوصيل"," ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[R(d)," ر.س"]}),"."]})]},u.id)}),e.length===0&&!r&&c.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات حتى الآن."})]})},jj=()=>{const t=[{to:"/owner/menu",title:"إدارة القائمة",desc:"إضافة، تعديل أو إخفاء الأصناف والوجبات.",icon:c.jsx(wj,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:"إدارة الطلبات",desc:"قبول الطلبات، تحديث الحالة، وتعيين المندوب.",icon:c.jsx(fj,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"تعديل بيانات المطعم",desc:"تغيير الاسم، رقم الجوال، المدينة والموقع.",icon:c.jsx(_j,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>c.jsxs(Tt,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,c.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),c.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},Dj=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState({name:"",desc:"",price:0,available:!0}),l=qE(Ea,"gs://albayt-sofra.firebasestorage.app"),u=async()=>{if(!t)return;const g=Ut(Oe(ee,"menuItems"),Vr("ownerId","==",t.uid)),x=await bn(g);n(x.docs.map(w=>({id:w.id,...w.data()}))),s(!1)};j.useEffect(()=>{u()},[t]);const d=async g=>{if(g.preventDefault(),!t)return alert("⚠️ لازم تسجل دخول أول");let x={...i,price:Number(i.price),ownerId:t.uid};if(i.file){const w=i.file,A=zE(l,"menuImages/"+Date.now()+"_"+w.name);await BE(A,w),x.imageUrl=await $E(A)}delete x.file,await dc(Oe(ee,"menuItems"),x),o({name:"",desc:"",price:0,available:!0}),u()},f=async(g,x)=>{g&&(await wi(ke(ee,"menuItems",g),{available:!x}),u())},p=async g=>{g&&confirm("حذف الصنف نهائيًا؟")&&(await EE(ke(ee,"menuItems",g)),u())};return r?c.jsx("div",{children:"جارِ تحميل الأصناف..."}):c.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[c.jsxs("form",{onSubmit:d,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[c.jsx("h2",{className:"text-lg font-bold",children:"إضافة صنف"}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"اسم الصنف",value:i.name,onChange:g=>o({...i,name:g.target.value})}),c.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"الوصف (اختياري)",value:i.desc,onChange:g=>o({...i,desc:g.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"السعر",type:"number",value:i.price,onChange:g=>o({...i,price:Number(g.target.value)})}),c.jsx("input",{className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:g=>{var x;return o({...i,file:(x=g.target.files)==null?void 0:x[0]})}}),c.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:i.available,onChange:g=>o({...i,available:g.target.checked})}),"متاح"]}),c.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white",children:"حفظ"})]}),c.jsxs("div",{className:"space-y-3",children:[e.map(g=>{var x,w;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[c.jsx("img",{src:g.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:A=>{A.currentTarget.style.display="none"}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold",children:g.name}),c.jsx("div",{className:"text-sm text-gray-600",children:g.desc}),c.jsxs("div",{className:"font-semibold mt-1",children:[(w=(x=g.price)==null?void 0:x.toFixed)==null?void 0:w.call(x,2)," ر.س"]})]}),c.jsx("button",{onClick:()=>f(g.id,g.available),className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white",children:g.available?"تعطيل":"تفعيل"}),c.jsx("button",{onClick:()=>p(g.id),className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white",children:"حذف"})]},g.id)}),e.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا توجد أصناف بعد."})]})]})},Lv=t=>({pending:"⏳ قيد المراجعة",accepted:"✅ تم القبول",preparing:"👨‍🍳 قيد التحضير",ready:"📦 جاهز",out_for_delivery:"🚚 في الطريق",delivered:"🎉 تم التسليم",cancelled:"❌ ملغي"})[t]||t,Oj=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},Lj=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState(null),i=j.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);j.useEffect(()=>{if(!i)return;s(null);const l=as(Oe(ee,"orders"),u=>{const f=u.docs.map(p=>({id:p.id,...p.data()})).filter(p=>{var w,A;const g=p.restaurantId===i,x=((A=(w=p==null?void 0:p.items)==null?void 0:w[0])==null?void 0:A.ownerId)===i;return g||x});f.sort((p,g)=>{var A,R,y,v;const x=((R=(A=p.createdAt)==null?void 0:A.toMillis)==null?void 0:R.call(A))??0;return(((v=(y=g.createdAt)==null?void 0:y.toMillis)==null?void 0:v.call(y))??0)-x}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("حدثت مشكلة في جلب الطلبات.")});return()=>l()},[i]);const o=async(l,u)=>{await wi(ke(ee,"orders",l),{status:u,updatedAt:xs()})};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"📋 إدارة الطلبات"}),r&&c.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(l=>{var R;const u=Number(l.deliveryFee??0),d=Number(l.restaurantPayout??l.subtotal??0),f=Number(l.commissionRate??.15),p=l.applicationShare??l.commissionAmount??(Number.isFinite(d)?+(d*f).toFixed(2):0),g=Number(p),x=Number.isFinite(d)&&Number.isFinite(g)&&Number.isFinite(u)?d+g+u:0,w=Number(l.total??x),A=y=>Number.isFinite(y)?y.toFixed(2):"0.00";return c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[c.jsxs("div",{className:"font-bold text-lg",children:["طلب #",l.id.slice(-6),c.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(R=l.items)==null?void 0:R.map(y=>`${y.name}×${y.qty}`).join(" • ")})]}),c.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[A(w)," ر.س"]})]}),c.jsxs("div",{className:"grid gap-3 sm:grid-cols-3 text-sm text-gray-700",children:[c.jsxs("div",{className:"rounded-xl bg-yellow-50 border border-yellow-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"حصة المطعم"}),c.jsxs("p",{className:"text-base font-semibold text-primary",children:[A(d)," ر.س"]})]}),c.jsxs("div",{className:"rounded-xl bg-rose-50 border border-rose-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"ضريبة التطبيق (15٪)"}),c.jsxs("p",{className:"text-base font-semibold text-rose-600",children:[A(g)," ر.س"]})]}),c.jsxs("div",{className:"rounded-xl bg-emerald-50 border border-emerald-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"رسوم التوصيل"}),c.jsxs("p",{className:"text-base font-semibold text-emerald-600",children:[A(u)," ر.س"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-semibold",children:"الحالة:"}),c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${Oj(l.status)}`,children:Lv(l.status||"pending")})]}),c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"العنوان:"})," ",l.address]}),l.location&&c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"📍 موقع العميل:"}),c.jsx("iframe",{title:`map-${l.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${l.location.lat},${l.location.lng}&hl=ar&z=15&output=embed`})]}),c.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(y=>c.jsx("button",{onClick:()=>o(l.id,y),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:Lv(y)},y))})]},l.id)}),e.length===0&&!r&&c.jsx("div",{className:"text-gray-400 text-center text-lg",children:"🚫 لا توجد طلبات حالياً."})]})},Vj=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState([]);j.useEffect(()=>{const l=Ut(Oe(ee,"orders"),Vr("status","in",["ready"]),kr("createdAt","desc")),u=as(l,p=>n(p.docs.map(g=>({id:g.id,...g.data()})))),d=Ut(Oe(ee,"orders"),Vr("courierId","==",(t==null?void 0:t.uid)||""),kr("createdAt","desc")),f=as(d,p=>s(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async l=>{t&&await wi(ke(ee,"orders",l),{courierId:t.uid,status:"out_for_delivery",updatedAt:new Date})},o=async l=>{await wi(ke(ee,"orders",l),{status:"delivered",updatedAt:new Date})};return c.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold mb-3",children:"طلبات جاهزة للتسليم"}),c.jsxs("div",{className:"space-y-3",children:[e.map(l=>{var u,d;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6)," • ",(d=(u=l.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ر.س"]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["العنوان: ",l.address]}),c.jsx("button",{onClick:()=>i(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:"استلام الطلب"})]},l.id)}),e.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات جاهزة الآن."})]})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold mb-3",children:"طلباتي"}),c.jsxs("div",{className:"space-y-3",children:[r.map(l=>{var u,d;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6)," • ",(d=(u=l.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ر.س"]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["العنوان: ",l.address]}),c.jsx("button",{onClick:()=>o(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:"تم التسليم"})]},l.id)}),r.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا يوجد لديك طلبات حالياً."})]})]})]})},Mj=t=>{if(t&&typeof t=="object"){const e=t;switch(e.code){case"auth/invalid-credential":case"auth/wrong-password":return"بيانات الدخول غير صحيحة.";case"auth/user-not-found":return"لا يوجد حساب مشرفة مرتبط بهذا البريد الإلكتروني.";case"auth/email-already-in-use":return"هذا البريد الإلكتروني مرتبط بحساب آخر بالفعل.";case"auth/weak-password":return"الرجاء اختيار كلمة مرور أقوى (٦ أحرف على الأقل).";default:if(e.message&&e.message.trim().length>0)return e.message}}return t instanceof Error&&t.message.trim().length>0?t.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً."},Fj=()=>{const[t,e]=j.useState("login"),[n,r]=j.useState(""),[s,i]=j.useState(""),[o,l]=j.useState(""),[u,d]=j.useState(!1),[f,p]=j.useState(null),g=Is(),x=j.useCallback(()=>{r(""),i(""),l(""),p(null),d(!1)},[]),w=async()=>{var T;const y=await Al(Ue,s.trim(),o),v=await In(ke(ee,"users",y.user.uid));if(!v.exists()||((T=v.data())==null?void 0:T.role)!=="admin")throw await tn(Ue),new Error("هذا الحساب غير مخوّل للوصول إلى لوحة المشرفات.");g("/admin/panel",{replace:!0})},A=async()=>{const y=n.trim();if(!y)throw new Error("أدخلي اسم المشرفة.");const v=s.trim().toLowerCase(),T=await Wx(Ue,v,o);await N1(T.user,{displayName:y}),await ra(ke(ee,"users",T.user.uid),{role:"admin",email:v,name:y,createdAt:xs()}),g("/admin/panel",{replace:!0})},R=async y=>{y.preventDefault(),d(!0),p(null);try{t==="login"?await w():await A()}catch(v){p(Mj(v))}finally{d(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12",children:c.jsxs("div",{className:"mx-auto flex min-h-[75vh] max-w-2xl flex-col justify-center space-y-8 rounded-3xl border border-white/15 bg-white/10 p-10 text-white shadow-2xl backdrop-blur-xl",children:[c.jsxs("header",{className:"text-center space-y-2",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-yellow-400",children:"لوحة المشرفات"}),c.jsx("p",{className:"text-sm text-slate-200",children:"الدخول متاح للمشرفات المصرّح لهن فقط"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 rounded-2xl bg-white/10 p-1",children:[c.jsx("button",{type:"button",onClick:()=>{e("login"),x()},className:`rounded-2xl py-2 font-semibold transition ${t==="login"?"bg-yellow-400 text-slate-950 shadow-lg":"text-slate-200 hover:text-white"}`,disabled:u,children:"دخول المشرفة"}),c.jsx("button",{type:"button",onClick:()=>{e("register"),x()},className:`rounded-2xl py-2 font-semibold transition ${t==="register"?"bg-yellow-400 text-slate-950 shadow-lg":"text-slate-200 hover:text-white"}`,disabled:u,children:"تسجيل مشرفة جديدة"})]}),f&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:f}),c.jsxs("form",{className:"space-y-5",onSubmit:R,children:[t==="register"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-name",className:"block text-sm font-medium text-slate-200",children:"اسم المشرفة"}),c.jsx("input",{id:"admin-name",type:"text",autoComplete:"name",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"مثال: سارة القحطاني",value:n,onChange:y=>r(y.target.value),disabled:u})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-medium text-slate-200",children:"البريد الإلكتروني"}),c.jsx("input",{id:"admin-email",type:"email",required:!0,autoComplete:"email",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"name@example.com",value:s,onChange:y=>i(y.target.value),disabled:u})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-medium text-slate-200",children:t==="login"?"كلمة المرور":"كلمة مرور المشرفة الجديدة"}),c.jsx("input",{id:"admin-password",type:"password",required:!0,autoComplete:t==="login"?"current-password":"new-password",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"••••••••",value:o,onChange:y=>l(y.target.value),disabled:u})]}),c.jsx("button",{type:"submit",disabled:u,className:"w-full rounded-2xl bg-yellow-400 py-3 text-base font-semibold text-slate-950 transition hover:bg-yellow-500 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-70",children:u?"جارٍ المعالجة...":t==="login"?"دخول المشرفة":"إنشاء حساب مشرفة"})]}),c.jsxs("div",{className:"space-y-2 text-center text-xs text-slate-300",children:[c.jsx("p",{children:"في حال واجهتِ مشكلة في الدخول يرجى التواصل مع فريق الدعم."}),c.jsx(Tt,{to:"/",className:"text-yellow-300 transition hover:text-yellow-200",children:"العودة إلى الصفحة الرئيسية"})]})]})})},Uj=[{id:"overview",label:"نظرة عامة",description:"ملخص لأهم أرقام المنصة اليوم."},{id:"commission",label:"العمولة",description:"متابعة عمولة المنصة وحساب التوزيعات."},{id:"restaurants",label:"إدارة المطاعم",description:"طلبات الانضمام، حالة التفعيل، والمتابعة اليومية."},{id:"reports",label:"التقارير",description:"إحصاءات دورية واستبصارات تساعد في اتخاذ القرار."}],Cn=t=>`${t.toLocaleString("ar-SA",{minimumFractionDigits:2})} ر.س`,hl=t=>{const e=Number(t);return Number.isFinite(e)?e:0},Ed=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}if(typeof t=="object"){const e=t;if(typeof e.toDate=="function"){const n=e.toDate();return Number.isNaN(n.getTime())?null:n}if(typeof e.seconds=="number"){const n=new Date(e.seconds*1e3);return Number.isNaN(n.getTime())?null:n}}return null},Td=t=>t?t.toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"}):"—",Vv=t=>({pending:"قيد المراجعة",accepted:"تم القبول",preparing:"قيد التحضير",ready:"جاهز",out_for_delivery:"في الطريق",delivered:"تم التسليم",cancelled:"ملغي"})[t]??t,Bj=t=>{switch(t){case"pending":return"bg-gray-100 text-gray-700";case"accepted":return"bg-blue-100 text-blue-700";case"preparing":return"bg-yellow-100 text-yellow-700";case"ready":return"bg-purple-100 text-purple-700";case"out_for_delivery":return"bg-indigo-100 text-indigo-700";case"delivered":return"bg-emerald-100 text-emerald-700";case"cancelled":return"bg-rose-100 text-rose-700";default:return"bg-slate-100 text-slate-700"}},$j=t=>{switch(t){case"approved":return"bg-emerald-100 text-emerald-700";case"rejected":return"bg-rose-100 text-rose-700";default:return"bg-yellow-100 text-yellow-700"}},zj=()=>{const{user:t}=bt(),[e,n]=j.useState("overview"),[r,s]=j.useState([]),[i,o]=j.useState([]),[l,u]=j.useState([]),[d,f]=j.useState(!1),[p,g]=j.useState(null);j.useEffect(()=>{const y=Ut(Oe(ee,"orders"),kr("createdAt","desc")),v=as(y,T=>{s(T.docs.map(P=>{const O=P.data(),M=hl(O.restaurantAmount??O.restaurantTotal??O.subtotal??O.total??0),N=hl(O.appCommission??O.platformCommission??O.commission??M*.15),E=hl(O.deliveryFee??O.delivery??0),b=hl(O.total??M+N+E);return{id:P.id,status:String(O.status??"pending"),createdAt:Ed(O.createdAt),baseAmount:M,commissionAmount:N,deliveryFee:E,total:b,restaurantName:String(O.restaurantName??O.restaurant??"مطعم غير معروف"),items:Array.isArray(O.items)?O.items:[]}}))});return()=>v()},[]),j.useEffect(()=>{const y=Ut(Oe(ee,"restaurants"),kr("createdAt","desc")),v=as(y,T=>{o(T.docs.map(P=>{const O=P.data();return{id:P.id,name:String(O.name??"مطعم غير معروف"),ownerName:O.ownerName?String(O.ownerName):void 0,city:O.city?String(O.city):void 0,status:O.status?String(O.status):void 0,createdAt:Ed(O.createdAt)}}))});return()=>v()},[]),j.useEffect(()=>{const y=Ut(Oe(ee,"restaurantRequests"),kr("createdAt","desc")),v=as(y,T=>{u(T.docs.map(P=>{const O=P.data(),M=String(O.status??"pending");return{id:P.id,name:String(O.name??"مطعم بدون اسم"),ownerName:O.ownerName?String(O.ownerName):void 0,notes:O.notes?String(O.notes):void 0,status:M,createdAt:Ed(O.createdAt)}}))});return()=>v()},[]);const x=j.useMemo(()=>{const y=r.reduce((P,O)=>{if(P.restaurant+=O.baseAmount,P.commission+=O.commissionAmount,P.delivery+=O.deliveryFee,P.total+=O.total,P.count+=1,P.byStatus[O.status]=(P.byStatus[O.status]??0)+1,O.createdAt){const M=`${O.createdAt.getFullYear()}-${String(O.createdAt.getMonth()+1).padStart(2,"0")}`,N=P.byMonth.get(M)??{commission:0,payout:0,count:0};N.commission+=O.commissionAmount,N.payout+=O.baseAmount,N.count+=1,P.byMonth.set(M,N)}return P},{restaurant:0,commission:0,delivery:0,total:0,count:0,byStatus:{},byMonth:new Map}),v=Array.from(y.byMonth.entries()).map(([P,O])=>({month:P,...O})).sort((P,O)=>P.month>O.month?1:-1),T=l.filter(P=>P.status==="pending");return{...y,monthlyBreakdown:v,pendingRequests:T}},[r,l]),w=async(y,v)=>{try{await wi(ke(ee,"restaurantRequests",y),{status:v,reviewedAt:xs()}),g({kind:"success",message:"تم تحديث حالة الطلب بنجاح."})}catch(T){console.error(T),g({kind:"error",message:"تعذر تحديث حالة الطلب، يرجى المحاولة لاحقاً."})}},A=async y=>{const v=String(y.get("name")??"").trim(),T=String(y.get("ownerName")??"").trim(),P=String(y.get("notes")??"").trim();if(!v){g({kind:"error",message:"يرجى إدخال اسم المطعم."});return}try{f(!0),await dc(Oe(ee,"restaurantRequests"),{name:v,ownerName:T||null,notes:P||null,status:"pending",createdAt:xs()}),g({kind:"success",message:"تم إرسال طلب الانضمام، وسيتم مراجعته قريباً."})}catch(O){console.error(O),g({kind:"error",message:"تعذر إرسال الطلب، يرجى المحاولة لاحقاً."})}finally{f(!1)}},R=y=>{y.preventDefault();const v=new FormData(y.currentTarget);y.currentTarget.reset(),A(v)};return j.useEffect(()=>{if(!p)return;const y=window.setTimeout(()=>g(null),4e3);return()=>window.clearTimeout(y)},[p]),t?c.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[c.jsx("header",{className:"border-b border-white/10 bg-slate-900/70 backdrop-blur",children:c.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-4 px-6 py-8 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-extrabold text-yellow-400",children:"لوحة تحكم سفرة البيت"}),c.jsxs("p",{className:"text-sm text-slate-200",children:["مرحباً ",t.email??"مشرفة","! تابعي مؤشرات الأداء وطلبات الانضمام في مكان واحد."]})]}),c.jsxs("div",{className:"rounded-2xl bg-white/5 px-4 py-2 text-xs text-slate-200",children:["آخر تحديث: ",new Date().toLocaleTimeString("ar-SA")]})]})}),c.jsxs("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[p&&c.jsx("div",{className:`mb-6 rounded-3xl border px-4 py-3 text-sm ${p.kind==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-rose-500/40 bg-rose-500/10 text-rose-100"}`,children:p.message}),c.jsx("nav",{className:"grid gap-3 rounded-3xl bg-white/5 p-2 sm:grid-cols-2 lg:grid-cols-4",children:Uj.map(y=>c.jsxs("button",{onClick:()=>n(y.id),className:`rounded-2xl px-4 py-5 text-right transition focus:outline-none focus:ring-2 focus:ring-yellow-400/60 ${e===y.id?"bg-yellow-400 text-slate-950 shadow-lg":"bg-slate-900/60 text-slate-200 hover:bg-slate-900"}`,children:[c.jsx("p",{className:"text-base font-semibold",children:y.label}),c.jsx("p",{className:"mt-2 text-xs opacity-80",children:y.description})]},y.id))}),c.jsxs("section",{className:"mt-8 space-y-8",children:[e==="overview"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[c.jsxs("div",{className:"rounded-3xl bg-gradient-to-br from-yellow-400 to-yellow-500 p-6 text-slate-950 shadow-lg",children:[c.jsx("p",{className:"text-sm font-medium",children:"إجمالي الطلبات"}),c.jsx("p",{className:"mt-3 text-3xl font-extrabold",children:x.count}),c.jsx("p",{className:"mt-1 text-xs text-slate-900/70",children:"آخر ٧ أيام محدثة لحظياً من فواتير المطاعم."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"حصة المنصة"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-yellow-300",children:Cn(x.commission)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"شامل جميع الطلبات المسجلة."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"مستحقات المطاعم"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-emerald-300",children:Cn(x.restaurant)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"يتم تحويلها تلقائياً بعد خصم العمولة."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"طلبات قيد المراجعة"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-sky-300",children:x.pendingRequests.length}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"طلبات انضمام المطاعم التي تنتظر الاعتماد."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"الطلبات الأخيرة"}),c.jsx("span",{className:"text-xs text-slate-300",children:"يتم التحديث مباشرةً من Firestore"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"التاريخ"}),c.jsx("th",{className:"px-3 py-2",children:"الإجمالي"}),c.jsx("th",{className:"px-3 py-2",children:"عمولة التطبيق"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[r.slice(0,8).map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:y.restaurantName}),c.jsx("td",{className:"px-3 py-2",children:Td(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:Cn(y.total)}),c.jsx("td",{className:"px-3 py-2",children:Cn(y.commissionAmount)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${Bj(y.status)}`,children:Vv(y.status)})})]},y.id)),r.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لا توجد طلبات مسجلة حالياً."})})]})]})})]})]}),e==="commission"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"إجمالي العمولة"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-yellow-300",children:Cn(x.commission)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"مجموع ما سيتم تحويله إلى رصيد التطبيق."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"إجمالي صافي المطاعم"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-emerald-300",children:Cn(x.restaurant)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"بعد خصم العمولة (15٪) تلقائياً من كل طلب."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"رسوم التوصيل"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-sky-300",children:Cn(x.delivery)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"للاطلاع فقط، لا تدخل ضمن عمولة المنصة."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"توزيع شهري"}),c.jsxs("div",{className:"mt-6 space-y-4",children:[x.monthlyBreakdown.length===0&&c.jsx("p",{className:"text-sm text-slate-300",children:"لا يوجد بيانات كافية حالياً."}),x.monthlyBreakdown.map(y=>c.jsxs("div",{className:"grid gap-4 rounded-2xl bg-slate-900/60 p-4 sm:grid-cols-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"الشهر"}),c.jsx("p",{className:"text-base font-semibold",children:y.month})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"عمولة التطبيق"}),c.jsx("p",{className:"text-sm font-medium text-yellow-300",children:Cn(y.commission)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"صافي المطاعم"}),c.jsx("p",{className:"text-sm font-medium text-emerald-300",children:Cn(y.payout)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"عدد الطلبات"}),c.jsx("p",{className:"text-sm font-medium text-slate-100",children:y.count})]})]},y.month))]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"تفاصيل الاحتساب"}),c.jsxs("ul",{className:"mt-4 list-disc space-y-2 pr-6 text-sm text-slate-200",children:[c.jsx("li",{children:"يتم احتساب عمولة التطبيق تلقائياً بنسبة 15٪ من إجمالي الطلب قبل رسوم التوصيل."}),c.jsx("li",{children:"يظهر صافي المطعم بعد خصم العمولة مباشرة في سجل الطلب."}),c.jsx("li",{children:"يمكن تصدير الأرقام إلى التقارير الشهرية من تبويب التقارير."})]})]})]}),e==="restaurants"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"إضافة طلب انضمام جديد"}),c.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"يتم إرسال الطلب إلى قائمة المراجعة للموافقة أو الرفض."}),c.jsxs("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:R,children:[c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-name",className:"text-xs text-slate-200",children:"اسم المطعم"}),c.jsx("input",{id:"restaurant-name",name:"name",required:!0,placeholder:"مطعم سفرة البيت",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-owner",className:"text-xs text-slate-200",children:"اسم المالك (اختياري)"}),c.jsx("input",{id:"restaurant-owner",name:"ownerName",placeholder:"أم أحمد",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-notes",className:"text-xs text-slate-200",children:"ملاحظات إضافية"}),c.jsx("textarea",{id:"restaurant-notes",name:"notes",rows:3,placeholder:"روابط السوشيال، نوع المطبخ، أوقات العمل...",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsx("div",{className:"md:col-span-2 flex justify-end",children:c.jsx("button",{type:"submit",disabled:d,className:"rounded-2xl bg-yellow-400 px-6 py-3 text-sm font-semibold text-slate-950 transition hover:bg-yellow-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?"جارٍ الإرسال...":"إضافة الطلب"})})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"طلبات الانضمام"}),c.jsxs("span",{className:"text-xs text-slate-300",children:[x.pendingRequests.length," طلب قيد المراجعة"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"المالكة"}),c.jsx("th",{className:"px-3 py-2",children:"التاريخ"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"}),c.jsx("th",{className:"px-3 py-2",children:"التحكم"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[l.map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{children:y.name}),y.notes&&c.jsx("p",{className:"text-xs text-slate-400",children:y.notes})]})}),c.jsx("td",{className:"px-3 py-2",children:y.ownerName??"—"}),c.jsx("td",{className:"px-3 py-2",children:Td(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${$j(y.status)}`,children:y.status==="pending"?"قيد المراجعة":y.status==="approved"?"تمت الموافقة":"مرفوض"})}),c.jsx("td",{className:"px-3 py-2",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("button",{onClick:()=>w(y.id,"approved"),className:"rounded-2xl bg-emerald-400/20 px-3 py-1 text-xs font-semibold text-emerald-200 hover:bg-emerald-400/30",children:"قبول"}),c.jsx("button",{onClick:()=>w(y.id,"rejected"),className:"rounded-2xl bg-rose-400/20 px-3 py-1 text-xs font-semibold text-rose-200 hover:bg-rose-400/30",children:"رفض"})]})})]},y.id)),l.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لا توجد طلبات حالياً."})})]})]})})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"المطاعم النشطة"}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"المالكة"}),c.jsx("th",{className:"px-3 py-2",children:"المدينة"}),c.jsx("th",{className:"px-3 py-2",children:"تاريخ الإضافة"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[i.map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:y.name}),c.jsx("td",{className:"px-3 py-2",children:y.ownerName??"—"}),c.jsx("td",{className:"px-3 py-2",children:y.city??"—"}),c.jsx("td",{className:"px-3 py-2",children:Td(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:"inline-flex rounded-full bg-white/10 px-3 py-1 text-xs font-semibold",children:y.status??"نشط"})})]},y.id)),i.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لم يتم تسجيل مطاعم بعد."})})]})]})})]})]}),e==="reports"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Object.entries(x.byStatus).map(([y,v])=>c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:Vv(y)}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-white",children:v}),c.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["نسبة ",(v/(x.count||1)*100).toFixed(1),"٪ من إجمالي الطلبات."]})]},y)),Object.keys(x.byStatus).length===0&&c.jsx("p",{className:"rounded-3xl bg-white/5 p-6 text-sm text-slate-300",children:"لا تتوفر بيانات كافية لإظهار التقارير."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"ملاحظات تشغيلية"}),c.jsxs("ul",{className:"mt-4 list-disc space-y-2 pr-6 text-sm text-slate-200",children:[c.jsx("li",{children:"تحققي من الطلبات التي تحمل حالة «قيد المراجعة» أو «ملغي» للتأكد من تحديث الحالة لدى المطعم."}),c.jsx("li",{children:"قومي بمراجعة طلبات الانضمام الجديدة بشكل يومي لضمان إضافة المطاعم إلى التطبيق دون تأخير."}),c.jsx("li",{children:"استخدمي تبويب العمولة لمراجعة التحويلات قبل نهاية كل شهر."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"تصدير التقارير"}),c.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تنزيل تقرير شهر حالي"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تقرير العمولات التفصيلي"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تقرير أداء المطاعم"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"أرشيف الطلبات المكتمل"})]}),c.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"يتم تحضير ملفات CSV قابلة للتصدير لاحقاً، حالياً الأزرار للعرض فقط وتمثل المهام القادمة للفريق التقني."})]})]})]})]})]}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:c.jsx("p",{className:"text-lg font-semibold",children:"يجب تسجيل الدخول كمشرفة للوصول إلى هذه الصفحة."})})},hn=({children:t,redirectTo:e="/login"})=>{const{user:n,loading:r}=bt();return r?c.jsx("div",{className:"p-8 text-center",children:"جارِ التحميل..."}):n?c.jsx(c.Fragment,{children:t}):c.jsx(ax,{to:e,replace:!0})},qj=()=>{const{user:t}=bt(),[e,n]=j.useState({name:"",phone:"",city:"",location:"",logoUrl:""}),[r,s]=j.useState(!0),[i,o]=j.useState(!1);j.useEffect(()=>{if(!t)return;(async()=>{const f=ke(ee,"restaurants",t.uid),p=await In(f);p.exists()&&n(p.data()),s(!1)})()},[t]);const l=async d=>{var p;if(!t)return;const f=(p=d.target.files)==null?void 0:p[0];if(f){o(!0);try{const g=zE(Z2,`restaurants/${t.uid}/logo.jpg`);await BE(g,f);const x=await $E(g);n(w=>({...w,logoUrl:x})),alert("✅ تم رفع الشعار بنجاح")}catch(g){console.error(g),alert("❌ حدث خطأ أثناء رفع الشعار")}o(!1)}},u=async d=>{if(d.preventDefault(),!t)return;const f=ke(ee,"restaurants",t.uid);await ra(f,e,{merge:!0}),alert("✅ تم حفظ التغييرات")};return r?c.jsx("div",{children:"جارِ التحميل..."}):c.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow p-6 space-y-3 text-gray-900",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"تعديل بيانات المطعم"}),c.jsxs("form",{onSubmit:u,className:"space-y-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block font-semibold",children:"شعار المطعم"}),e.logoUrl&&c.jsx("img",{src:e.logoUrl,alt:"شعار المطعم",className:"w-20 h-20 rounded-full object-cover border"}),c.jsx("input",{type:"file",accept:"image/*",onChange:l}),i&&c.jsx("p",{className:"text-sm text-gray-500",children:"⏳ جاري رفع الشعار..."})]}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"اسم المطعم",value:e.name,onChange:d=>n({...e,name:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"رقم الجوال",value:e.phone,onChange:d=>n({...e,phone:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"المدينة",value:e.city,onChange:d=>n({...e,city:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"الموقع",value:e.location,onChange:d=>n({...e,location:d.target.value})}),c.jsx("button",{className:"w-full bg-gray-900 text-white rounded-xl p-3 hover:bg-gray-800 transition",disabled:i,children:i?"جاري رفع الشعار...":"حفظ"})]})]})},Wj=()=>{const{user:t}=bt();return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary via-dark to-[#3a1a1a] text-center px-6 text-secondary relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-primary/30 rounded-full blur-3xl animate-pulse"}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-accent mb-4 drop-shadow-[0_4px_10px_rgba(0,0,0,0.4)]",children:"🍗 سفرة البيت"}),c.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-secondary/90 max-w-2xl mb-8 leading-relaxed font-medium",children:"استمتع بأشهى الأكلات البيتية والبرست الطازج 😋 اطلب وجبتك بكل سهولة، وخليها توصلك لين باب بيتك 🚗💨"}),c.jsx("img",{src:"/landing.png",alt:"طبق سفرة البيت",className:"w-64 sm:w-80 md:w-96 mb-10 rounded-3xl shadow-2xl border-4 border-accent/40 object-cover hover:scale-105 transition-transform duration-300"}),t?c.jsx(Tt,{to:"/restaurants",className:"px-10 py-4 rounded-full text-lg font-semibold text-primary bg-accent shadow-[0_4px_10px_rgba(0,0,0,0.3)] hover:scale-105 hover:shadow-lg transition-transform duration-300",children:"🍴 تصفح المطاعم"}):c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(Tt,{to:"/login",className:"px-10 py-4 rounded-full text-lg font-semibold text-primary bg-accent shadow-[0_4px_10px_rgba(0,0,0,0.3)] hover:scale-105 hover:shadow-lg transition-transform duration-300",children:"تسجيل الدخول"}),c.jsxs("p",{className:"text-secondary/80",children:["ماعندك حساب؟"," ",c.jsx(Tt,{to:"/register",className:"text-accent font-semibold hover:underline hover:text-yellow-300 transition",children:"أنشئ حساب الآن"})]})]})]})]})},Hj=()=>{const{items:t,subtotal:e,remove:n,clear:r,applicationFeePerItem:s,applicationFeeTotal:i,getItemTotalWithFees:o,getUnitPriceWithFees:l,totalWithFees:u}=Gp();return t.length===0?c.jsx("div",{className:"text-center text-gray-400 mt-20",children:"🛒 السلة فارغة"}):c.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"🛒 سلة المشتريات"}),t.map(d=>c.jsxs("div",{className:"flex justify-between items-center bg-white text-black p-4 rounded-xl shadow",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:d.name}),c.jsxs("div",{className:"text-sm text-gray-600",children:["الكمية: ",d.qty]}),c.jsxs("div",{className:"space-y-1",children:[c.jsxs("div",{className:"font-bold text-lg text-gray-900",children:[o(d).toFixed(2)," ر.س"]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["(",l(d.price).toFixed(2)," ر.س لكل وجبة بعد الرسوم)"]}),c.jsxs("div",{className:"text-[11px] text-gray-400",children:["السعر الأصلي ",d.price.toFixed(2)," ر.س + رسوم التشغيل ",s.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["المطعم: ",d.ownerId||"❌ غير محدد"]})]}),c.jsx("button",{onClick:()=>n(d.id),className:"px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600",children:"حذف"})]},d.id)),c.jsxs("div",{className:"bg-white text-gray-800 rounded-xl p-4 shadow space-y-2 text-sm",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{children:"المجموع الأساسي"}),c.jsxs("span",{className:"font-semibold",children:[e.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{children:["رسوم تشغيل التطبيق (",s.toFixed(2)," ر.س × ",t.reduce((d,f)=>d+f.qty,0),")"]}),c.jsxs("span",{className:"font-semibold",children:[i.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-lg font-bold text-gray-900 border-t pt-2",children:[c.jsx("span",{children:"الإجمالي مع الرسوم"}),c.jsxs("span",{children:[u.toFixed(2)," ر.س"]})]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:r,className:"px-5 py-2 rounded-xl bg-gray-500 text-white",children:"🗑️ تفريغ السلة"}),c.jsx(Tt,{to:"/checkout",className:"px-5 py-2 rounded-xl bg-yellow-500 text-black font-bold",children:"✅ إتمام الطلب"})]})]})},Id=[{id:1,title:"مبيعات التطبيق",amount:18500,category:"income",note:"إجمالي الطلبات المكتملة"},{id:2,title:"عمولة المتاجر",amount:4200,category:"income"},{id:3,title:"رواتب الموظفات",amount:6200,category:"expense"},{id:4,title:"استضافة المنصة",amount:950,category:"expense"},{id:5,title:"حملات تسويقية",amount:1800,category:"expense",note:"إعلانات ممولة لمدة أسبوعين"}],Kj=[{id:1,name:"أمل الغامدي",role:"إدارة عمليات",email:"amal@example.com",commission:12.5,active:!0},{id:2,name:"سارة الشهري",role:"خدمة العملاء",email:"sarah@example.com",commission:8,active:!0},{id:3,name:"جود العتيبي",role:"تسويق رقمي",email:"jood@example.com",commission:10,active:!1}],Gj=[{id:1,title:"إطلاق نظام الولاء",owner:"سارة الشهري",status:"قيد التنفيذ",progress:65,dueDate:"25 أبريل 2024"},{id:2,title:"تحديث قائمة المطاعم",owner:"أمل الغامدي",status:"مكتمل",progress:100,dueDate:"15 أبريل 2024"},{id:3,title:"حملة إعلانية لشهر رمضان",owner:"جود العتيبي",status:"متأخر",progress:35,dueDate:"10 أبريل 2024"}],Qj=[{title:"الإدارة المالية",description:"توفر لك الأرقام الأساسية نظرة سريعة على أداء المنصة؛ من خلال مقارنة الدخل والمصروفات ومراقبة صافي الربح لمعرفة أين يجب تعزيز الاستثمار أو ضبط التكاليف.",highlights:["بطاقات ملونة تبين الدخل والمصروفات وصافي الربح","جدول تفصيلي لكل بند مع الملاحظات المرتبطة به"]},{title:"قسم الموظفات",description:"يمكنك إضافة موظفة جديدة وتحديث بيانات الفريق بسهولة، مع متابعة حالة التوظيف ونسبة العمولة المحققة لكل عضو من خلال شريط التقدم.",highlights:["نموذج تسجيل يضم الاسم، الوظيفة، البريد، ونسبة العمولة","بطاقات تعرض حالة كل موظفة ونسبة تحقيق الأهداف"]},{title:"تقارير المهام",description:"تعرض البطاقات حالة كل مهمة، والمسؤولة عنها، وتاريخ التسليم المتوقع، مع مؤشرات لونية لتوضيح مستوى التقدم ودرجة الأولوية.",highlights:["وسوم الحالة بالألوان تبين المهام المكتملة والمتأخرة","شريط تقدم مرئي يساعد على قراءة نسبة الإنجاز مباشرة"]}],fl=new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",maximumFractionDigits:0}),Yj=()=>{const[t,e]=j.useState(Kj),[n,r]=j.useState({name:"",role:"",email:"",commission:""}),[s,i]=j.useState(null),{income:o,expense:l,net:u}=j.useMemo(()=>{const p=Id.filter(x=>x.category==="income").reduce((x,w)=>x+w.amount,0),g=Id.filter(x=>x.category==="expense").reduce((x,w)=>x+w.amount,0);return{income:p,expense:g,net:p-g}},[]),d=p=>{const{name:g,value:x}=p.target;r(w=>({...w,[g]:x}))},f=p=>{p.preventDefault();const g=n.name.trim(),x=n.role.trim(),w=n.email.trim(),A=Number(n.commission);if(!g||!x||Number.isNaN(A)){i("الرجاء تعبئة الاسم، الوظيفة، ونسبة العمولة بشكل صحيح.");return}if(A<0||A>100){i("نسبة العمولة يجب أن تكون بين 0% و 100%.");return}const R={id:Date.now(),name:g,role:x,email:w||void 0,commission:A,active:!0};e(y=>[R,...y]),r({name:"",role:"",email:"",commission:""}),i(null)};return c.jsxs("section",{className:"space-y-10",children:[c.jsxs("header",{className:"rounded-2xl bg-gradient-to-r from-[#1e293b] via-[#334155] to-[#1e293b] px-8 py-10 text-white shadow-xl",children:[c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-300",children:"لوحة المطور"}),c.jsx("h1",{className:"text-3xl font-bold md:text-4xl",children:"إدارة المنصة والعمليات"})]}),c.jsxs("div",{className:"text-right text-sm text-slate-200",children:[c.jsx("p",{children:"المطور المسؤول: مريم الكناني"}),c.jsx("p",{children:"📧 memwalknany976@gmail.com"}),c.jsx("p",{children:"📱 0555047703"})]})]}),c.jsx("p",{className:"mt-6 max-w-3xl text-sm text-slate-200",children:"توفر هذه اللوحة نظرة شاملة على الوضع المالي، حالة الموظفات، والتقدم في المهام التشغيلية لتسهيل متابعة عمل المنصة بشكل يومي."})]}),c.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:Qj.map(p=>c.jsxs("article",{className:"flex flex-col rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-md backdrop-blur",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:p.title}),c.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:p.description}),c.jsx("ul",{className:"mt-4 space-y-2 text-sm text-slate-500",children:p.highlights.map(g=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"mt-1 inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":!0}),c.jsx("span",{children:g})]},g))})]},p.title))}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"الإدارة المالية"}),c.jsx("span",{className:"rounded-full bg-emerald-100 px-4 py-1 text-sm font-medium text-emerald-700",children:"آخر تحديث: اليوم"})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[c.jsxs("div",{className:"rounded-xl border border-emerald-100 bg-emerald-50/60 p-5",children:[c.jsx("p",{className:"text-sm text-emerald-700",children:"إجمالي الدخل"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-emerald-900",children:fl.format(o)}),c.jsx("p",{className:"mt-2 text-xs text-emerald-800/80",children:"يشمل المبيعات، عمولات المتاجر، وخدمات إضافية"})]}),c.jsxs("div",{className:"rounded-xl border border-rose-100 bg-rose-50/60 p-5",children:[c.jsx("p",{className:"text-sm text-rose-700",children:"إجمالي المصروفات"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-rose-900",children:fl.format(l)}),c.jsx("p",{className:"mt-2 text-xs text-rose-800/80",children:"رواتب، استضافة، وحملات تسويقية"})]}),c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5",children:[c.jsx("p",{className:"text-sm text-slate-700",children:"صافي الربح"}),c.jsx("p",{className:`mt-3 text-3xl font-bold ${u>=0?"text-emerald-900":"text-rose-900"}`,children:fl.format(u)}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"متابعة التدفقات المالية لتحديد أولويات الاستثمار"})]})]}),c.jsx("div",{className:"mt-8 overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-right",children:[c.jsx("thead",{className:"bg-slate-100 text-slate-600",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"البند"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"النوع"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"المبلغ"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"ملاحظات"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 bg-white text-slate-700",children:Id.map(p=>c.jsxs("tr",{className:"transition hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:p.title}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.category==="income"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:p.category==="income"?"دخل":"مصروف"})}),c.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-slate-900",children:fl.format(p.amount)}),c.jsx("td",{className:"px-4 py-3 text-xs text-slate-500",children:p.note??"—"})]},p.id))})]})})]}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"قسم الموظفات"}),c.jsx("p",{className:"text-sm text-slate-500",children:"سجل وحدث بيانات الفريق، وتابع نسب العمولات لكل موظفة"})]}),c.jsxs("form",{onSubmit:f,className:"grid gap-4 rounded-xl border border-slate-200 bg-slate-50 p-5 md:grid-cols-5",children:[c.jsx("input",{name:"name",value:n.name,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"اسم الموظفة"}),c.jsx("input",{name:"role",value:n.role,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"المسمى الوظيفي"}),c.jsx("input",{name:"email",value:n.email,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"البريد الإلكتروني (اختياري)",type:"email"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{name:"commission",value:n.commission,onChange:d,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"نسبة العمولة %",type:"number",step:"0.1",min:"0",max:"100"})}),c.jsx("button",{type:"submit",className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary/90",children:"إضافة موظفة"}),s&&c.jsx("p",{className:"md:col-span-5 text-sm font-medium text-rose-600",children:s})]}),c.jsx("div",{className:"mt-6 grid gap-4",children:t.map(p=>c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary/40 hover:shadow",children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:p.name}),c.jsx("p",{className:"text-sm text-slate-500",children:p.role}),p.email&&c.jsx("p",{className:"text-xs text-slate-400",children:p.email})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.active?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:p.active?"على رأس العمل":"موقفة مؤقتًا"}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xs text-slate-500",children:"نسبة العمولة"}),c.jsxs("p",{className:"text-lg font-semibold text-primary",children:[p.commission,"%"]})]})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"تحقيق الأهداف"}),c.jsxs("span",{children:[Math.min(100,Math.round(p.commission*4)),"%"]})]}),c.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-slate-100",children:c.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${Math.min(100,Math.round(p.commission*4))}%`}})})]})]},p.id))})]}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"تقارير المهام"}),c.jsx("span",{className:"text-sm text-slate-400",children:"3 مهام نشطة هذا الأسبوع"})]}),c.jsx("div",{className:"grid gap-5 md:grid-cols-3",children:Gj.map(p=>c.jsxs("article",{className:"flex flex-col rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary/40 hover:shadow",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:p.title}),c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.status==="مكتمل"?"bg-emerald-100 text-emerald-700":p.status==="قيد التنفيذ"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:p.status})]}),c.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["المسؤولة: ",p.owner]}),c.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["موعد التسليم: ",p.dueDate]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"التقدم"}),c.jsxs("span",{children:[p.progress,"%"]})]}),c.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-slate-100",children:c.jsx("div",{className:`h-2 rounded-full ${p.status==="مكتمل"?"bg-emerald-500":p.status==="قيد التنفيذ"?"bg-amber-500":"bg-rose-500"}`,style:{width:`${p.progress}%`}})})]})]},p.id))})]})]})},Xj=()=>{const[t,e]=j.useState([]),[n,r]=j.useState(!0);return j.useEffect(()=>{(async()=>{const s=await bn(Oe(ee,"restaurants"));e(s.docs.map(i=>({id:i.id,...i.data()}))),r(!1)})()},[]),n?c.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"⏳ جارِ تحميل المطاعم..."}):c.jsxs("div",{className:"py-10",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"🍴 قائمة المطاعم"}),t.length===0&&c.jsx("div",{className:"text-center text-gray-400",children:"😔 لا توجد مطاعم حالياً"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>c.jsxs(Tt,{to:`/menu?restaurant=${s.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[s.logoUrl?c.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):c.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:"🍴"}),c.jsx("h3",{className:"font-bold text-xl",children:s.name}),s.city&&c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.city})]},s.id))})]})},Nd=[{id:"cmp-1",title:"أسبوع الأسر المنتجة",description:"ترويج خاص لمنتجات الأسر المنتجة المضافة حديثاً مع خصم 15% على أول طلب.",budget:"4,500 ر.س",status:"active",duration:"12 - 18 مارس",audience:"العملاء الجدد في جدة والمدينة"},{id:"cmp-2",title:"وجبات الغداء للمكاتب",description:"حزمة إعلانية تستهدف الشركات الصغيرة مع خيار اشتراك أسبوعي في الوجبات.",budget:"6,200 ر.س",status:"scheduled",duration:"22 - 30 مارس",audience:"أحياء المال والأعمال في الرياض"},{id:"cmp-3",title:"تعويض تكاليف التوصيل",description:"إعلان موسمي يوضح تحمل التطبيق لرسوم التوصيل عن العملاء في عطلة نهاية الأسبوع.",budget:"3,000 ر.س",status:"completed",duration:"1 - 4 مارس",audience:"العملاء النشطون خلال آخر 30 يوم"}],Jj={active:"bg-green-500/20 text-green-200 border border-green-400/50",scheduled:"bg-amber-500/20 text-amber-200 border border-amber-400/50",completed:"bg-slate-500/20 text-slate-200 border border-slate-400/50"},Zj=()=>{const t=Nd.filter(u=>u.status==="active"),e=Nd.filter(u=>u.status==="scheduled"),n=Nd.filter(u=>u.status==="completed"),[r,s]=j.useState({businessName:"",objective:"",contact:"",fee:25}),[i,o]=j.useState(null),l=u=>{u.preventDefault(),o(`تم تسجيل طلب الإعلان للجهة «${r.businessName||"بدون اسم"}» برسوم رمزية قدرها ${r.fee.toFixed(2)} ر.س، وسيتم التواصل معك عبر ${r.contact||"البريد المسجل"} خلال 24 ساعة.`)};return c.jsxs("div",{className:"py-12 space-y-10",children:[c.jsxs("header",{className:"bg-gradient-to-r from-primary/80 to-accent/30 border border-accent/40 shadow-2xl rounded-3xl p-8 text-white",children:[c.jsx("h1",{className:"text-3xl font-extrabold mb-4",children:"📣 مركز الإعلانات"}),c.jsx("p",{className:"text-lg text-secondary",children:"راقب الحملات النشطة وجدول الإعلانات القادمة وشارك النتائج مع فريق التسويق في مكان واحد. تم تصميم هذه الصفحة للمطوّرات والمشرفات حتى يسهل عليهن ضبط الرسائل التسويقية داخل التطبيق."}),c.jsxs("div",{className:"mt-6 grid sm:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"p-4 rounded-2xl bg-dark/30 border border-white/10",children:[c.jsx("p",{className:"text-sm text-secondary/80",children:"الحملات النشطة"}),c.jsx("p",{className:"text-2xl font-bold",children:t.length})]}),c.jsxs("div",{className:"p-4 rounded-2xl bg-dark/30 border border-white/10",children:[c.jsx("p",{className:"text-sm text-secondary/80",children:"حملات مجدولة"}),c.jsx("p",{className:"text-2xl font-bold",children:e.length})]}),c.jsxs("div",{className:"p-4 rounded-2xl bg-dark/30 border border-white/10",children:[c.jsx("p",{className:"text-sm text-secondary/80",children:"ميزانية الشهر"}),c.jsx("p",{className:"text-2xl font-bold",children:"13,700 ر.س"})]})]})]}),c.jsxs("section",{className:"space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-white",children:"لوحة الحملات"}),c.jsx("button",{className:"px-5 py-2 rounded-2xl bg-accent text-primary font-semibold shadow-lg hover:shadow-xl transition",children:"➕ إنشاء إعلان جديد"})]}),c.jsx("div",{className:"grid lg:grid-cols-3 gap-6",children:[{label:"نشط الآن",data:t},{label:"مجدول",data:e},{label:"انتهى مؤخراً",data:n}].map(u=>c.jsxs("div",{className:"bg-dark/60 border border-white/5 rounded-3xl p-6 space-y-4 shadow-inner",children:[c.jsxs("h3",{className:"text-xl font-semibold text-accent flex items-center gap-2",children:[c.jsx("span",{children:"📆"}),u.label]}),u.data.length===0?c.jsx("p",{className:"text-sm text-gray-400",children:"لا توجد حملات في هذا القسم حالياً."}):c.jsx("ul",{className:"space-y-4",children:u.data.map(d=>c.jsxs("li",{className:"p-4 rounded-2xl bg-primary/30 border border-primary/40",children:[c.jsxs("div",{className:"flex items-start justify-between gap-3",children:[c.jsxs("div",{children:[c.jsx("h4",{className:"text-lg font-bold text-white",children:d.title}),c.jsx("p",{className:"text-sm text-gray-200 mt-1",children:d.description})]}),c.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Jj[d.status]}`,children:d.status==="active"?"نشطة":d.status==="scheduled"?"مجدولة":"منتهية"})]}),c.jsxs("dl",{className:"mt-4 grid grid-cols-2 gap-3 text-xs text-gray-200",children:[c.jsxs("div",{children:[c.jsx("dt",{className:"text-gray-400",children:"المدة"}),c.jsx("dd",{className:"font-semibold text-white",children:d.duration})]}),c.jsxs("div",{children:[c.jsx("dt",{className:"text-gray-400",children:"الميزانية"}),c.jsx("dd",{className:"font-semibold text-white",children:d.budget})]}),c.jsxs("div",{className:"col-span-2",children:[c.jsx("dt",{className:"text-gray-400",children:"الجمهور"}),c.jsx("dd",{className:"font-semibold text-white",children:d.audience})]})]})]},d.id))})]},u.label))})]}),c.jsxs("section",{className:"grid lg:grid-cols-2 gap-6",children:[c.jsxs("div",{className:"rounded-3xl bg-primary/20 border border-primary/40 p-6 space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-white",children:"🎯 قنوات الإعلان"}),c.jsxs("ul",{className:"space-y-3 text-sm text-gray-200",children:[c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-accent",children:"•"}),"إعلانات الدفع داخل التطبيق تظهر بعد مراجعة المشرفات."]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-accent",children:"•"}),"تنبيهات فورية للمستخدمين المخلصين عند توفر عرض خاص من مطعم مفضل."]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-accent",children:"•"}),"مساحة بانر في الصفحة الرئيسية مع تتبع لنقرات المستخدمين."]}),c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"text-accent",children:"•"}),"حزم ترويجية مشتركة مع الأسر المنتجة أبرزهم في قسم المنتجات المميزة."]})]})]}),c.jsxs("div",{className:"rounded-3xl bg-dark/70 border border-white/10 p-6 space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-white",children:"📊 مؤشرات الأداء"}),c.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm text-gray-200",children:[c.jsxs("div",{className:"p-4 rounded-2xl bg-black/30 border border-white/5",children:[c.jsx("p",{className:"text-gray-400",children:"متوسط النقرات اليومي"}),c.jsx("p",{className:"text-2xl font-bold text-accent",children:"1,240"})]}),c.jsxs("div",{className:"p-4 rounded-2xl bg-black/30 border border-white/5",children:[c.jsx("p",{className:"text-gray-400",children:"التحويل إلى طلب"}),c.jsx("p",{className:"text-2xl font-bold text-accent",children:"17%"})]}),c.jsxs("div",{className:"p-4 rounded-2xl bg-black/30 border border-white/5",children:[c.jsx("p",{className:"text-gray-400",children:"قيمة الطلب المتوسطة"}),c.jsx("p",{className:"text-2xl font-bold text-accent",children:"68 ر.س"})]}),c.jsxs("div",{className:"p-4 rounded-2xl bg-black/30 border border-white/5",children:[c.jsx("p",{className:"text-gray-400",children:"إجمالي مرات الظهور"}),c.jsx("p",{className:"text-2xl font-bold text-accent",children:"482K"})]})]})]})]}),c.jsxs("section",{className:"rounded-3xl border border-accent/40 bg-accent/10 p-6 space-y-6",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-semibold text-accent",children:"💡 طلب إعلان داخل التطبيق"}),c.jsx("p",{className:"text-sm text-gray-100",children:"وفرنا لك خانة خاصة بطلب إعلانات داخل التطبيق برسوم رمزية تساعد على تغطية تكلفة النشر والمتابعة. عرّفينا بحملتك وأرسلي بيانات التواصل ليتم اعتمادها سريعاً."})]}),c.jsxs("form",{className:"space-y-4",onSubmit:l,children:[c.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[c.jsxs("label",{className:"space-y-2 text-sm text-gray-100",children:[c.jsx("span",{className:"block font-semibold text-white",children:"اسم الجهة أو الحملة"}),c.jsx("input",{type:"text",value:r.businessName,onChange:u=>s(d=>({...d,businessName:u.target.value})),className:"w-full rounded-2xl bg-dark/60 border border-white/10 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-accent/60",placeholder:"مثل: حملة رمضان للأسر المنتجة"})]}),c.jsxs("label",{className:"space-y-2 text-sm text-gray-100",children:[c.jsx("span",{className:"block font-semibold text-white",children:"وسيلة التواصل المفضلة"}),c.jsx("input",{type:"text",value:r.contact,onChange:u=>s(d=>({...d,contact:u.target.value})),className:"w-full rounded-2xl bg-dark/60 border border-white/10 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-accent/60",placeholder:"البريد الإلكتروني أو رقم الجوال"})]})]}),c.jsxs("label",{className:"space-y-2 text-sm text-gray-100",children:[c.jsx("span",{className:"block font-semibold text-white",children:"هدف الإعلان"}),c.jsx("textarea",{value:r.objective,onChange:u=>s(d=>({...d,objective:u.target.value})),className:"w-full rounded-2xl bg-dark/60 border border-white/10 px-4 py-3 text-white focus:outline-none focus:ring-2 focus:ring-accent/60 min-h-[120px]",placeholder:"اشرحي نوع المحتوى المراد نشره وروابط المنتجات المستهدفة"})]}),c.jsxs("label",{className:"space-y-3 text-sm text-gray-100",children:[c.jsx("span",{className:"block font-semibold text-white",children:"الرسوم الرمزية للإعلان"}),c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-4",children:[c.jsx("input",{type:"range",min:10,max:100,step:5,value:r.fee,onChange:u=>s(d=>({...d,fee:Number(u.target.value)})),className:"flex-1 accent-accent"}),c.jsxs("div",{className:"px-4 py-2 rounded-2xl bg-dark/70 border border-white/10 text-white font-semibold text-center",children:[r.fee.toFixed(2)," ر.س"]})]}),c.jsx("p",{className:"text-xs text-gray-300",children:"يشمل المبلغ الضريبة المضافة ورسوم المراجعة من قبل فريق المحتوى. اختر القيمة المناسبة، ويتم خصمها بعد الموافقة النهائية على الإعلان."})]}),c.jsx("button",{type:"submit",className:"w-full sm:w-auto px-6 py-3 rounded-2xl bg-accent text-primary font-semibold shadow-lg hover:shadow-xl transition",children:"📮 حجز مساحة الإعلان"})]}),i&&c.jsx("div",{className:"rounded-2xl border border-green-400/40 bg-green-500/10 px-4 py-3 text-sm text-green-200",children:i})]}),c.jsxs("section",{className:"rounded-3xl border border-yellow-500/40 bg-yellow-500/10 p-6 space-y-4",children:[c.jsx("h3",{className:"text-xl font-semibold text-yellow-300",children:"📝 إرشادات إنشاء إعلان"}),c.jsxs("ol",{className:"list-decimal list-inside text-sm text-gray-100 space-y-2",children:[c.jsx("li",{children:"تأكد من وضوح الرسالة التسويقية والمدة الزمنية للعرض."}),c.jsx("li",{children:"راجع الميزانية واقترانها بمؤشرات الأداء المطلوبة قبل النشر."}),c.jsx("li",{children:"اربط الإعلان بالمنتجات المميزة لزيادة فرصة التحويل."}),c.jsx("li",{children:"تابع التعليقات وتقييم العملاء خلال فترة الحملة لتحديث المحتوى."})]})]})]})},eD=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState({}),[i,o]=j.useState(!0),[l,u]=j.useState(null);j.useEffect(()=>{if(!t)return;(async()=>{const g=(await bn(Oe(ee,"restaurants"))).docs.map(R=>({id:R.id,...R.data()}));n(g);const x=Ut(Oe(ee,"hiringRequests"),Vr("courierId","==",t.uid)),w=await bn(x),A={};w.docs.forEach(R=>{const y=R.data();A[y.restaurantId]={restaurantId:y.restaurantId,status:y.status}}),s(A),o(!1)})()},[t]);const d=async f=>{if(!t)return alert("سجل دخول أولاً");u(f.id),await dc(Oe(ee,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"مندوب",restaurantId:f.id,restaurantName:f.name,status:"pending",createdAt:xs()}),s(p=>({...p,[f.id]:{restaurantId:f.id,status:"pending"}})),u(null)};return i?c.jsx("div",{className:"text-center py-10 text-gray-300",children:"⏳ تحميل المطاعم..."}):c.jsxs("div",{className:"py-8",children:[c.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[c.jsx(aj,{className:"w-7 h-7 text-yellow-400"}),"طلبات التوظيف"]}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(f=>{const p=r[f.id];return c.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[f.logoUrl?c.jsx("img",{src:f.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):c.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:"🍴"}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:f.name}),p?c.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&c.jsx(mj,{className:"w-4 h-4"}),p.status==="accepted"&&c.jsx(uj,{className:"w-4 h-4"}),p.status==="rejected"&&c.jsx(dj,{className:"w-4 h-4"}),p.status==="pending"?"قيد المراجعة":p.status==="accepted"?"✅ تم القبول":"❌ مرفوض"]}):c.jsx("button",{disabled:l===f.id,onClick:()=>d(f),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:l===f.id?"⏳ جاري الإرسال...":"📩 طلب توظيف"})]},f.id)})})]})},tD=()=>{const{user:t}=bt(),[e,n]=j.useState([]),[r,s]=j.useState(!0);j.useEffect(()=>{t&&(async()=>{const o=Ut(Oe(ee,"hiringRequests"),Vr("restaurantId","==",t.uid)),l=await bn(o);n(l.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(o,l)=>{await wi(ke(ee,"hiringRequests",o),{status:l}),n(u=>u.map(d=>d.id===o?{...d,status:l}:d))};return r?c.jsx("div",{className:"text-center py-10",children:"⏳ تحميل..."}):c.jsxs("div",{className:"py-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:"طلبات المندوبين"}),e.length===0?c.jsx("div",{className:"text-gray-400 text-center",children:"لا توجد طلبات"}):c.jsx("div",{className:"space-y-3",children:e.map(o=>c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold",children:o.courierName}),c.jsx("div",{className:"text-sm text-gray-600",children:o.status==="pending"?"بانتظار الرد":o.status})]}),o.status==="pending"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>i(o.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:"قبول"}),c.jsx("button",{onClick:()=>i(o.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:"رفض"})]})]},o.id))})]})},nD=()=>{var l;const[t,e]=j.useState([]),[n,r]=j.useState(!0),[s,i]=j.useState(null);j.useEffect(()=>{(async()=>{try{i(null);const u=Ut(Oe(ee,"orders"),kr("createdAt","desc"),yE(10)),f=(await bn(u)).docs.map(p=>{var x,w,A,R,y,v;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((w=(x=g==null?void 0:g.items)==null?void 0:x[0])==null?void 0:w.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(y=(R=(A=g.createdAt)==null?void 0:A.toDate)==null?void 0:R.call(A))==null?void 0:y.toISOString)==null?void 0:v.call(y))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await bn(Oe(ee,"orders"))).docs.map(p=>{var x,w,A,R,y,v;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((w=(x=g==null?void 0:g.items)==null?void 0:x[0])==null?void 0:w.ownerId)??null,customerId:g.customerId??null,createdAtISO:((v=(y=(R=(A=g.createdAt)==null?void 0:A.toDate)==null?void 0:R.call(A))==null?void 0:y.toISOString)==null?void 0:v.call(y))??null}});e(f),i("⚠️ ما فيه فهرس لـ createdAt — عرضنا البيانات بدون ترتيب.")}catch(d){i("❌ فشل الجلب حتى بدون ترتيب: "+((d==null?void 0:d.message)||d))}else i("❌ خطأ الجلب: "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const o=(l=Ea.options)==null?void 0:l.projectId;return c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),c.jsxs("div",{className:"text-sm",children:["ProjectId: ",c.jsx("b",{children:String(o)})]}),s&&c.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&c.jsx("div",{children:"⏳ Loading…"}),!n&&t.length===0&&c.jsxs("div",{className:"text-gray-600",children:["لا توجد أي مستندات في collection: ",c.jsx("code",{children:"orders"})," في هذا المشروع."]}),t.map(u=>c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[c.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),c.jsxs("div",{children:["restaurantId: ",c.jsx("b",{children:String(u.restaurantId)})]}),c.jsxs("div",{children:["items[0].ownerId: ",c.jsx("b",{children:String(u.firstItemOwnerId)})]}),c.jsxs("div",{children:["customerId: ",c.jsx("b",{children:String(u.customerId)})]}),c.jsxs("div",{children:["createdAt: ",c.jsx("b",{children:u.createdAtISO||"—"})]})]},u.id))]})};function rD(){return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"تم حذف حسابك بنجاح"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"نأسف لمغادرتك 🍗 يمكنك العودة في أي وقت وإنشاء حساب جديد."}),c.jsx(Tt,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"الرجوع إلى الصفحة الرئيسية"})]})}function sD(){return c.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:c.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"سياسة الخصوصية - 🍗 سفرة البيت"}),c.jsxs("p",{className:"mb-4",children:["نُقدّر ثقتك بتطبيق ",c.jsx("strong",{children:"سفرة البيت"})," ونسعى لحماية خصوصيتك وبياناتك الشخصية وفقًا لأفضل الممارسات ومعايير الأمان."]}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1. جمع المعلومات"}),c.jsx("p",{className:"mb-4",children:"نقوم بجمع المعلومات التي تقدمها عند إنشاء حسابك أو عند استخدام خدماتنا، مثل الاسم، رقم الجوال، الموقع، وطلباتك داخل التطبيق. كما قد نجمع بيانات فنية مثل نوع الجهاز ونظام التشغيل لتحسين الأداء."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2. استخدام المعلومات"}),c.jsx("p",{className:"mb-4",children:"تُستخدم المعلومات لتقديم الخدمات وتحسين تجربة المستخدم، وإرسال الإشعارات المتعلقة بالطلبات، والدعم الفني، وتطوير مميزات جديدة."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3. حماية البيانات"}),c.jsx("p",{className:"mb-4",children:"نستخدم أنظمة حماية حديثة لتأمين بياناتك من الوصول غير المصرّح به أو التعديل أو الإفشاء. ولن نشارك معلوماتك مع أي جهة خارجية إلا بموافقتك أو وفقًا للأنظمة السارية في المملكة العربية السعودية."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4. مشاركة المعلومات"}),c.jsx("p",{className:"mb-4",children:"قد نشارك بعض المعلومات مع مقدّمي الخدمات (مثل شركات التوصيل أو الدفع) فقط بالقدر اللازم لإتمام الطلبات، وبما يضمن سرية بياناتك."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5. حقوق المستخدم"}),c.jsxs("p",{className:"mb-4",children:["يمكنك في أي وقت تحديث معلوماتك الشخصية أو حذف حسابك نهائيًا من خلال إعدادات التطبيق. كما يمكنك التواصل معنا لأي استفسار يخص الخصوصية عبر:",c.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6. التعديلات على السياسة"}),c.jsx("p",{className:"mb-4",children:"قد نقوم بتحديث هذه السياسة من وقت لآخر، وسيتم إشعار المستخدمين بأي تغيير جوهري عبر التطبيق أو البريد الإلكتروني."}),c.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["تم آخر تحديث لهذه السياسة بتاريخ ",new Date().toLocaleDateString("ar-SA"),"."]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx(Tt,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"الرجوع إلى الصفحة الرئيسية"})})]})})}const iD=()=>c.jsx(Qp,{defaultMode:"family"}),oD=()=>c.jsx(Qp,{defaultMode:"restaurant"});function aD(){return c.jsxs("div",{className:"min-h-screen flex flex-col bg-secondary text-dark",children:[c.jsx(Ij,{}),c.jsx(Ej,{}),c.jsx("main",{className:"flex-1 max-w-6xl mx-auto px-4 py-8 bg-gradient-to-br from-secondary via-[#FCEBCB] to-[#F7DDA6] rounded-xl shadow-inner",children:c.jsxs(Bb,{children:[c.jsx(ye,{path:"/",element:c.jsx(Wj,{})}),c.jsx(ye,{path:"/restaurants",element:c.jsx(Xj,{})}),c.jsx(ye,{path:"/menu",element:c.jsx(Nj,{})}),c.jsx(ye,{path:"/login",element:c.jsx(Qp,{})}),c.jsx(ye,{path:"/login/family",element:c.jsx(iD,{})}),c.jsx(ye,{path:"/login/restaurant",element:c.jsx(oD,{})}),c.jsx(ye,{path:"/admin/login",element:c.jsx(Fj,{})}),c.jsx(ye,{path:"/register",element:c.jsx(kj,{})}),c.jsx(ye,{path:"/cart",element:c.jsx(Hj,{})}),c.jsx(ye,{path:"/developer",element:c.jsx(Yj,{})}),c.jsx(ye,{path:"/ads",element:c.jsx(Zj,{})}),c.jsx(ye,{path:"/privacy-policy",element:c.jsx(sD,{})}),c.jsx(ye,{path:"/account-deleted",element:c.jsx(rD,{})}),c.jsx(ye,{path:"/checkout",element:c.jsx(hn,{children:c.jsx(en,{allow:["customer"],children:c.jsx(Cj,{})})})}),c.jsx(ye,{path:"/orders",element:c.jsx(hn,{children:c.jsx(en,{allow:["customer"],children:c.jsx(Pj,{})})})}),c.jsx(ye,{path:"/owner",element:c.jsx(hn,{children:c.jsx(en,{allow:["owner"],children:c.jsx(jj,{})})})}),c.jsx(ye,{path:"/owner/menu",element:c.jsx(hn,{children:c.jsx(en,{allow:["owner"],children:c.jsx(Dj,{})})})}),c.jsx(ye,{path:"/owner/orders",element:c.jsx(hn,{children:c.jsx(en,{allow:["owner"],children:c.jsx(Lj,{})})})}),c.jsx(ye,{path:"/owner/edit",element:c.jsx(hn,{children:c.jsx(en,{allow:["owner"],children:c.jsx(qj,{})})})}),c.jsx(ye,{path:"/owner/courier-requests",element:c.jsx(hn,{children:c.jsx(en,{allow:["owner"],children:c.jsx(tD,{})})})}),c.jsx(ye,{path:"/courier",element:c.jsx(hn,{children:c.jsx(en,{allow:["courier"],children:c.jsx(Vj,{})})})}),c.jsx(ye,{path:"/courier/hiring",element:c.jsx(hn,{children:c.jsx(en,{allow:["courier"],children:c.jsx(eD,{})})})}),c.jsx(ye,{path:"/admin/panel",element:c.jsx(hn,{redirectTo:"/admin/login",children:c.jsx(en,{allow:["admin"],children:c.jsx(zj,{})})})}),c.jsx(ye,{path:"/__debug_orders",element:c.jsx(nD,{})})]})}),c.jsx(Tj,{})]})}const lD=j.createContext(void 0),uD=({children:t})=>{const[e,n]=j.useState([]),r=i=>{n(o=>o.find(u=>u.id===i.id)?o.map(u=>u.id===i.id?{...u,qty:u.qty+1}:u):[...o,{...i,qty:1}])},s=i=>{n(o=>o.filter(l=>l.id!==i))};return c.jsx(lD.Provider,{value:{cart:e,addToCart:r,removeFromCart:s},children:t})};bd.createRoot(document.getElementById("root")).render(c.jsx(Gv.StrictMode,{children:c.jsx(Gb,{children:c.jsx(ej,{children:c.jsxs(uD,{children:["   ",c.jsx(aD,{})]})})})}));
