function wT(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();function xT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Lv={exports:{}},Tu={},Vv={exports:{}},ne={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sa=Symbol.for("react.element"),ET=Symbol.for("react.portal"),TT=Symbol.for("react.fragment"),IT=Symbol.for("react.strict_mode"),ST=Symbol.for("react.profiler"),NT=Symbol.for("react.provider"),AT=Symbol.for("react.context"),RT=Symbol.for("react.forward_ref"),bT=Symbol.for("react.suspense"),CT=Symbol.for("react.memo"),kT=Symbol.for("react.lazy"),Km=Symbol.iterator;function PT(t){return t===null||typeof t!="object"?null:(t=Km&&t[Km]||t["@@iterator"],typeof t=="function"?t:null)}var Mv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Fv=Object.assign,Uv={};function Ei(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Mv}Ei.prototype.isReactComponent={};Ei.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ei.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Bv(){}Bv.prototype=Ei.prototype;function Wh(t,e,n){this.props=t,this.context=e,this.refs=Uv,this.updater=n||Mv}var Hh=Wh.prototype=new Bv;Hh.constructor=Wh;Fv(Hh,Ei.prototype);Hh.isPureReactComponent=!0;var Gm=Array.isArray,$v=Object.prototype.hasOwnProperty,Kh={current:null},zv={key:!0,ref:!0,__self:!0,__source:!0};function qv(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)$v.call(e,r)&&!zv.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var u=Array(l),d=0;d<l;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:sa,type:t,key:i,ref:o,props:s,_owner:Kh.current}}function jT(t,e){return{$$typeof:sa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gh(t){return typeof t=="object"&&t!==null&&t.$$typeof===sa}function DT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Qm=/\/+/g;function Oc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?DT(""+t.key):e.toString(36)}function fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case sa:case ET:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Oc(o,0):r,Gm(s)?(n="",t!=null&&(n=t.replace(Qm,"$&/")+"/"),fl(s,e,n,"",function(d){return d})):s!=null&&(Gh(s)&&(s=jT(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Qm,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",Gm(t))for(var l=0;l<t.length;l++){i=t[l];var u=r+Oc(i,l);o+=fl(i,e,n,u,s)}else if(u=PT(t),typeof u=="function")for(t=u.call(t),l=0;!(i=t.next()).done;)i=i.value,u=r+Oc(i,l++),o+=fl(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ba(t,e,n){if(t==null)return t;var r=[],s=0;return fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function OT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Et={current:null},pl={transition:null},LT={ReactCurrentDispatcher:Et,ReactCurrentBatchConfig:pl,ReactCurrentOwner:Kh};function Wv(){throw Error("act(...) is not supported in production builds of React.")}ne.Children={map:Ba,forEach:function(t,e,n){Ba(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Ba(t,function(){e++}),e},toArray:function(t){return Ba(t,function(e){return e})||[]},only:function(t){if(!Gh(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ne.Component=Ei;ne.Fragment=TT;ne.Profiler=ST;ne.PureComponent=Wh;ne.StrictMode=IT;ne.Suspense=bT;ne.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LT;ne.act=Wv;ne.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Fv({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kh.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)$v.call(e,u)&&!zv.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var d=0;d<u;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:sa,type:t.type,key:s,ref:i,props:r,_owner:o}};ne.createContext=function(t){return t={$$typeof:AT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:NT,_context:t},t.Consumer=t};ne.createElement=qv;ne.createFactory=function(t){var e=qv.bind(null,t);return e.type=t,e};ne.createRef=function(){return{current:null}};ne.forwardRef=function(t){return{$$typeof:RT,render:t}};ne.isValidElement=Gh;ne.lazy=function(t){return{$$typeof:kT,_payload:{_status:-1,_result:t},_init:OT}};ne.memo=function(t,e){return{$$typeof:CT,type:t,compare:e===void 0?null:e}};ne.startTransition=function(t){var e=pl.transition;pl.transition={};try{t()}finally{pl.transition=e}};ne.unstable_act=Wv;ne.useCallback=function(t,e){return Et.current.useCallback(t,e)};ne.useContext=function(t){return Et.current.useContext(t)};ne.useDebugValue=function(){};ne.useDeferredValue=function(t){return Et.current.useDeferredValue(t)};ne.useEffect=function(t,e){return Et.current.useEffect(t,e)};ne.useId=function(){return Et.current.useId()};ne.useImperativeHandle=function(t,e,n){return Et.current.useImperativeHandle(t,e,n)};ne.useInsertionEffect=function(t,e){return Et.current.useInsertionEffect(t,e)};ne.useLayoutEffect=function(t,e){return Et.current.useLayoutEffect(t,e)};ne.useMemo=function(t,e){return Et.current.useMemo(t,e)};ne.useReducer=function(t,e,n){return Et.current.useReducer(t,e,n)};ne.useRef=function(t){return Et.current.useRef(t)};ne.useState=function(t){return Et.current.useState(t)};ne.useSyncExternalStore=function(t,e,n){return Et.current.useSyncExternalStore(t,e,n)};ne.useTransition=function(){return Et.current.useTransition()};ne.version="18.3.1";Vv.exports=ne;var P=Vv.exports;const Hv=xT(P),VT=wT({__proto__:null,default:Hv},[P]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MT=P,FT=Symbol.for("react.element"),UT=Symbol.for("react.fragment"),BT=Object.prototype.hasOwnProperty,$T=MT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zT={key:!0,ref:!0,__self:!0,__source:!0};function Kv(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)BT.call(e,r)&&!zT.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:FT,type:t,key:i,ref:o,props:s,_owner:$T.current}}Tu.Fragment=UT;Tu.jsx=Kv;Tu.jsxs=Kv;Lv.exports=Tu;var c=Lv.exports,Id={},Gv={exports:{}},Ut={},Qv={exports:{}},Yv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,Q){var Z=$.length;$.push(Q);e:for(;0<Z;){var pe=Z-1>>>1,H=$[pe];if(0<s(H,Q))$[pe]=Q,$[Z]=H,Z=pe;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var Q=$[0],Z=$.pop();if(Z!==Q){$[0]=Z;e:for(var pe=0,H=$.length,te=H>>>1;pe<te;){var de=2*(pe+1)-1,Ne=$[de],nt=de+1,Ke=$[nt];if(0>s(Ne,Z))nt<H&&0>s(Ke,Ne)?($[pe]=Ke,$[nt]=Z,pe=nt):($[pe]=Ne,$[de]=Z,pe=de);else if(nt<H&&0>s(Ke,Z))$[pe]=Ke,$[nt]=Z,pe=nt;else break e}}return Q}function s($,Q){var Z=$.sortIndex-Q.sortIndex;return Z!==0?Z:$.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],d=[],f=1,p=null,g=3,w=!1,I=!1,R=!1,b=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=$)r(d),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(d)}}function C($){if(R=!1,T($),!I)if(n(u)!==null)I=!0,Wr(O);else{var Q=n(d);Q!==null&&Yt(C,Q.startTime-$)}}function O($,Q){I=!1,R&&(R=!1,y(x),x=-1),w=!0;var Z=g;try{for(T(Q),p=n(u);p!==null&&(!(p.expirationTime>Q)||$&&!k());){var pe=p.callback;if(typeof pe=="function"){p.callback=null,g=p.priorityLevel;var H=pe(p.expirationTime<=Q);Q=t.unstable_now(),typeof H=="function"?p.callback=H:p===n(u)&&r(u),T(Q)}else r(u);p=n(u)}if(p!==null)var te=!0;else{var de=n(d);de!==null&&Yt(C,de.startTime-Q),te=!1}return te}finally{p=null,g=Z,w=!1}}var M=!1,E=null,x=-1,S=5,N=-1;function k(){return!(t.unstable_now()-N<S)}function j(){if(E!==null){var $=t.unstable_now();N=$;var Q=!0;try{Q=E(!0,$)}finally{Q?A():(M=!1,E=null)}}else M=!1}var A;if(typeof _=="function")A=function(){_(j)};else if(typeof MessageChannel<"u"){var mt=new MessageChannel,$t=mt.port2;mt.port1.onmessage=j,A=function(){$t.postMessage(null)}}else A=function(){b(j,0)};function Wr($){E=$,M||(M=!0,A())}function Yt($,Q){x=b(function(){$(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||w||(I=!0,Wr(O))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(g){case 1:case 2:case 3:var Q=3;break;default:Q=g}var Z=g;g=Q;try{return $()}finally{g=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,Q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var Z=g;g=$;try{return Q()}finally{g=Z}},t.unstable_scheduleCallback=function($,Q,Z){var pe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?pe+Z:pe):Z=pe,$){case 1:var H=-1;break;case 2:H=250;break;case 5:H=1073741823;break;case 4:H=1e4;break;default:H=5e3}return H=Z+H,$={id:f++,callback:Q,priorityLevel:$,startTime:Z,expirationTime:H,sortIndex:-1},Z>pe?($.sortIndex=Z,e(d,$),n(u)===null&&$===n(d)&&(R?(y(x),x=-1):R=!0,Yt(C,Z-pe))):($.sortIndex=H,e(u,$),I||w||(I=!0,Wr(O))),$},t.unstable_shouldYield=k,t.unstable_wrapCallback=function($){var Q=g;return function(){var Z=g;g=Q;try{return $.apply(this,arguments)}finally{g=Z}}}})(Yv);Qv.exports=Yv;var qT=Qv.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var WT=P,Ft=qT;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Xv=new Set,Ro={};function Es(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(Ro[t]=e,t=0;t<e.length;t++)Xv.add(e[t])}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sd=Object.prototype.hasOwnProperty,HT=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Ym={},Xm={};function KT(t){return Sd.call(Xm,t)?!0:Sd.call(Ym,t)?!1:HT.test(t)?Xm[t]=!0:(Ym[t]=!0,!1)}function GT(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function QT(t,e,n,r){if(e===null||typeof e>"u"||GT(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qh=/[\-:]([a-z])/g;function Yh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);et[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qh,Yh);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qh,Yh);et[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xh(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(QT(e,n,s,r)&&(n=null),r||s===null?KT(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=WT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$a=Symbol.for("react.element"),Vs=Symbol.for("react.portal"),Ms=Symbol.for("react.fragment"),Jh=Symbol.for("react.strict_mode"),Nd=Symbol.for("react.profiler"),Jv=Symbol.for("react.provider"),Zv=Symbol.for("react.context"),Zh=Symbol.for("react.forward_ref"),Ad=Symbol.for("react.suspense"),Rd=Symbol.for("react.suspense_list"),ef=Symbol.for("react.memo"),sr=Symbol.for("react.lazy"),e_=Symbol.for("react.offscreen"),Jm=Symbol.iterator;function Hi(t){return t===null||typeof t!="object"?null:(t=Jm&&t[Jm]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,Lc;function no(t){if(Lc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Lc=e&&e[1]||""}return`
`+Lc+t}var Vc=!1;function Mc(t,e){if(!t||Vc)return"";Vc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Vc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?no(t):""}function YT(t){switch(t.tag){case 5:return no(t.type);case 16:return no("Lazy");case 13:return no("Suspense");case 19:return no("SuspenseList");case 0:case 2:case 15:return t=Mc(t.type,!1),t;case 11:return t=Mc(t.type.render,!1),t;case 1:return t=Mc(t.type,!0),t;default:return""}}function bd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ms:return"Fragment";case Vs:return"Portal";case Nd:return"Profiler";case Jh:return"StrictMode";case Ad:return"Suspense";case Rd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zv:return(t.displayName||"Context")+".Consumer";case Jv:return(t._context.displayName||"Context")+".Provider";case Zh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ef:return e=t.displayName||null,e!==null?e:bd(t.type)||"Memo";case sr:e=t._payload,t=t._init;try{return bd(t(e))}catch{}}return null}function XT(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bd(e);case 8:return e===Jh?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Cr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function t_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function JT(t){var e=t_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function za(t){t._valueTracker||(t._valueTracker=JT(t))}function n_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=t_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ol(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Cd(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Zm(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Cr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function r_(t,e){e=e.checked,e!=null&&Xh(t,"checked",e,!1)}function kd(t,e){r_(t,e);var n=Cr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Pd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Pd(t,e.type,Cr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function eg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Pd(t,e,n){(e!=="number"||Ol(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ro=Array.isArray;function Ys(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Cr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function jd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function tg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(ro(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Cr(n)}}function s_(t,e){var n=Cr(e.value),r=Cr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ng(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function i_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Dd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?i_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var qa,o_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(qa=qa||document.createElement("div"),qa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=qa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function bo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ZT=["Webkit","ms","Moz","O"];Object.keys(fo).forEach(function(t){ZT.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),fo[e]=fo[t]})});function a_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||fo.hasOwnProperty(t)&&fo[t]?(""+e).trim():e+"px"}function l_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=a_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var eI=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Od(t,e){if(e){if(eI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function Ld(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Vd=null;function tf(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Md=null,Xs=null,Js=null;function rg(t){if(t=aa(t)){if(typeof Md!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Ru(e),Md(t.stateNode,t.type,e))}}function u_(t){Xs?Js?Js.push(t):Js=[t]:Xs=t}function c_(){if(Xs){var t=Xs,e=Js;if(Js=Xs=null,rg(t),e)for(t=0;t<e.length;t++)rg(e[t])}}function d_(t,e){return t(e)}function h_(){}var Fc=!1;function f_(t,e,n){if(Fc)return t(e,n);Fc=!0;try{return d_(t,e,n)}finally{Fc=!1,(Xs!==null||Js!==null)&&(h_(),c_())}}function Co(t,e){var n=t.stateNode;if(n===null)return null;var r=Ru(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var Fd=!1;if(Bn)try{var Ki={};Object.defineProperty(Ki,"passive",{get:function(){Fd=!0}}),window.addEventListener("test",Ki,Ki),window.removeEventListener("test",Ki,Ki)}catch{Fd=!1}function tI(t,e,n,r,s,i,o,l,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var po=!1,Ll=null,Vl=!1,Ud=null,nI={onError:function(t){po=!0,Ll=t}};function rI(t,e,n,r,s,i,o,l,u){po=!1,Ll=null,tI.apply(nI,arguments)}function sI(t,e,n,r,s,i,o,l,u){if(rI.apply(this,arguments),po){if(po){var d=Ll;po=!1,Ll=null}else throw Error(U(198));Vl||(Vl=!0,Ud=d)}}function Ts(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function p_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function sg(t){if(Ts(t)!==t)throw Error(U(188))}function iI(t){var e=t.alternate;if(!e){if(e=Ts(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return sg(s),t;if(i===r)return sg(s),e;i=i.sibling}throw Error(U(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==r)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function m_(t){return t=iI(t),t!==null?g_(t):null}function g_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=g_(t);if(e!==null)return e;t=t.sibling}return null}var y_=Ft.unstable_scheduleCallback,ig=Ft.unstable_cancelCallback,oI=Ft.unstable_shouldYield,aI=Ft.unstable_requestPaint,De=Ft.unstable_now,lI=Ft.unstable_getCurrentPriorityLevel,nf=Ft.unstable_ImmediatePriority,v_=Ft.unstable_UserBlockingPriority,Ml=Ft.unstable_NormalPriority,uI=Ft.unstable_LowPriority,__=Ft.unstable_IdlePriority,Iu=null,gn=null;function cI(t){if(gn&&typeof gn.onCommitFiberRoot=="function")try{gn.onCommitFiberRoot(Iu,t,void 0,(t.current.flags&128)===128)}catch{}}var sn=Math.clz32?Math.clz32:fI,dI=Math.log,hI=Math.LN2;function fI(t){return t>>>=0,t===0?32:31-(dI(t)/hI|0)|0}var Wa=64,Ha=4194304;function so(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=so(l):(i&=o,i!==0&&(r=so(i)))}else o=n&~s,o!==0?r=so(o):i!==0&&(r=so(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-sn(e),s=1<<n,r|=t[n],e&=~s;return r}function pI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function mI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-sn(i),l=1<<o,u=s[o];u===-1?(!(l&n)||l&r)&&(s[o]=pI(l,e)):u<=e&&(t.expiredLanes|=l),i&=~l}}function Bd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function w_(){var t=Wa;return Wa<<=1,!(Wa&4194240)&&(Wa=64),t}function Uc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ia(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-sn(e),t[e]=n}function gI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-sn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rf(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-sn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function x_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var E_,sf,T_,I_,S_,$d=!1,Ka=[],yr=null,vr=null,_r=null,ko=new Map,Po=new Map,or=[],yI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function og(t,e){switch(t){case"focusin":case"focusout":yr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":_r=null;break;case"pointerover":case"pointerout":ko.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Po.delete(e.pointerId)}}function Gi(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=aa(e),e!==null&&sf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function vI(t,e,n,r,s){switch(e){case"focusin":return yr=Gi(yr,t,e,n,r,s),!0;case"dragenter":return vr=Gi(vr,t,e,n,r,s),!0;case"mouseover":return _r=Gi(_r,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ko.set(i,Gi(ko.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Po.set(i,Gi(Po.get(i)||null,t,e,n,r,s)),!0}return!1}function N_(t){var e=es(t.target);if(e!==null){var n=Ts(e);if(n!==null){if(e=n.tag,e===13){if(e=p_(n),e!==null){t.blockedOn=e,S_(t.priority,function(){T_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ml(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=zd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Vd=r,n.target.dispatchEvent(r),Vd=null}else return e=aa(n),e!==null&&sf(e),t.blockedOn=n,!1;e.shift()}return!0}function ag(t,e,n){ml(t)&&n.delete(e)}function _I(){$d=!1,yr!==null&&ml(yr)&&(yr=null),vr!==null&&ml(vr)&&(vr=null),_r!==null&&ml(_r)&&(_r=null),ko.forEach(ag),Po.forEach(ag)}function Qi(t,e){t.blockedOn===e&&(t.blockedOn=null,$d||($d=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,_I)))}function jo(t){function e(s){return Qi(s,t)}if(0<Ka.length){Qi(Ka[0],t);for(var n=1;n<Ka.length;n++){var r=Ka[n];r.blockedOn===t&&(r.blockedOn=null)}}for(yr!==null&&Qi(yr,t),vr!==null&&Qi(vr,t),_r!==null&&Qi(_r,t),ko.forEach(e),Po.forEach(e),n=0;n<or.length;n++)r=or[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<or.length&&(n=or[0],n.blockedOn===null);)N_(n),n.blockedOn===null&&or.shift()}var Zs=Yn.ReactCurrentBatchConfig,Ul=!0;function wI(t,e,n,r){var s=ue,i=Zs.transition;Zs.transition=null;try{ue=1,of(t,e,n,r)}finally{ue=s,Zs.transition=i}}function xI(t,e,n,r){var s=ue,i=Zs.transition;Zs.transition=null;try{ue=4,of(t,e,n,r)}finally{ue=s,Zs.transition=i}}function of(t,e,n,r){if(Ul){var s=zd(t,e,n,r);if(s===null)Yc(t,e,r,Bl,n),og(t,r);else if(vI(s,t,e,n,r))r.stopPropagation();else if(og(t,r),e&4&&-1<yI.indexOf(t)){for(;s!==null;){var i=aa(s);if(i!==null&&E_(i),i=zd(t,e,n,r),i===null&&Yc(t,e,r,Bl,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Yc(t,e,r,null,n)}}var Bl=null;function zd(t,e,n,r){if(Bl=null,t=tf(r),t=es(t),t!==null)if(e=Ts(t),e===null)t=null;else if(n=e.tag,n===13){if(t=p_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Bl=t,null}function A_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lI()){case nf:return 1;case v_:return 4;case Ml:case uI:return 16;case __:return 536870912;default:return 16}default:return 16}}var fr=null,af=null,gl=null;function R_(){if(gl)return gl;var t,e=af,n=e.length,r,s="value"in fr?fr.value:fr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return gl=s.slice(t,1<r?1-r:void 0)}function yl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ga(){return!0}function lg(){return!1}function Bt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Ga:lg,this.isPropagationStopped=lg,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ga)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ga)},persist:function(){},isPersistent:Ga}),e}var Ti={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lf=Bt(Ti),oa=Ie({},Ti,{view:0,detail:0}),EI=Bt(oa),Bc,$c,Yi,Su=Ie({},oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Yi&&(Yi&&t.type==="mousemove"?(Bc=t.screenX-Yi.screenX,$c=t.screenY-Yi.screenY):$c=Bc=0,Yi=t),Bc)},movementY:function(t){return"movementY"in t?t.movementY:$c}}),ug=Bt(Su),TI=Ie({},Su,{dataTransfer:0}),II=Bt(TI),SI=Ie({},oa,{relatedTarget:0}),zc=Bt(SI),NI=Ie({},Ti,{animationName:0,elapsedTime:0,pseudoElement:0}),AI=Bt(NI),RI=Ie({},Ti,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),bI=Bt(RI),CI=Ie({},Ti,{data:0}),cg=Bt(CI),kI={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},PI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function DI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jI[t])?!!e[t]:!1}function uf(){return DI}var OI=Ie({},oa,{key:function(t){if(t.key){var e=kI[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=yl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?PI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uf,charCode:function(t){return t.type==="keypress"?yl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?yl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LI=Bt(OI),VI=Ie({},Su,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),dg=Bt(VI),MI=Ie({},oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uf}),FI=Bt(MI),UI=Ie({},Ti,{propertyName:0,elapsedTime:0,pseudoElement:0}),BI=Bt(UI),$I=Ie({},Su,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zI=Bt($I),qI=[9,13,27,32],cf=Bn&&"CompositionEvent"in window,mo=null;Bn&&"documentMode"in document&&(mo=document.documentMode);var WI=Bn&&"TextEvent"in window&&!mo,b_=Bn&&(!cf||mo&&8<mo&&11>=mo),hg=" ",fg=!1;function C_(t,e){switch(t){case"keyup":return qI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function k_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function HI(t,e){switch(t){case"compositionend":return k_(e);case"keypress":return e.which!==32?null:(fg=!0,hg);case"textInput":return t=e.data,t===hg&&fg?null:t;default:return null}}function KI(t,e){if(Fs)return t==="compositionend"||!cf&&C_(t,e)?(t=R_(),gl=af=fr=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return b_&&e.locale!=="ko"?null:e.data;default:return null}}var GI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!GI[t.type]:e==="textarea"}function P_(t,e,n,r){u_(r),e=$l(e,"onChange"),0<e.length&&(n=new lf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var go=null,Do=null;function QI(t){z_(t,0)}function Nu(t){var e=$s(t);if(n_(e))return t}function YI(t,e){if(t==="change")return e}var j_=!1;if(Bn){var qc;if(Bn){var Wc="oninput"in document;if(!Wc){var mg=document.createElement("div");mg.setAttribute("oninput","return;"),Wc=typeof mg.oninput=="function"}qc=Wc}else qc=!1;j_=qc&&(!document.documentMode||9<document.documentMode)}function gg(){go&&(go.detachEvent("onpropertychange",D_),Do=go=null)}function D_(t){if(t.propertyName==="value"&&Nu(Do)){var e=[];P_(e,Do,t,tf(t)),f_(QI,e)}}function XI(t,e,n){t==="focusin"?(gg(),go=e,Do=n,go.attachEvent("onpropertychange",D_)):t==="focusout"&&gg()}function JI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Nu(Do)}function ZI(t,e){if(t==="click")return Nu(e)}function eS(t,e){if(t==="input"||t==="change")return Nu(e)}function tS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var an=typeof Object.is=="function"?Object.is:tS;function Oo(t,e){if(an(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sd.call(e,s)||!an(t[s],e[s]))return!1}return!0}function yg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vg(t,e){var n=yg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=yg(n)}}function O_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?O_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function L_(){for(var t=window,e=Ol();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ol(t.document)}return e}function df(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function nS(t){var e=L_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&O_(n.ownerDocument.documentElement,n)){if(r!==null&&df(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=vg(n,i);var o=vg(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var rS=Bn&&"documentMode"in document&&11>=document.documentMode,Us=null,qd=null,yo=null,Wd=!1;function _g(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Wd||Us==null||Us!==Ol(r)||(r=Us,"selectionStart"in r&&df(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),yo&&Oo(yo,r)||(yo=r,r=$l(qd,"onSelect"),0<r.length&&(e=new lf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function Qa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bs={animationend:Qa("Animation","AnimationEnd"),animationiteration:Qa("Animation","AnimationIteration"),animationstart:Qa("Animation","AnimationStart"),transitionend:Qa("Transition","TransitionEnd")},Hc={},V_={};Bn&&(V_=document.createElement("div").style,"AnimationEvent"in window||(delete Bs.animationend.animation,delete Bs.animationiteration.animation,delete Bs.animationstart.animation),"TransitionEvent"in window||delete Bs.transitionend.transition);function Au(t){if(Hc[t])return Hc[t];if(!Bs[t])return t;var e=Bs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in V_)return Hc[t]=e[n];return t}var M_=Au("animationend"),F_=Au("animationiteration"),U_=Au("animationstart"),B_=Au("transitionend"),$_=new Map,wg="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Vr(t,e){$_.set(t,e),Es(e,[t])}for(var Kc=0;Kc<wg.length;Kc++){var Gc=wg[Kc],sS=Gc.toLowerCase(),iS=Gc[0].toUpperCase()+Gc.slice(1);Vr(sS,"on"+iS)}Vr(M_,"onAnimationEnd");Vr(F_,"onAnimationIteration");Vr(U_,"onAnimationStart");Vr("dblclick","onDoubleClick");Vr("focusin","onFocus");Vr("focusout","onBlur");Vr(B_,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);Es("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Es("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Es("onBeforeInput",["compositionend","keypress","textInput","paste"]);Es("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Es("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),oS=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function xg(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,sI(r,e,void 0,t),t.currentTarget=null}function z_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,d=l.currentTarget;if(l=l.listener,u!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,d=l.currentTarget,l=l.listener,u!==i&&s.isPropagationStopped())break e;xg(s,l,d),i=u}}}if(Vl)throw t=Ud,Vl=!1,Ud=null,t}function ge(t,e){var n=e[Yd];n===void 0&&(n=e[Yd]=new Set);var r=t+"__bubble";n.has(r)||(q_(e,t,2,!1),n.add(r))}function Qc(t,e,n){var r=0;e&&(r|=4),q_(n,t,r,e)}var Ya="_reactListening"+Math.random().toString(36).slice(2);function Lo(t){if(!t[Ya]){t[Ya]=!0,Xv.forEach(function(n){n!=="selectionchange"&&(oS.has(n)||Qc(n,!1,t),Qc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ya]||(e[Ya]=!0,Qc("selectionchange",!1,e))}}function q_(t,e,n,r){switch(A_(e)){case 1:var s=wI;break;case 4:s=xI;break;default:s=of}n=s.bind(null,e,n,t),s=void 0,!Fd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Yc(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;l!==null;){if(o=es(l),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}l=l.parentNode}}r=r.return}f_(function(){var d=i,f=tf(n),p=[];e:{var g=$_.get(t);if(g!==void 0){var w=lf,I=t;switch(t){case"keypress":if(yl(n)===0)break e;case"keydown":case"keyup":w=LI;break;case"focusin":I="focus",w=zc;break;case"focusout":I="blur",w=zc;break;case"beforeblur":case"afterblur":w=zc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=ug;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=II;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=FI;break;case M_:case F_:case U_:w=AI;break;case B_:w=BI;break;case"scroll":w=EI;break;case"wheel":w=zI;break;case"copy":case"cut":case"paste":w=bI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=dg}var R=(e&4)!==0,b=!R&&t==="scroll",y=R?g!==null?g+"Capture":null:g;R=[];for(var _=d,T;_!==null;){T=_;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,y!==null&&(C=Co(_,y),C!=null&&R.push(Vo(_,C,T)))),b)break;_=_.return}0<R.length&&(g=new w(g,I,null,n,f),p.push({event:g,listeners:R}))}}if(!(e&7)){e:{if(g=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",g&&n!==Vd&&(I=n.relatedTarget||n.fromElement)&&(es(I)||I[$n]))break e;if((w||g)&&(g=f.window===f?f:(g=f.ownerDocument)?g.defaultView||g.parentWindow:window,w?(I=n.relatedTarget||n.toElement,w=d,I=I?es(I):null,I!==null&&(b=Ts(I),I!==b||I.tag!==5&&I.tag!==6)&&(I=null)):(w=null,I=d),w!==I)){if(R=ug,C="onMouseLeave",y="onMouseEnter",_="mouse",(t==="pointerout"||t==="pointerover")&&(R=dg,C="onPointerLeave",y="onPointerEnter",_="pointer"),b=w==null?g:$s(w),T=I==null?g:$s(I),g=new R(C,_+"leave",w,n,f),g.target=b,g.relatedTarget=T,C=null,es(f)===d&&(R=new R(y,_+"enter",I,n,f),R.target=T,R.relatedTarget=b,C=R),b=C,w&&I)t:{for(R=w,y=I,_=0,T=R;T;T=js(T))_++;for(T=0,C=y;C;C=js(C))T++;for(;0<_-T;)R=js(R),_--;for(;0<T-_;)y=js(y),T--;for(;_--;){if(R===y||y!==null&&R===y.alternate)break t;R=js(R),y=js(y)}R=null}else R=null;w!==null&&Eg(p,g,w,R,!1),I!==null&&b!==null&&Eg(p,b,I,R,!0)}}e:{if(g=d?$s(d):window,w=g.nodeName&&g.nodeName.toLowerCase(),w==="select"||w==="input"&&g.type==="file")var O=YI;else if(pg(g))if(j_)O=eS;else{O=JI;var M=XI}else(w=g.nodeName)&&w.toLowerCase()==="input"&&(g.type==="checkbox"||g.type==="radio")&&(O=ZI);if(O&&(O=O(t,d))){P_(p,O,n,f);break e}M&&M(t,g,d),t==="focusout"&&(M=g._wrapperState)&&M.controlled&&g.type==="number"&&Pd(g,"number",g.value)}switch(M=d?$s(d):window,t){case"focusin":(pg(M)||M.contentEditable==="true")&&(Us=M,qd=d,yo=null);break;case"focusout":yo=qd=Us=null;break;case"mousedown":Wd=!0;break;case"contextmenu":case"mouseup":case"dragend":Wd=!1,_g(p,n,f);break;case"selectionchange":if(rS)break;case"keydown":case"keyup":_g(p,n,f)}var E;if(cf)e:{switch(t){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Fs?C_(t,n)&&(x="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(x="onCompositionStart");x&&(b_&&n.locale!=="ko"&&(Fs||x!=="onCompositionStart"?x==="onCompositionEnd"&&Fs&&(E=R_()):(fr=f,af="value"in fr?fr.value:fr.textContent,Fs=!0)),M=$l(d,x),0<M.length&&(x=new cg(x,t,null,n,f),p.push({event:x,listeners:M}),E?x.data=E:(E=k_(n),E!==null&&(x.data=E)))),(E=WI?HI(t,n):KI(t,n))&&(d=$l(d,"onBeforeInput"),0<d.length&&(f=new cg("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=E))}z_(p,e)})}function Vo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function $l(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Co(t,n),i!=null&&r.unshift(Vo(t,i,s)),i=Co(t,e),i!=null&&r.push(Vo(t,i,s))),t=t.return}return r}function js(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Eg(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,d=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&d!==null&&(l=d,s?(u=Co(n,i),u!=null&&o.unshift(Vo(n,u,l))):s||(u=Co(n,i),u!=null&&o.push(Vo(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var aS=/\r\n?/g,lS=/\u0000|\uFFFD/g;function Tg(t){return(typeof t=="string"?t:""+t).replace(aS,`
`).replace(lS,"")}function Xa(t,e,n){if(e=Tg(e),Tg(t)!==e&&n)throw Error(U(425))}function zl(){}var Hd=null,Kd=null;function Gd(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Qd=typeof setTimeout=="function"?setTimeout:void 0,uS=typeof clearTimeout=="function"?clearTimeout:void 0,Ig=typeof Promise=="function"?Promise:void 0,cS=typeof queueMicrotask=="function"?queueMicrotask:typeof Ig<"u"?function(t){return Ig.resolve(null).then(t).catch(dS)}:Qd;function dS(t){setTimeout(function(){throw t})}function Xc(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),jo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);jo(e)}function wr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ii=Math.random().toString(36).slice(2),fn="__reactFiber$"+Ii,Mo="__reactProps$"+Ii,$n="__reactContainer$"+Ii,Yd="__reactEvents$"+Ii,hS="__reactListeners$"+Ii,fS="__reactHandles$"+Ii;function es(t){var e=t[fn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[$n]||n[fn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sg(t);t!==null;){if(n=t[fn])return n;t=Sg(t)}return e}t=n,n=t.parentNode}return null}function aa(t){return t=t[fn]||t[$n],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function $s(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Ru(t){return t[Mo]||null}var Xd=[],zs=-1;function Mr(t){return{current:t}}function ve(t){0>zs||(t.current=Xd[zs],Xd[zs]=null,zs--)}function fe(t,e){zs++,Xd[zs]=t.current,t.current=e}var kr={},ft=Mr(kr),Rt=Mr(!1),us=kr;function ai(t,e){var n=t.type.contextTypes;if(!n)return kr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function bt(t){return t=t.childContextTypes,t!=null}function ql(){ve(Rt),ve(ft)}function Ng(t,e,n){if(ft.current!==kr)throw Error(U(168));fe(ft,e),fe(Rt,n)}function W_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(U(108,XT(t)||"Unknown",s));return Ie({},n,r)}function Wl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||kr,us=ft.current,fe(ft,t),fe(Rt,Rt.current),!0}function Ag(t,e,n){var r=t.stateNode;if(!r)throw Error(U(169));n?(t=W_(t,e,us),r.__reactInternalMemoizedMergedChildContext=t,ve(Rt),ve(ft),fe(ft,t)):ve(Rt),fe(Rt,n)}var Pn=null,bu=!1,Jc=!1;function H_(t){Pn===null?Pn=[t]:Pn.push(t)}function pS(t){bu=!0,H_(t)}function Fr(){if(!Jc&&Pn!==null){Jc=!0;var t=0,e=ue;try{var n=Pn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pn=null,bu=!1}catch(s){throw Pn!==null&&(Pn=Pn.slice(t+1)),y_(nf,Fr),s}finally{ue=e,Jc=!1}}return null}var qs=[],Ws=0,Hl=null,Kl=0,zt=[],qt=0,cs=null,jn=1,Dn="";function Xr(t,e){qs[Ws++]=Kl,qs[Ws++]=Hl,Hl=t,Kl=e}function K_(t,e,n){zt[qt++]=jn,zt[qt++]=Dn,zt[qt++]=cs,cs=t;var r=jn;t=Dn;var s=32-sn(r)-1;r&=~(1<<s),n+=1;var i=32-sn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,jn=1<<32-sn(e)+s|n<<s|r,Dn=i+t}else jn=1<<i|n<<s|r,Dn=t}function hf(t){t.return!==null&&(Xr(t,1),K_(t,1,0))}function ff(t){for(;t===Hl;)Hl=qs[--Ws],qs[Ws]=null,Kl=qs[--Ws],qs[Ws]=null;for(;t===cs;)cs=zt[--qt],zt[qt]=null,Dn=zt[--qt],zt[qt]=null,jn=zt[--qt],zt[qt]=null}var Vt=null,Dt=null,xe=!1,rn=null;function G_(t,e){var n=Wt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Rg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=wr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Vt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cs!==null?{id:jn,overflow:Dn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Wt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Vt=t,Dt=null,!0):!1;default:return!1}}function Jd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Zd(t){if(xe){var e=Dt;if(e){var n=e;if(!Rg(t,e)){if(Jd(t))throw Error(U(418));e=wr(n.nextSibling);var r=Vt;e&&Rg(t,e)?G_(r,n):(t.flags=t.flags&-4097|2,xe=!1,Vt=t)}}else{if(Jd(t))throw Error(U(418));t.flags=t.flags&-4097|2,xe=!1,Vt=t}}}function bg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Vt=t}function Ja(t){if(t!==Vt)return!1;if(!xe)return bg(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Gd(t.type,t.memoizedProps)),e&&(e=Dt)){if(Jd(t))throw Q_(),Error(U(418));for(;e;)G_(t,e),e=wr(e.nextSibling)}if(bg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=wr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=Vt?wr(t.stateNode.nextSibling):null;return!0}function Q_(){for(var t=Dt;t;)t=wr(t.nextSibling)}function li(){Dt=Vt=null,xe=!1}function pf(t){rn===null?rn=[t]:rn.push(t)}var mS=Yn.ReactCurrentBatchConfig;function Xi(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var r=n.stateNode}if(!r)throw Error(U(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Za(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cg(t){var e=t._init;return e(t._payload)}function Y_(t){function e(y,_){if(t){var T=y.deletions;T===null?(y.deletions=[_],y.flags|=16):T.push(_)}}function n(y,_){if(!t)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function r(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function s(y,_){return y=Ir(y,_),y.index=0,y.sibling=null,y}function i(y,_,T){return y.index=T,t?(T=y.alternate,T!==null?(T=T.index,T<_?(y.flags|=2,_):T):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function l(y,_,T,C){return _===null||_.tag!==6?(_=id(T,y.mode,C),_.return=y,_):(_=s(_,T),_.return=y,_)}function u(y,_,T,C){var O=T.type;return O===Ms?f(y,_,T.props.children,C,T.key):_!==null&&(_.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&Cg(O)===_.type)?(C=s(_,T.props),C.ref=Xi(y,_,T),C.return=y,C):(C=Il(T.type,T.key,T.props,null,y.mode,C),C.ref=Xi(y,_,T),C.return=y,C)}function d(y,_,T,C){return _===null||_.tag!==4||_.stateNode.containerInfo!==T.containerInfo||_.stateNode.implementation!==T.implementation?(_=od(T,y.mode,C),_.return=y,_):(_=s(_,T.children||[]),_.return=y,_)}function f(y,_,T,C,O){return _===null||_.tag!==7?(_=is(T,y.mode,C,O),_.return=y,_):(_=s(_,T),_.return=y,_)}function p(y,_,T){if(typeof _=="string"&&_!==""||typeof _=="number")return _=id(""+_,y.mode,T),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case $a:return T=Il(_.type,_.key,_.props,null,y.mode,T),T.ref=Xi(y,null,_),T.return=y,T;case Vs:return _=od(_,y.mode,T),_.return=y,_;case sr:var C=_._init;return p(y,C(_._payload),T)}if(ro(_)||Hi(_))return _=is(_,y.mode,T,null),_.return=y,_;Za(y,_)}return null}function g(y,_,T,C){var O=_!==null?_.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return O!==null?null:l(y,_,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:return T.key===O?u(y,_,T,C):null;case Vs:return T.key===O?d(y,_,T,C):null;case sr:return O=T._init,g(y,_,O(T._payload),C)}if(ro(T)||Hi(T))return O!==null?null:f(y,_,T,C,null);Za(y,T)}return null}function w(y,_,T,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return y=y.get(T)||null,l(_,y,""+C,O);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case $a:return y=y.get(C.key===null?T:C.key)||null,u(_,y,C,O);case Vs:return y=y.get(C.key===null?T:C.key)||null,d(_,y,C,O);case sr:var M=C._init;return w(y,_,T,M(C._payload),O)}if(ro(C)||Hi(C))return y=y.get(T)||null,f(_,y,C,O,null);Za(_,C)}return null}function I(y,_,T,C){for(var O=null,M=null,E=_,x=_=0,S=null;E!==null&&x<T.length;x++){E.index>x?(S=E,E=null):S=E.sibling;var N=g(y,E,T[x],C);if(N===null){E===null&&(E=S);break}t&&E&&N.alternate===null&&e(y,E),_=i(N,_,x),M===null?O=N:M.sibling=N,M=N,E=S}if(x===T.length)return n(y,E),xe&&Xr(y,x),O;if(E===null){for(;x<T.length;x++)E=p(y,T[x],C),E!==null&&(_=i(E,_,x),M===null?O=E:M.sibling=E,M=E);return xe&&Xr(y,x),O}for(E=r(y,E);x<T.length;x++)S=w(E,y,x,T[x],C),S!==null&&(t&&S.alternate!==null&&E.delete(S.key===null?x:S.key),_=i(S,_,x),M===null?O=S:M.sibling=S,M=S);return t&&E.forEach(function(k){return e(y,k)}),xe&&Xr(y,x),O}function R(y,_,T,C){var O=Hi(T);if(typeof O!="function")throw Error(U(150));if(T=O.call(T),T==null)throw Error(U(151));for(var M=O=null,E=_,x=_=0,S=null,N=T.next();E!==null&&!N.done;x++,N=T.next()){E.index>x?(S=E,E=null):S=E.sibling;var k=g(y,E,N.value,C);if(k===null){E===null&&(E=S);break}t&&E&&k.alternate===null&&e(y,E),_=i(k,_,x),M===null?O=k:M.sibling=k,M=k,E=S}if(N.done)return n(y,E),xe&&Xr(y,x),O;if(E===null){for(;!N.done;x++,N=T.next())N=p(y,N.value,C),N!==null&&(_=i(N,_,x),M===null?O=N:M.sibling=N,M=N);return xe&&Xr(y,x),O}for(E=r(y,E);!N.done;x++,N=T.next())N=w(E,y,x,N.value,C),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?x:N.key),_=i(N,_,x),M===null?O=N:M.sibling=N,M=N);return t&&E.forEach(function(j){return e(y,j)}),xe&&Xr(y,x),O}function b(y,_,T,C){if(typeof T=="object"&&T!==null&&T.type===Ms&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case $a:e:{for(var O=T.key,M=_;M!==null;){if(M.key===O){if(O=T.type,O===Ms){if(M.tag===7){n(y,M.sibling),_=s(M,T.props.children),_.return=y,y=_;break e}}else if(M.elementType===O||typeof O=="object"&&O!==null&&O.$$typeof===sr&&Cg(O)===M.type){n(y,M.sibling),_=s(M,T.props),_.ref=Xi(y,M,T),_.return=y,y=_;break e}n(y,M);break}else e(y,M);M=M.sibling}T.type===Ms?(_=is(T.props.children,y.mode,C,T.key),_.return=y,y=_):(C=Il(T.type,T.key,T.props,null,y.mode,C),C.ref=Xi(y,_,T),C.return=y,y=C)}return o(y);case Vs:e:{for(M=T.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===T.containerInfo&&_.stateNode.implementation===T.implementation){n(y,_.sibling),_=s(_,T.children||[]),_.return=y,y=_;break e}else{n(y,_);break}else e(y,_);_=_.sibling}_=od(T,y.mode,C),_.return=y,y=_}return o(y);case sr:return M=T._init,b(y,_,M(T._payload),C)}if(ro(T))return I(y,_,T,C);if(Hi(T))return R(y,_,T,C);Za(y,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,_!==null&&_.tag===6?(n(y,_.sibling),_=s(_,T),_.return=y,y=_):(n(y,_),_=id(T,y.mode,C),_.return=y,y=_),o(y)):n(y,_)}return b}var ui=Y_(!0),X_=Y_(!1),Gl=Mr(null),Ql=null,Hs=null,mf=null;function gf(){mf=Hs=Ql=null}function yf(t){var e=Gl.current;ve(Gl),t._currentValue=e}function eh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ei(t,e){Ql=t,mf=Hs=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(At=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(mf!==t)if(t={context:t,memoizedValue:e,next:null},Hs===null){if(Ql===null)throw Error(U(308));Hs=t,Ql.dependencies={lanes:0,firstContext:t}}else Hs=Hs.next=t;return e}var ts=null;function vf(t){ts===null?ts=[t]:ts.push(t)}function J_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vf(e)):(n.next=s.next,s.next=n),e.interleaved=n,zn(t,r)}function zn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ir=!1;function _f(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Z_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Mn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,oe&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,zn(t,n)}return s=r.interleaved,s===null?(e.next=e,vf(r)):(e.next=s.next,s.next=e),r.interleaved=e,zn(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}function kg(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Yl(t,e,n,r){var s=t.updateQueue;ir=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var u=l,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,l=i;do{var g=l.lane,w=l.eventTime;if((r&g)===g){f!==null&&(f=f.next={eventTime:w,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var I=t,R=l;switch(g=e,w=n,R.tag){case 1:if(I=R.payload,typeof I=="function"){p=I.call(w,p,g);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=R.payload,g=typeof I=="function"?I.call(w,p,g):I,g==null)break e;p=Ie({},p,g);break e;case 2:ir=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,g=s.effects,g===null?s.effects=[l]:g.push(l))}else w={eventTime:w,lane:g,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=w,u=p):f=f.next=w,o|=g;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;g=l,l=g.next,g.next=null,s.lastBaseUpdate=g,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);hs|=o,t.lanes=o,t.memoizedState=p}}function Pg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(U(191,s));s.call(r)}}}var la={},yn=Mr(la),Fo=Mr(la),Uo=Mr(la);function ns(t){if(t===la)throw Error(U(174));return t}function wf(t,e){switch(fe(Uo,e),fe(Fo,t),fe(yn,la),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Dd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Dd(e,t)}ve(yn),fe(yn,e)}function ci(){ve(yn),ve(Fo),ve(Uo)}function e0(t){ns(Uo.current);var e=ns(yn.current),n=Dd(e,t.type);e!==n&&(fe(Fo,t),fe(yn,n))}function xf(t){Fo.current===t&&(ve(yn),ve(Fo))}var Ee=Mr(0);function Xl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Zc=[];function Ef(){for(var t=0;t<Zc.length;t++)Zc[t]._workInProgressVersionPrimary=null;Zc.length=0}var _l=Yn.ReactCurrentDispatcher,ed=Yn.ReactCurrentBatchConfig,ds=0,Te=null,Be=null,We=null,Jl=!1,vo=!1,Bo=0,gS=0;function ot(){throw Error(U(321))}function Tf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!an(t[n],e[n]))return!1;return!0}function If(t,e,n,r,s,i){if(ds=i,Te=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?wS:xS,t=n(r,s),vo){i=0;do{if(vo=!1,Bo=0,25<=i)throw Error(U(301));i+=1,We=Be=null,e.updateQueue=null,_l.current=ES,t=n(r,s)}while(vo)}if(_l.current=Zl,e=Be!==null&&Be.next!==null,ds=0,We=Be=Te=null,Jl=!1,e)throw Error(U(300));return t}function Sf(){var t=Bo!==0;return Bo=0,t}function hn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return We===null?Te.memoizedState=We=t:We=We.next=t,We}function Qt(){if(Be===null){var t=Te.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=We===null?Te.memoizedState:We.next;if(e!==null)We=e,Be=t;else{if(t===null)throw Error(U(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},We===null?Te.memoizedState=We=t:We=We.next=t}return We}function $o(t,e){return typeof e=="function"?e(t):e}function td(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,u=null,d=i;do{var f=d.lane;if((ds&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(l=u=p,o=r):u=u.next=p,Te.lanes|=f,hs|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=l,an(r,e.memoizedState)||(At=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Te.lanes|=i,hs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function nd(t){var e=Qt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);an(i,e.memoizedState)||(At=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function t0(){}function n0(t,e){var n=Te,r=Qt(),s=e(),i=!an(r.memoizedState,s);if(i&&(r.memoizedState=s,At=!0),r=r.queue,Nf(i0.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||We!==null&&We.memoizedState.tag&1){if(n.flags|=2048,zo(9,s0.bind(null,n,r,s,e),void 0,null),He===null)throw Error(U(349));ds&30||r0(n,e,s)}return s}function r0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function s0(t,e,n,r){e.value=n,e.getSnapshot=r,o0(e)&&a0(t)}function i0(t,e,n){return n(function(){o0(e)&&a0(t)})}function o0(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!an(t,n)}catch{return!0}}function a0(t){var e=zn(t,1);e!==null&&on(e,t,1,-1)}function jg(t){var e=hn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$o,lastRenderedState:t},e.queue=t,t=t.dispatch=_S.bind(null,Te,t),[e.memoizedState,t]}function zo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Te.updateQueue,e===null?(e={lastEffect:null,stores:null},Te.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function l0(){return Qt().memoizedState}function wl(t,e,n,r){var s=hn();Te.flags|=t,s.memoizedState=zo(1|e,n,void 0,r===void 0?null:r)}function Cu(t,e,n,r){var s=Qt();r=r===void 0?null:r;var i=void 0;if(Be!==null){var o=Be.memoizedState;if(i=o.destroy,r!==null&&Tf(r,o.deps)){s.memoizedState=zo(e,n,i,r);return}}Te.flags|=t,s.memoizedState=zo(1|e,n,i,r)}function Dg(t,e){return wl(8390656,8,t,e)}function Nf(t,e){return Cu(2048,8,t,e)}function u0(t,e){return Cu(4,2,t,e)}function c0(t,e){return Cu(4,4,t,e)}function d0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function h0(t,e,n){return n=n!=null?n.concat([t]):null,Cu(4,4,d0.bind(null,e,t),n)}function Af(){}function f0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function p0(t,e){var n=Qt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function m0(t,e,n){return ds&21?(an(n,e)||(n=w_(),Te.lanes|=n,hs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,At=!0),t.memoizedState=n)}function yS(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=ed.transition;ed.transition={};try{t(!1),e()}finally{ue=n,ed.transition=r}}function g0(){return Qt().memoizedState}function vS(t,e,n){var r=Tr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},y0(t))v0(e,n);else if(n=J_(t,e,n,r),n!==null){var s=wt();on(n,t,r,s),_0(n,e,r)}}function _S(t,e,n){var r=Tr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(y0(t))v0(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,an(l,o)){var u=e.interleaved;u===null?(s.next=s,vf(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=J_(t,e,s,r),n!==null&&(s=wt(),on(n,t,r,s),_0(n,e,r))}}function y0(t){var e=t.alternate;return t===Te||e!==null&&e===Te}function v0(t,e){vo=Jl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function _0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rf(t,n)}}var Zl={readContext:Gt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},wS={readContext:Gt,useCallback:function(t,e){return hn().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Dg,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,wl(4194308,4,d0.bind(null,e,t),n)},useLayoutEffect:function(t,e){return wl(4194308,4,t,e)},useInsertionEffect:function(t,e){return wl(4,2,t,e)},useMemo:function(t,e){var n=hn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=hn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=vS.bind(null,Te,t),[r.memoizedState,t]},useRef:function(t){var e=hn();return t={current:t},e.memoizedState=t},useState:jg,useDebugValue:Af,useDeferredValue:function(t){return hn().memoizedState=t},useTransition:function(){var t=jg(!1),e=t[0];return t=yS.bind(null,t[1]),hn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Te,s=hn();if(xe){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),He===null)throw Error(U(349));ds&30||r0(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,Dg(i0.bind(null,r,i,t),[t]),r.flags|=2048,zo(9,s0.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=hn(),e=He.identifierPrefix;if(xe){var n=Dn,r=jn;n=(r&~(1<<32-sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Bo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=gS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},xS={readContext:Gt,useCallback:f0,useContext:Gt,useEffect:Nf,useImperativeHandle:h0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:p0,useReducer:td,useRef:l0,useState:function(){return td($o)},useDebugValue:Af,useDeferredValue:function(t){var e=Qt();return m0(e,Be.memoizedState,t)},useTransition:function(){var t=td($o)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:t0,useSyncExternalStore:n0,useId:g0,unstable_isNewReconciler:!1},ES={readContext:Gt,useCallback:f0,useContext:Gt,useEffect:Nf,useImperativeHandle:h0,useInsertionEffect:u0,useLayoutEffect:c0,useMemo:p0,useReducer:nd,useRef:l0,useState:function(){return nd($o)},useDebugValue:Af,useDeferredValue:function(t){var e=Qt();return Be===null?e.memoizedState=t:m0(e,Be.memoizedState,t)},useTransition:function(){var t=nd($o)[0],e=Qt().memoizedState;return[t,e]},useMutableSource:t0,useSyncExternalStore:n0,useId:g0,unstable_isNewReconciler:!1};function tn(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function th(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ku={isMounted:function(t){return(t=t._reactInternals)?Ts(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Tr(t),i=Mn(r,s);i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(on(e,t,s,r),vl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=wt(),s=Tr(t),i=Mn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=xr(t,i,s),e!==null&&(on(e,t,s,r),vl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=wt(),r=Tr(t),s=Mn(n,r);s.tag=2,e!=null&&(s.callback=e),e=xr(t,s,r),e!==null&&(on(e,t,r,n),vl(e,t,r))}};function Og(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!Oo(n,r)||!Oo(s,i):!0}function w0(t,e,n){var r=!1,s=kr,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(s=bt(e)?us:ft.current,r=e.contextTypes,i=(r=r!=null)?ai(t,s):kr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ku,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Lg(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ku.enqueueReplaceState(e,e.state,null)}function nh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_f(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Gt(i):(i=bt(e)?us:ft.current,s.context=ai(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(th(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ku.enqueueReplaceState(s,s.state,null),Yl(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function di(t,e){try{var n="",r=e;do n+=YT(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function rh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var TS=typeof WeakMap=="function"?WeakMap:Map;function x0(t,e,n){n=Mn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){tu||(tu=!0,fh=r),rh(t,e)},n}function E0(t,e,n){n=Mn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){rh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){rh(t,e),typeof r!="function"&&(Er===null?Er=new Set([this]):Er.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vg(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new TS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=VS.bind(null,t,e,n),e.then(t,t))}function Mg(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Fg(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Mn(-1,1),e.tag=2,xr(n,e,1))),n.lanes|=1),t)}var IS=Yn.ReactCurrentOwner,At=!1;function _t(t,e,n,r){e.child=t===null?X_(e,null,n,r):ui(e,t.child,n,r)}function Ug(t,e,n,r,s){n=n.render;var i=e.ref;return ei(e,s),r=If(t,e,n,r,i,s),n=Sf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(xe&&n&&hf(e),e.flags|=1,_t(t,e,r,s),e.child)}function Bg(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Of(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,T0(t,e,i,r,s)):(t=Il(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:Oo,n(o,r)&&t.ref===e.ref)return qn(t,e,s)}return e.flags|=1,t=Ir(i,r),t.ref=e.ref,t.return=e,e.child=t}function T0(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(Oo(i,r)&&t.ref===e.ref)if(At=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(At=!0);else return e.lanes=t.lanes,qn(t,e,s)}return sh(t,e,n,r,s)}function I0(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Gs,jt),jt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Gs,jt),jt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,fe(Gs,jt),jt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,fe(Gs,jt),jt|=r;return _t(t,e,s,n),e.child}function S0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function sh(t,e,n,r,s){var i=bt(n)?us:ft.current;return i=ai(e,i),ei(e,s),n=If(t,e,n,r,i,s),r=Sf(),t!==null&&!At?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,qn(t,e,s)):(xe&&r&&hf(e),e.flags|=1,_t(t,e,n,s),e.child)}function $g(t,e,n,r,s){if(bt(n)){var i=!0;Wl(e)}else i=!1;if(ei(e,s),e.stateNode===null)xl(t,e),w0(e,n,r),nh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=bt(n)?us:ft.current,d=ai(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==d)&&Lg(e,o,r,d),ir=!1;var g=e.memoizedState;o.state=g,Yl(e,r,o,s),u=e.memoizedState,l!==r||g!==u||Rt.current||ir?(typeof f=="function"&&(th(e,n,f,r),u=e.memoizedState),(l=ir||Og(e,n,l,r,g,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Z_(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:tn(e.type,l),o.props=d,p=e.pendingProps,g=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Gt(u):(u=bt(n)?us:ft.current,u=ai(e,u));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==p||g!==u)&&Lg(e,o,r,u),ir=!1,g=e.memoizedState,o.state=g,Yl(e,r,o,s);var I=e.memoizedState;l!==p||g!==I||Rt.current||ir?(typeof w=="function"&&(th(e,n,w,r),I=e.memoizedState),(d=ir||Og(e,n,d,r,g,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&g===t.memoizedState||(e.flags|=1024),r=!1)}return ih(t,e,n,r,i,s)}function ih(t,e,n,r,s,i){S0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ag(e,n,!1),qn(t,e,i);r=e.stateNode,IS.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ui(e,t.child,null,i),e.child=ui(e,null,l,i)):_t(t,e,l,i),e.memoizedState=r.state,s&&Ag(e,n,!0),e.child}function N0(t){var e=t.stateNode;e.pendingContext?Ng(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ng(t,e.context,!1),wf(t,e.containerInfo)}function zg(t,e,n,r,s){return li(),pf(s),e.flags|=256,_t(t,e,n,r),e.child}var oh={dehydrated:null,treeContext:null,retryLane:0};function ah(t){return{baseLanes:t,cachePool:null,transitions:null}}function A0(t,e,n){var r=e.pendingProps,s=Ee.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),fe(Ee,s&1),t===null)return Zd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Du(o,r,0,null),t=is(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ah(n),e.memoizedState=oh,t):Rf(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return SS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=Ir(s,u),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ir(l,i):(i=is(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ah(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=oh,r}return i=t.child,t=i.sibling,r=Ir(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Rf(t,e){return e=Du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function el(t,e,n,r){return r!==null&&pf(r),ui(e,t.child,null,n),t=Rf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function SS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=rd(Error(U(422))),el(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Du({mode:"visible",children:r.children},s,0,null),i=is(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&ui(e,t.child,null,o),e.child.memoizedState=ah(o),e.memoizedState=oh,i);if(!(e.mode&1))return el(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(U(419)),r=rd(i,r,void 0),el(t,e,o,r)}if(l=(o&t.childLanes)!==0,At||l){if(r=He,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,zn(t,s),on(r,t,s,-1))}return Df(),r=rd(Error(U(421))),el(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=MS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Dt=wr(s.nextSibling),Vt=e,xe=!0,rn=null,t!==null&&(zt[qt++]=jn,zt[qt++]=Dn,zt[qt++]=cs,jn=t.id,Dn=t.overflow,cs=e),e=Rf(e,r.children),e.flags|=4096,e)}function qg(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),eh(t.return,e,n)}function sd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function R0(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(_t(t,e,r.children,n),r=Ee.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qg(t,n,e);else if(t.tag===19)qg(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(Ee,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Xl(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),sd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Xl(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}sd(e,!0,n,null,i);break;case"together":sd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function xl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function qn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Ir(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ir(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function NS(t,e,n){switch(e.tag){case 3:N0(e),li();break;case 5:e0(e);break;case 1:bt(e.type)&&Wl(e);break;case 4:wf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;fe(Gl,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(Ee,Ee.current&1),e.flags|=128,null):n&e.child.childLanes?A0(t,e,n):(fe(Ee,Ee.current&1),t=qn(t,e,n),t!==null?t.sibling:null);fe(Ee,Ee.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return R0(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),fe(Ee,Ee.current),r)break;return null;case 22:case 23:return e.lanes=0,I0(t,e,n)}return qn(t,e,n)}var b0,lh,C0,k0;b0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};lh=function(){};C0=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ns(yn.current);var i=null;switch(n){case"input":s=Cd(t,s),r=Cd(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=jd(t,s),r=jd(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=zl)}Od(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ro.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==l&&(u!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ro.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&ge("scroll",t),i||l===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};k0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Ji(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function AS(t,e,n){var r=e.pendingProps;switch(ff(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return bt(e.type)&&ql(),at(e),null;case 3:return r=e.stateNode,ci(),ve(Rt),ve(ft),Ef(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ja(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,rn!==null&&(gh(rn),rn=null))),lh(t,e),at(e),null;case 5:xf(e);var s=ns(Uo.current);if(n=e.type,t!==null&&e.stateNode!=null)C0(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(U(166));return at(e),null}if(t=ns(yn.current),Ja(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[fn]=e,r[Mo]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<io.length;s++)ge(io[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":Zm(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":tg(r,i),ge("invalid",r)}Od(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Xa(r.textContent,l,t),s=["children",""+l]):Ro.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":za(r),eg(r,i,!0);break;case"textarea":za(r),ng(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=zl)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=i_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[fn]=e,t[Mo]=r,b0(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ld(n,r),n){case"dialog":ge("cancel",t),ge("close",t),s=r;break;case"iframe":case"object":case"embed":ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<io.length;s++)ge(io[s],t);s=r;break;case"source":ge("error",t),s=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),s=r;break;case"details":ge("toggle",t),s=r;break;case"input":Zm(t,r),s=Cd(t,r),ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ge("invalid",t);break;case"textarea":tg(t,r),s=jd(t,r),ge("invalid",t);break;default:s=r}Od(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var u=l[i];i==="style"?l_(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&o_(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&bo(t,u):typeof u=="number"&&bo(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ro.hasOwnProperty(i)?u!=null&&i==="onScroll"&&ge("scroll",t):u!=null&&Xh(t,i,u,o))}switch(n){case"input":za(t),eg(t,r,!1);break;case"textarea":za(t),ng(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Cr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?Ys(t,!!r.multiple,i,!1):r.defaultValue!=null&&Ys(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=zl)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)k0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(U(166));if(n=ns(Uo.current),ns(yn.current),Ja(e)){if(r=e.stateNode,n=e.memoizedProps,r[fn]=e,(i=r.nodeValue!==n)&&(t=Vt,t!==null))switch(t.tag){case 3:Xa(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Xa(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=e,e.stateNode=r}return at(e),null;case 13:if(ve(Ee),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&Dt!==null&&e.mode&1&&!(e.flags&128))Q_(),li(),e.flags|=98560,i=!1;else if(i=Ja(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(U(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(U(317));i[fn]=e}else li(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else rn!==null&&(gh(rn),rn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ee.current&1?$e===0&&($e=3):Df())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return ci(),lh(t,e),t===null&&Lo(e.stateNode.containerInfo),at(e),null;case 10:return yf(e.type._context),at(e),null;case 17:return bt(e.type)&&ql(),at(e),null;case 19:if(ve(Ee),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Ji(i,!1);else{if($e!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Xl(t),o!==null){for(e.flags|=128,Ji(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(Ee,Ee.current&1|2),e.child}t=t.sibling}i.tail!==null&&De()>hi&&(e.flags|=128,r=!0,Ji(i,!1),e.lanes=4194304)}else{if(!r)if(t=Xl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Ji(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return at(e),null}else 2*De()-i.renderingStartTime>hi&&n!==1073741824&&(e.flags|=128,r=!0,Ji(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=De(),e.sibling=null,n=Ee.current,fe(Ee,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return jf(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?jt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function RS(t,e){switch(ff(e),e.tag){case 1:return bt(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ci(),ve(Rt),ve(ft),Ef(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xf(e),null;case 13:if(ve(Ee),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));li()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(Ee),null;case 4:return ci(),null;case 10:return yf(e.type._context),null;case 22:case 23:return jf(),null;case 24:return null;default:return null}}var tl=!1,ct=!1,bS=typeof WeakSet=="function"?WeakSet:Set,q=null;function Ks(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){be(t,e,r)}else n.current=null}function uh(t,e,n){try{n()}catch(r){be(t,e,r)}}var Wg=!1;function CS(t,e){if(Hd=Ul,t=L_(),df(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,d=0,f=0,p=t,g=null;t:for(;;){for(var w;p!==n||s!==0&&p.nodeType!==3||(l=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(w=p.firstChild)!==null;)g=p,p=w;for(;;){if(p===t)break t;if(g===n&&++d===s&&(l=o),g===i&&++f===r&&(u=o),(w=p.nextSibling)!==null)break;p=g,g=p.parentNode}p=w}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Kd={focusedElem:t,selectionRange:n},Ul=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var R=I.memoizedProps,b=I.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?R:tn(e.type,R),b);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(C){be(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return I=Wg,Wg=!1,I}function _o(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&uh(e,n,i)}s=s.next}while(s!==r)}}function Pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ch(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function P0(t){var e=t.alternate;e!==null&&(t.alternate=null,P0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[fn],delete e[Mo],delete e[Yd],delete e[hS],delete e[fS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function j0(t){return t.tag===5||t.tag===3||t.tag===4}function Hg(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||j0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function dh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=zl));else if(r!==4&&(t=t.child,t!==null))for(dh(t,e,n),t=t.sibling;t!==null;)dh(t,e,n),t=t.sibling}function hh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(hh(t,e,n),t=t.sibling;t!==null;)hh(t,e,n),t=t.sibling}var Qe=null,nn=!1;function nr(t,e,n){for(n=n.child;n!==null;)D0(t,e,n),n=n.sibling}function D0(t,e,n){if(gn&&typeof gn.onCommitFiberUnmount=="function")try{gn.onCommitFiberUnmount(Iu,n)}catch{}switch(n.tag){case 5:ct||Ks(n,e);case 6:var r=Qe,s=nn;Qe=null,nr(t,e,n),Qe=r,nn=s,Qe!==null&&(nn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(nn?(t=Qe,n=n.stateNode,t.nodeType===8?Xc(t.parentNode,n):t.nodeType===1&&Xc(t,n),jo(t)):Xc(Qe,n.stateNode));break;case 4:r=Qe,s=nn,Qe=n.stateNode.containerInfo,nn=!0,nr(t,e,n),Qe=r,nn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&uh(n,e,o),s=s.next}while(s!==r)}nr(t,e,n);break;case 1:if(!ct&&(Ks(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){be(n,e,l)}nr(t,e,n);break;case 21:nr(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,nr(t,e,n),ct=r):nr(t,e,n);break;default:nr(t,e,n)}}function Kg(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new bS),e.forEach(function(r){var s=FS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function Jt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,nn=!1;break e;case 3:Qe=l.stateNode.containerInfo,nn=!0;break e;case 4:Qe=l.stateNode.containerInfo,nn=!0;break e}l=l.return}if(Qe===null)throw Error(U(160));D0(i,o,s),Qe=null,nn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){be(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)O0(e,t),e=e.sibling}function O0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),cn(t),r&4){try{_o(3,t,t.return),Pu(3,t)}catch(R){be(t,t.return,R)}try{_o(5,t,t.return)}catch(R){be(t,t.return,R)}}break;case 1:Jt(e,t),cn(t),r&512&&n!==null&&Ks(n,n.return);break;case 5:if(Jt(e,t),cn(t),r&512&&n!==null&&Ks(n,n.return),t.flags&32){var s=t.stateNode;try{bo(s,"")}catch(R){be(t,t.return,R)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&r_(s,i),Ld(l,o);var d=Ld(l,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?l_(s,p):f==="dangerouslySetInnerHTML"?o_(s,p):f==="children"?bo(s,p):Xh(s,f,p,d)}switch(l){case"input":kd(s,i);break;case"textarea":s_(s,i);break;case"select":var g=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?Ys(s,!!i.multiple,w,!1):g!==!!i.multiple&&(i.defaultValue!=null?Ys(s,!!i.multiple,i.defaultValue,!0):Ys(s,!!i.multiple,i.multiple?[]:"",!1))}s[Mo]=i}catch(R){be(t,t.return,R)}}break;case 6:if(Jt(e,t),cn(t),r&4){if(t.stateNode===null)throw Error(U(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(R){be(t,t.return,R)}}break;case 3:if(Jt(e,t),cn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{jo(e.containerInfo)}catch(R){be(t,t.return,R)}break;case 4:Jt(e,t),cn(t);break;case 13:Jt(e,t),cn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kf=De())),r&4&&Kg(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(d=ct)||f,Jt(e,t),ct=d):Jt(e,t),cn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(p=q=f;q!==null;){switch(g=q,w=g.child,g.tag){case 0:case 11:case 14:case 15:_o(4,g,g.return);break;case 1:Ks(g,g.return);var I=g.stateNode;if(typeof I.componentWillUnmount=="function"){r=g,n=g.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(R){be(r,n,R)}}break;case 5:Ks(g,g.return);break;case 22:if(g.memoizedState!==null){Qg(p);continue}}w!==null?(w.return=g,q=w):Qg(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=a_("display",o))}catch(R){be(t,t.return,R)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(R){be(t,t.return,R)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:Jt(e,t),cn(t),r&4&&Kg(t);break;case 21:break;default:Jt(e,t),cn(t)}}function cn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(j0(n)){var r=n;break e}n=n.return}throw Error(U(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(bo(s,""),r.flags&=-33);var i=Hg(t);hh(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Hg(t);dh(t,l,o);break;default:throw Error(U(161))}}catch(u){be(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function kS(t,e,n){q=t,L0(t)}function L0(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||tl;if(!o){var l=s.alternate,u=l!==null&&l.memoizedState!==null||ct;l=tl;var d=ct;if(tl=o,(ct=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?Yg(s):u!==null?(u.return=o,q=u):Yg(s);for(;i!==null;)q=i,L0(i),i=i.sibling;q=s,tl=l,ct=d}Gg(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):Gg(t)}}function Gg(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||Pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:tn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Pg(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Pg(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&jo(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ct||e.flags&512&&ch(e)}catch(g){be(e,e.return,g)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function Qg(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function Yg(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Pu(4,e)}catch(u){be(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){be(e,s,u)}}var i=e.return;try{ch(e)}catch(u){be(e,i,u)}break;case 5:var o=e.return;try{ch(e)}catch(u){be(e,o,u)}}}catch(u){be(e,e.return,u)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var PS=Math.ceil,eu=Yn.ReactCurrentDispatcher,bf=Yn.ReactCurrentOwner,Ht=Yn.ReactCurrentBatchConfig,oe=0,He=null,Me=null,Je=0,jt=0,Gs=Mr(0),$e=0,qo=null,hs=0,ju=0,Cf=0,wo=null,St=null,kf=0,hi=1/0,kn=null,tu=!1,fh=null,Er=null,nl=!1,pr=null,nu=0,xo=0,ph=null,El=-1,Tl=0;function wt(){return oe&6?De():El!==-1?El:El=De()}function Tr(t){return t.mode&1?oe&2&&Je!==0?Je&-Je:mS.transition!==null?(Tl===0&&(Tl=w_()),Tl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:A_(t.type)),t):1}function on(t,e,n,r){if(50<xo)throw xo=0,ph=null,Error(U(185));ia(t,n,r),(!(oe&2)||t!==He)&&(t===He&&(!(oe&2)&&(ju|=n),$e===4&&ar(t,Je)),Ct(t,r),n===1&&oe===0&&!(e.mode&1)&&(hi=De()+500,bu&&Fr()))}function Ct(t,e){var n=t.callbackNode;mI(t,e);var r=Fl(t,t===He?Je:0);if(r===0)n!==null&&ig(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ig(n),e===1)t.tag===0?pS(Xg.bind(null,t)):H_(Xg.bind(null,t)),cS(function(){!(oe&6)&&Fr()}),n=null;else{switch(x_(r)){case 1:n=nf;break;case 4:n=v_;break;case 16:n=Ml;break;case 536870912:n=__;break;default:n=Ml}n=q0(n,V0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function V0(t,e){if(El=-1,Tl=0,oe&6)throw Error(U(327));var n=t.callbackNode;if(ti()&&t.callbackNode!==n)return null;var r=Fl(t,t===He?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ru(t,r);else{e=r;var s=oe;oe|=2;var i=F0();(He!==t||Je!==e)&&(kn=null,hi=De()+500,ss(t,e));do try{OS();break}catch(l){M0(t,l)}while(!0);gf(),eu.current=i,oe=s,Me!==null?e=0:(He=null,Je=0,e=$e)}if(e!==0){if(e===2&&(s=Bd(t),s!==0&&(r=s,e=mh(t,s))),e===1)throw n=qo,ss(t,0),ar(t,r),Ct(t,De()),n;if(e===6)ar(t,r);else{if(s=t.current.alternate,!(r&30)&&!jS(s)&&(e=ru(t,r),e===2&&(i=Bd(t),i!==0&&(r=i,e=mh(t,i))),e===1))throw n=qo,ss(t,0),ar(t,r),Ct(t,De()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(U(345));case 2:Jr(t,St,kn);break;case 3:if(ar(t,r),(r&130023424)===r&&(e=kf+500-De(),10<e)){if(Fl(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){wt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Qd(Jr.bind(null,t,St,kn),e);break}Jr(t,St,kn);break;case 4:if(ar(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-sn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=De()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*PS(r/1960))-r,10<r){t.timeoutHandle=Qd(Jr.bind(null,t,St,kn),r);break}Jr(t,St,kn);break;case 5:Jr(t,St,kn);break;default:throw Error(U(329))}}}return Ct(t,De()),t.callbackNode===n?V0.bind(null,t):null}function mh(t,e){var n=wo;return t.current.memoizedState.isDehydrated&&(ss(t,e).flags|=256),t=ru(t,e),t!==2&&(e=St,St=n,e!==null&&gh(e)),t}function gh(t){St===null?St=t:St.push.apply(St,t)}function jS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!an(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ar(t,e){for(e&=~Cf,e&=~ju,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-sn(e),r=1<<n;t[n]=-1,e&=~r}}function Xg(t){if(oe&6)throw Error(U(327));ti();var e=Fl(t,0);if(!(e&1))return Ct(t,De()),null;var n=ru(t,e);if(t.tag!==0&&n===2){var r=Bd(t);r!==0&&(e=r,n=mh(t,r))}if(n===1)throw n=qo,ss(t,0),ar(t,e),Ct(t,De()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,St,kn),Ct(t,De()),null}function Pf(t,e){var n=oe;oe|=1;try{return t(e)}finally{oe=n,oe===0&&(hi=De()+500,bu&&Fr())}}function fs(t){pr!==null&&pr.tag===0&&!(oe&6)&&ti();var e=oe;oe|=1;var n=Ht.transition,r=ue;try{if(Ht.transition=null,ue=1,t)return t()}finally{ue=r,Ht.transition=n,oe=e,!(oe&6)&&Fr()}}function jf(){jt=Gs.current,ve(Gs)}function ss(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,uS(n)),Me!==null)for(n=Me.return;n!==null;){var r=n;switch(ff(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ql();break;case 3:ci(),ve(Rt),ve(ft),Ef();break;case 5:xf(r);break;case 4:ci();break;case 13:ve(Ee);break;case 19:ve(Ee);break;case 10:yf(r.type._context);break;case 22:case 23:jf()}n=n.return}if(He=t,Me=t=Ir(t.current,null),Je=jt=e,$e=0,qo=null,Cf=ju=hs=0,St=wo=null,ts!==null){for(e=0;e<ts.length;e++)if(n=ts[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}ts=null}return t}function M0(t,e){do{var n=Me;try{if(gf(),_l.current=Zl,Jl){for(var r=Te.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Jl=!1}if(ds=0,We=Be=Te=null,vo=!1,Bo=0,bf.current=null,n===null||n.return===null){$e=1,qo=e,Me=null;break}e:{var i=t,o=n.return,l=n,u=e;if(e=Je,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=l,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var g=f.alternate;g?(f.updateQueue=g.updateQueue,f.memoizedState=g.memoizedState,f.lanes=g.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Mg(o);if(w!==null){w.flags&=-257,Fg(w,o,l,i,e),w.mode&1&&Vg(i,d,e),e=w,u=d;var I=e.updateQueue;if(I===null){var R=new Set;R.add(u),e.updateQueue=R}else I.add(u);break e}else{if(!(e&1)){Vg(i,d,e),Df();break e}u=Error(U(426))}}else if(xe&&l.mode&1){var b=Mg(o);if(b!==null){!(b.flags&65536)&&(b.flags|=256),Fg(b,o,l,i,e),pf(di(u,l));break e}}i=u=di(u,l),$e!==4&&($e=2),wo===null?wo=[i]:wo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var y=x0(i,u,e);kg(i,y);break e;case 1:l=u;var _=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof _.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Er===null||!Er.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=E0(i,l,e);kg(i,C);break e}}i=i.return}while(i!==null)}B0(n)}catch(O){e=O,Me===n&&n!==null&&(Me=n=n.return);continue}break}while(!0)}function F0(){var t=eu.current;return eu.current=Zl,t===null?Zl:t}function Df(){($e===0||$e===3||$e===2)&&($e=4),He===null||!(hs&268435455)&&!(ju&268435455)||ar(He,Je)}function ru(t,e){var n=oe;oe|=2;var r=F0();(He!==t||Je!==e)&&(kn=null,ss(t,e));do try{DS();break}catch(s){M0(t,s)}while(!0);if(gf(),oe=n,eu.current=r,Me!==null)throw Error(U(261));return He=null,Je=0,$e}function DS(){for(;Me!==null;)U0(Me)}function OS(){for(;Me!==null&&!oI();)U0(Me)}function U0(t){var e=z0(t.alternate,t,jt);t.memoizedProps=t.pendingProps,e===null?B0(t):Me=e,bf.current=null}function B0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=RS(n,e),n!==null){n.flags&=32767,Me=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{$e=6,Me=null;return}}else if(n=AS(n,e,jt),n!==null){Me=n;return}if(e=e.sibling,e!==null){Me=e;return}Me=e=t}while(e!==null);$e===0&&($e=5)}function Jr(t,e,n){var r=ue,s=Ht.transition;try{Ht.transition=null,ue=1,LS(t,e,n,r)}finally{Ht.transition=s,ue=r}return null}function LS(t,e,n,r){do ti();while(pr!==null);if(oe&6)throw Error(U(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(gI(t,i),t===He&&(Me=He=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||nl||(nl=!0,q0(Ml,function(){return ti(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Ht.transition,Ht.transition=null;var o=ue;ue=1;var l=oe;oe|=4,bf.current=null,CS(t,n),O0(n,t),nS(Kd),Ul=!!Hd,Kd=Hd=null,t.current=n,kS(n),aI(),oe=l,ue=o,Ht.transition=i}else t.current=n;if(nl&&(nl=!1,pr=t,nu=s),i=t.pendingLanes,i===0&&(Er=null),cI(n.stateNode),Ct(t,De()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(tu)throw tu=!1,t=fh,fh=null,t;return nu&1&&t.tag!==0&&ti(),i=t.pendingLanes,i&1?t===ph?xo++:(xo=0,ph=t):xo=0,Fr(),null}function ti(){if(pr!==null){var t=x_(nu),e=Ht.transition,n=ue;try{if(Ht.transition=null,ue=16>t?16:t,pr===null)var r=!1;else{if(t=pr,pr=null,nu=0,oe&6)throw Error(U(331));var s=oe;for(oe|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var u=0;u<l.length;u++){var d=l[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:_o(8,f,i)}var p=f.child;if(p!==null)p.return=f,q=p;else for(;q!==null;){f=q;var g=f.sibling,w=f.return;if(P0(f),f===d){q=null;break}if(g!==null){g.return=w,q=g;break}q=w}}}var I=i.alternate;if(I!==null){var R=I.child;if(R!==null){I.child=null;do{var b=R.sibling;R.sibling=null,R=b}while(R!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:_o(9,i,i.return)}var y=i.sibling;if(y!==null){y.return=i.return,q=y;break e}q=i.return}}var _=t.current;for(q=_;q!==null;){o=q;var T=o.child;if(o.subtreeFlags&2064&&T!==null)T.return=o,q=T;else e:for(o=_;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Pu(9,l)}}catch(O){be(l,l.return,O)}if(l===o){q=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,q=C;break e}q=l.return}}if(oe=s,Fr(),gn&&typeof gn.onPostCommitFiberRoot=="function")try{gn.onPostCommitFiberRoot(Iu,t)}catch{}r=!0}return r}finally{ue=n,Ht.transition=e}}return!1}function Jg(t,e,n){e=di(n,e),e=x0(t,e,1),t=xr(t,e,1),e=wt(),t!==null&&(ia(t,1,e),Ct(t,e))}function be(t,e,n){if(t.tag===3)Jg(t,t,n);else for(;e!==null;){if(e.tag===3){Jg(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Er===null||!Er.has(r))){t=di(n,t),t=E0(e,t,1),e=xr(e,t,1),t=wt(),e!==null&&(ia(e,1,t),Ct(e,t));break}}e=e.return}}function VS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=wt(),t.pingedLanes|=t.suspendedLanes&n,He===t&&(Je&n)===n&&($e===4||$e===3&&(Je&130023424)===Je&&500>De()-kf?ss(t,0):Cf|=n),Ct(t,e)}function $0(t,e){e===0&&(t.mode&1?(e=Ha,Ha<<=1,!(Ha&130023424)&&(Ha=4194304)):e=1);var n=wt();t=zn(t,e),t!==null&&(ia(t,e,n),Ct(t,n))}function MS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$0(t,n)}function FS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(U(314))}r!==null&&r.delete(e),$0(t,n)}var z0;z0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)At=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return At=!1,NS(t,e,n);At=!!(t.flags&131072)}else At=!1,xe&&e.flags&1048576&&K_(e,Kl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;xl(t,e),t=e.pendingProps;var s=ai(e,ft.current);ei(e,n),s=If(null,e,r,t,s,n);var i=Sf();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,bt(r)?(i=!0,Wl(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_f(e),s.updater=ku,e.stateNode=s,s._reactInternals=e,nh(e,r,t,n),e=ih(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&hf(e),_t(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(xl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=BS(r),t=tn(r,t),s){case 0:e=sh(null,e,r,t,n);break e;case 1:e=$g(null,e,r,t,n);break e;case 11:e=Ug(null,e,r,t,n);break e;case 14:e=Bg(null,e,r,tn(r.type,t),n);break e}throw Error(U(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),sh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),$g(t,e,r,s,n);case 3:e:{if(N0(e),t===null)throw Error(U(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Z_(t,e),Yl(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=di(Error(U(423)),e),e=zg(t,e,r,n,s);break e}else if(r!==s){s=di(Error(U(424)),e),e=zg(t,e,r,n,s);break e}else for(Dt=wr(e.stateNode.containerInfo.firstChild),Vt=e,xe=!0,rn=null,n=X_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(li(),r===s){e=qn(t,e,n);break e}_t(t,e,r,n)}e=e.child}return e;case 5:return e0(e),t===null&&Zd(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Gd(r,s)?o=null:i!==null&&Gd(r,i)&&(e.flags|=32),S0(t,e),_t(t,e,o,n),e.child;case 6:return t===null&&Zd(e),null;case 13:return A0(t,e,n);case 4:return wf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ui(e,null,r,n):_t(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),Ug(t,e,r,s,n);case 7:return _t(t,e,e.pendingProps,n),e.child;case 8:return _t(t,e,e.pendingProps.children,n),e.child;case 12:return _t(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,fe(Gl,r._currentValue),r._currentValue=o,i!==null)if(an(i.value,o)){if(i.children===s.children&&!Rt.current){e=qn(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=Mn(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),eh(i.return,n,e),l.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(U(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),eh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}_t(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,ei(e,n),s=Gt(s),r=r(s),e.flags|=1,_t(t,e,r,n),e.child;case 14:return r=e.type,s=tn(r,e.pendingProps),s=tn(r.type,s),Bg(t,e,r,s,n);case 15:return T0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:tn(r,s),xl(t,e),e.tag=1,bt(r)?(t=!0,Wl(e)):t=!1,ei(e,n),w0(e,r,s),nh(e,r,s,n),ih(null,e,r,!0,t,n);case 19:return R0(t,e,n);case 22:return I0(t,e,n)}throw Error(U(156,e.tag))};function q0(t,e){return y_(t,e)}function US(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Wt(t,e,n,r){return new US(t,e,n,r)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function BS(t){if(typeof t=="function")return Of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zh)return 11;if(t===ef)return 14}return 2}function Ir(t,e){var n=t.alternate;return n===null?(n=Wt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Il(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Of(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ms:return is(n.children,s,i,e);case Jh:o=8,s|=8;break;case Nd:return t=Wt(12,n,e,s|2),t.elementType=Nd,t.lanes=i,t;case Ad:return t=Wt(13,n,e,s),t.elementType=Ad,t.lanes=i,t;case Rd:return t=Wt(19,n,e,s),t.elementType=Rd,t.lanes=i,t;case e_:return Du(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jv:o=10;break e;case Zv:o=9;break e;case Zh:o=11;break e;case ef:o=14;break e;case sr:o=16,r=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Wt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function is(t,e,n,r){return t=Wt(7,t,r,e),t.lanes=n,t}function Du(t,e,n,r){return t=Wt(22,t,r,e),t.elementType=e_,t.lanes=n,t.stateNode={isHidden:!1},t}function id(t,e,n){return t=Wt(6,t,null,e),t.lanes=n,t}function od(t,e,n){return e=Wt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function $S(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Uc(0),this.expirationTimes=Uc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Uc(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lf(t,e,n,r,s,i,o,l,u){return t=new $S(t,e,n,l,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Wt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_f(i),t}function zS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function W0(t){if(!t)return kr;t=t._reactInternals;e:{if(Ts(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(bt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(bt(n))return W_(t,n,e)}return e}function H0(t,e,n,r,s,i,o,l,u){return t=Lf(n,r,!0,t,s,i,o,l,u),t.context=W0(null),n=t.current,r=wt(),s=Tr(n),i=Mn(r,s),i.callback=e??null,xr(n,i,s),t.current.lanes=s,ia(t,s,r),Ct(t,r),t}function Ou(t,e,n,r){var s=e.current,i=wt(),o=Tr(s);return n=W0(n),e.context===null?e.context=n:e.pendingContext=n,e=Mn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=xr(s,e,o),t!==null&&(on(t,s,o,i),vl(t,s,o)),o}function su(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Zg(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vf(t,e){Zg(t,e),(t=t.alternate)&&Zg(t,e)}function qS(){return null}var K0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mf(t){this._internalRoot=t}Lu.prototype.render=Mf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Ou(t,e,null,null)};Lu.prototype.unmount=Mf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fs(function(){Ou(null,t,null,null)}),e[$n]=null}};function Lu(t){this._internalRoot=t}Lu.prototype.unstable_scheduleHydration=function(t){if(t){var e=I_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<or.length&&e!==0&&e<or[n].priority;n++);or.splice(n,0,t),n===0&&N_(t)}};function Ff(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Vu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ey(){}function WS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=su(o);i.call(d)}}var o=H0(e,r,t,0,null,!1,!1,"",ey);return t._reactRootContainer=o,t[$n]=o.current,Lo(t.nodeType===8?t.parentNode:t),fs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=su(u);l.call(d)}}var u=Lf(t,0,!1,null,null,!1,!1,"",ey);return t._reactRootContainer=u,t[$n]=u.current,Lo(t.nodeType===8?t.parentNode:t),fs(function(){Ou(e,u,n,r)}),u}function Mu(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var u=su(o);l.call(u)}}Ou(e,o,t,s)}else o=WS(n,e,t,s,r);return su(o)}E_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=so(e.pendingLanes);n!==0&&(rf(e,n|1),Ct(e,De()),!(oe&6)&&(hi=De()+500,Fr()))}break;case 13:fs(function(){var r=zn(t,1);if(r!==null){var s=wt();on(r,t,1,s)}}),Vf(t,1)}};sf=function(t){if(t.tag===13){var e=zn(t,134217728);if(e!==null){var n=wt();on(e,t,134217728,n)}Vf(t,134217728)}};T_=function(t){if(t.tag===13){var e=Tr(t),n=zn(t,e);if(n!==null){var r=wt();on(n,t,e,r)}Vf(t,e)}};I_=function(){return ue};S_=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Md=function(t,e,n){switch(e){case"input":if(kd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=Ru(r);if(!s)throw Error(U(90));n_(r),kd(r,s)}}}break;case"textarea":s_(t,n);break;case"select":e=n.value,e!=null&&Ys(t,!!n.multiple,e,!1)}};d_=Pf;h_=fs;var HS={usingClientEntryPoint:!1,Events:[aa,$s,Ru,u_,c_,Pf]},Zi={findFiberByHostInstance:es,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},KS={bundleType:Zi.bundleType,version:Zi.version,rendererPackageName:Zi.rendererPackageName,rendererConfig:Zi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=m_(t),t===null?null:t.stateNode},findFiberByHostInstance:Zi.findFiberByHostInstance||qS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var rl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rl.isDisabled&&rl.supportsFiber)try{Iu=rl.inject(KS),gn=rl}catch{}}Ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=HS;Ut.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Ff(e))throw Error(U(200));return zS(t,e,null,n)};Ut.createRoot=function(t,e){if(!Ff(t))throw Error(U(299));var n=!1,r="",s=K0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lf(t,1,!1,null,null,n,!1,r,s),t[$n]=e.current,Lo(t.nodeType===8?t.parentNode:t),new Mf(e)};Ut.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=m_(e),t=t===null?null:t.stateNode,t};Ut.flushSync=function(t){return fs(t)};Ut.hydrate=function(t,e,n){if(!Vu(e))throw Error(U(200));return Mu(null,t,e,!0,n)};Ut.hydrateRoot=function(t,e,n){if(!Ff(t))throw Error(U(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=K0;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=H0(e,null,t,1,n??null,s,!1,i,o),t[$n]=e.current,Lo(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Lu(e)};Ut.render=function(t,e,n){if(!Vu(e))throw Error(U(200));return Mu(null,t,e,!1,n)};Ut.unmountComponentAtNode=function(t){if(!Vu(t))throw Error(U(40));return t._reactRootContainer?(fs(function(){Mu(null,null,t,!1,function(){t._reactRootContainer=null,t[$n]=null})}),!0):!1};Ut.unstable_batchedUpdates=Pf;Ut.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Vu(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return Mu(t,e,n,!1,r)};Ut.version="18.3.1-next-f1338f8080-20240426";function G0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(G0)}catch(t){console.error(t)}}G0(),Gv.exports=Ut;var GS=Gv.exports,ty=GS;Id.createRoot=ty.createRoot,Id.hydrateRoot=ty.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wo(){return Wo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wo.apply(this,arguments)}var mr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(mr||(mr={}));const ny="popstate";function QS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return yh("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:iu(s)}return XS(e,n,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Q0(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YS(){return Math.random().toString(36).substr(2,8)}function ry(t,e){return{usr:t.state,key:t.key,idx:e}}function yh(t,e,n,r){return n===void 0&&(n=null),Wo({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Si(e):e,{state:n,key:e&&e.key||r||YS()})}function iu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Si(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function XS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=mr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Wo({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){l=mr.Pop;let b=f(),y=b==null?null:b-d;d=b,u&&u({action:l,location:R.location,delta:y})}function g(b,y){l=mr.Push;let _=yh(R.location,b,y);d=f()+1;let T=ry(_,d),C=R.createHref(_);try{o.pushState(T,"",C)}catch(O){if(O instanceof DOMException&&O.name==="DataCloneError")throw O;s.location.assign(C)}i&&u&&u({action:l,location:R.location,delta:1})}function w(b,y){l=mr.Replace;let _=yh(R.location,b,y);d=f();let T=ry(_,d),C=R.createHref(_);o.replaceState(T,"",C),i&&u&&u({action:l,location:R.location,delta:0})}function I(b){let y=s.location.origin!=="null"?s.location.origin:s.location.href,_=typeof b=="string"?b:iu(b);return _=_.replace(/ $/,"%20"),Le(y,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,y)}let R={get action(){return l},get location(){return t(s,o)},listen(b){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(ny,p),u=b,()=>{s.removeEventListener(ny,p),u=null}},createHref(b){return e(s,b)},createURL:I,encodeLocation(b){let y=I(b);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:g,replace:w,go(b){return o.go(b)}};return R}var sy;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(sy||(sy={}));function JS(t,e,n){return n===void 0&&(n="/"),ZS(t,e,n)}function ZS(t,e,n,r){let s=typeof e=="string"?Si(e):e,i=Uf(s.pathname||"/",n);if(i==null)return null;let o=Y0(t);eN(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=hN(i);l=uN(o[u],d)}return l}function Y0(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let u={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Le(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Sr([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Le(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Y0(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:aN(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let u of X0(i.path))s(i,o,u)}),e}function X0(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=X0(r.join("/")),l=[];return l.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&l.push(...o),l.map(u=>t.startsWith("/")&&u===""?"/":u)}function eN(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:lN(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const tN=/^:[\w-]+$/,nN=3,rN=2,sN=1,iN=10,oN=-2,iy=t=>t==="*";function aN(t,e){let n=t.split("/"),r=n.length;return n.some(iy)&&(r+=oN),e&&(r+=rN),n.filter(s=>!iy(s)).reduce((s,i)=>s+(tN.test(i)?nN:i===""?sN:iN),r)}function lN(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function uN(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=cN({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),g=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Sr([i,p.pathname]),pathnameBase:gN(Sr([i,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(i=Sr([i,p.pathnameBase]))}return o}function cN(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=dN(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:g,isOptional:w}=f;if(g==="*"){let R=l[p]||"";o=i.slice(0,i.length-R.length).replace(/(.)\/+$/,"$1")}const I=l[p];return w&&!I?d[g]=void 0:d[g]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function dN(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Q0(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function hN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Q0(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Uf(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function fN(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Si(t):t;return{pathname:n?n.startsWith("/")?n:pN(n,e):e,search:yN(r),hash:vN(s)}}function pN(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function ad(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function mN(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Bf(t,e){let n=mN(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $f(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Si(t):(s=Wo({},t),Le(!s.pathname||!s.pathname.includes("?"),ad("?","pathname","search",s)),Le(!s.pathname||!s.pathname.includes("#"),ad("#","pathname","hash",s)),Le(!s.search||!s.search.includes("#"),ad("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;s.pathname=g.join("/")}l=p>=0?e[p]:"/"}let u=fN(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Sr=t=>t.join("/").replace(/\/\/+/g,"/"),gN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),yN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,vN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function _N(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const J0=["post","put","patch","delete"];new Set(J0);const wN=["get",...J0];new Set(wN);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ho(){return Ho=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ho.apply(this,arguments)}const zf=P.createContext(null),xN=P.createContext(null),Ur=P.createContext(null),Fu=P.createContext(null),Br=P.createContext({outlet:null,matches:[],isDataRoute:!1}),Z0=P.createContext(null);function EN(t,e){let{relative:n}=e===void 0?{}:e;Ni()||Le(!1);let{basename:r,navigator:s}=P.useContext(Ur),{hash:i,pathname:o,search:l}=tw(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Sr([r,o])),s.createHref({pathname:u,search:l,hash:i})}function Ni(){return P.useContext(Fu)!=null}function Ai(){return Ni()||Le(!1),P.useContext(Fu).location}function ew(t){P.useContext(Ur).static||P.useLayoutEffect(t)}function Is(){let{isDataRoute:t}=P.useContext(Br);return t?ON():TN()}function TN(){Ni()||Le(!1);let t=P.useContext(zf),{basename:e,future:n,navigator:r}=P.useContext(Ur),{matches:s}=P.useContext(Br),{pathname:i}=Ai(),o=JSON.stringify(Bf(s,n.v7_relativeSplatPath)),l=P.useRef(!1);return ew(()=>{l.current=!0}),P.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=$f(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Sr([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function tw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=P.useContext(Ur),{matches:s}=P.useContext(Br),{pathname:i}=Ai(),o=JSON.stringify(Bf(s,r.v7_relativeSplatPath));return P.useMemo(()=>$f(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function IN(t,e){return SN(t,e)}function SN(t,e,n,r){Ni()||Le(!1);let{navigator:s}=P.useContext(Ur),{matches:i}=P.useContext(Br),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Ai(),f;if(e){var p;let b=typeof e=="string"?Si(e):e;u==="/"||(p=b.pathname)!=null&&p.startsWith(u)||Le(!1),f=b}else f=d;let g=f.pathname||"/",w=g;if(u!=="/"){let b=u.replace(/^\//,"").split("/");w="/"+g.replace(/^\//,"").split("/").slice(b.length).join("/")}let I=JS(t,{pathname:w}),R=CN(I&&I.map(b=>Object.assign({},b,{params:Object.assign({},l,b.params),pathname:Sr([u,s.encodeLocation?s.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?u:Sr([u,s.encodeLocation?s.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),i,n,r);return e&&R?P.createElement(Fu.Provider,{value:{location:Ho({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:mr.Pop}},R):R}function NN(){let t=DN(),e=_N(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},e),n?P.createElement("pre",{style:s},n):null,null)}const AN=P.createElement(NN,null);class RN extends P.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?P.createElement(Br.Provider,{value:this.props.routeContext},P.createElement(Z0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function bN(t){let{routeContext:e,match:n,children:r}=t,s=P.useContext(zf);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Br.Provider,{value:e},r)}function CN(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(p=>p.route.id&&(l==null?void 0:l[p.route.id])!==void 0);f>=0||Le(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:g,errors:w}=n,I=p.route.loader&&g[p.route.id]===void 0&&(!w||w[p.route.id]===void 0);if(p.route.lazy||I){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,g)=>{let w,I=!1,R=null,b=null;n&&(w=l&&p.route.id?l[p.route.id]:void 0,R=p.route.errorElement||AN,u&&(d<0&&g===0?(LN("route-fallback"),I=!0,b=null):d===g&&(I=!0,b=p.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,g+1)),_=()=>{let T;return w?T=R:I?T=b:p.route.Component?T=P.createElement(p.route.Component,null):p.route.element?T=p.route.element:T=f,P.createElement(bN,{match:p,routeContext:{outlet:f,matches:y,isDataRoute:n!=null},children:T})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(RN,{location:n.location,revalidation:n.revalidation,component:R,error:w,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var nw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(nw||{}),rw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(rw||{});function kN(t){let e=P.useContext(zf);return e||Le(!1),e}function PN(t){let e=P.useContext(xN);return e||Le(!1),e}function jN(t){let e=P.useContext(Br);return e||Le(!1),e}function sw(t){let e=jN(),n=e.matches[e.matches.length-1];return n.route.id||Le(!1),n.route.id}function DN(){var t;let e=P.useContext(Z0),n=PN(),r=sw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function ON(){let{router:t}=kN(nw.UseNavigateStable),e=sw(rw.UseNavigateStable),n=P.useRef(!1);return ew(()=>{n.current=!0}),P.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ho({fromRouteId:e},i)))},[t,e])}const oy={};function LN(t,e,n){oy[t]||(oy[t]=!0)}function VN(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function iw(t){let{to:e,replace:n,state:r,relative:s}=t;Ni()||Le(!1);let{future:i,static:o}=P.useContext(Ur),{matches:l}=P.useContext(Br),{pathname:u}=Ai(),d=Is(),f=$f(e,Bf(l,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return P.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function we(t){Le(!1)}function MN(t){let{basename:e="/",children:n=null,location:r,navigationType:s=mr.Pop,navigator:i,static:o=!1,future:l}=t;Ni()&&Le(!1);let u=e.replace(/^\/*/,"/"),d=P.useMemo(()=>({basename:u,navigator:i,static:o,future:Ho({v7_relativeSplatPath:!1},l)}),[u,l,i,o]);typeof r=="string"&&(r=Si(r));let{pathname:f="/",search:p="",hash:g="",state:w=null,key:I="default"}=r,R=P.useMemo(()=>{let b=Uf(f,u);return b==null?null:{location:{pathname:b,search:p,hash:g,state:w,key:I},navigationType:s}},[u,f,p,g,w,I,s]);return R==null?null:P.createElement(Ur.Provider,{value:d},P.createElement(Fu.Provider,{children:n,value:R}))}function FN(t){let{children:e,location:n}=t;return IN(vh(e),n)}new Promise(()=>{});function vh(t,e){e===void 0&&(e=[]);let n=[];return P.Children.forEach(t,(r,s)=>{if(!P.isValidElement(r))return;let i=[...e,s];if(r.type===P.Fragment){n.push.apply(n,vh(r.props.children,i));return}r.type!==we&&Le(!1),!r.props.index||!r.props.children||Le(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=vh(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _h(){return _h=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_h.apply(this,arguments)}function UN(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function BN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function $N(t,e){return t.button===0&&(!e||e==="_self")&&!BN(t)}const zN=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],qN="6";try{window.__reactRouterVersion=qN}catch{}const WN="startTransition",ay=VT[WN];function HN(t){let{basename:e,children:n,future:r,window:s}=t,i=P.useRef();i.current==null&&(i.current=QS({window:s,v5Compat:!0}));let o=i.current,[l,u]=P.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=P.useCallback(p=>{d&&ay?ay(()=>u(p)):u(p)},[u,d]);return P.useLayoutEffect(()=>o.listen(f),[o,f]),P.useEffect(()=>VN(r),[r]),P.createElement(MN,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const KN=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",GN=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,xt=P.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=UN(e,zN),{basename:w}=P.useContext(Ur),I,R=!1;if(typeof d=="string"&&GN.test(d)&&(I=d,KN))try{let T=new URL(window.location.href),C=d.startsWith("//")?new URL(T.protocol+d):new URL(d),O=Uf(C.pathname,w);C.origin===T.origin&&O!=null?d=O+C.search+C.hash:R=!0}catch{}let b=EN(d,{relative:s}),y=QN(d,{replace:o,state:l,target:u,preventScrollReset:f,relative:s,viewTransition:p});function _(T){r&&r(T),T.defaultPrevented||y(T)}return P.createElement("a",_h({},g,{href:I||b,onClick:R||i?r:_,ref:n,target:u}))});var ly;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ly||(ly={}));var uy;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(uy||(uy={}));function QN(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,u=Is(),d=Ai(),f=tw(t,{relative:o});return P.useCallback(p=>{if($N(p,n)){p.preventDefault();let g=r!==void 0?r:iu(d)===iu(f);u(t,{replace:g,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,u,f,r,s,n,t,i,o,l])}var cy={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ow=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},YN=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|l>>4;let g=(l&15)<<2|d>>6,w=d&63;u||(w=64,o||(g=64)),r.push(n[f],n[p],n[g],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ow(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):YN(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||p==null)throw new XN;const g=i<<2|l>>4;if(r.push(g),d!==64){const w=l<<4&240|d>>2;if(r.push(w),p!==64){const I=d<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class XN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const JN=function(t){const e=ow(t);return aw.encodeByteArray(e,!0)},ou=function(t){return JN(t).replace(/\./g,"")},lw=function(t){try{return aw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eA=()=>ZN().__FIREBASE_DEFAULTS__,tA=()=>{if(typeof process>"u"||typeof cy>"u")return;const t=cy.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},nA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&lw(t[1]);return e&&JSON.parse(e)},Uu=()=>{try{return eA()||tA()||nA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},uw=t=>{var e,n;return(n=(e=Uu())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},cw=t=>{const e=uw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},dw=()=>{var t;return(t=Uu())===null||t===void 0?void 0:t.config},hw=t=>{var e;return(e=Uu())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ou(JSON.stringify(n)),ou(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function iA(){var t;const e=(t=Uu())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function oA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function aA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function lA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function uA(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function cA(){return!iA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function dA(){try{return typeof indexedDB=="object"}catch{return!1}}function hA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fA="FirebaseError";class Nn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=fA,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ua.prototype.create)}}class ua{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?pA(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new Nn(s,l,r)}}function pA(t,e){return t.replace(mA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const mA=/\{\$([^}]+)}/g;function gA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function au(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(dy(i)&&dy(o)){if(!au(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function dy(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ca(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function oo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function yA(t,e){const n=new vA(t,e);return n.subscribe.bind(n)}class vA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");_A(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ld),s.error===void 0&&(s.error=ld),s.complete===void 0&&(s.complete=ld);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function _A(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ld(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class Pr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new rA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(EA(e))try{this.getOrInitializeService({instanceIdentifier:Zr})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=Zr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Zr){return this.instances.has(e)}getOptions(e=Zr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Zr){return this.component?this.component.multipleInstances?e:Zr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xA(t){return t===Zr?void 0:t}function EA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new wA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var se;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(se||(se={}));const IA={debug:se.DEBUG,verbose:se.VERBOSE,info:se.INFO,warn:se.WARN,error:se.ERROR,silent:se.SILENT},SA=se.INFO,NA={[se.DEBUG]:"log",[se.VERBOSE]:"log",[se.INFO]:"info",[se.WARN]:"warn",[se.ERROR]:"error"},AA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=NA[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qf{constructor(e){this.name=e,this._logLevel=SA,this._logHandler=AA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in se))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?IA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,se.DEBUG,...e),this._logHandler(this,se.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,se.VERBOSE,...e),this._logHandler(this,se.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,se.INFO,...e),this._logHandler(this,se.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,se.WARN,...e),this._logHandler(this,se.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,se.ERROR,...e),this._logHandler(this,se.ERROR,...e)}}const RA=(t,e)=>e.some(n=>t instanceof n);let hy,fy;function bA(){return hy||(hy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CA(){return fy||(fy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const pw=new WeakMap,wh=new WeakMap,mw=new WeakMap,ud=new WeakMap,Wf=new WeakMap;function kA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Nr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&pw.set(n,t)}).catch(()=>{}),Wf.set(e,t),e}function PA(t){if(wh.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});wh.set(t,e)}let xh={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return wh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||mw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Nr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function jA(t){xh=t(xh)}function DA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(cd(this),e,...n);return mw.set(r,e.sort?e.sort():[e]),Nr(r)}:CA().includes(t)?function(...e){return t.apply(cd(this),e),Nr(pw.get(this))}:function(...e){return Nr(t.apply(cd(this),e))}}function OA(t){return typeof t=="function"?DA(t):(t instanceof IDBTransaction&&PA(t),RA(t,bA())?new Proxy(t,xh):t)}function Nr(t){if(t instanceof IDBRequest)return kA(t);if(ud.has(t))return ud.get(t);const e=OA(t);return e!==t&&(ud.set(t,e),Wf.set(e,t)),e}const cd=t=>Wf.get(t);function LA(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Nr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(Nr(o.result),u.oldVersion,u.newVersion,Nr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}const VA=["get","getKey","getAll","getAllKeys","count"],MA=["put","add","delete","clear"],dd=new Map;function py(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(dd.get(e))return dd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=MA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||VA.includes(n)))return;const i=async function(o,...l){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&u.done]))[0]};return dd.set(e,i),i}jA(t=>({...t,get:(e,n,r)=>py(e,n)||t.get(e,n,r),has:(e,n)=>!!py(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(UA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function UA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Eh="@firebase/app",my="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wn=new qf("@firebase/app"),BA="@firebase/app-compat",$A="@firebase/analytics-compat",zA="@firebase/analytics",qA="@firebase/app-check-compat",WA="@firebase/app-check",HA="@firebase/auth",KA="@firebase/auth-compat",GA="@firebase/database",QA="@firebase/data-connect",YA="@firebase/database-compat",XA="@firebase/functions",JA="@firebase/functions-compat",ZA="@firebase/installations",eR="@firebase/installations-compat",tR="@firebase/messaging",nR="@firebase/messaging-compat",rR="@firebase/performance",sR="@firebase/performance-compat",iR="@firebase/remote-config",oR="@firebase/remote-config-compat",aR="@firebase/storage",lR="@firebase/storage-compat",uR="@firebase/firestore",cR="@firebase/vertexai-preview",dR="@firebase/firestore-compat",hR="firebase",fR="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Th="[DEFAULT]",pR={[Eh]:"fire-core",[BA]:"fire-core-compat",[zA]:"fire-analytics",[$A]:"fire-analytics-compat",[WA]:"fire-app-check",[qA]:"fire-app-check-compat",[HA]:"fire-auth",[KA]:"fire-auth-compat",[GA]:"fire-rtdb",[QA]:"fire-data-connect",[YA]:"fire-rtdb-compat",[XA]:"fire-fn",[JA]:"fire-fn-compat",[ZA]:"fire-iid",[eR]:"fire-iid-compat",[tR]:"fire-fcm",[nR]:"fire-fcm-compat",[rR]:"fire-perf",[sR]:"fire-perf-compat",[iR]:"fire-rc",[oR]:"fire-rc-compat",[aR]:"fire-gcs",[lR]:"fire-gcs-compat",[uR]:"fire-fst",[dR]:"fire-fst-compat",[cR]:"fire-vertex","fire-js":"fire-js",[hR]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lu=new Map,mR=new Map,Ih=new Map;function gy(t,e){try{t.container.addComponent(e)}catch(n){Wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ps(t){const e=t.name;if(Ih.has(e))return Wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ih.set(e,t);for(const n of lu.values())gy(n,t);for(const n of mR.values())gy(n,t);return!0}function Bu(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function pn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ar=new ua("app","Firebase",gR);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Pr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ar.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=fR;function gw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Th,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Ar.create("bad-app-name",{appName:String(s)});if(n||(n=dw()),!n)throw Ar.create("no-options");const i=lu.get(s);if(i){if(au(n,i.options)&&au(r,i.config))return i;throw Ar.create("duplicate-app",{appName:s})}const o=new TA(s);for(const u of Ih.values())o.addComponent(u);const l=new yR(n,r,o);return lu.set(s,l),l}function Hf(t=Th){const e=lu.get(t);if(!e&&t===Th&&dw())return gw();if(!e)throw Ar.create("no-app",{appName:t});return e}function vn(t,e,n){var r;let s=(r=pR[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Wn.warn(l.join(" "));return}ps(new Pr(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR="firebase-heartbeat-database",_R=1,Ko="firebase-heartbeat-store";let hd=null;function yw(){return hd||(hd=LA(vR,_R,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ko)}catch(n){console.warn(n)}}}}).catch(t=>{throw Ar.create("idb-open",{originalErrorMessage:t.message})})),hd}async function wR(t){try{const n=(await yw()).transaction(Ko),r=await n.objectStore(Ko).get(vw(t));return await n.done,r}catch(e){if(e instanceof Nn)Wn.warn(e.message);else{const n=Ar.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Wn.warn(n.message)}}}async function yy(t,e){try{const r=(await yw()).transaction(Ko,"readwrite");await r.objectStore(Ko).put(e,vw(t)),await r.done}catch(n){if(n instanceof Nn)Wn.warn(n.message);else{const r=Ar.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Wn.warn(r.message)}}}function vw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xR=1024,ER=30*24*60*60*1e3;class TR{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new SR(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=vy();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=ER}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=vy(),{heartbeatsToSend:r,unsentEntries:s}=IR(this._heartbeatsCache.heartbeats),i=ou(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return Wn.warn(n),""}}}function vy(){return new Date().toISOString().substring(0,10)}function IR(t,e=xR){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),_y(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),_y(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class SR{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return dA()?hA().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await wR(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return yy(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function _y(t){return ou(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NR(t){ps(new Pr("platform-logger",e=>new FA(e),"PRIVATE")),ps(new Pr("heartbeat",e=>new TR(e),"PRIVATE")),vn(Eh,my,t),vn(Eh,my,"esm2017"),vn("fire-js","")}NR("");function Kf(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function _w(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AR=_w,ww=new ua("auth","Firebase",_w());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uu=new qf("@firebase/auth");function RR(t,...e){uu.logLevel<=se.WARN&&uu.warn(`Auth (${Ss}): ${t}`,...e)}function Sl(t,...e){uu.logLevel<=se.ERROR&&uu.error(`Auth (${Ss}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ln(t,...e){throw Gf(t,...e)}function _n(t,...e){return Gf(t,...e)}function xw(t,e,n){const r=Object.assign(Object.assign({},AR()),{[e]:n});return new ua("auth","Firebase",r).create(e,{appName:t.name})}function Fn(t){return xw(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Gf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ww.create(t,...e)}function G(t,e,...n){if(!t)throw Gf(e,...n)}function On(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Sl(e),new Error(e)}function Hn(t,e){t||On(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bR(){return wy()==="http:"||wy()==="https:"}function wy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bR()||aA()||"connection"in navigator)?navigator.onLine:!0}function kR(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(e,n){this.shortDelay=e,this.longDelay=n,Hn(n>e,"Short delay should be less than long delay!"),this.isMobile=sA()||lA()}get(){return CR()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qf(t,e){Hn(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;On("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;On("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;On("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR=new da(3e4,6e4);function $r(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xn(t,e,n,r,s={}){return Tw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ca(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return oA()||(d.referrerPolicy="no-referrer"),Ew.fetch()(Iw(t,t.config.apiHost,n,l),d)})}async function Tw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},PR),e);try{const s=new OR(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw sl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[u,d]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw sl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw sl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw sl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw xw(t,f,d);ln(t,f)}}catch(s){if(s instanceof Nn)throw s;ln(t,"network-request-failed",{message:String(s)})}}async function ha(t,e,n,r,s={}){const i=await Xn(t,e,n,r,s);return"mfaPendingCredential"in i&&ln(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Iw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qf(t.config,s):`${t.config.apiScheme}://${s}`}function DR(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class OR{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),jR.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_n(t,e,r);return s.customData._tokenResponse=n,s}function xy(t){return t!==void 0&&t.enterprise!==void 0}class LR{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return DR(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function VR(t,e){return Xn(t,"GET","/v2/recaptchaConfig",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e){return Xn(t,"POST","/v1/accounts:delete",e)}async function Sw(t,e){return Xn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function FR(t,e=!1){const n=_e(t),r=await n.getIdToken(e),s=Yf(r);G(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Eo(fd(s.auth_time)),issuedAtTime:Eo(fd(s.iat)),expirationTime:Eo(fd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function fd(t){return Number(t)*1e3}function Yf(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Sl("JWT malformed, contained fewer than 3 sections"),null;try{const s=lw(n);return s?JSON.parse(s):(Sl("Failed to decode base64 JWT payload"),null)}catch(s){return Sl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Ey(t){const e=Yf(t);return G(e,"internal-error"),G(typeof e.exp<"u","internal-error"),G(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nn&&UR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function UR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Eo(this.lastLoginAt),this.creationTime=Eo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await fi(t,Sw(n,{idToken:r}));G(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Nw(i.providerUserInfo):[],l=zR(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new Nh(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function $R(t){const e=_e(t);await cu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function zR(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Nw(t){return t.map(e=>{var{providerId:n}=e,r=Kf(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,e){const n=await Tw(t,{},async()=>{const r=ca({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Iw(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",Ew.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function WR(t,e){return Xn(t,"POST","/v2/accounts:revokeToken",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){G(e.idToken,"internal-error"),G(typeof e.idToken<"u","internal-error"),G(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Ey(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){G(e.length!==0,"internal-error");const n=Ey(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(G(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await qR(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new ni;return r&&(G(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(G(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(G(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new ni,this.toJSON())}_performRefresh(){return On("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rr(t,e){G(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Kf(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new BR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Nh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await fi(this,this.stsTokenManager.getToken(this.auth,e));return G(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return FR(this,e)}reload(){return $R(this)}_assign(e){this!==e&&(G(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){G(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await cu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(pn(this.auth.app))return Promise.reject(Fn(this.auth));const e=await this.getIdToken();return await fi(this,MR(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,g=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,R=(l=n.tenantId)!==null&&l!==void 0?l:void 0,b=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(d=n.createdAt)!==null&&d!==void 0?d:void 0,_=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:T,emailVerified:C,isAnonymous:O,providerData:M,stsTokenManager:E}=n;G(T&&E,e,"internal-error");const x=ni.fromJSON(this.name,E);G(typeof T=="string",e,"internal-error"),rr(p,e.name),rr(g,e.name),G(typeof C=="boolean",e,"internal-error"),G(typeof O=="boolean",e,"internal-error"),rr(w,e.name),rr(I,e.name),rr(R,e.name),rr(b,e.name),rr(y,e.name),rr(_,e.name);const S=new Ln({uid:T,auth:e,email:g,emailVerified:C,displayName:p,isAnonymous:O,photoURL:I,phoneNumber:w,tenantId:R,stsTokenManager:x,createdAt:y,lastLoginAt:_});return M&&Array.isArray(M)&&(S.providerData=M.map(N=>Object.assign({},N))),b&&(S._redirectEventId=b),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new ni;s.updateFromServerResponse(n);const i=new Ln({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await cu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];G(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Nw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new ni;l.updateFromIdToken(r);const u=new Ln({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Nh(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ty=new Map;function Vn(t){Hn(t instanceof Function,"Expected a class definition");let e=Ty.get(t);return e?(Hn(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Ty.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Aw.type="NONE";const Iy=Aw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nl(t,e,n){return`firebase:${t}:${e}:${n}`}class ri{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Nl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Nl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Ln._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ri(Vn(Iy),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Vn(Iy);const o=Nl(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Ln._fromJSON(e,f);d!==i&&(l=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new ri(i,e,r):(i=u[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new ri(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(kw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Rw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(Dw(e))return"Webos";if(bw(e))return"Safari";if((e.includes("chrome/")||Cw(e))&&!e.includes("edge/"))return"Chrome";if(Pw(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Rw(t=pt()){return/firefox\//i.test(t)}function bw(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Cw(t=pt()){return/crios\//i.test(t)}function kw(t=pt()){return/iemobile/i.test(t)}function Pw(t=pt()){return/android/i.test(t)}function jw(t=pt()){return/blackberry/i.test(t)}function Dw(t=pt()){return/webos/i.test(t)}function Xf(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function HR(t=pt()){var e;return Xf(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function KR(){return uA()&&document.documentMode===10}function Ow(t=pt()){return Xf(t)||Pw(t)||Dw(t)||jw(t)||/windows phone/i.test(t)||kw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lw(t,e=[]){let n;switch(t){case"Browser":n=Sy(pt());break;case"Worker":n=`${Sy(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ss}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const u=e(i);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QR(t,e={}){return Xn(t,"GET","/v2/passwordPolicy",$r(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=6;class XR{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:YR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(l=u.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ny(this),this.idTokenSubscription=new Ny(this),this.beforeStateQueue=new GR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Vn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await ri.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Sw(this,{idToken:e}),r=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(pn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return G(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await cu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=kR()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(pn(this.app))return Promise.reject(Fn(this));const n=e?_e(e):null;return n&&G(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&G(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return pn(this.app)?Promise.reject(Fn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return pn(this.app)?Promise.reject(Fn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Vn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await QR(this),n=new XR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ua("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await WR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Vn(e)||this._popupRedirectResolver;G(n,this,"argument-error"),this.redirectPersistenceManager=await ri.create(this,[Vn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(G(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return G(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&RR(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Ns(t){return _e(t)}class Ny{constructor(e){this.auth=e,this.observer=null,this.addObserver=yA(n=>this.observer=n)}get next(){return G(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $u={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ZR(t){$u=t}function Vw(t){return $u.loadJS(t)}function e1(){return $u.recaptchaEnterpriseScript}function t1(){return $u.gapiScript}function n1(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const r1="recaptcha-enterprise",s1="NO_RECAPTCHA";class i1{constructor(e){this.type=r1,this.auth=Ns(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{VR(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new LR(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{l(u)})})}function s(i,o,l){const u=window.grecaptcha;xy(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(s1)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&xy(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=e1();u.length!==0&&(u+=l),Vw(u).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Ay(t,e,n,r=!1){const s=new i1(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ah(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Ay(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Ay(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o1(t,e){const n=Bu(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(au(i,e??{}))return s;ln(s,"already-initialized")}return n.initialize({options:e})}function a1(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Vn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function l1(t,e,n){const r=Ns(t);G(r._canInitEmulator,r,"emulator-config-failed"),G(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=Mw(e),{host:o,port:l}=u1(e),u=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),c1()}function Mw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function u1(t){const e=Mw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Ry(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Ry(o)}}}function Ry(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function c1(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jf{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return On("not implemented")}_getIdTokenResponse(e){return On("not implemented")}_linkToIdToken(e,n){return On("not implemented")}_getReauthenticationResolver(e){return On("not implemented")}}async function d1(t,e){return Xn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h1(t,e){return ha(t,"POST","/v1/accounts:signInWithPassword",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f1(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}async function p1(t,e){return ha(t,"POST","/v1/accounts:signInWithEmailLink",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Go extends Jf{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Go(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Go(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,n,"signInWithPassword",h1);case"emailLink":return f1(e,{email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ah(e,r,"signUpPassword",d1);case"emailLink":return p1(e,{idToken:n,email:this._email,oobCode:this._password});default:ln(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function si(t,e){return ha(t,"POST","/v1/accounts:signInWithIdp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m1="http://localhost";class ms extends Jf{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ms(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ln("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Kf(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ms(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return si(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,si(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,si(e,n)}buildRequest(){const e={requestUri:m1,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ca(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function y1(t){const e=oo(ao(t)).link,n=e?oo(ao(e)).deep_link_id:null,r=oo(ao(t)).deep_link_id;return(r?oo(ao(r)).link:null)||r||n||e||t}class Zf{constructor(e){var n,r,s,i,o,l;const u=oo(ao(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=g1((s=u.mode)!==null&&s!==void 0?s:null);G(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=u.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=y1(e);try{return new Zf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ri{constructor(){this.providerId=Ri.PROVIDER_ID}static credential(e,n){return Go._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zf.parseLink(n);return G(r,"argument-error"),Go._fromEmailAndCode(e,r.code,r.tenantId)}}Ri.PROVIDER_ID="password";Ri.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Ri.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fw{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fa extends Fw{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lr extends fa{constructor(){super("facebook.com")}static credential(e){return ms._fromParams({providerId:lr.PROVIDER_ID,signInMethod:lr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return lr.credentialFromTaggedObject(e)}static credentialFromError(e){return lr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return lr.credential(e.oauthAccessToken)}catch{return null}}}lr.FACEBOOK_SIGN_IN_METHOD="facebook.com";lr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur extends fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ms._fromParams({providerId:ur.PROVIDER_ID,signInMethod:ur.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ur.credentialFromTaggedObject(e)}static credentialFromError(e){return ur.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ur.credential(n,r)}catch{return null}}}ur.GOOGLE_SIGN_IN_METHOD="google.com";ur.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr extends fa{constructor(){super("github.com")}static credential(e){return ms._fromParams({providerId:cr.PROVIDER_ID,signInMethod:cr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cr.credentialFromTaggedObject(e)}static credentialFromError(e){return cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cr.credential(e.oauthAccessToken)}catch{return null}}}cr.GITHUB_SIGN_IN_METHOD="github.com";cr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr extends fa{constructor(){super("twitter.com")}static credential(e,n){return ms._fromParams({providerId:dr.PROVIDER_ID,signInMethod:dr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return dr.credentialFromTaggedObject(e)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return dr.credential(n,r)}catch{return null}}}dr.TWITTER_SIGN_IN_METHOD="twitter.com";dr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v1(t,e){return ha(t,"POST","/v1/accounts:signUp",$r(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Ln._fromIdTokenResponse(e,r,s),o=by(r);return new gs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=by(r);return new gs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function by(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class du extends Nn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,du.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new du(e,n,r,s)}}function Uw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?du._fromErrorAndOperation(t,i,e,r):i})}async function _1(t,e,n=!1){const r=await fi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return gs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w1(t,e,n=!1){const{auth:r}=t;if(pn(r.app))return Promise.reject(Fn(r));const s="reauthenticate";try{const i=await fi(t,Uw(r,s,e,t),n);G(i.idToken,r,"internal-error");const o=Yf(i.idToken);G(o,r,"internal-error");const{sub:l}=o;return G(t.uid===l,r,"user-mismatch"),gs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&ln(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bw(t,e,n=!1){if(pn(t.app))return Promise.reject(Fn(t));const r="signIn",s=await Uw(t,r,e),i=await gs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function x1(t,e){return Bw(Ns(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(t){const e=Ns(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function zw(t,e,n){if(pn(t.app))return Promise.reject(Fn(t));const r=Ns(t),o=await Ah(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",v1).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&$w(t),u}),l=await gs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Al(t,e,n){return pn(t.app)?Promise.reject(Fn(t)):x1(_e(t),Ri.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&$w(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E1(t,e){return Xn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T1(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await fi(r,E1(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function I1(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function S1(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function N1(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function en(t){return _e(t).signOut()}async function A1(t){return _e(t).delete()}const hu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(hu,"1"),this.storage.removeItem(hu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R1=1e3,b1=10;class Ww extends qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Ow(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);KR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,b1):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},R1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Ww.type="LOCAL";const C1=Ww;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw extends qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Hw.type="SESSION";const Kw=Hw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k1(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new zu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),u=await k1(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}zu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ep(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P1{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,u)=>{const d=ep("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(g.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(){return window}function j1(t){wn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gw(){return typeof wn().WorkerGlobalScope<"u"&&typeof wn().importScripts=="function"}async function D1(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function O1(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function L1(){return Gw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qw="firebaseLocalStorageDb",V1=1,fu="firebaseLocalStorage",Yw="fbase_key";class pa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function qu(t,e){return t.transaction([fu],e?"readwrite":"readonly").objectStore(fu)}function M1(){const t=indexedDB.deleteDatabase(Qw);return new pa(t).toPromise()}function Rh(){const t=indexedDB.open(Qw,V1);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(fu,{keyPath:Yw})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(fu)?e(r):(r.close(),await M1(),e(await Rh()))})})}async function Cy(t,e,n){const r=qu(t,!0).put({[Yw]:e,value:n});return new pa(r).toPromise()}async function F1(t,e){const n=qu(t,!1).get(e),r=await new pa(n).toPromise();return r===void 0?null:r.value}function ky(t,e){const n=qu(t,!0).delete(e);return new pa(n).toPromise()}const U1=800,B1=3;class Xw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Rh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>B1)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Gw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=zu._getInstance(L1()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await D1(),!this.activeServiceWorker)return;this.sender=new P1(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||O1()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Rh();return await Cy(e,hu,"1"),await ky(e,hu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Cy(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>F1(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>ky(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=qu(s,!1).getAll();return new pa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),U1)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Xw.type="LOCAL";const $1=Xw;new da(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z1(t,e){return e?Vn(e):(G(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp extends Jf{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return si(e,this._buildIdpRequest())}_linkToIdToken(e,n){return si(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return si(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function q1(t){return Bw(t.auth,new tp(t),t.bypassAuthState)}function W1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),w1(n,new tp(t),t.bypassAuthState)}async function H1(t){const{auth:e,user:n}=t;return G(n,e,"internal-error"),_1(n,new tp(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return q1;case"linkViaPopup":case"linkViaRedirect":return H1;case"reauthViaPopup":case"reauthViaRedirect":return W1;default:ln(this.auth,"internal-error")}}resolve(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Hn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K1=new da(2e3,1e4);class Qs extends Jw{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,Qs.currentPopupAction&&Qs.currentPopupAction.cancel(),Qs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return G(e,this.auth,"internal-error"),e}async onExecution(){Hn(this.filter.length===1,"Popup operations only handle one event");const e=ep();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Qs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,K1.get())};e()}}Qs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G1="pendingRedirect",Rl=new Map;class Q1 extends Jw{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Rl.get(this.auth._key());if(!e){try{const r=await Y1(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Rl.set(this.auth._key(),e)}return this.bypassAuthState||Rl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Y1(t,e){const n=Z1(e),r=J1(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function X1(t,e){Rl.set(t._key(),e)}function J1(t){return Vn(t._redirectPersistence)}function Z1(t){return Nl(G1,t.config.apiKey,t.name)}async function eb(t,e,n=!1){if(pn(t.app))return Promise.reject(Fn(t));const r=Ns(t),s=z1(r,e),o=await new Q1(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=10*60*1e3;class nb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!rb(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Zw(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tb&&this.cachedEventUids.clear(),this.cachedEventUids.has(Py(e))}saveEventToCache(e){this.cachedEventUids.add(Py(e)),this.lastProcessedEventTime=Date.now()}}function Py(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Zw({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function rb(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zw(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sb(t,e={}){return Xn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ob=/^https?/;async function ab(t){if(t.config.emulator)return;const{authorizedDomains:e}=await sb(t);for(const n of e)try{if(lb(n))return}catch{}ln(t,"unauthorized-domain")}function lb(t){const e=Sh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!ob.test(n))return!1;if(ib.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new da(3e4,6e4);function jy(){const t=wn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function cb(t){return new Promise((e,n)=>{var r,s,i;function o(){jy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{jy(),n(_n(t,"network-request-failed"))},timeout:ub.get()})}if(!((s=(r=wn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=wn().gapi)===null||i===void 0)&&i.load)o();else{const l=n1("iframefcb");return wn()[l]=()=>{gapi.load?o():n(_n(t,"network-request-failed"))},Vw(`${t1()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw bl=null,e})}let bl=null;function db(t){return bl=bl||cb(t),bl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb=new da(5e3,15e3),fb="__/auth/iframe",pb="emulator/auth/iframe",mb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},gb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function yb(t){const e=t.config;G(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qf(e,pb):`https://${t.config.authDomain}/${fb}`,r={apiKey:e.apiKey,appName:t.name,v:Ss},s=gb.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ca(r).slice(1)}`}async function vb(t){const e=await db(t),n=wn().gapi;return G(n,t,"internal-error"),e.open({where:document.body,url:yb(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mb,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),l=wn().setTimeout(()=>{i(o)},hb.get());function u(){wn().clearTimeout(l),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _b={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},wb=500,xb=600,Eb="_blank",Tb="http://localhost";class Dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ib(t,e,n,r=wb,s=xb){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u=Object.assign(Object.assign({},_b),{width:r.toString(),height:s.toString(),top:i,left:o}),d=pt().toLowerCase();n&&(l=Cw(d)?Eb:n),Rw(d)&&(e=e||Tb,u.scrollbars="yes");const f=Object.entries(u).reduce((g,[w,I])=>`${g}${w}=${I},`,"");if(HR(d)&&l!=="_self")return Sb(e||"",l),new Dy(null);const p=window.open(e||"",l,f);G(p,t,"popup-blocked");try{p.focus()}catch{}return new Dy(p)}function Sb(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nb="__/auth/handler",Ab="emulator/auth/handler",Rb=encodeURIComponent("fac");async function Oy(t,e,n,r,s,i){G(t.config.authDomain,t,"auth-domain-config-required"),G(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ss,eventId:s};if(e instanceof Fw){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",gA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof fa){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const u=await t._getAppCheckToken(),d=u?`#${Rb}=${encodeURIComponent(u)}`:"";return`${bb(t)}?${ca(l).slice(1)}${d}`}function bb({config:t}){return t.emulator?Qf(t,Ab):`https://${t.authDomain}/${Nb}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pd="webStorageSupport";class Cb{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kw,this._completeRedirectFn=eb,this._overrideRedirectResult=X1}async _openPopup(e,n,r,s){var i;Hn((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Oy(e,n,r,Sh(),s);return Ib(e,o,ep())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Oy(e,n,r,Sh(),s);return j1(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(Hn(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await vb(e),r=new nb(e);return n.register("authEvent",s=>(G(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(pd,{type:pd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[pd];o!==void 0&&n(!!o),ln(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ab(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Ow()||bw()||Xf()}}const kb=Cb;var Ly="@firebase/auth",Vy="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){G(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jb(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Db(t){ps(new Pr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;G(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Lw(t)},d=new JR(r,s,i,u);return a1(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ps(new Pr("auth-internal",e=>{const n=Ns(e.getProvider("auth").getImmediate());return(r=>new Pb(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),vn(Ly,Vy,jb(t)),vn(Ly,Vy,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob=5*60,Lb=hw("authIdTokenMaxAge")||Ob;let My=null;const Vb=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Lb)return;const s=n==null?void 0:n.token;My!==s&&(My=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Mb(t=Hf()){const e=Bu(t,"auth");if(e.isInitialized())return e.getImmediate();const n=o1(t,{popupRedirectResolver:kb,persistence:[$1,C1,Kw]}),r=hw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=Vb(i.toString());S1(n,o,()=>o(n.currentUser)),I1(n,l=>o(l))}}const s=uw("auth");return s&&l1(n,`http://${s}`),n}function Fb(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ZR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",Fb().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Db("Browser");var Ub="firebase",Bb="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */vn(Ub,Bb,"app");var Fy=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,ex;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(E,x){function S(){}S.prototype=x.prototype,E.D=x.prototype,E.prototype=new S,E.prototype.constructor=E,E.C=function(N,k,j){for(var A=Array(arguments.length-2),mt=2;mt<arguments.length;mt++)A[mt-2]=arguments[mt];return x.prototype[k].apply(N,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(E,x,S){S||(S=0);var N=Array(16);if(typeof x=="string")for(var k=0;16>k;++k)N[k]=x.charCodeAt(S++)|x.charCodeAt(S++)<<8|x.charCodeAt(S++)<<16|x.charCodeAt(S++)<<24;else for(k=0;16>k;++k)N[k]=x[S++]|x[S++]<<8|x[S++]<<16|x[S++]<<24;x=E.g[0],S=E.g[1],k=E.g[2];var j=E.g[3],A=x+(j^S&(k^j))+N[0]+3614090360&4294967295;x=S+(A<<7&4294967295|A>>>25),A=j+(k^x&(S^k))+N[1]+3905402710&4294967295,j=x+(A<<12&4294967295|A>>>20),A=k+(S^j&(x^S))+N[2]+606105819&4294967295,k=j+(A<<17&4294967295|A>>>15),A=S+(x^k&(j^x))+N[3]+3250441966&4294967295,S=k+(A<<22&4294967295|A>>>10),A=x+(j^S&(k^j))+N[4]+4118548399&4294967295,x=S+(A<<7&4294967295|A>>>25),A=j+(k^x&(S^k))+N[5]+1200080426&4294967295,j=x+(A<<12&4294967295|A>>>20),A=k+(S^j&(x^S))+N[6]+2821735955&4294967295,k=j+(A<<17&4294967295|A>>>15),A=S+(x^k&(j^x))+N[7]+4249261313&4294967295,S=k+(A<<22&4294967295|A>>>10),A=x+(j^S&(k^j))+N[8]+1770035416&4294967295,x=S+(A<<7&4294967295|A>>>25),A=j+(k^x&(S^k))+N[9]+2336552879&4294967295,j=x+(A<<12&4294967295|A>>>20),A=k+(S^j&(x^S))+N[10]+4294925233&4294967295,k=j+(A<<17&4294967295|A>>>15),A=S+(x^k&(j^x))+N[11]+2304563134&4294967295,S=k+(A<<22&4294967295|A>>>10),A=x+(j^S&(k^j))+N[12]+1804603682&4294967295,x=S+(A<<7&4294967295|A>>>25),A=j+(k^x&(S^k))+N[13]+4254626195&4294967295,j=x+(A<<12&4294967295|A>>>20),A=k+(S^j&(x^S))+N[14]+2792965006&4294967295,k=j+(A<<17&4294967295|A>>>15),A=S+(x^k&(j^x))+N[15]+1236535329&4294967295,S=k+(A<<22&4294967295|A>>>10),A=x+(k^j&(S^k))+N[1]+4129170786&4294967295,x=S+(A<<5&4294967295|A>>>27),A=j+(S^k&(x^S))+N[6]+3225465664&4294967295,j=x+(A<<9&4294967295|A>>>23),A=k+(x^S&(j^x))+N[11]+643717713&4294967295,k=j+(A<<14&4294967295|A>>>18),A=S+(j^x&(k^j))+N[0]+3921069994&4294967295,S=k+(A<<20&4294967295|A>>>12),A=x+(k^j&(S^k))+N[5]+3593408605&4294967295,x=S+(A<<5&4294967295|A>>>27),A=j+(S^k&(x^S))+N[10]+38016083&4294967295,j=x+(A<<9&4294967295|A>>>23),A=k+(x^S&(j^x))+N[15]+3634488961&4294967295,k=j+(A<<14&4294967295|A>>>18),A=S+(j^x&(k^j))+N[4]+3889429448&4294967295,S=k+(A<<20&4294967295|A>>>12),A=x+(k^j&(S^k))+N[9]+568446438&4294967295,x=S+(A<<5&4294967295|A>>>27),A=j+(S^k&(x^S))+N[14]+3275163606&4294967295,j=x+(A<<9&4294967295|A>>>23),A=k+(x^S&(j^x))+N[3]+4107603335&4294967295,k=j+(A<<14&4294967295|A>>>18),A=S+(j^x&(k^j))+N[8]+1163531501&4294967295,S=k+(A<<20&4294967295|A>>>12),A=x+(k^j&(S^k))+N[13]+2850285829&4294967295,x=S+(A<<5&4294967295|A>>>27),A=j+(S^k&(x^S))+N[2]+4243563512&4294967295,j=x+(A<<9&4294967295|A>>>23),A=k+(x^S&(j^x))+N[7]+1735328473&4294967295,k=j+(A<<14&4294967295|A>>>18),A=S+(j^x&(k^j))+N[12]+2368359562&4294967295,S=k+(A<<20&4294967295|A>>>12),A=x+(S^k^j)+N[5]+4294588738&4294967295,x=S+(A<<4&4294967295|A>>>28),A=j+(x^S^k)+N[8]+2272392833&4294967295,j=x+(A<<11&4294967295|A>>>21),A=k+(j^x^S)+N[11]+1839030562&4294967295,k=j+(A<<16&4294967295|A>>>16),A=S+(k^j^x)+N[14]+4259657740&4294967295,S=k+(A<<23&4294967295|A>>>9),A=x+(S^k^j)+N[1]+2763975236&4294967295,x=S+(A<<4&4294967295|A>>>28),A=j+(x^S^k)+N[4]+1272893353&4294967295,j=x+(A<<11&4294967295|A>>>21),A=k+(j^x^S)+N[7]+4139469664&4294967295,k=j+(A<<16&4294967295|A>>>16),A=S+(k^j^x)+N[10]+3200236656&4294967295,S=k+(A<<23&4294967295|A>>>9),A=x+(S^k^j)+N[13]+681279174&4294967295,x=S+(A<<4&4294967295|A>>>28),A=j+(x^S^k)+N[0]+3936430074&4294967295,j=x+(A<<11&4294967295|A>>>21),A=k+(j^x^S)+N[3]+3572445317&4294967295,k=j+(A<<16&4294967295|A>>>16),A=S+(k^j^x)+N[6]+76029189&4294967295,S=k+(A<<23&4294967295|A>>>9),A=x+(S^k^j)+N[9]+3654602809&4294967295,x=S+(A<<4&4294967295|A>>>28),A=j+(x^S^k)+N[12]+3873151461&4294967295,j=x+(A<<11&4294967295|A>>>21),A=k+(j^x^S)+N[15]+530742520&4294967295,k=j+(A<<16&4294967295|A>>>16),A=S+(k^j^x)+N[2]+3299628645&4294967295,S=k+(A<<23&4294967295|A>>>9),A=x+(k^(S|~j))+N[0]+4096336452&4294967295,x=S+(A<<6&4294967295|A>>>26),A=j+(S^(x|~k))+N[7]+1126891415&4294967295,j=x+(A<<10&4294967295|A>>>22),A=k+(x^(j|~S))+N[14]+2878612391&4294967295,k=j+(A<<15&4294967295|A>>>17),A=S+(j^(k|~x))+N[5]+4237533241&4294967295,S=k+(A<<21&4294967295|A>>>11),A=x+(k^(S|~j))+N[12]+1700485571&4294967295,x=S+(A<<6&4294967295|A>>>26),A=j+(S^(x|~k))+N[3]+2399980690&4294967295,j=x+(A<<10&4294967295|A>>>22),A=k+(x^(j|~S))+N[10]+4293915773&4294967295,k=j+(A<<15&4294967295|A>>>17),A=S+(j^(k|~x))+N[1]+2240044497&4294967295,S=k+(A<<21&4294967295|A>>>11),A=x+(k^(S|~j))+N[8]+1873313359&4294967295,x=S+(A<<6&4294967295|A>>>26),A=j+(S^(x|~k))+N[15]+4264355552&4294967295,j=x+(A<<10&4294967295|A>>>22),A=k+(x^(j|~S))+N[6]+2734768916&4294967295,k=j+(A<<15&4294967295|A>>>17),A=S+(j^(k|~x))+N[13]+1309151649&4294967295,S=k+(A<<21&4294967295|A>>>11),A=x+(k^(S|~j))+N[4]+4149444226&4294967295,x=S+(A<<6&4294967295|A>>>26),A=j+(S^(x|~k))+N[11]+3174756917&4294967295,j=x+(A<<10&4294967295|A>>>22),A=k+(x^(j|~S))+N[2]+718787259&4294967295,k=j+(A<<15&4294967295|A>>>17),A=S+(j^(k|~x))+N[9]+3951481745&4294967295,E.g[0]=E.g[0]+x&4294967295,E.g[1]=E.g[1]+(k+(A<<21&4294967295|A>>>11))&4294967295,E.g[2]=E.g[2]+k&4294967295,E.g[3]=E.g[3]+j&4294967295}r.prototype.u=function(E,x){x===void 0&&(x=E.length);for(var S=x-this.blockSize,N=this.B,k=this.h,j=0;j<x;){if(k==0)for(;j<=S;)s(this,E,j),j+=this.blockSize;if(typeof E=="string"){for(;j<x;)if(N[k++]=E.charCodeAt(j++),k==this.blockSize){s(this,N),k=0;break}}else for(;j<x;)if(N[k++]=E[j++],k==this.blockSize){s(this,N),k=0;break}}this.h=k,this.o+=x},r.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var x=1;x<E.length-8;++x)E[x]=0;var S=8*this.o;for(x=E.length-8;x<E.length;++x)E[x]=S&255,S/=256;for(this.u(E),E=Array(16),x=S=0;4>x;++x)for(var N=0;32>N;N+=8)E[S++]=this.g[x]>>>N&255;return E};function i(E,x){var S=l;return Object.prototype.hasOwnProperty.call(S,E)?S[E]:S[E]=x(E)}function o(E,x){this.h=x;for(var S=[],N=!0,k=E.length-1;0<=k;k--){var j=E[k]|0;N&&j==x||(S[k]=j,N=!1)}this.g=S}var l={};function u(E){return-128<=E&&128>E?i(E,function(x){return new o([x|0],0>x?-1:0)}):new o([E|0],0>E?-1:0)}function d(E){if(isNaN(E)||!isFinite(E))return p;if(0>E)return b(d(-E));for(var x=[],S=1,N=0;E>=S;N++)x[N]=E/S|0,S*=4294967296;return new o(x,0)}function f(E,x){if(E.length==0)throw Error("number format error: empty string");if(x=x||10,2>x||36<x)throw Error("radix out of range: "+x);if(E.charAt(0)=="-")return b(f(E.substring(1),x));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(x,8)),N=p,k=0;k<E.length;k+=8){var j=Math.min(8,E.length-k),A=parseInt(E.substring(k,k+j),x);8>j?(j=d(Math.pow(x,j)),N=N.j(j).add(d(A))):(N=N.j(S),N=N.add(d(A)))}return N}var p=u(0),g=u(1),w=u(16777216);t=o.prototype,t.m=function(){if(R(this))return-b(this).m();for(var E=0,x=1,S=0;S<this.g.length;S++){var N=this.i(S);E+=(0<=N?N:4294967296+N)*x,x*=4294967296}return E},t.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(I(this))return"0";if(R(this))return"-"+b(this).toString(E);for(var x=d(Math.pow(E,6)),S=this,N="";;){var k=C(S,x).g;S=y(S,k.j(x));var j=((0<S.g.length?S.g[0]:S.h)>>>0).toString(E);if(S=k,I(S))return j+N;for(;6>j.length;)j="0"+j;N=j+N}},t.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function I(E){if(E.h!=0)return!1;for(var x=0;x<E.g.length;x++)if(E.g[x]!=0)return!1;return!0}function R(E){return E.h==-1}t.l=function(E){return E=y(this,E),R(E)?-1:I(E)?0:1};function b(E){for(var x=E.g.length,S=[],N=0;N<x;N++)S[N]=~E.g[N];return new o(S,~E.h).add(g)}t.abs=function(){return R(this)?b(this):this},t.add=function(E){for(var x=Math.max(this.g.length,E.g.length),S=[],N=0,k=0;k<=x;k++){var j=N+(this.i(k)&65535)+(E.i(k)&65535),A=(j>>>16)+(this.i(k)>>>16)+(E.i(k)>>>16);N=A>>>16,j&=65535,A&=65535,S[k]=A<<16|j}return new o(S,S[S.length-1]&-2147483648?-1:0)};function y(E,x){return E.add(b(x))}t.j=function(E){if(I(this)||I(E))return p;if(R(this))return R(E)?b(this).j(b(E)):b(b(this).j(E));if(R(E))return b(this.j(b(E)));if(0>this.l(w)&&0>E.l(w))return d(this.m()*E.m());for(var x=this.g.length+E.g.length,S=[],N=0;N<2*x;N++)S[N]=0;for(N=0;N<this.g.length;N++)for(var k=0;k<E.g.length;k++){var j=this.i(N)>>>16,A=this.i(N)&65535,mt=E.i(k)>>>16,$t=E.i(k)&65535;S[2*N+2*k]+=A*$t,_(S,2*N+2*k),S[2*N+2*k+1]+=j*$t,_(S,2*N+2*k+1),S[2*N+2*k+1]+=A*mt,_(S,2*N+2*k+1),S[2*N+2*k+2]+=j*mt,_(S,2*N+2*k+2)}for(N=0;N<x;N++)S[N]=S[2*N+1]<<16|S[2*N];for(N=x;N<2*x;N++)S[N]=0;return new o(S,0)};function _(E,x){for(;(E[x]&65535)!=E[x];)E[x+1]+=E[x]>>>16,E[x]&=65535,x++}function T(E,x){this.g=E,this.h=x}function C(E,x){if(I(x))throw Error("division by zero");if(I(E))return new T(p,p);if(R(E))return x=C(b(E),x),new T(b(x.g),b(x.h));if(R(x))return x=C(E,b(x)),new T(b(x.g),x.h);if(30<E.g.length){if(R(E)||R(x))throw Error("slowDivide_ only works with positive integers.");for(var S=g,N=x;0>=N.l(E);)S=O(S),N=O(N);var k=M(S,1),j=M(N,1);for(N=M(N,2),S=M(S,2);!I(N);){var A=j.add(N);0>=A.l(E)&&(k=k.add(S),j=A),N=M(N,1),S=M(S,1)}return x=y(E,k.j(x)),new T(k,x)}for(k=p;0<=E.l(x);){for(S=Math.max(1,Math.floor(E.m()/x.m())),N=Math.ceil(Math.log(S)/Math.LN2),N=48>=N?1:Math.pow(2,N-48),j=d(S),A=j.j(x);R(A)||0<A.l(E);)S-=N,j=d(S),A=j.j(x);I(j)&&(j=g),k=k.add(j),E=y(E,A)}return new T(k,E)}t.A=function(E){return C(this,E).h},t.and=function(E){for(var x=Math.max(this.g.length,E.g.length),S=[],N=0;N<x;N++)S[N]=this.i(N)&E.i(N);return new o(S,this.h&E.h)},t.or=function(E){for(var x=Math.max(this.g.length,E.g.length),S=[],N=0;N<x;N++)S[N]=this.i(N)|E.i(N);return new o(S,this.h|E.h)},t.xor=function(E){for(var x=Math.max(this.g.length,E.g.length),S=[],N=0;N<x;N++)S[N]=this.i(N)^E.i(N);return new o(S,this.h^E.h)};function O(E){for(var x=E.g.length+1,S=[],N=0;N<x;N++)S[N]=E.i(N)<<1|E.i(N-1)>>>31;return new o(S,E.h)}function M(E,x){var S=x>>5;x%=32;for(var N=E.g.length-S,k=[],j=0;j<N;j++)k[j]=0<x?E.i(j+S)>>>x|E.i(j+S+1)<<32-x:E.i(j+S);return new o(k,E.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ex=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,os=o}).apply(typeof Fy<"u"?Fy:typeof self<"u"?self:typeof window<"u"?window:{});var il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var tx,lo,nx,Cl,bh,rx,sx,ix;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof il=="object"&&il];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var D=a[v];if(!(D in m))break e;m=m[D]}a=a[a.length-1],v=m[a],h=h(v),h!=v&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,v=!1,D={next:function(){if(!v&&m<a.length){var L=m++;return{value:h(L,a[L]),done:!1}}return v=!0,{done:!0,value:void 0}}};return D[Symbol.iterator]=function(){return D},D}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function u(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function p(a,h,m){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var D=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(D,v),a.apply(h,D)}}return function(){return a.apply(h,arguments)}}function g(a,h,m){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,g.apply(null,arguments)}function w(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function I(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(v,D,L){for(var B=Array(arguments.length-2),he=2;he<arguments.length;he++)B[he-2]=arguments[he];return h.prototype[D].apply(v,B)}}function R(a){const h=a.length;if(0<h){const m=Array(h);for(let v=0;v<h;v++)m[v]=a[v];return m}return[]}function b(a,h){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(u(v)){const D=a.length||0,L=v.length||0;a.length=D+L;for(let B=0;B<L;B++)a[D+B]=v[B]}else a.push(v)}}class y{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function _(a){return/^[\s\xa0]*$/.test(a)}function T(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function C(a){return C[" "](a),a}C[" "]=function(){};var O=T().indexOf("Gecko")!=-1&&!(T().toLowerCase().indexOf("webkit")!=-1&&T().indexOf("Edge")==-1)&&!(T().indexOf("Trident")!=-1||T().indexOf("MSIE")!=-1)&&T().indexOf("Edge")==-1;function M(a,h,m){for(const v in a)h.call(m,a[v],v,a)}function E(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function x(a){const h={};for(const m in a)h[m]=a[m];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function N(a,h){let m,v;for(let D=1;D<arguments.length;D++){v=arguments[D];for(m in v)a[m]=v[m];for(let L=0;L<S.length;L++)m=S[L],Object.prototype.hasOwnProperty.call(v,m)&&(a[m]=v[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function j(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class mt{constructor(){this.h=this.g=null}add(h,m){const v=$t.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var $t=new y(()=>new Wr,a=>a.reset());class Wr{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Yt,$=!1,Q=new mt,Z=()=>{const a=l.Promise.resolve(void 0);Yt=()=>{a.then(pe)}};var pe=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(m){j(m)}var h=$t;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}$=!1};function H(){this.s=this.s,this.C=this.C}H.prototype.s=!1,H.prototype.ma=function(){this.s||(this.s=!0,this.N())},H.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function te(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}te.prototype.h=function(){this.defaultPrevented=!0};var de=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};l.addEventListener("test",m,h),l.removeEventListener("test",m,h)}catch{}return a}();function Ne(a,h){if(te.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(O){e:{try{C(h.nodeName);var D=!0;break e}catch{}D=!1}D||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:nt[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ne.aa.h.call(this)}}I(Ne,te);var nt={2:"touch",3:"pen",4:"mouse"};Ne.prototype.h=function(){Ne.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Ke="closure_listenable_"+(1e6*Math.random()|0),Hr=0;function An(a,h,m,v,D){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=D,this.key=++Hr,this.da=this.fa=!1}function Ta(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ia(a){this.src=a,this.g={},this.h=0}Ia.prototype.add=function(a,h,m,v,D){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var B=fc(a,h,v,D);return-1<B?(h=a[B],m||(h.fa=!1)):(h=new An(h,this.src,L,!!v,D),h.fa=m,a.push(h)),h};function hc(a,h){var m=h.type;if(m in a.g){var v=a.g[m],D=Array.prototype.indexOf.call(v,h,void 0),L;(L=0<=D)&&Array.prototype.splice.call(v,D,1),L&&(Ta(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function fc(a,h,m,v){for(var D=0;D<a.length;++D){var L=a[D];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==v)return D}return-1}var pc="closure_lm_"+(1e6*Math.random()|0),mc={};function Gp(a,h,m,v,D){if(Array.isArray(h)){for(var L=0;L<h.length;L++)Gp(a,h[L],m,v,D);return null}return m=Xp(m),a&&a[Ke]?a.K(h,m,d(v)?!!v.capture:!1,D):WE(a,h,m,!1,v,D)}function WE(a,h,m,v,D,L){if(!h)throw Error("Invalid event type");var B=d(D)?!!D.capture:!!D,he=yc(a);if(he||(a[pc]=he=new Ia(a)),m=he.add(h,m,v,B,L),m.proxy)return m;if(v=HE(),m.proxy=v,v.src=a,v.listener=m,a.addEventListener)de||(D=B),D===void 0&&(D=!1),a.addEventListener(h.toString(),v,D);else if(a.attachEvent)a.attachEvent(Yp(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function HE(){function a(m){return h.call(a.src,a.listener,m)}const h=KE;return a}function Qp(a,h,m,v,D){if(Array.isArray(h))for(var L=0;L<h.length;L++)Qp(a,h[L],m,v,D);else v=d(v)?!!v.capture:!!v,m=Xp(m),a&&a[Ke]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],m=fc(L,m,v,D),-1<m&&(Ta(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=yc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=fc(h,m,v,D)),(m=-1<a?h[a]:null)&&gc(m))}function gc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Ke])hc(h.i,a);else{var m=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(m,v,a.capture):h.detachEvent?h.detachEvent(Yp(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=yc(h))?(hc(m,a),m.h==0&&(m.src=null,h[pc]=null)):Ta(a)}}}function Yp(a){return a in mc?mc[a]:mc[a]="on"+a}function KE(a,h){if(a.da)a=!0;else{h=new Ne(h,this);var m=a.listener,v=a.ha||a.src;a.fa&&gc(a),a=m.call(v,h)}return a}function yc(a){return a=a[pc],a instanceof Ia?a:null}var vc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Xp(a){return typeof a=="function"?a:(a[vc]||(a[vc]=function(h){return a.handleEvent(h)}),a[vc])}function rt(){H.call(this),this.i=new Ia(this),this.M=this,this.F=null}I(rt,H),rt.prototype[Ke]=!0,rt.prototype.removeEventListener=function(a,h,m,v){Qp(this,a,h,m,v)};function gt(a,h){var m,v=a.F;if(v)for(m=[];v;v=v.F)m.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new te(h,a);else if(h instanceof te)h.target=h.target||a;else{var D=h;h=new te(v,a),N(h,D)}if(D=!0,m)for(var L=m.length-1;0<=L;L--){var B=h.g=m[L];D=Sa(B,v,!0,h)&&D}if(B=h.g=a,D=Sa(B,v,!0,h)&&D,D=Sa(B,v,!1,h)&&D,m)for(L=0;L<m.length;L++)B=h.g=m[L],D=Sa(B,v,!1,h)&&D}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],v=0;v<m.length;v++)Ta(m[v]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,m,v){return this.i.add(String(a),h,!1,m,v)},rt.prototype.L=function(a,h,m,v){return this.i.add(String(a),h,!0,m,v)};function Sa(a,h,m,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var D=!0,L=0;L<h.length;++L){var B=h[L];if(B&&!B.da&&B.capture==m){var he=B.listener,Ge=B.ha||B.src;B.fa&&hc(a.i,B),D=he.call(Ge,v)!==!1&&D}}return D&&!v.defaultPrevented}function Jp(a,h,m){if(typeof a=="function")m&&(a=g(a,m));else if(a&&typeof a.handleEvent=="function")a=g(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function Zp(a){a.g=Jp(()=>{a.g=null,a.i&&(a.i=!1,Zp(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class GE extends H{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:Zp(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ji(a){H.call(this),this.h=a,this.g={}}I(ji,H);var em=[];function tm(a){M(a.g,function(h,m){this.g.hasOwnProperty(m)&&gc(h)},a),a.g={}}ji.prototype.N=function(){ji.aa.N.call(this),tm(this)},ji.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var _c=l.JSON.stringify,QE=l.JSON.parse,YE=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function wc(){}wc.prototype.h=null;function nm(a){return a.h||(a.h=a.i())}function rm(){}var Di={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function xc(){te.call(this,"d")}I(xc,te);function Ec(){te.call(this,"c")}I(Ec,te);var Kr={},sm=null;function Na(){return sm=sm||new rt}Kr.La="serverreachability";function im(a){te.call(this,Kr.La,a)}I(im,te);function Oi(a){const h=Na();gt(h,new im(h))}Kr.STAT_EVENT="statevent";function om(a,h){te.call(this,Kr.STAT_EVENT,a),this.stat=h}I(om,te);function yt(a){const h=Na();gt(h,new om(h,a))}Kr.Ma="timingevent";function am(a,h){te.call(this,Kr.Ma,a),this.size=h}I(am,te);function Li(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function Vi(){this.g=!0}Vi.prototype.xa=function(){this.g=!1};function XE(a,h,m,v,D,L){a.info(function(){if(a.g)if(L)for(var B="",he=L.split("&"),Ge=0;Ge<he.length;Ge++){var ae=he[Ge].split("=");if(1<ae.length){var st=ae[0];ae=ae[1];var it=st.split("_");B=2<=it.length&&it[1]=="type"?B+(st+"="+ae+"&"):B+(st+"=redacted&")}}else B=null;else B=L;return"XMLHTTP REQ ("+v+") [attempt "+D+"]: "+h+`
`+m+`
`+B})}function JE(a,h,m,v,D,L,B){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+D+"]: "+h+`
`+m+`
`+L+" "+B})}function bs(a,h,m,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+eT(a,m)+(v?" "+v:"")})}function ZE(a,h){a.info(function(){return"TIMEOUT: "+h})}Vi.prototype.info=function(){};function eT(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var v=m[a];if(!(2>v.length)){var D=v[1];if(Array.isArray(D)&&!(1>D.length)){var L=D[0];if(L!="noop"&&L!="stop"&&L!="close")for(var B=1;B<D.length;B++)D[B]=""}}}}return _c(m)}catch{return h}}var Aa={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},lm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Tc;function Ra(){}I(Ra,wc),Ra.prototype.g=function(){return new XMLHttpRequest},Ra.prototype.i=function(){return{}},Tc=new Ra;function Zn(a,h,m,v){this.j=a,this.i=h,this.l=m,this.R=v||1,this.U=new ji(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new um}function um(){this.i=null,this.g="",this.h=!1}var cm={},Ic={};function Sc(a,h,m){a.L=1,a.v=Pa(Rn(h)),a.m=m,a.P=!0,dm(a,null)}function dm(a,h){a.F=Date.now(),ba(a),a.A=Rn(a.v);var m=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Sm(m.i,"t",v),a.C=0,m=a.j.J,a.h=new um,a.g=zm(a.j,m?h:null,!a.m),0<a.O&&(a.M=new GE(g(a.Y,a,a.g),a.O)),h=a.U,m=a.g,v=a.ca;var D="readystatechange";Array.isArray(D)||(D&&(em[0]=D.toString()),D=em);for(var L=0;L<D.length;L++){var B=Gp(m,D[L],v||h.handleEvent,!1,h.h||h);if(!B)break;h.g[B.key]=B}h=a.H?x(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Oi(),XE(a.i,a.u,a.A,a.l,a.R,a.m)}Zn.prototype.ca=function(a){a=a.target;const h=this.M;h&&bn(a)==3?h.j():this.Y(a)},Zn.prototype.Y=function(a){try{if(a==this.g)e:{const it=bn(this.g);var h=this.g.Ba();const Ps=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||Pm(this.g)))){this.J||it!=4||h==7||(h==8||0>=Ps?Oi(3):Oi(2)),Nc(this);var m=this.g.Z();this.X=m;t:if(hm(this)){var v=Pm(this.g);a="";var D=v.length,L=bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Gr(this),Mi(this);var B="";break t}this.h.i=new l.TextDecoder}for(h=0;h<D;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(L&&h==D-1)});v.length=0,this.h.g+=a,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=m==200,JE(this.i,this.u,this.A,this.l,this.R,it,m),this.o){if(this.T&&!this.K){t:{if(this.g){var he,Ge=this.g;if((he=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(he)){var ae=he;break t}}ae=null}if(m=ae)bs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ac(this,m);else{this.o=!1,this.s=3,yt(12),Gr(this),Mi(this);break e}}if(this.P){m=!0;let Xt;for(;!this.J&&this.C<B.length;)if(Xt=tT(this,B),Xt==Ic){it==4&&(this.s=4,yt(14),m=!1),bs(this.i,this.l,null,"[Incomplete Response]");break}else if(Xt==cm){this.s=4,yt(15),bs(this.i,this.l,B,"[Invalid Chunk]"),m=!1;break}else bs(this.i,this.l,Xt,null),Ac(this,Xt);if(hm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||B.length!=0||this.h.h||(this.s=1,yt(16),m=!1),this.o=this.o&&m,!m)bs(this.i,this.l,B,"[Invalid Chunked Response]"),Gr(this),Mi(this);else if(0<B.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),jc(st),st.M=!0,yt(11))}}else bs(this.i,this.l,B,null),Ac(this,B);it==4&&Gr(this),this.o&&!this.J&&(it==4?Fm(this.j,this):(this.o=!1,ba(this)))}else vT(this.g),m==400&&0<B.indexOf("Unknown SID")?(this.s=3,yt(12)):(this.s=0,yt(13)),Gr(this),Mi(this)}}}catch{}finally{}};function hm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function tT(a,h){var m=a.C,v=h.indexOf(`
`,m);return v==-1?Ic:(m=Number(h.substring(m,v)),isNaN(m)?cm:(v+=1,v+m>h.length?Ic:(h=h.slice(v,v+m),a.C=v+m,h)))}Zn.prototype.cancel=function(){this.J=!0,Gr(this)};function ba(a){a.S=Date.now()+a.I,fm(a,a.I)}function fm(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Li(g(a.ba,a),h)}function Nc(a){a.B&&(l.clearTimeout(a.B),a.B=null)}Zn.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(ZE(this.i,this.A),this.L!=2&&(Oi(),yt(17)),Gr(this),this.s=2,Mi(this)):fm(this,this.S-a)};function Mi(a){a.j.G==0||a.J||Fm(a.j,a)}function Gr(a){Nc(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,tm(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function Ac(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||Rc(m.h,a))){if(!a.K&&Rc(m.h,a)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var D=v;if(D[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)Ma(m),La(m);else break e;Pc(m),yt(18)}}else m.za=D[1],0<m.za-m.T&&37500>D[2]&&m.F&&m.v==0&&!m.C&&(m.C=Li(g(m.Za,m),6e3));if(1>=gm(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Yr(m,11)}else if((a.K||m.g==a)&&Ma(m),!_(h))for(D=m.Da.g.parse(h),h=0;h<D.length;h++){let ae=D[h];if(m.T=ae[0],ae=ae[1],m.G==2)if(ae[0]=="c"){m.K=ae[1],m.ia=ae[2];const st=ae[3];st!=null&&(m.la=st,m.j.info("VER="+m.la));const it=ae[4];it!=null&&(m.Aa=it,m.j.info("SVER="+m.Aa));const Ps=ae[5];Ps!=null&&typeof Ps=="number"&&0<Ps&&(v=1.5*Ps,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const Xt=a.g;if(Xt){const Ua=Xt.g?Xt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ua){var L=v.h;L.g||Ua.indexOf("spdy")==-1&&Ua.indexOf("quic")==-1&&Ua.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(bc(L,L.h),L.h=null))}if(v.D){const Dc=Xt.g?Xt.g.getResponseHeader("X-HTTP-Session-Id"):null;Dc&&(v.ya=Dc,me(v.I,v.D,Dc))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var B=a;if(v.qa=$m(v,v.J?v.ia:null,v.W),B.K){ym(v.h,B);var he=B,Ge=v.L;Ge&&(he.I=Ge),he.B&&(Nc(he),ba(he)),v.g=B}else Vm(v);0<m.i.length&&Va(m)}else ae[0]!="stop"&&ae[0]!="close"||Yr(m,7);else m.G==3&&(ae[0]=="stop"||ae[0]=="close"?ae[0]=="stop"?Yr(m,7):kc(m):ae[0]!="noop"&&m.l&&m.l.ta(ae),m.v=0)}}Oi(4)}catch{}}var nT=class{constructor(a,h){this.g=a,this.map=h}};function pm(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function mm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function gm(a){return a.h?1:a.g?a.g.size:0}function Rc(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function bc(a,h){a.g?a.g.add(h):a.h=h}function ym(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}pm.prototype.cancel=function(){if(this.i=vm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function vm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return R(a.i)}function rT(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(u(a)){for(var h=[],m=a.length,v=0;v<m;v++)h.push(a[v]);return h}h=[],m=0;for(v in a)h[m++]=a[v];return h}function sT(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(u(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const v in a)h[m++]=v;return h}}}function _m(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(u(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=sT(a),v=rT(a),D=v.length,L=0;L<D;L++)h.call(void 0,v[L],m&&m[L],a)}var wm=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function iT(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var v=a[m].indexOf("="),D=null;if(0<=v){var L=a[m].substring(0,v);D=a[m].substring(v+1)}else L=a[m];h(L,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Qr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Qr){this.h=a.h,Ca(this,a.j),this.o=a.o,this.g=a.g,ka(this,a.s),this.l=a.l;var h=a.i,m=new Bi;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),xm(this,m),this.m=a.m}else a&&(h=String(a).match(wm))?(this.h=!1,Ca(this,h[1]||"",!0),this.o=Fi(h[2]||""),this.g=Fi(h[3]||"",!0),ka(this,h[4]),this.l=Fi(h[5]||"",!0),xm(this,h[6]||"",!0),this.m=Fi(h[7]||"")):(this.h=!1,this.i=new Bi(null,this.h))}Qr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(Ui(h,Em,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(Ui(h,Em,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(Ui(m,m.charAt(0)=="/"?lT:aT,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",Ui(m,cT)),a.join("")};function Rn(a){return new Qr(a)}function Ca(a,h,m){a.j=m?Fi(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function ka(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function xm(a,h,m){h instanceof Bi?(a.i=h,dT(a.i,a.h)):(m||(h=Ui(h,uT)),a.i=new Bi(h,a.h))}function me(a,h,m){a.i.set(h,m)}function Pa(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Fi(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ui(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,oT),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function oT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Em=/[#\/\?@]/g,aT=/[#\?:]/g,lT=/[#\?]/g,uT=/[#\?@]/g,cT=/#/g;function Bi(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function er(a){a.g||(a.g=new Map,a.h=0,a.i&&iT(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=Bi.prototype,t.add=function(a,h){er(this),this.i=null,a=Cs(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Tm(a,h){er(a),h=Cs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Im(a,h){return er(a),h=Cs(a,h),a.g.has(h)}t.forEach=function(a,h){er(this),this.g.forEach(function(m,v){m.forEach(function(D){a.call(h,D,v,this)},this)},this)},t.na=function(){er(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){const D=a[v];for(let L=0;L<D.length;L++)m.push(h[v])}return m},t.V=function(a){er(this);let h=[];if(typeof a=="string")Im(this,a)&&(h=h.concat(this.g.get(Cs(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return er(this),this.i=null,a=Cs(this,a),Im(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Sm(a,h,m){Tm(a,h),0<m.length&&(a.i=null,a.g.set(Cs(a,h),R(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];const L=encodeURIComponent(String(v)),B=this.V(v);for(v=0;v<B.length;v++){var D=L;B[v]!==""&&(D+="="+encodeURIComponent(String(B[v]))),a.push(D)}}return this.i=a.join("&")};function Cs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function dT(a,h){h&&!a.j&&(er(a),a.i=null,a.g.forEach(function(m,v){var D=v.toLowerCase();v!=D&&(Tm(this,v),Sm(this,D,m))},a)),a.j=h}function hT(a,h){const m=new Vi;if(l.Image){const v=new Image;v.onload=w(tr,m,"TestLoadImage: loaded",!0,h,v),v.onerror=w(tr,m,"TestLoadImage: error",!1,h,v),v.onabort=w(tr,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=w(tr,m,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function fT(a,h){const m=new Vi,v=new AbortController,D=setTimeout(()=>{v.abort(),tr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(L=>{clearTimeout(D),L.ok?tr(m,"TestPingServer: ok",!0,h):tr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(D),tr(m,"TestPingServer: error",!1,h)})}function tr(a,h,m,v,D){try{D&&(D.onload=null,D.onerror=null,D.onabort=null,D.ontimeout=null),v(m)}catch{}}function pT(){this.g=new YE}function mT(a,h,m){const v=m||"";try{_m(a,function(D,L){let B=D;d(D)&&(B=_c(D)),h.push(v+L+"="+encodeURIComponent(B))})}catch(D){throw h.push(v+"type="+encodeURIComponent("_badmap")),D}}function ja(a){this.l=a.Ub||null,this.j=a.eb||!1}I(ja,wc),ja.prototype.g=function(){return new Da(this.l,this.j)},ja.prototype.i=function(a){return function(){return a}}({});function Da(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(Da,rt),t=Da.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,zi(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$i(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zi(this)),this.g&&(this.readyState=3,zi(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Nm(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Nm(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?$i(this):zi(this),this.readyState==3&&Nm(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,$i(this))},t.Qa=function(a){this.g&&(this.response=a,$i(this))},t.ga=function(){this.g&&$i(this)};function $i(a){a.readyState=4,a.l=null,a.j=null,a.v=null,zi(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function zi(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Da.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Am(a){let h="";return M(a,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function Cc(a,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Am(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):me(a,h,m))}function Ae(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Ae,rt);var gT=/^https?$/i,yT=["POST","PUT"];t=Ae.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Tc.g(),this.v=this.o?nm(this.o):nm(Tc),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Rm(this,L);return}if(a=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var D in v)m.set(D,v[D]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const L of v.keys())m.set(L,v.get(L));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),D=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(yT,h,void 0))||v||D||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,B]of m)this.g.setRequestHeader(L,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{km(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Rm(this,L)}};function Rm(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,bm(a),Oa(a)}function bm(a){a.A||(a.A=!0,gt(a,"complete"),gt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,gt(this,"complete"),gt(this,"abort"),Oa(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oa(this,!0)),Ae.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Cm(this):this.bb())},t.bb=function(){Cm(this)};function Cm(a){if(a.h&&typeof o<"u"&&(!a.v[1]||bn(a)!=4||a.Z()!=2)){if(a.u&&bn(a)==4)Jp(a.Ea,0,a);else if(gt(a,"readystatechange"),bn(a)==4){a.h=!1;try{const B=a.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=B===0){var D=String(a.D).match(wm)[1]||null;!D&&l.self&&l.self.location&&(D=l.self.location.protocol.slice(0,-1)),v=!gT.test(D?D.toLowerCase():"")}m=v}if(m)gt(a,"complete"),gt(a,"success");else{a.m=6;try{var L=2<bn(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",bm(a)}}finally{Oa(a)}}}}function Oa(a,h){if(a.g){km(a);const m=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||gt(a,"ready");try{m.onreadystatechange=v}catch{}}}function km(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function bn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),QE(h)}};function Pm(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function vT(a){const h={};a=(a.g&&2<=bn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(_(a[v]))continue;var m=k(a[v]);const D=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=h[D]||[];h[D]=L,L.push(m)}E(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qi(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function jm(a){this.Aa=0,this.i=[],this.j=new Vi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qi("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qi("baseRetryDelayMs",5e3,a),this.cb=qi("retryDelaySeedMs",1e4,a),this.Wa=qi("forwardChannelMaxRetries",2,a),this.wa=qi("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new pm(a&&a.concurrentRequestLimit),this.Da=new pT,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=jm.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,v){yt(0),this.W=a,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=$m(this,null,this.W),Va(this)};function kc(a){if(Dm(a),a.G==3){var h=a.U++,m=Rn(a.I);if(me(m,"SID",a.K),me(m,"RID",h),me(m,"TYPE","terminate"),Wi(a,m),h=new Zn(a,a.j,h),h.L=2,h.v=Pa(Rn(m)),m=!1,l.navigator&&l.navigator.sendBeacon)try{m=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&l.Image&&(new Image().src=h.v,m=!0),m||(h.g=zm(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ba(h)}Bm(a)}function La(a){a.g&&(jc(a),a.g.cancel(),a.g=null)}function Dm(a){La(a),a.u&&(l.clearTimeout(a.u),a.u=null),Ma(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function Va(a){if(!mm(a.h)&&!a.s){a.s=!0;var h=a.Ga;Yt||Z(),$||(Yt(),$=!0),Q.add(h,a),a.B=0}}function _T(a,h){return gm(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Li(g(a.Ga,a,h),Um(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const D=new Zn(this,this.j,a);let L=this.o;if(this.S&&(L?(L=x(L),N(L,this.S)):L=this.S),this.m!==null||this.O||(D.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Lm(this,D,h),m=Rn(this.I),me(m,"RID",a),me(m,"CVER",22),this.D&&me(m,"X-HTTP-Session-Id",this.D),Wi(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(Am(L)))+"&"+h:this.m&&Cc(m,this.m,L)),bc(this.h,D),this.Ua&&me(m,"TYPE","init"),this.P?(me(m,"$req",h),me(m,"SID","null"),D.T=!0,Sc(D,m,null)):Sc(D,m,h),this.G=2}}else this.G==3&&(a?Om(this,a):this.i.length==0||mm(this.h)||Om(this))};function Om(a,h){var m;h?m=h.l:m=a.U++;const v=Rn(a.I);me(v,"SID",a.K),me(v,"RID",m),me(v,"AID",a.T),Wi(a,v),a.m&&a.o&&Cc(v,a.m,a.o),m=new Zn(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Lm(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),bc(a.h,m),Sc(m,v,h)}function Wi(a,h){a.H&&M(a.H,function(m,v){me(h,v,m)}),a.l&&_m({},function(m,v){me(h,v,m)})}function Lm(a,h,m){m=Math.min(a.i.length,m);var v=a.l?g(a.l.Na,a.l,a):null;e:{var D=a.i;let L=-1;for(;;){const B=["count="+m];L==-1?0<m?(L=D[0].g,B.push("ofs="+L)):L=0:B.push("ofs="+L);let he=!0;for(let Ge=0;Ge<m;Ge++){let ae=D[Ge].g;const st=D[Ge].map;if(ae-=L,0>ae)L=Math.max(0,D[Ge].g-100),he=!1;else try{mT(st,B,"req"+ae+"_")}catch{v&&v(st)}}if(he){v=B.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,v}function Vm(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Yt||Z(),$||(Yt(),$=!0),Q.add(h,a),a.v=0}}function Pc(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Li(g(a.Fa,a),Um(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Mm(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Li(g(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,yt(10),La(this),Mm(this))};function jc(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Mm(a){a.g=new Zn(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Rn(a.qa);me(h,"RID","rpc"),me(h,"SID",a.K),me(h,"AID",a.T),me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(h,"TO",a.ja),me(h,"TYPE","xmlhttp"),Wi(a,h),a.m&&a.o&&Cc(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=Pa(Rn(h)),m.m=null,m.P=!0,dm(m,a)}t.Za=function(){this.C!=null&&(this.C=null,La(this),Pc(this),yt(19))};function Ma(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Fm(a,h){var m=null;if(a.g==h){Ma(a),jc(a),a.g=null;var v=2}else if(Rc(a.h,h))m=h.D,ym(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var D=a.B;v=Na(),gt(v,new am(v,m)),Va(a)}else Vm(a);else if(D=h.s,D==3||D==0&&0<h.X||!(v==1&&_T(a,h)||v==2&&Pc(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),D){case 1:Yr(a,5);break;case 4:Yr(a,10);break;case 3:Yr(a,6);break;default:Yr(a,2)}}}function Um(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function Yr(a,h){if(a.j.info("Error code "+h),h==2){var m=g(a.fb,a),v=a.Xa;const D=!v;v=new Qr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Ca(v,"https"),Pa(v),D?hT(v.toString(),m):fT(v.toString(),m)}else yt(2);a.G=0,a.l&&a.l.sa(h),Bm(a),Dm(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),yt(2)):(this.j.info("Failed to ping google.com"),yt(1))};function Bm(a){if(a.G=0,a.ka=[],a.l){const h=vm(a.h);(h.length!=0||a.i.length!=0)&&(b(a.ka,h),b(a.ka,a.i),a.h.i.length=0,R(a.i),a.i.length=0),a.l.ra()}}function $m(a,h,m){var v=m instanceof Qr?Rn(m):new Qr(m);if(v.g!="")h&&(v.g=h+"."+v.g),ka(v,v.s);else{var D=l.location;v=D.protocol,h=h?h+"."+D.hostname:D.hostname,D=+D.port;var L=new Qr(null);v&&Ca(L,v),h&&(L.g=h),D&&ka(L,D),m&&(L.l=m),v=L}return m=a.D,h=a.ya,m&&h&&me(v,m,h),me(v,"VER",a.la),Wi(a,v),v}function zm(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ae(new ja({eb:m})):new Ae(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function qm(){}t=qm.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Fa(){}Fa.prototype.g=function(a,h){return new Pt(a,h)};function Pt(a,h){rt.call(this),this.g=new jm(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!_(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!_(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new ks(this)}I(Pt,rt),Pt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Pt.prototype.close=function(){kc(this.g)},Pt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=_c(a),a=m);h.i.push(new nT(h.Ya++,a)),h.G==3&&Va(h)},Pt.prototype.N=function(){this.g.l=null,delete this.j,kc(this.g),delete this.g,Pt.aa.N.call(this)};function Wm(a){xc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}I(Wm,xc);function Hm(){Ec.call(this),this.status=1}I(Hm,Ec);function ks(a){this.g=a}I(ks,qm),ks.prototype.ua=function(){gt(this.g,"a")},ks.prototype.ta=function(a){gt(this.g,new Wm(a))},ks.prototype.sa=function(a){gt(this.g,new Hm)},ks.prototype.ra=function(){gt(this.g,"b")},Fa.prototype.createWebChannel=Fa.prototype.g,Pt.prototype.send=Pt.prototype.o,Pt.prototype.open=Pt.prototype.m,Pt.prototype.close=Pt.prototype.close,ix=function(){return new Fa},sx=function(){return Na()},rx=Kr,bh={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Aa.NO_ERROR=0,Aa.TIMEOUT=8,Aa.HTTP_ERROR=6,Cl=Aa,lm.COMPLETE="complete",nx=lm,rm.EventType=Di,Di.OPEN="a",Di.CLOSE="b",Di.ERROR="c",Di.MESSAGE="d",rt.prototype.listen=rt.prototype.K,lo=rm,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,tx=Ae}).apply(typeof il<"u"?il:typeof self<"u"?self:typeof window<"u"?window:{});const Uy="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys=new qf("@firebase/firestore");function eo(){return ys.logLevel}function W(t,...e){if(ys.logLevel<=se.DEBUG){const n=e.map(np);ys.debug(`Firestore (${bi}): ${t}`,...n)}}function Kn(t,...e){if(ys.logLevel<=se.ERROR){const n=e.map(np);ys.error(`Firestore (${bi}): ${t}`,...n)}}function pi(t,...e){if(ys.logLevel<=se.WARN){const n=e.map(np);ys.warn(`Firestore (${bi}): ${t}`,...n)}}function np(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y(t="Unexpected state"){const e=`FIRESTORE (${bi}) INTERNAL ASSERTION FAILED: `+t;throw Kn(e),new Error(e)}function ce(t,e){t||Y()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends Nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Un{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ox{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $b{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class zb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class qb{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new Un;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Un,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},l=u=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Un)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new ox(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new ut(e)}}class Wb{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Hb{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new Wb(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Kb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Gb{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new Kb(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ax{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=Qb(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function le(t,e){return t<e?-1:t>e?1:0}function mi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new ze(0,0))}static max(){return new X(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e,n,r){n===void 0?n=0:n>e.length&&Y(),r===void 0?r=e.length-n:r>e.length-n&&Y(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qo.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qo?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Qo{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const Yb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends Qo{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return Yb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new z(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new z(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new z(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K{constructor(e){this.path=e}static fromPath(e){return new K(ye.fromString(e))}static fromName(e){return new K(ye.fromString(e).popFirst(5))}static empty(){return new K(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new K(new ye(e.slice()))}}function Xb(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new jr(s,K.empty(),e)}function Jb(t){return new jr(t.readTime,t.key,-1)}class jr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new jr(X.min(),K.empty(),-1)}static max(){return new jr(X.max(),K.empty(),-1)}}function Zb(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=K.comparator(t.documentKey,e.documentKey),n!==0?n:le(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class tC{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ma(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==eC)throw t;W("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Y(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new F((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof F?n:F.resolve(n)}catch(n){return F.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):F.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):F.reject(n)}static resolve(e){return new F((n,r)=>{n(e)})}static reject(e){return new F((n,r)=>{r(e)})}static waitFor(e){return new F((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=F.resolve(!1);for(const r of e)n=n.next(s=>s?F.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new F((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new F((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function nC(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function ga(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rp.oe=-1;function Wu(t){return t==null}function pu(t){return t===0&&1/t==-1/0}function rC(t){return typeof t=="number"&&Number.isInteger(t)&&!pu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function As(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lx(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Se{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new Se(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new Se(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ol(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ol(this.root,e,this.comparator,!1)}getReverseIterator(){return new ol(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ol(this.root,e,this.comparator,!0)}}class ol{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=s??Ye.EMPTY,this.right=i??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ye(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Y();const e=this.left.check();if(e!==this.right.check())throw Y();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Y()}get value(){throw Y()}get color(){throw Y()}get left(){throw Y()}get right(){throw Y()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Se(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new $y(this.data.getIterator())}getIteratorFrom(e){return new $y(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class $y{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Ot([])}unionWith(e){let n=new Ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ot(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return mi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ux extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new ux("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const sC=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dr(t){if(ce(!!t),typeof t=="string"){let e=0;const n=sC.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:je(t.seconds),nanos:je(t.nanos)}}function je(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function vs(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function ip(t){const e=t.mapValue.fields.__previous_value__;return sp(e)?ip(e):e}function Yo(t){const e=Dr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iC{constructor(e,n,r,s,i,o,l,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=d}}class Xo{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Xo("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Xo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al={mapValue:{}};function _s(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?sp(t)?4:aC(t)?9007199254740991:oC(t)?10:11:Y()}function In(t,e){if(t===e)return!0;const n=_s(t);if(n!==_s(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Yo(t).isEqual(Yo(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Dr(s.timestampValue),l=Dr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return vs(s.bytesValue).isEqual(vs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return je(s.geoPointValue.latitude)===je(i.geoPointValue.latitude)&&je(s.geoPointValue.longitude)===je(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return je(s.integerValue)===je(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=je(s.doubleValue),l=je(i.doubleValue);return o===l?pu(o)===pu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return mi(t.arrayValue.values||[],e.arrayValue.values||[],In);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(By(o)!==By(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!In(o[u],l[u])))return!1;return!0}(t,e);default:return Y()}}function Jo(t,e){return(t.values||[]).find(n=>In(n,e))!==void 0}function gi(t,e){if(t===e)return 0;const n=_s(t),r=_s(e);if(n!==r)return le(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return le(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=je(i.integerValue||i.doubleValue),u=je(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return zy(t.timestampValue,e.timestampValue);case 4:return zy(Yo(t),Yo(e));case 5:return le(t.stringValue,e.stringValue);case 6:return function(i,o){const l=vs(i),u=vs(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),u=o.split("/");for(let d=0;d<l.length&&d<u.length;d++){const f=le(l[d],u[d]);if(f!==0)return f}return le(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=le(je(i.latitude),je(o.latitude));return l!==0?l:le(je(i.longitude),je(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return qy(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,u,d,f;const p=i.fields||{},g=o.fields||{},w=(l=p.value)===null||l===void 0?void 0:l.arrayValue,I=(u=g.value)===null||u===void 0?void 0:u.arrayValue,R=le(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return R!==0?R:qy(w,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===al.mapValue&&o===al.mapValue)return 0;if(i===al.mapValue)return 1;if(o===al.mapValue)return-1;const l=i.fields||{},u=Object.keys(l),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const g=le(u[p],f[p]);if(g!==0)return g;const w=gi(l[u[p]],d[f[p]]);if(w!==0)return w}return le(u.length,f.length)}(t.mapValue,e.mapValue);default:throw Y()}}function zy(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return le(t,e);const n=Dr(t),r=Dr(e),s=le(n.seconds,r.seconds);return s!==0?s:le(n.nanos,r.nanos)}function qy(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=gi(n[s],r[s]);if(i)return i}return le(n.length,r.length)}function yi(t){return Ch(t)}function Ch(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Dr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return vs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return K.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Ch(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Ch(n.fields[o])}`;return s+"}"}(t.mapValue):Y()}function Wy(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function kh(t){return!!t&&"integerValue"in t}function op(t){return!!t&&"arrayValue"in t}function Hy(t){return!!t&&"nullValue"in t}function Ky(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function kl(t){return!!t&&"mapValue"in t}function oC(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function To(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return As(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=To(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=To(t.arrayValue.values[n]);return e}return Object.assign({},t)}function aC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.value=e}static empty(){return new Nt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!kl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=To(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=To(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());kl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return In(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];kl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){As(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Nt(To(this.value))}}function cx(t){const e=[];return As(t.fields,(n,r)=>{const s=new Xe([n]);if(kl(r)){const i=cx(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ot(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,X.min(),X.min(),X.min(),Nt.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,X.min(),X.min(),Nt.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,X.min(),X.min(),Nt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mu{constructor(e,n){this.position=e,this.inclusive=n}}function Gy(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=K.comparator(K.fromName(o.referenceValue),n.key):r=gi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Qy(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!In(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zo{constructor(e,n="asc"){this.field=e,this.dir=n}}function lC(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dx{}class Fe extends dx{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new cC(e,n,r):n==="array-contains"?new fC(e,r):n==="in"?new pC(e,r):n==="not-in"?new mC(e,r):n==="array-contains-any"?new gC(e,r):new Fe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new dC(e,r):new hC(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(gi(n,this.value)):n!==null&&_s(this.value)===_s(n)&&this.matchesComparison(gi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Y()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class un extends dx{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new un(e,n)}matches(e){return hx(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function hx(t){return t.op==="and"}function fx(t){return uC(t)&&hx(t)}function uC(t){for(const e of t.filters)if(e instanceof un)return!1;return!0}function Ph(t){if(t instanceof Fe)return t.field.canonicalString()+t.op.toString()+yi(t.value);if(fx(t))return t.filters.map(e=>Ph(e)).join(",");{const e=t.filters.map(n=>Ph(n)).join(",");return`${t.op}(${e})`}}function px(t,e){return t instanceof Fe?function(r,s){return s instanceof Fe&&r.op===s.op&&r.field.isEqual(s.field)&&In(r.value,s.value)}(t,e):t instanceof un?function(r,s){return s instanceof un&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&px(o,s.filters[l]),!0):!1}(t,e):void Y()}function mx(t){return t instanceof Fe?function(n){return`${n.field.canonicalString()} ${n.op} ${yi(n.value)}`}(t):t instanceof un?function(n){return n.op.toString()+" {"+n.getFilters().map(mx).join(" ,")+"}"}(t):"Filter"}class cC extends Fe{constructor(e,n,r){super(e,n,r),this.key=K.fromName(r.referenceValue)}matches(e){const n=K.comparator(e.key,this.key);return this.matchesComparison(n)}}class dC extends Fe{constructor(e,n){super(e,"in",n),this.keys=gx("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class hC extends Fe{constructor(e,n){super(e,"not-in",n),this.keys=gx("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function gx(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>K.fromName(r.referenceValue))}class fC extends Fe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return op(n)&&Jo(n.arrayValue,this.value)}}class pC extends Fe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Jo(this.value.arrayValue,n)}}class mC extends Fe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Jo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Jo(this.value.arrayValue,n)}}class gC extends Fe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!op(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Jo(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function Yy(t,e=null,n=[],r=[],s=null,i=null,o=null){return new yC(t,e,n,r,s,i,o)}function ap(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ph(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Wu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>yi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>yi(r)).join(",")),e.ue=n}return e.ue}function lp(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!lC(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!px(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Qy(t.startAt,e.startAt)&&Qy(t.endAt,e.endAt)}function jh(t){return K.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function vC(t,e,n,r,s,i,o,l){return new Ci(t,e,n,r,s,i,o,l)}function Hu(t){return new Ci(t)}function Xy(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function yx(t){return t.collectionGroup!==null}function Io(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(Xe.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Zo(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new Zo(Xe.keyField(),r))}return e.ce}function xn(t){const e=J(t);return e.le||(e.le=_C(e,Io(t))),e.le}function _C(t,e){if(t.limitType==="F")return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Zo(s.field,i)});const n=t.endAt?new mu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new mu(t.startAt.position,t.startAt.inclusive):null;return Yy(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Dh(t,e){const n=t.filters.concat([e]);return new Ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function gu(t,e,n){return new Ci(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ku(t,e){return lp(xn(t),xn(e))&&t.limitType===e.limitType}function vx(t){return`${ap(xn(t))}|lt:${t.limitType}`}function Ds(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>mx(s)).join(", ")}]`),Wu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>yi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>yi(s)).join(",")),`Target(${r})`}(xn(t))}; limitType=${t.limitType})`}function Gu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):K.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Io(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,u){const d=Gy(o,l,u);return o.inclusive?d<=0:d<0}(r.startAt,Io(r),s)||r.endAt&&!function(o,l,u){const d=Gy(o,l,u);return o.inclusive?d>=0:d>0}(r.endAt,Io(r),s))}(t,e)}function wC(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _x(t){return(e,n)=>{let r=!1;for(const s of Io(t)){const i=xC(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function xC(t,e,n){const r=t.field.isKeyField()?K.comparator(e.key,n.key):function(i,o,l){const u=o.data.field(i),d=l.data.field(i);return u!==null&&d!==null?gi(u,d):Y()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Y()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){As(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return lx(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC=new Se(K.comparator);function Gn(){return EC}const wx=new Se(K.comparator);function uo(...t){let e=wx;for(const n of t)e=e.insert(n.key,n);return e}function xx(t){let e=wx;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function rs(){return So()}function Ex(){return So()}function So(){return new ki(t=>t.toString(),(t,e)=>t.isEqual(e))}const TC=new Se(K.comparator),IC=new Ze(K.comparator);function re(...t){let e=IC;for(const n of t)e=e.add(n);return e}const SC=new Ze(le);function NC(){return SC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function up(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:pu(e)?"-0":e}}function Tx(t){return{integerValue:""+t}}function AC(t,e){return rC(e)?Tx(e):up(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(){this._=void 0}}function RC(t,e,n){return t instanceof ea?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sp(i)&&(i=ip(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof ta?Sx(t,e):t instanceof na?Nx(t,e):function(s,i){const o=Ix(s,i),l=Jy(o)+Jy(s.Pe);return kh(o)&&kh(s.Pe)?Tx(l):up(s.serializer,l)}(t,e)}function bC(t,e,n){return t instanceof ta?Sx(t,e):t instanceof na?Nx(t,e):n}function Ix(t,e){return t instanceof yu?function(r){return kh(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class ea extends Qu{}class ta extends Qu{constructor(e){super(),this.elements=e}}function Sx(t,e){const n=Ax(e);for(const r of t.elements)n.some(s=>In(s,r))||n.push(r);return{arrayValue:{values:n}}}class na extends Qu{constructor(e){super(),this.elements=e}}function Nx(t,e){let n=Ax(e);for(const r of t.elements)n=n.filter(s=>!In(s,r));return{arrayValue:{values:n}}}class yu extends Qu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function Jy(t){return je(t.integerValue||t.doubleValue)}function Ax(t){return op(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CC{constructor(e,n){this.field=e,this.transform=n}}function kC(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof ta&&s instanceof ta||r instanceof na&&s instanceof na?mi(r.elements,s.elements,In):r instanceof yu&&s instanceof yu?In(r.Pe,s.Pe):r instanceof ea&&s instanceof ea}(t.transform,e.transform)}class PC{constructor(e,n){this.version=e,this.transformResults=n}}class Kt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Kt}static exists(e){return new Kt(void 0,e)}static updateTime(e){return new Kt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pl(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Yu{}function Rx(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new cp(t.key,Kt.none()):new ya(t.key,t.data,Kt.none());{const n=t.data,r=Nt.empty();let s=new Ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new zr(t.key,r,new Ot(s.toArray()),Kt.none())}}function jC(t,e,n){t instanceof ya?function(s,i,o){const l=s.value.clone(),u=ev(s.fieldTransforms,i,o.transformResults);l.setAll(u),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof zr?function(s,i,o){if(!Pl(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=ev(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(bx(s)),u.setAll(l),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function No(t,e,n,r){return t instanceof ya?function(i,o,l,u){if(!Pl(i.precondition,o))return l;const d=i.value.clone(),f=tv(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof zr?function(i,o,l,u){if(!Pl(i.precondition,o))return l;const d=tv(i.fieldTransforms,u,o),f=o.data;return f.setAll(bx(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,l){return Pl(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function DC(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=Ix(r.transform,s||null);i!=null&&(n===null&&(n=Nt.empty()),n.set(r.field,i))}return n||null}function Zy(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&mi(r,s,(i,o)=>kC(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class ya extends Yu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zr extends Yu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function bx(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ev(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,bC(o,l,n[s]))}return r}function tv(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,RC(i,o,e))}return r}class cp extends Yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class OC extends Yu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LC{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&jC(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=No(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Ex();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const u=Rx(o,l);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&mi(this.mutations,e.mutations,(n,r)=>Zy(n,r))&&mi(this.baseMutations,e.baseMutations,(n,r)=>Zy(n,r))}}class dp{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return TC}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dp(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VC{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ve,ie;function FC(t){switch(t){default:return Y();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function Cx(t){if(t===void 0)return Kn("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ve.OK:return V.OK;case Ve.CANCELLED:return V.CANCELLED;case Ve.UNKNOWN:return V.UNKNOWN;case Ve.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ve.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ve.INTERNAL:return V.INTERNAL;case Ve.UNAVAILABLE:return V.UNAVAILABLE;case Ve.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ve.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ve.NOT_FOUND:return V.NOT_FOUND;case Ve.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ve.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ve.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ve.ABORTED:return V.ABORTED;case Ve.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ve.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ve.DATA_LOSS:return V.DATA_LOSS;default:return Y()}}(ie=Ve||(Ve={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BC=new os([4294967295,4294967295],0);function nv(t){const e=UC().encode(t),n=new ex;return n.update(e),new Uint8Array(n.digest())}function rv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new os([n,r],0),new os([s,i],0)]}class hp{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new co(`Invalid padding: ${n}`);if(r<0)throw new co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new co(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=os.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(os.fromNumber(r)));return s.compare(BC)===1&&(s=new os([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=nv(e),[r,s]=rv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hp(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=nv(e),[r,s]=rv(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,va.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Xu(X.min(),s,new Se(le),Gn(),re())}}class va{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new va(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class kx{constructor(e,n){this.targetId=e,this.me=n}}class Px{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class sv{constructor(){this.fe=0,this.ge=ov(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=re(),n=re(),r=re();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Y()}}),new va(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=ov()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class $C{constructor(e){this.Le=e,this.Be=new Map,this.ke=Gn(),this.qe=iv(),this.Qe=new Se(le)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Y()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(jh(i))if(r===0){const o=new K(i.path);this.Ue(n,o,dt.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),u=l?this.Xe(l,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=vs(r).toUint8Array()}catch(u){if(u instanceof ux)return pi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new hp(o,s,i)}catch(u){return pi(u instanceof co?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&jh(l.target)){const u=new K(l.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,dt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=re();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Xu(e,n,this.Qe,this.ke,r);return this.ke=Gn(),this.qe=iv(),this.Qe=new Se(le),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new sv,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(le),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||W("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sv),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function iv(){return new Se(K.comparator)}function ov(){return new Se(K.comparator)}const zC={asc:"ASCENDING",desc:"DESCENDING"},qC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},WC={and:"AND",or:"OR"};class HC{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Oh(t,e){return t.useProto3Json||Wu(e)?e:{value:e}}function vu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function jx(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function KC(t,e){return vu(t,e.toTimestamp())}function En(t){return ce(!!t),X.fromTimestamp(function(n){const r=Dr(n);return new ze(r.seconds,r.nanos)}(t))}function fp(t,e){return Lh(t,e).canonicalString()}function Lh(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dx(t){const e=ye.fromString(t);return ce(Fx(e)),e}function Vh(t,e){return fp(t.databaseId,e.path)}function md(t,e){const n=Dx(e);if(n.get(1)!==t.databaseId.projectId)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new K(Lx(n))}function Ox(t,e){return fp(t.databaseId,e)}function GC(t){const e=Dx(t);return e.length===4?ye.emptyPath():Lx(e)}function Mh(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Lx(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function av(t,e,n){return{name:Vh(t,e),fields:n.value.mapValue.fields}}function QC(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Y()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ce(f===void 0||typeof f=="string"),tt.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?V.UNKNOWN:Cx(d.code);return new z(f,d.message||"")}(o);n=new Px(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=md(t,r.document.name),i=En(r.document.updateTime),o=r.document.createTime?En(r.document.createTime):X.min(),l=new Nt({mapValue:{fields:r.document.fields}}),u=dt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new jl(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=md(t,r.document),i=r.readTime?En(r.readTime):X.min(),o=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new jl([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=md(t,r.document),i=r.removedTargetIds||[];n=new jl([],i,s,null)}else{if(!("filter"in e))return Y();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new MC(s,i),l=r.targetId;n=new kx(l,o)}}return n}function YC(t,e){let n;if(e instanceof ya)n={update:av(t,e.key,e.value)};else if(e instanceof cp)n={delete:Vh(t,e.key)};else if(e instanceof zr)n={update:av(t,e.key,e.data),updateMask:ik(e.fieldMask)};else{if(!(e instanceof OC))return Y();n={verify:Vh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof ea)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof ta)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof na)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof yu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw Y()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:KC(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Y()}(t,e.precondition)),n}function XC(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?En(s.updateTime):En(i);return o.isEqual(X.min())&&(o=En(i)),new PC(o,s.transformResults||[])}(n,e))):[]}function JC(t,e){return{documents:[Ox(t,e.path)]}}function ZC(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Ox(t,s);const i=function(d){if(d.length!==0)return Mx(un.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(g){return{field:Os(g.field),direction:nk(g.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Oh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function ek(t){let e=GC(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const g=Vx(p);return g instanceof un&&fx(g)?g.getFilters():[g]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(g=>function(I){return new Zo(Ls(I.field),function(b){switch(b){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(g))}(n.orderBy));let l=null;n.limit&&(l=function(p){let g;return g=typeof p=="object"?p.value:p,Wu(g)?null:g}(n.limit));let u=null;n.startAt&&(u=function(p){const g=!!p.before,w=p.values||[];return new mu(w,g)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const g=!p.before,w=p.values||[];return new mu(w,g)}(n.endAt)),vC(e,s,o,i,l,"F",u,d)}function tk(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Y()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vx(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ls(n.unaryFilter.field);return Fe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ls(n.unaryFilter.field);return Fe.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ls(n.unaryFilter.field);return Fe.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ls(n.unaryFilter.field);return Fe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Y()}}(t):t.fieldFilter!==void 0?function(n){return Fe.create(Ls(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Y()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return un.create(n.compositeFilter.filters.map(r=>Vx(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Y()}}(n.compositeFilter.op))}(t):Y()}function nk(t){return zC[t]}function rk(t){return qC[t]}function sk(t){return WC[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ls(t){return Xe.fromServerFormat(t.fieldPath)}function Mx(t){return t instanceof Fe?function(n){if(n.op==="=="){if(Ky(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Ky(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(Hy(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:rk(n.op),value:n.value}}}(t):t instanceof un?function(n){const r=n.getFilters().map(s=>Mx(s));return r.length===1?r[0]:{compositeFilter:{op:sk(n.op),filters:r}}}(t):Y()}function ik(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Fx(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gr{constructor(e,n,r,s,i=X.min(),o=X.min(),l=tt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new gr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new gr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ok{constructor(e){this.ct=e}}function ak(t){const e=ek({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?gu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lk{constructor(){this.un=new uk}addToCollectionParentIndex(e,n){return this.un.add(n),F.resolve()}getCollectionParents(e,n){return F.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return F.resolve()}deleteFieldIndex(e,n){return F.resolve()}deleteAllFieldIndexes(e){return F.resolve()}createTargetIndexes(e,n){return F.resolve()}getDocumentsMatchingTarget(e,n){return F.resolve(null)}getIndexType(e,n){return F.resolve(0)}getFieldIndexes(e,n){return F.resolve([])}getNextCollectionGroupToUpdate(e){return F.resolve(null)}getMinOffset(e,n){return F.resolve(jr.min())}getMinOffsetFromCollectionGroup(e,n){return F.resolve(jr.min())}updateCollectionGroup(e,n,r){return F.resolve()}updateIndexEntries(e,n){return F.resolve()}}class uk{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new vi(0)}static kn(){return new vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(){this.changes=new ki(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?F.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dk{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&No(r.mutation,s,Ot.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const s=rs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=uo();return i.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=rs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=Gn();const o=So(),l=function(){return So()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof zr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),No(f.mutation,d,f.mutation.getFieldMask(),ze.now())):o.set(d.key,Ot.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return l.set(d,new dk(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(e,n){const r=So();let s=new Se((o,l)=>o-l),i=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Ot.empty();f=l.applyToLocalView(d,f),r.set(u,f);const p=(s.get(l.batchId)||re()).add(u);s=s.insert(l.batchId,p)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),d=u.key,f=u.value,p=Ex();f.forEach(g=>{if(!i.has(g)){const w=Rx(n.get(g),r.get(g));w!==null&&p.set(g,w),i=i.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return F.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return K.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):yx(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):F.resolve(rs());let l=-1,u=i;return o.next(d=>F.forEach(d,(f,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(f)?F.resolve():this.remoteDocumentCache.getEntry(e,f).next(g=>{u=u.insert(f,g)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,re())).next(f=>({batchId:l,changes:xx(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new K(n)).next(r=>{let s=uo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=uo();return this.indexManager.getCollectionParents(e,i).next(l=>F.forEach(l,u=>{const d=function(p,g){return new Ci(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,g)=>{o=o.insert(p,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=uo();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&No(f.mutation,d,Ot.empty(),ze.now()),Gu(n,d)&&(l=l.insert(u,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return F.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:En(s.createTime)}}(n)),F.resolve()}getNamedQuery(e,n){return F.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:ak(s.bundledQuery),readTime:En(s.readTime)}}(n)),F.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pk{constructor(){this.overlays=new Se(K.comparator),this.Ir=new Map}getOverlay(e,n){return F.resolve(this.overlays.get(n))}getOverlays(e,n){const r=rs();return F.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),F.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),F.resolve()}getOverlaysForCollection(e,n,r){const s=rs(),i=n.length+1,o=new K(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return F.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Se((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=rs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=rs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return F.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new VC(n,r));let i=this.Ir.get(n);i===void 0&&(i=re(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mk{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return F.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,F.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pp{constructor(){this.Tr=new Ze(qe.Er),this.dr=new Ze(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new K(new ye([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new K(new ye([])),r=new qe(n,e),s=new qe(n,e+1);let i=re();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return K.comparator(e.key,n.key)||le(e.wr,n.wr)}static Ar(e,n){return le(e.wr,n.wr)||K.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze(qe.Er)}checkEmpty(e){return F.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new LC(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return F.resolve(o)}lookupMutationBatch(e,n){return F.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return F.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return F.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return F.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),F.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(le);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),F.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;K.isDocumentKey(i)||(i=i.child(""));const o=new qe(new K(i),0);let l=new Ze(le);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(u.wr)),!0)},o),F.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return F.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),s=this.br.firstAfterOrEqual(r);return F.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,F.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.Mr=e,this.docs=function(){return new Se(K.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return F.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=Gn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),F.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=Gn();const o=n.path,l=new K(o.child("")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||Zb(Jb(f),r)<=0||(s.has(f.key)||Gu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return F.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Y()}Or(e,n){return F.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vk(this)}getSize(e){return F.resolve(this.size)}}class vk extends ck{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),F.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _k{constructor(e){this.persistence=e,this.Nr=new ki(n=>ap(n),lp),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pp,this.targetCount=0,this.kr=vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),F.resolve()}getLastRemoteSnapshotVersion(e){return F.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return F.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),F.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),F.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,F.resolve()}updateTargetData(e,n){return this.Kn(n),F.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,F.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),F.waitFor(i).next(()=>s)}getTargetCount(e){return F.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return F.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),F.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),F.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),F.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return F.resolve(r)}containsKey(e,n){return F.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wk{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rp(0),this.Kr=!1,this.Kr=!0,this.$r=new mk,this.referenceDelegate=e(this),this.Ur=new _k(this),this.indexManager=new lk,this.remoteDocumentCache=function(s){return new yk(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new ok(n),this.Gr=new fk(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pk,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new gk(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){W("MemoryPersistence","Starting transaction:",e);const s=new xk(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return F.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xk extends tC{constructor(e){super(),this.currentSequenceNumber=e}}class mp{constructor(e){this.persistence=e,this.Jr=new pp,this.Yr=null}static Zr(e){return new mp(e)}get Xr(){if(this.Yr)return this.Yr;throw Y()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),F.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),F.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),F.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return F.forEach(this.Xr,r=>{const s=K.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return F.or([()=>F.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gp{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=re(),s=re();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gp(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ek{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tk{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return cA()?8:nC(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Ek;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(eo()<=se.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Ds(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),F.resolve()):(eo()<=se.DEBUG&&W("QueryEngine","Query:",Ds(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(eo()<=se.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Ds(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,xn(n))):F.resolve())}Yi(e,n){if(Xy(n))return F.resolve(null);let r=xn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=gu(n,null,"F"),r=xn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=re(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,l);return this.ns(n,d,o,u.readTime)?this.Yi(e,gu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return Xy(n)||s.isEqual(X.min())?F.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?F.resolve(null):(eo()<=se.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ds(n)),this.rs(e,o,n,Xb(s,-1)).next(l=>l))})}ts(e,n){let r=new Ze(_x(e));return n.forEach((s,i)=>{Gu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return eo()<=se.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Ds(n)),this.Ji.getDocumentsMatchingQuery(e,n,jr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Se(le),this._s=new ki(i=>ap(i),lp),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hk(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function Sk(t,e,n,r){return new Ik(t,e,n,r)}async function Ux(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let u=re();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Nk(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,u,d,f){const p=d.batch,g=p.keys();let w=F.resolve();return g.forEach(I=>{w=w.next(()=>f.getEntry(u,I)).next(R=>{const b=d.docVersions.get(I);ce(b!==null),R.version.compareTo(b)<0&&(p.applyToRemoteDocument(R,d),R.isValidDocument()&&(R.setReadTime(d.commitVersion),f.addEntry(R)))})}),w.next(()=>l.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(u=u.add(l.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function Bx(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Ak(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,p)=>{const g=s.get(p);if(!g)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let w=g.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?w=w.withResumeToken(tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(p,w),function(R,b,y){return R.resumeToken.approximateByteSize()===0||b.snapshotVersion.toMicroseconds()-R.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(g,w,f)&&l.push(n.Ur.updateTargetData(i,w))});let u=Gn(),d=re();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Rk(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return F.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function Rk(t,e,n){let r=re(),s=re();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=Gn();return n.forEach((l,u)=>{const d=i.get(l);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),u.isNoDocument()&&u.version.isEqual(X.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):W("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function bk(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ck(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,F.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new gr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Fh(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!ga(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function lv(t,e,n){const r=J(t);let s=X.min(),i=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=J(u),g=p._s.get(f);return g!==void 0?F.resolve(p.os.get(g)):p.Ur.getTargetData(d,f)}(r,o,xn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:re())).next(l=>(kk(r,wC(e),l),{documents:l,Ts:i})))}function kk(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class uv{constructor(){this.activeTargetIds=NC()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Pk{constructor(){this.so=new uv,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new uv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jk{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cv{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ll=null;function gd(){return ll===null?ll=function(){return 268435456+Math.round(2147483648*Math.random())}():ll++,"0x"+ll.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dk={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ok{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class Lk extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=gd(),u=this.xo(n,r.toUriEncodedString());W("RestConnection",`Sending RPC '${n}' ${l}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(W("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw pi("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Dk[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=gd();return new Promise((o,l)=>{const u=new tx;u.setWithCredentials(!0),u.listenOnce(nx.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case Cl.NO_ERROR:const f=u.getResponseJson();W(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Cl.TIMEOUT:W(lt,`RPC '${e}' ${i} timed out`),l(new z(V.DEADLINE_EXCEEDED,"Request time out"));break;case Cl.HTTP_ERROR:const p=u.getStatus();if(W(lt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let g=u.getResponseJson();Array.isArray(g)&&(g=g[0]);const w=g==null?void 0:g.error;if(w&&w.status&&w.message){const I=function(b){const y=b.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(y)>=0?y:V.UNKNOWN}(w.status);l(new z(I,w.message))}else l(new z(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new z(V.UNAVAILABLE,"Connection failed."));break;default:Y()}}finally{W(lt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);W(lt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=gd(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=ix(),l=sx(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");W(lt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let g=!1,w=!1;const I=new Ok({Io:b=>{w?W(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,b):(g||(W(lt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),W(lt,`RPC '${e}' stream ${s} sending:`,b),p.send(b))},To:()=>p.close()}),R=(b,y,_)=>{b.listen(y,T=>{try{_(T)}catch(C){setTimeout(()=>{throw C},0)}})};return R(p,lo.EventType.OPEN,()=>{w||(W(lt,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),R(p,lo.EventType.CLOSE,()=>{w||(w=!0,W(lt,`RPC '${e}' stream ${s} transport closed`),I.So())}),R(p,lo.EventType.ERROR,b=>{w||(w=!0,pi(lt,`RPC '${e}' stream ${s} transport errored:`,b),I.So(new z(V.UNAVAILABLE,"The operation could not be completed")))}),R(p,lo.EventType.MESSAGE,b=>{var y;if(!w){const _=b.data[0];ce(!!_);const T=_,C=T.error||((y=T[0])===null||y===void 0?void 0:y.error);if(C){W(lt,`RPC '${e}' stream ${s} received error:`,C);const O=C.status;let M=function(S){const N=Ve[S];if(N!==void 0)return Cx(N)}(O),E=C.message;M===void 0&&(M=V.INTERNAL,E="Unknown error status: "+O+" with message "+C.message),w=!0,I.So(new z(M,E)),p.close()}else W(lt,`RPC '${e}' stream ${s} received:`,_),I.bo(_)}}),R(l,rx.STAT_EVENT,b=>{b.stat===bh.PROXY?W(lt,`RPC '${e}' stream ${s} detected buffering proxy`):b.stat===bh.NOPROXY&&W(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function yd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ju(t){return new HC(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&W("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{constructor(e,n,r,s,i,o,l,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new $x(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(Kn(n.toString()),Kn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Vk extends zx{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=QC(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?En(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Mh(this.serializer),n.addTarget=function(i,o){let l;const u=o.target;if(l=jh(u)?{documents:JC(i,u)}:{query:ZC(i,u)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=jx(i,o.resumeToken);const d=Oh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){l.readTime=vu(i,o.snapshotVersion.toTimestamp());const d=Oh(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=tk(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Mh(this.serializer),n.removeTarget=e,this.a_(n)}}class Mk extends zx{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=XC(e.writeResults,e.commitTime),r=En(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Mh(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>YC(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fk extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Lh(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Lh(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Uk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Kn(n),this.D_=!1):W("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bk{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Rs(this)&&(W("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=J(u);d.L_.add(4),await _a(d),d.q_.set("Unknown"),d.L_.delete(4),await Zu(d)}(this))})}),this.q_=new Uk(r,s)}}async function Zu(t){if(Rs(t))for(const e of t.B_)await e(!0)}async function _a(t){for(const e of t.B_)await e(!1)}function qx(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wp(n)?_p(n):Pi(n).r_()&&vp(n,e))}function yp(t,e){const n=J(t),r=Pi(n);n.N_.delete(e),r.r_()&&Wx(n,e),n.N_.size===0&&(r.r_()?r.o_():Rs(n)&&n.q_.set("Unknown"))}function vp(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Pi(t).A_(e)}function Wx(t,e){t.Q_.xe(e),Pi(t).R_(e)}function _p(t){t.Q_=new $C({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Pi(t).start(),t.q_.v_()}function wp(t){return Rs(t)&&!Pi(t).n_()&&t.N_.size>0}function Rs(t){return J(t).L_.size===0}function Hx(t){t.Q_=void 0}async function $k(t){t.q_.set("Online")}async function zk(t){t.N_.forEach((e,n)=>{vp(t,e)})}async function qk(t,e){Hx(t),wp(t)?(t.q_.M_(e),_p(t)):t.q_.set("Unknown")}async function Wk(t,e,n){if(t.q_.set("Online"),e instanceof Px&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await _u(t,r)}else if(e instanceof jl?t.Q_.Ke(e):e instanceof kx?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await Bx(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),Wx(i,u);const p=new gr(f.target,u,d,f.sequenceNumber);vp(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){W("RemoteStore","Failed to raise snapshot:",r),await _u(t,r)}}async function _u(t,e,n){if(!ga(e))throw e;t.L_.add(1),await _a(t),t.q_.set("Offline"),n||(n=()=>Bx(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{W("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Zu(t)})}function Kx(t,e){return e().catch(n=>_u(t,n,e))}async function ec(t){const e=J(t),n=Or(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Hk(e);)try{const s=await bk(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Kk(e,s)}catch(s){await _u(e,s)}Gx(e)&&Qx(e)}function Hk(t){return Rs(t)&&t.O_.length<10}function Kk(t,e){t.O_.push(e);const n=Or(t);n.r_()&&n.V_&&n.m_(e.mutations)}function Gx(t){return Rs(t)&&!Or(t).n_()&&t.O_.length>0}function Qx(t){Or(t).start()}async function Gk(t){Or(t).p_()}async function Qk(t){const e=Or(t);for(const n of t.O_)e.m_(n.mutations)}async function Yk(t,e,n){const r=t.O_.shift(),s=dp.from(r,e,n);await Kx(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await ec(t)}async function Xk(t,e){e&&Or(t).V_&&await async function(r,s){if(function(o){return FC(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Or(r).s_(),await Kx(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await ec(r)}}(t,e),Gx(t)&&Qx(t)}async function dv(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");const r=Rs(n);n.L_.add(3),await _a(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Zu(n)}async function Jk(t,e){const n=J(t);e?(n.L_.delete(2),await Zu(n)):e||(n.L_.add(2),await _a(n),n.q_.set("Unknown"))}function Pi(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new Vk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:$k.bind(null,t),Ro:zk.bind(null,t),mo:qk.bind(null,t),d_:Wk.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wp(t)?_p(t):t.q_.set("Unknown")):(await t.K_.stop(),Hx(t))})),t.K_}function Or(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new Mk(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Gk.bind(null,t),mo:Xk.bind(null,t),f_:Qk.bind(null,t),g_:Yk.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await ec(t)):(await t.U_.stop(),t.O_.length>0&&(W("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xp{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Un,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new xp(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Ep(t,e){if(Kn("AsyncQueue",`${e}: ${t}`),ga(t))return new z(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e){this.comparator=e?(n,r)=>e(n,r)||K.comparator(n.key,r.key):(n,r)=>K.comparator(n.key,r.key),this.keyedMap=uo(),this.sortedSet=new Se(this.comparator)}static emptySet(e){return new ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hv{constructor(){this.W_=new Se(K.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Y():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class _i{constructor(e,n,r,s,i,o,l,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new _i(e,n,ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zk{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eP{constructor(){this.queries=fv(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=fv(),i.forEach((o,l)=>{for(const u of l.j_)u.onError(r)})})(this,new z(V.ABORTED,"Firestore shutting down"))}}function fv(){return new ki(t=>vx(t),Ku)}async function Tp(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Zk,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Ep(o,`Initialization of query '${Ds(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Sp(n)}async function Ip(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tP(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Sp(n)}function nP(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Sp(t){t.Y_.forEach(e=>{e.next()})}var Uh,pv;(pv=Uh||(Uh={})).ea="default",pv.Cache="cache";class Np{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new _i(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=_i.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Uh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yx{constructor(e){this.key=e}}class Xx{constructor(e){this.key=e}}class rP{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=re(),this.mutatedKeys=re(),this.Aa=_x(e),this.Ra=new ii(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new hv,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const g=s.get(f),w=Gu(this.query,p)?p:null,I=!!g&&this.mutatedKeys.has(g.key),R=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let b=!1;g&&w?g.data.isEqual(w.data)?I!==R&&(r.track({type:3,doc:w}),b=!0):this.ga(g,w)||(r.track({type:2,doc:w}),b=!0,(u&&this.Aa(w,u)>0||d&&this.Aa(w,d)<0)&&(l=!0)):!g&&w?(r.track({type:0,doc:w}),b=!0):g&&!w&&(r.track({type:1,doc:g}),b=!0,(u||d)&&(l=!0)),b&&(w?(o=o.add(w),i=R?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(w,I){const R=b=>{switch(b){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Y()}};return R(w)-R(I)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new _i(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new hv,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=re(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new Xx(r))}),this.da.forEach(r=>{e.has(r)||n.push(new Yx(r))}),n}ba(e){this.Ta=e.Ts,this.da=re();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return _i.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sP{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iP{constructor(e){this.key=e,this.va=!1}}class oP{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ki(l=>vx(l),Ku),this.Ma=new Map,this.xa=new Set,this.Oa=new Se(K.comparator),this.Na=new Map,this.La=new pp,this.Ba={},this.ka=new Map,this.qa=vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aP(t,e,n=!0){const r=rE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await Jx(r,e,n,!0),s}async function lP(t,e){const n=rE(t);await Jx(n,e,!0,!1)}async function Jx(t,e,n,r){const s=await Ck(t.localStore,xn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await uP(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&qx(t.remoteStore,s),l}async function uP(t,e,n,r,s){t.Ka=(p,g,w)=>async function(R,b,y,_){let T=b.view.ma(y);T.ns&&(T=await lv(R.localStore,b.query,!1).then(({documents:E})=>b.view.ma(E,T)));const C=_&&_.targetChanges.get(b.targetId),O=_&&_.targetMismatches.get(b.targetId)!=null,M=b.view.applyChanges(T,R.isPrimaryClient,C,O);return gv(R,b.targetId,M.wa),M.snapshot}(t,p,g,w);const i=await lv(t.localStore,e,!0),o=new rP(e,i.Ts),l=o.ma(i.documents),u=va.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,u);gv(t,n,d.wa);const f=new sP(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function cP(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ku(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Fh(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&yp(r.remoteStore,s.targetId),Bh(r,s.targetId)}).catch(ma)):(Bh(r,s.targetId),await Fh(r.localStore,s.targetId,!0))}async function dP(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),yp(n.remoteStore,r.targetId))}async function hP(t,e,n){const r=_P(t);try{const s=await function(o,l){const u=J(o),d=ze.now(),f=l.reduce((w,I)=>w.add(I.key),re());let p,g;return u.persistence.runTransaction("Locally write mutations","readwrite",w=>{let I=Gn(),R=re();return u.cs.getEntries(w,f).next(b=>{I=b,I.forEach((y,_)=>{_.isValidDocument()||(R=R.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(w,I)).next(b=>{p=b;const y=[];for(const _ of l){const T=DC(_,p.get(_.key).overlayedDocument);T!=null&&y.push(new zr(_.key,T,cx(T.value.mapValue),Kt.exists(!0)))}return u.mutationQueue.addMutationBatch(w,d,y,l)}).next(b=>{g=b;const y=b.applyToLocalDocumentSet(p,R);return u.documentOverlayCache.saveOverlays(w,b.batchId,y)})}).then(()=>({batchId:g.batchId,changes:xx(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Se(le)),d=d.insert(l,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await wa(r,s.changes),await ec(r.remoteStore)}catch(s){const i=Ep(s,"Failed to persist write");n.reject(i)}}async function Zx(t,e){const n=J(t);try{const r=await Ak(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ce(o.va):s.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await wa(n,r,e)}catch(r){await ma(r)}}function mv(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let d=!1;u.queries.forEach((f,p)=>{for(const g of p.j_)g.Z_(l)&&(d=!0)}),d&&Sp(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fP(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Se(K.comparator);o=o.insert(i,dt.newNoDocument(i,X.min()));const l=re().add(i),u=new Xu(X.min(),new Map,new Se(le),o,l);await Zx(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Ap(r)}else await Fh(r.localStore,e,!1).then(()=>Bh(r,e,n)).catch(ma)}async function pP(t,e){const n=J(t),r=e.batch.batchId;try{const s=await Nk(n.localStore,e);tE(n,r,null),eE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await wa(n,s)}catch(s){await ma(s)}}async function mP(t,e,n){const r=J(t);try{const s=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,l).next(p=>(ce(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);tE(r,e,n),eE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await wa(r,s)}catch(s){await ma(s)}}function eE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function tE(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Bh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||nE(t,r)})}function nE(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(yp(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Ap(t))}function gv(t,e,n){for(const r of n)r instanceof Yx?(t.La.addReference(r.key,e),gP(t,r)):r instanceof Xx?(W("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||nE(t,r.key)):Y()}function gP(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(W("SyncEngine","New document in limbo: "+n),t.xa.add(r),Ap(t))}function Ap(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new K(ye.fromString(e)),r=t.qa.next();t.Na.set(r,new iP(n)),t.Oa=t.Oa.insert(n,r),qx(t.remoteStore,new gr(xn(Hu(n.path)),r,"TargetPurposeLimboResolution",rp.oe))}}async function wa(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=gp.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=J(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>F.forEach(d,g=>F.forEach(g.$i,w=>f.persistence.referenceDelegate.addReference(p,g.targetId,w)).next(()=>F.forEach(g.Ui,w=>f.persistence.referenceDelegate.removeReference(p,g.targetId,w)))))}catch(p){if(!ga(p))throw p;W("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const g=p.targetId;if(!p.fromCache){const w=f.os.get(g),I=w.snapshotVersion,R=w.withLastLimboFreeSnapshotVersion(I);f.os=f.os.insert(g,R)}}}(r.localStore,i))}async function yP(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());const r=await Ux(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(u=>{u.reject(new z(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await wa(n,r.hs)}}function vP(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return re().add(r.key);{let s=re();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function rE(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Zx.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vP.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fP.bind(null,e),e.Ca.d_=tP.bind(null,e.eventManager),e.Ca.$a=nP.bind(null,e.eventManager),e}function _P(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pP.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mP.bind(null,e),e}class wu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ju(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return Sk(this.persistence,new Tk,e.initialUser,this.serializer)}Ga(e){return new wk(mp.Zr,this.serializer)}Wa(e){return new Pk}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wu.provider={build:()=>new wu};class $h{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>mv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yP.bind(null,this.syncEngine),await Jk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eP}()}createDatastore(e){const n=Ju(e.databaseInfo.databaseId),r=function(i){return new Lk(i)}(e.databaseInfo);return function(i,o,l,u){return new Fk(i,o,l,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new Bk(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>mv(this.syncEngine,n,0),function(){return cv.D()?new cv:new jk}())}createSyncEngine(e,n){return function(s,i,o,l,u,d,f){const p=new oP(s,i,o,l,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);W("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await _a(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}$h.provider={build:()=>new $h};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Kn("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wP{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=ax.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{W("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(W("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Un;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Ep(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function vd(t,e){t.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await Ux(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function yv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xP(t);W("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>dv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>dv(e.remoteStore,s)),t._onlineComponents=e}async function xP(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{await vd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;pi("Error using user provided cache. Falling back to memory cache: "+n),await vd(t,new wu)}}else W("FirestoreClient","Using default OfflineComponentProvider"),await vd(t,new wu);return t._offlineComponents}async function sE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),await yv(t,t._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),await yv(t,new $h))),t._onlineComponents}function EP(t){return sE(t).then(e=>e.syncEngine)}async function xu(t){const e=await sE(t),n=e.eventManager;return n.onListen=aP.bind(null,e.syncEngine),n.onUnlisten=cP.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lP.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dP.bind(null,e.syncEngine),n}function TP(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new Rp({next:g=>{f.Za(),o.enqueueAndForget(()=>Ip(i,p));const w=g.docs.has(l);!w&&g.fromCache?d.reject(new z(V.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&g.fromCache&&u&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Np(Hu(l.path),f,{includeMetadataChanges:!0,_a:!0});return Tp(i,p)}(await xu(t),t.asyncQueue,e,n,r)),r.promise}function IP(t,e,n={}){const r=new Un;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,u,d){const f=new Rp({next:g=>{f.Za(),o.enqueueAndForget(()=>Ip(i,p)),g.fromCache&&u.source==="server"?d.reject(new z(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(g)},error:g=>d.reject(g)}),p=new Np(l,f,{includeMetadataChanges:!0,_a:!0});return Tp(i,p)}(await xu(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oE(t,e,n){if(!n)throw new z(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function SP(t,e,n,r){if(e===!0&&r===!0)throw new z(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function _v(t){if(!K.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function wv(t){if(K.isDocumentKey(t))throw new z(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function tc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Y()}function kt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=tc(t);throw new z(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NP(t,e){if(e<=0)throw new z(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xv{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}SP("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=iE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class nc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xv({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xv(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $b;switch(r.type){case"firstParty":return new Hb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=vv.get(n);r&&(W("ComponentProvider","Removing Datastore"),vv.delete(n),r.terminate())}(this),Promise.resolve()}}function AP(t,e,n,r={}){var s;const i=(t=kt(t,nc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&pi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,u;if(typeof r.mockUserToken=="string")l=r.mockUserToken,u=ut.MOCK_USER;else{l=fw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new z(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new ut(d)}t._authCredentials=new zb(new ox(l,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Jn(this.firestore,e,this._query)}}class ht{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Rr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ht(this.firestore,e,this._key)}}class Rr extends Jn{constructor(e,n,r){super(e,n,Hu(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ht(this.firestore,null,new K(e))}withConverter(e){return new Rr(this.firestore,e,this._path)}}function Oe(t,e,...n){if(t=_e(t),oE("collection","path",e),t instanceof nc){const r=ye.fromString(e,...n);return wv(r),new Rr(t,null,r)}{if(!(t instanceof ht||t instanceof Rr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return wv(r),new Rr(t.firestore,null,r)}}function Ce(t,e,...n){if(t=_e(t),arguments.length===1&&(e=ax.newId()),oE("doc","path",e),t instanceof nc){const r=ye.fromString(e,...n);return _v(r),new ht(t,null,new K(r))}{if(!(t instanceof ht||t instanceof Rr))throw new z(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return _v(r),new ht(t.firestore,t instanceof Rr?t.converter:null,new K(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new $x(this,"async_queue_retry"),this.Vu=()=>{const r=yd();r&&W("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=yd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=yd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Un;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!ga(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw Kn("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xp.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Y()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}function Tv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const s=n;for(const i of r)if(i in s&&typeof s[i]=="function")return!0;return!1}(t,["next","error","complete"])}class Qn extends nc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new Ev,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Ev(e),this._firestoreClient=void 0,await e}}}function RP(t,e){const n=typeof t=="object"?t:Hf(),r=typeof t=="string"?t:"(default)",s=Bu(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=cw("firestore");i&&AP(s,...i)}return s}function rc(t){if(t._terminated)throw new z(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bP(t),t._firestoreClient}function bP(t){var e,n,r;const s=t._freezeSettings(),i=function(l,u,d,f){return new iC(l,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,iE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new wP(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const u=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new wi(tt.fromBase64String(e))}catch(n){throw new z(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new wi(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ic{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cp{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CP=/^__.*__$/;class kP{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new ya(e,this.data,n,this.fieldTransforms)}}class aE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function lE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Y()}}class kp{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new kp(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Eu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(lE(this.Cu)&&CP.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class PP{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ju(e)}Qu(e,n,r,s=!1){return new kp({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function oc(t){const e=t._freezeSettings(),n=Ju(t._databaseId);return new PP(t._databaseId,!!e.ignoreUndefinedProperties,n)}function uE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);jp("Data must be an object, but it was:",o,r);const l=cE(r,o);let u,d;if(i.merge)u=new Ot(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const g=zh(e,p,n);if(!o.contains(g))throw new z(V.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);hE(f,g)||f.push(g)}u=new Ot(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new kP(new Nt(l),u,d)}class ac extends ic{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof ac}}class Pp extends ic{_toFieldTransform(e){return new CC(e.path,new ea)}isEqual(e){return e instanceof Pp}}function jP(t,e,n,r){const s=t.Qu(1,e,n);jp("Data must be an object, but it was:",s,r);const i=[],o=Nt.empty();As(r,(u,d)=>{const f=Dp(e,u,n);d=_e(d);const p=s.Nu(f);if(d instanceof ac)i.push(f);else{const g=xa(d,p);g!=null&&(i.push(f),o.set(f,g))}});const l=new Ot(i);return new aE(o,l,s.fieldTransforms)}function DP(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[zh(e,r,n)],u=[s];if(i.length%2!=0)throw new z(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let g=0;g<i.length;g+=2)l.push(zh(e,i[g])),u.push(i[g+1]);const d=[],f=Nt.empty();for(let g=l.length-1;g>=0;--g)if(!hE(d,l[g])){const w=l[g];let I=u[g];I=_e(I);const R=o.Nu(w);if(I instanceof ac)d.push(w);else{const b=xa(I,R);b!=null&&(d.push(w),f.set(w,b))}}const p=new Ot(d);return new aE(f,p,o.fieldTransforms)}function OP(t,e,n,r=!1){return xa(n,t.Qu(r?4:3,e))}function xa(t,e){if(dE(t=_e(t)))return jp("Unsupported field value:",e,t),cE(t,e);if(t instanceof ic)return function(r,s){if(!lE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let u=xa(l,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return AC(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:vu(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:vu(s.serializer,i)}}if(r instanceof bp)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof wi)return{bytesValue:jx(s.serializer,r._byteString)};if(r instanceof ht){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fp(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cp)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw l.Bu("VectorValues must only contain numeric values.");return up(l.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${tc(r)}`)}(t,e)}function cE(t,e){const n={};return lx(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):As(t,(r,s)=>{const i=xa(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function dE(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof bp||t instanceof wi||t instanceof ht||t instanceof ic||t instanceof Cp)}function jp(t,e,n){if(!dE(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=tc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function zh(t,e,n){if((e=_e(e))instanceof sc)return e._internalPath;if(typeof e=="string")return Dp(t,e);throw Eu("Field path arguments must be of type string or ",t,!1,void 0,n)}const LP=new RegExp("[~\\*/\\[\\]]");function Dp(t,e,n){if(e.search(LP)>=0)throw Eu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new sc(...e.split("."))._internalPath}catch{throw Eu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Eu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new z(V.INVALID_ARGUMENT,l+t+u)}function hE(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ht(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new VP(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(lc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class VP extends fE{data(){return super.data()}}function lc(t,e){return typeof e=="string"?Dp(t,e):e instanceof sc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Op{}class Lp extends Op{}function Mt(t,e,...n){let r=[];e instanceof Op&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Vp).length,l=i.filter(u=>u instanceof uc).length;if(o>1||o>0&&l>0)throw new z(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class uc extends Lp{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new uc(e,n,r)}_apply(e){const n=this._parse(e);return gE(e._query,n),new Jn(e.firestore,e.converter,Dh(e._query,n))}_parse(e){const n=oc(e.firestore);return function(i,o,l,u,d,f,p){let g;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){Sv(p,f);const w=[];for(const I of p)w.push(Iv(u,i,I));g={arrayValue:{values:w}}}else g=Iv(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||Sv(p,f),g=OP(l,o,p,f==="in"||f==="not-in");return Fe.create(d,f,g)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Lr(t,e,n){const r=e,s=lc("where",t);return uc._create(s,r,n)}class Vp extends Op{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Vp(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:un.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const u of l)gE(o,u),o=Dh(o,u)}(e._query,n),new Jn(e.firestore,e.converter,Dh(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mp extends Lp{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mp(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Zo(i,o)}(e._query,this._field,this._direction);return new Jn(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ci(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function br(t,e="asc"){const n=e,r=lc("orderBy",t);return Mp._create(r,n)}class Fp extends Lp{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Fp(e,n,r)}_apply(e){return new Jn(e.firestore,e.converter,gu(e._query,this._limit,this._limitType))}}function mE(t){return NP("limit",t),Fp._create("limit",t,"F")}function Iv(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new z(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!yx(e)&&n.indexOf("/")!==-1)throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!K.isDocumentKey(r))throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Wy(t,new K(r))}if(n instanceof ht)return Wy(t,n._key);throw new z(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${tc(n)}.`)}function Sv(t,e){if(!Array.isArray(t)||t.length===0)throw new z(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function gE(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class MP{convertValue(e,n="none"){switch(_s(e)){case 0:return null;case 1:return e.booleanValue;case 2:return je(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(vs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Y()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return As(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>je(o.doubleValue));return new Cp(i)}convertGeoPoint(e){return new bp(je(e.latitude),je(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ip(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Yo(e));default:return null}}convertTimestamp(e){const n=Dr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);ce(Fx(r));const s=new Xo(r.get(1),r.get(3)),i=new K(r.popFirst(5));return s.isEqual(n)||Kn(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class vE extends fE{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Dl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(lc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class Dl extends vE{data(e={}){return super.data(e)}}class _E{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new ho(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Dl(this._firestore,this._userDataWriter,r.key,r,new ho(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const u=new Dl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const u=new Dl(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ho(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:FP(l.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function FP(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Y()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(t){t=kt(t,ht);const e=kt(t.firestore,Qn);return TP(rc(e),t._key).then(n=>xE(e,t,n))}class Up extends MP{constructor(e){super(),this.firestore=e}convertBytes(e){return new wi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new ht(this.firestore,null,n)}}function Sn(t){t=kt(t,Jn);const e=kt(t.firestore,Qn),n=rc(e),r=new Up(e);return pE(t._query),IP(n,t._query).then(s=>new _E(e,r,t,s))}function ra(t,e,n){t=kt(t,ht);const r=kt(t.firestore,Qn),s=yE(t.converter,e,n);return dc(r,[uE(oc(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Kt.none())])}function xi(t,e,n,...r){t=kt(t,ht);const s=kt(t.firestore,Qn),i=oc(s);let o;return o=typeof(e=_e(e))=="string"||e instanceof sc?DP(i,"updateDoc",t._key,e,n,r):jP(i,"updateDoc",t._key,e),dc(s,[o.toMutation(t._key,Kt.exists(!0))])}function wE(t){return dc(kt(t.firestore,Qn),[new cp(t._key,Kt.none())])}function cc(t,e){const n=kt(t.firestore,Qn),r=Ce(t),s=yE(t.converter,e);return dc(n,[uE(oc(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Kt.exists(!1))]).then(()=>r)}function as(t,...e){var n,r,s;t=_e(t);let i={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||Tv(e[o])||(i=e[o],o++);const l={includeMetadataChanges:i.includeMetadataChanges,source:i.source};if(Tv(e[o])){const p=e[o];e[o]=(n=p.next)===null||n===void 0?void 0:n.bind(p),e[o+1]=(r=p.error)===null||r===void 0?void 0:r.bind(p),e[o+2]=(s=p.complete)===null||s===void 0?void 0:s.bind(p)}let u,d,f;if(t instanceof ht)d=kt(t.firestore,Qn),f=Hu(t._key.path),u={next:p=>{e[o]&&e[o](xE(d,t,p))},error:e[o+1],complete:e[o+2]};else{const p=kt(t,Jn);d=kt(p.firestore,Qn),f=p._query;const g=new Up(d);u={next:w=>{e[o]&&e[o](new _E(d,g,p,w))},error:e[o+1],complete:e[o+2]},pE(t._query)}return function(g,w,I,R){const b=new Rp(R),y=new Np(w,b,I);return g.asyncQueue.enqueueAndForget(async()=>Tp(await xu(g),y)),()=>{b.Za(),g.asyncQueue.enqueueAndForget(async()=>Ip(await xu(g),y))}}(rc(d),f,l,u)}function dc(t,e){return function(r,s){const i=new Un;return r.asyncQueue.enqueueAndForget(async()=>hP(await EP(r),s,i)),i.promise}(rc(t),e)}function xE(t,e,n){const r=n.docs.get(e._key),s=new Up(t);return new vE(t,s,e._key,r,new ho(n.hasPendingWrites,n.fromCache),e.converter)}function ws(){return new Pp("serverTimestamp")}(function(e,n=!0){(function(s){bi=s})(Ss),ps(new Pr("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Qn(new qb(r.getProvider("auth-internal")),new Gb(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Xo(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),vn(Uy,"4.7.3",e),vn(Uy,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EE="firebasestorage.googleapis.com",TE="storageBucket",UP=2*60*1e3,BP=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pe extends Nn{constructor(e,n,r=0){super(_d(e),`Firebase Storage: ${n} (${_d(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Pe.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return _d(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ke;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ke||(ke={}));function _d(t){return"storage/"+t}function Bp(){const t="An unknown error occurred, please check the error payload for server response.";return new Pe(ke.UNKNOWN,t)}function $P(t){return new Pe(ke.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function zP(t){return new Pe(ke.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function qP(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Pe(ke.UNAUTHENTICATED,t)}function WP(){return new Pe(ke.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function HP(t){return new Pe(ke.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function KP(){return new Pe(ke.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function GP(){return new Pe(ke.CANCELED,"User canceled the upload/download.")}function QP(t){return new Pe(ke.INVALID_URL,"Invalid URL '"+t+"'.")}function YP(t){return new Pe(ke.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function XP(){return new Pe(ke.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+TE+"' property when initializing the app?")}function JP(){return new Pe(ke.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function ZP(){return new Pe(ke.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function e2(t){return new Pe(ke.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function qh(t){return new Pe(ke.INVALID_ARGUMENT,t)}function IE(){return new Pe(ke.APP_DELETED,"The Firebase app was deleted.")}function t2(t){return new Pe(ke.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ao(t,e){return new Pe(ke.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function to(t){throw new Pe(ke.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=Lt.makeFromUrl(e,n)}catch{return new Lt(e,"")}if(r.path==="")return r;throw YP(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",w=new RegExp(`^https?://${p}/${f}/b/${s}/o${g}`,"i"),I={bucket:1,path:3},R=n===EE?"(?:storage.googleapis.com|storage.cloud.google.com)":n,b="([^?#]*)",y=new RegExp(`^https?://${R}/${s}/${b}`,"i"),T=[{regex:l,indices:u,postModify:i},{regex:w,indices:I,postModify:d},{regex:y,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<T.length;C++){const O=T[C],M=O.regex.exec(e);if(M){const E=M[O.indices.bucket];let x=M[O.indices.path];x||(x=""),r=new Lt(E,x),O.postModify(r);break}}if(r==null)throw QP(e);return r}}class n2{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r2(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function u(){return l===2}let d=!1;function f(...b){d||(d=!0,e.apply(null,b))}function p(b){s=setTimeout(()=>{s=null,t(w,u())},b)}function g(){i&&clearTimeout(i)}function w(b,...y){if(d){g();return}if(b){g(),f.call(null,b,...y);return}if(u()||o){g(),f.call(null,b,...y);return}r<64&&(r*=2);let T;l===1?(l=2,T=0):T=(r+Math.random())*1e3,p(T)}let I=!1;function R(b){I||(I=!0,g(),!d&&(s!==null?(b||(l=2),clearTimeout(s),p(0)):b||(l=1)))}return p(0),i=setTimeout(()=>{o=!0,R(!0)},n),R}function s2(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function i2(t){return t!==void 0}function o2(t){return typeof t=="object"&&!Array.isArray(t)}function $p(t){return typeof t=="string"||t instanceof String}function Nv(t){return zp()&&t instanceof Blob}function zp(){return typeof Blob<"u"}function Av(t,e,n,r){if(r<e)throw qh(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw qh(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function SE(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var ls;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ls||(ls={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l2{constructor(e,n,r,s,i,o,l,u,d,f,p,g=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,I)=>{this.resolve_=w,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new ul(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const u=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===ls.NO_ERROR,u=i.getStatus();if(!l||a2(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===ls.ABORT;r(!1,new ul(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new ul(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(l,l.getResponse());i2(u)?i(u):i()}catch(u){o(u)}else if(l!==null){const u=Bp();u.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,u)):o(u)}else if(s.canceled){const u=this.appDelete_?IE():GP();o(u)}else{const u=KP();o(u)}};this.canceled_?n(!1,new ul(!1,null,!0)):this.backoffId_=r2(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&s2(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class ul{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function u2(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function c2(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function d2(t,e){e&&(t["X-Firebase-GMPID"]=e)}function h2(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function f2(t,e,n,r,s,i,o=!0){const l=SE(t.urlParams),u=t.url+l,d=Object.assign({},t.headers);return d2(d,e),u2(d,n),c2(d,i),h2(d,r),new l2(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function m2(...t){const e=p2();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(zp())return new Blob(t);throw new Pe(ke.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function g2(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){if(typeof atob>"u")throw e2("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class wd{constructor(e,n){this.data=e,this.contentType=n||null}}function v2(t,e){switch(t){case mn.RAW:return new wd(NE(e));case mn.BASE64:case mn.BASE64URL:return new wd(AE(t,e));case mn.DATA_URL:return new wd(w2(e),x2(e))}throw Bp()}function NE(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function _2(t){let e;try{e=decodeURIComponent(t)}catch{throw Ao(mn.DATA_URL,"Malformed data URL.")}return NE(e)}function AE(t,e){switch(t){case mn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Ao(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case mn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Ao(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=y2(e)}catch(s){throw s.message.includes("polyfill")?s:Ao(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class RE{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ao(mn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=E2(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function w2(t){const e=new RE(t);return e.base64?AE(mn.BASE64,e.rest):_2(e.rest)}function x2(t){return new RE(t).contentType}function E2(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hr{constructor(e,n){let r=0,s="";Nv(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Nv(this.data_)){const r=this.data_,s=g2(r,e,n);return s===null?null:new hr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new hr(r,!0)}}static getBlob(...e){if(zp()){const n=e.map(r=>r instanceof hr?r.data_:r);return new hr(m2.apply(null,n))}else{const n=e.map(o=>$p(o)?v2(mn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new hr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bE(t){let e;try{e=JSON.parse(t)}catch{return null}return o2(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function I2(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function CE(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(t,e){return e}class vt{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||S2}}let cl=null;function N2(t){return!$p(t)||t.length<2?t:CE(t)}function kE(){if(cl)return cl;const t=[];t.push(new vt("bucket")),t.push(new vt("generation")),t.push(new vt("metageneration")),t.push(new vt("name","fullPath",!0));function e(i,o){return N2(o)}const n=new vt("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new vt("size");return s.xform=r,t.push(s),t.push(new vt("timeCreated")),t.push(new vt("updated")),t.push(new vt("md5Hash",null,!0)),t.push(new vt("cacheControl",null,!0)),t.push(new vt("contentDisposition",null,!0)),t.push(new vt("contentEncoding",null,!0)),t.push(new vt("contentLanguage",null,!0)),t.push(new vt("contentType",null,!0)),t.push(new vt("metadata","customMetadata",!0)),cl=t,cl}function A2(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new Lt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function R2(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return A2(r,t),r}function PE(t,e,n){const r=bE(e);return r===null?null:R2(t,r,n)}function b2(t,e,n,r){const s=bE(e);if(s===null||!$p(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,p=t.fullPath,g="/b/"+o(f)+"/o/"+o(p),w=qp(g,n,r),I=SE({alt:"media",token:d});return w+I})[0]}function C2(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class jE{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){if(!t)throw Bp()}function k2(t,e){function n(r,s){const i=PE(t,s,e);return DE(i!==null),i}return n}function P2(t,e){function n(r,s){const i=PE(t,s,e);return DE(i!==null),b2(i,s,t.host,t._protocol)}return n}function OE(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=WP():s=qP():n.getStatus()===402?s=zP(t.bucket):n.getStatus()===403?s=HP(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function j2(t){const e=OE(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=$P(t.path)),i.serverResponse=s.serverResponse,i}return n}function D2(t,e,n){const r=e.fullServerUrl(),s=qp(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new jE(s,i,P2(t,n),o);return l.errorHandler=j2(e),l}function O2(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function L2(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=O2(null,e)),r}function V2(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let T="";for(let C=0;C<2;C++)T=T+Math.random().toString().slice(2);return T}const u=l();o["Content-Type"]="multipart/related; boundary="+u;const d=L2(e,r,s),f=C2(d,n),p="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+u+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+u+"--",w=hr.getBlob(p,r,g);if(w===null)throw JP();const I={name:d.fullPath},R=qp(i,t.host,t._protocol),b="POST",y=t.maxUploadRetryTime,_=new jE(R,b,k2(t,n),y);return _.urlParams=I,_.headers=o,_.body=w.uploadData(),_.errorHandler=OE(e),_}class M2{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ls.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ls.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ls.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw to("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw to("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw to("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw to("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw to("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class F2 extends M2{initXhr(){this.xhr_.responseType="text"}}function LE(){return new F2}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n){this._service=e,n instanceof Lt?this._location=n:this._location=Lt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new xs(e,n)}get root(){const e=new Lt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return CE(this._location.path)}get storage(){return this._service}get parent(){const e=T2(this._location.path);if(e===null)return null;const n=new Lt(this._location.bucket,e);return new xs(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw t2(e)}}function U2(t,e,n){t._throwIfRoot("uploadBytes");const r=V2(t.storage,t._location,kE(),new hr(e,!0),n);return t.storage.makeRequestWithTokens(r,LE).then(s=>({metadata:s,ref:t}))}function B2(t){t._throwIfRoot("getDownloadURL");const e=D2(t.storage,t._location,kE());return t.storage.makeRequestWithTokens(e,LE).then(n=>{if(n===null)throw ZP();return n})}function $2(t,e){const n=I2(t._location.path,e),r=new Lt(t._location.bucket,n);return new xs(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z2(t){return/^[A-Za-z]+:\/\//.test(t)}function q2(t,e){return new xs(t,e)}function VE(t,e){if(t instanceof Wp){const n=t;if(n._bucket==null)throw XP();const r=new xs(n,n._bucket);return e!=null?VE(r,e):r}else return e!==void 0?$2(t,e):t}function W2(t,e){if(e&&z2(e)){if(t instanceof Wp)return q2(t,e);throw qh("To use ref(service, url), the first argument must be a Storage instance.")}else return VE(t,e)}function Rv(t,e){const n=e==null?void 0:e[TE];return n==null?null:Lt.makeFromBucketSpec(n,t)}function H2(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:fw(s,t.app.options.projectId))}class Wp{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=EE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=UP,this._maxUploadRetryTime=BP,this._requests=new Set,s!=null?this._bucket=Lt.makeFromBucketSpec(s,this._host):this._bucket=Rv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Lt.makeFromBucketSpec(this._url,e):this._bucket=Rv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Av("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Av("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new xs(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new n2(IE());{const o=f2(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const bv="@firebase/storage",Cv="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME="storage";function FE(t,e,n){return t=_e(t),U2(t,e,n)}function UE(t){return t=_e(t),B2(t)}function BE(t,e){return t=_e(t),W2(t,e)}function $E(t=Hf(),e){t=_e(t);const r=Bu(t,ME).getImmediate({identifier:e}),s=cw("storage");return s&&K2(r,...s),r}function K2(t,e,n,r={}){H2(t,e,n,r)}function G2(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Wp(n,r,s,e,Ss)}function Q2(){ps(new Pr(ME,G2,"PUBLIC").setMultipleInstances(!0)),vn(bv,Cv,""),vn(bv,Cv,"esm2017")}Q2();const Y2={apiKey:"AIzaSyC1iM3g3gGfu23GKLpDRQplBuHidPniFIk",authDomain:"albayt-sofra.firebaseapp.com",projectId:"albayt-sofra",storageBucket:"albayt-sofra.appspot.com",messagingSenderId:"895117143740",appId:"1:895117143740:web:239cfccc93d101c1f36ab9",measurementId:"G-FK3746ERH8"},Ea=gw(Y2),Ue=Mb(Ea),ee=RP(Ea),X2=$E(Ea,"gs://albayt-sofra.firebasestorage.app"),zE=P.createContext({user:null,role:null,loading:!0,logout:async()=>{}}),J2=({children:t})=>{const[e,n]=P.useState(null),[r,s]=P.useState(null),[i,o]=P.useState(!0);P.useEffect(()=>{const u=N1(Ue,async d=>{if(n(d),d){const f=await Tn(Ce(ee,"users",d.uid)),p=f.exists()?f.data().role:null;s(p)}else s(null);o(!1)});return()=>u()},[]);const l=async()=>{await en(Ue)};return c.jsx(zE.Provider,{value:{user:e,role:r,loading:i,logout:l},children:t})},It=()=>P.useContext(zE);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z2=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),ej=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),kv=t=>{const e=ej(t);return e.charAt(0).toUpperCase()+e.slice(1)},qE=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),tj=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var nj={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rj=P.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:i,iconNode:o,...l},u)=>P.createElement("svg",{ref:u,...nj,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:qE("lucide",s),...!i&&!tj(l)&&{"aria-hidden":"true"},...l},[...o.map(([d,f])=>P.createElement(d,f)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qr=(t,e)=>{const n=P.forwardRef(({className:r,...s},i)=>P.createElement(rj,{ref:i,iconNode:e,className:qE(`lucide-${Z2(kv(t))}`,`lucide-${t}`,r),...s}));return n.displayName=kv(t),n};/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sj=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],ij=qr("briefcase",sj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],aj=qr("circle-check",oj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lj=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],uj=qr("circle-x",lj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cj=[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]],dj=qr("clipboard-list",cj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hj=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],fj=qr("clock",hj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pj=[["path",{d:"M4 5h16",key:"1tepv9"}],["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 19h16",key:"1djgab"}]],mj=qr("menu",pj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gj=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],yj=qr("settings",gj);/**
 * @license lucide-react v0.544.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vj=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],_j=qr("utensils",vj),Re=({to:t,label:e,onClick:n})=>{const{pathname:r}=Ai(),s=r===t;return c.jsx(xt,{to:t,onClick:n,className:"px-3 py-2 rounded-xl text-sm font-semibold transition-all duration-300 "+(s?"bg-accent text-primary shadow-md scale-105":"text-secondary hover:text-yellow-300 hover:bg-primary/60"),children:e})},wj=()=>{const{user:t,role:e,logout:n}=It(),[r,s]=P.useState(!1);return c.jsxs("header",{className:"sticky top-0 bg-gradient-to-r from-primary via-primary/90 to-dark shadow-lg border-b-4 border-accent z-30",children:[c.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-3 flex items-center justify-between",children:[c.jsx(xt,{to:"/",className:"text-2xl font-extrabold text-accent flex items-center gap-2 hover:scale-105 transition-transform",children:"🍗 سفرة البيت"}),c.jsxs("nav",{className:"hidden md:flex items-center gap-3",children:[c.jsx(Re,{to:"/restaurants",label:"المطاعم"}),e==="customer"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/cart",label:"🛒 السلة"}),c.jsx(Re,{to:"/orders",label:"طلباتي"})]}),e==="owner"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/owner",label:"لوحة المطعم"}),c.jsx(Re,{to:"/owner/orders",label:"طلبات المطعم"}),c.jsx(Re,{to:"/owner/courier-requests",label:"طلبات المندوبين"})," "]}),e==="courier"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/courier",label:"واجهة المندوب"}),c.jsx(Re,{to:"/courier/hiring",label:"طلبات التوظيف"})," "]}),e==="admin"&&c.jsx(Re,{to:"/admin/panel",label:"لوحة المشرفات"}),t?c.jsx("button",{onClick:n,className:"px-4 py-2 rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-red-700 to-red-500 hover:scale-105 hover:shadow-md transition-all duration-300",children:"خروج"}):c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/login",label:"دخول"}),c.jsx(Re,{to:"/admin/login",label:"دخول المشرفات"})]})]}),c.jsx("button",{className:"md:hidden p-2 rounded-xl hover:bg-primary/40 transition",onClick:()=>s(!r),children:c.jsx(mj,{className:"w-6 h-6 text-accent"})})]}),r&&c.jsxs("div",{className:"md:hidden bg-primary border-t-2 border-accent px-4 py-3 flex flex-col gap-2 text-secondary shadow-inner",children:[c.jsx(Re,{to:"/restaurants",label:"المطاعم",onClick:()=>s(!1)}),e==="customer"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/cart",label:"🛒 السلة",onClick:()=>s(!1)}),c.jsx(Re,{to:"/orders",label:"طلباتي",onClick:()=>s(!1)})]}),e==="owner"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/owner",label:"لوحة المطعم",onClick:()=>s(!1)}),c.jsx(Re,{to:"/owner/orders",label:"طلبات المطعم",onClick:()=>s(!1)}),c.jsx(Re,{to:"/owner/courier-requests",label:"طلبات المندوبين",onClick:()=>s(!1)})]}),e==="courier"&&c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/courier",label:"واجهة المندوب",onClick:()=>s(!1)}),c.jsx(Re,{to:"/courier/hiring",label:"طلبات التوظيف",onClick:()=>s(!1)})]}),e==="admin"&&c.jsx(Re,{to:"/admin/panel",label:"لوحة المشرفات",onClick:()=>s(!1)}),t?c.jsx("button",{onClick:()=>{n(),s(!1)},className:"mt-2 px-4 py-2 rounded-xl text-sm font-semibold text-white bg-gradient-to-r from-red-700 to-red-500 hover:scale-105 transition-all duration-300",children:"خروج"}):c.jsxs(c.Fragment,{children:[c.jsx(Re,{to:"/login",label:"دخول",onClick:()=>s(!1)}),c.jsx(Re,{to:"/admin/login",label:"دخول المشرفات",onClick:()=>s(!1)})]})]})]})},xj=()=>{const{user:t}=It(),e=Is(),n=async()=>{if(!(!t||!window.confirm("هل أنت متأكد أنك تريد حذف حسابك نهائيًا؟")))try{await wE(Ce(ee,"users",t.uid)),await A1(Ue.currentUser),alert("تم حذف حسابك بنجاح ✅"),e("/account-deleted")}catch(s){console.error("Error deleting account:",s),alert("حدث خطأ أثناء حذف الحساب. يرجى المحاولة لاحقًا.")}};return c.jsx("footer",{className:"bg-[#7b0000] text-yellow-100 text-center py-8 mt-20 border-t-4 border-yellow-500 shadow-[0_-4px_12px_rgba(0,0,0,0.4)]",children:c.jsxs("div",{className:"flex flex-col items-center gap-4 px-3",children:[c.jsxs("p",{className:"text-sm md:text-base font-medium tracking-wide",children:["جميع الحقوق محفوظة © ",new Date().getFullYear()," 🍗"," ",c.jsx("span",{className:"font-bold text-yellow-400",children:"سفرة البيت"})," |",c.jsx(xt,{to:"/developer",className:"text-yellow-300 hover:text-yellow-200 font-semibold ml-1 transition-all duration-300",children:"المطور"})]}),c.jsxs("div",{className:"flex flex-wrap justify-center items-center gap-3 w-full",children:[c.jsx(xt,{to:"/privacy-policy",className:"flex items-center justify-center gap-2 bg-gradient-to-r from-yellow-400 to-yellow-500 text-[#4a0000] font-bold px-5 py-2 rounded-full shadow-md hover:scale-105 hover:shadow-lg transition-transform duration-300 whitespace-nowrap w-[170px]",children:"📜 سياسة الخصوصية"}),c.jsx("span",{className:"hidden sm:inline text-yellow-400 text-xl font-bold",children:"|"}),t&&c.jsx("button",{onClick:n,className:"flex items-center justify-center gap-2 bg-gradient-to-r from-red-700 to-red-500 text-white font-semibold px-5 py-2 rounded-full shadow-md hover:scale-105 hover:shadow-lg transition-transform duration-300 whitespace-nowrap w-[170px]",children:"🗑️ حذف حسابي"})]})]})})},Ej=()=>c.jsx("div",{className:"w-full bg-red-600 text-white py-2 overflow-hidden",children:c.jsx("div",{className:"marquee whitespace-nowrap font-bold text-sm",children:'"جوعان؟ 🤤 اطلب أكلك من سفرة البيت ونوصل أكلك لين باب بيتك!"'})}),Pv="broast_cart";function Hp(){const[t,e]=P.useState(()=>{try{const l=localStorage.getItem(Pv);return l?JSON.parse(l):[]}catch{return[]}});P.useEffect(()=>{localStorage.setItem(Pv,JSON.stringify(t))},[t]);const n=(l,u=1)=>{e(d=>{const f=d.findIndex(p=>p.id===l.id);if(f>=0){const p=[...d];return p[f]={...p[f],qty:p[f].qty+u,ownerId:l.ownerId??p[f].ownerId},p}return[...d,{...l,qty:u}]})},r=l=>e(u=>u.filter(d=>d.id!==l)),s=(l,u)=>e(d=>d.map(f=>f.id===l?{...f,qty:u}:f)),i=()=>e([]),o=t.reduce((l,u)=>l+u.price*u.qty,0);return{items:t,add:n,remove:r,changeQty:s,clear:i,subtotal:o}}const Tj=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(!0),{add:s,subtotal:i,items:o}=Hp(),{role:l}=It();P.useEffect(()=>{(async()=>{const d=Mt(Oe(ee,"menuItems"),Lr("available","==",!0)),p=(await Sn(d)).docs.map(w=>({id:w.id,...w.data()})),g=await Promise.all(p.map(async w=>{if(!w.ownerId)return w;const I=await Tn(Ce(ee,"restaurants",w.ownerId));return I.exists()?{...w,restaurant:I.data()}:w}));e(g),r(!1)})()},[]);const u=d=>{var p;if(!d.ownerId){alert("⚠️ الصنف غير مرتبط بمطعم (ownerId مفقود)");return}const f=(p=o[0])==null?void 0:p.ownerId;if(f&&f!==d.ownerId){alert("⚠️ لا يمكن إضافة منتجات من أكثر من مطعم في نفس الطلب");return}s({id:d.id,name:d.name,price:d.price,ownerId:d.ownerId})};return n?c.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"⏳ جارِ تحميل القائمة..."}):c.jsxs("div",{className:"py-10",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"🍗 قائمة الأصناف"}),t.length===0&&c.jsx("div",{className:"text-center text-gray-400",children:"😔 لا توجد أصناف حالياً"}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(d=>c.jsxs("div",{className:"bg-gray-800 text-white rounded-2xl shadow hover:shadow-xl transition p-4 flex flex-col",children:[d.restaurant&&c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[d.restaurant.logoUrl?c.jsx("img",{src:d.restaurant.logoUrl,alt:d.restaurant.name,className:"w-10 h-10 rounded-full object-cover border border-gray-700"}):c.jsx("div",{className:"w-10 h-10 flex items-center justify-center rounded-full bg-gray-600 text-xl",children:"🍴"}),c.jsx("span",{className:"font-semibold",children:d.restaurant.name})]}),c.jsx("div",{className:"h-48 bg-gray-700 rounded-xl mb-3 flex items-center justify-center overflow-hidden",children:d.imageUrl?c.jsx("img",{src:d.imageUrl,alt:d.name,className:"w-full h-full object-cover rounded-xl"}):c.jsx("span",{className:"text-gray-400",children:"بدون صورة"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-bold text-lg",children:d.name}),d.desc&&c.jsx("p",{className:"text-sm text-gray-300 mt-1",children:d.desc})]}),c.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[c.jsxs("span",{className:"font-bold text-xl text-yellow-400",children:[d.price.toFixed(2)," ر.س"]}),l==="customer"&&c.jsx("button",{onClick:()=>u(d),disabled:!d.ownerId,className:`px-4 py-2 rounded-xl font-semibold transition ${d.ownerId?"bg-yellow-500 hover:bg-yellow-600 text-black":"bg-gray-500 text-white cursor-not-allowed"}`,children:"🛒 أضف للسلة"})]})]},d.id))}),i>0&&l==="customer"&&c.jsx("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2",children:c.jsxs(xt,{to:"/checkout",className:"px-6 py-3 rounded-full bg-yellow-500 text-black shadow-xl font-bold hover:bg-yellow-600 transition",children:["إتمام الطلب • المجموع: ",i.toFixed(2)," ر.س"]})})]})},jv=t=>{const e=[t.accountType,t.ownerType].find(n=>typeof n=="string");return e?e.trim().toLowerCase():""},Ij=t=>([t.freelancerCertificate,t.freelanceCertificate].find(n=>typeof n=="string")||"").trim(),Sj=t=>([t.commercialRegistration,t.crNumber].find(n=>typeof n=="string")||"").trim(),Nj=["family","productive-family","productive_family","productive"],Aj=["restaurant","resturant","commercial"],Kp=({defaultMode:t="general"})=>{const e=Is(),[n,r]=P.useState(t),[s,i]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState(!1),[f,p]=P.useState(null),[g,w]=P.useState(""),[I,R]=P.useState(""),[b,y]=P.useState(""),[_,T]=P.useState(!1),[C,O]=P.useState(null),[M,E]=P.useState(""),[x,S]=P.useState(""),[N,k]=P.useState(""),[j,A]=P.useState(!1),[mt,$t]=P.useState(null);P.useEffect(()=>{r(t)},[t]);const Wr=P.useMemo(()=>[{id:"general",title:"العملاء والمندوبين",subtitle:"دخولك المعتاد لحساب العميل أو المندوب."},{id:"family",title:"الأسر المنتجة",subtitle:"دخول خاص بالأسر المنتجة مع التحقق من شهادة العمل الحر."},{id:"restaurant",title:"المطاعم",subtitle:"دخول أصحاب المطاعم مع التحقق من السجل التجاري."}],[]),Yt=()=>{p(null),O(null),$t(null)},$=async H=>{H.preventDefault(),p(null),d(!0);try{const de=(await Al(Ue,s.trim(),o)).user.uid,Ne=await Tn(Ce(ee,"users",de));if(!Ne.exists())throw await en(Ue),new Error("⚠️ الحساب موجود في النظام ولكن لا توجد له بيانات في السجلات الداخلية.");switch(Ne.data().role){case"owner":e("/owner");break;case"courier":e("/courier");break;case"admin":e("/admin/panel");break;default:e("/")}}catch(te){const de=te instanceof Error&&te.message?te.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";p(de)}finally{d(!1)}},Q=async H=>{H.preventDefault();const te=b.trim();if(!te){O("الرجاء إدخال رقم شهادة العمل الحر المعتمدة.");return}O(null),T(!0);try{const de=await Al(Ue,g.trim(),I),Ne=Ce(ee,"users",de.user.uid),nt=await Tn(Ne);if(!nt.exists())throw await en(Ue),new Error("تعذّر العثور على بيانات الحساب. يرجى التواصل مع الدعم.");const Ke=nt.data();if(Ke.role!=="owner")throw await en(Ue),new Error("هذا الحساب غير مسجل كحساب أسرة منتجة.");const Hr=jv(Ke);if(Hr&&!Nj.includes(Hr))throw await en(Ue),new Error("هذا الحساب مسجل كنوع مختلف. استخدمي الوضع المناسب للحساب.");const An=Ij(Ke);if(An&&An!==te)throw await en(Ue),new Error("رقم شهادة العمل الحر غير مطابق للسجل لدينا.");An||await ra(Ne,{accountType:"family",freelancerCertificate:te},{merge:!0}),e("/owner",{replace:!0})}catch(de){const Ne=de instanceof Error&&de.message?de.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";O(Ne)}finally{T(!1)}},Z=async H=>{H.preventDefault();const te=N.trim();if(!te){$t("الرجاء إدخال رقم السجل التجاري المرتبط بالحساب.");return}$t(null),A(!0);try{const de=await Al(Ue,M.trim(),x),Ne=Ce(ee,"users",de.user.uid),nt=await Tn(Ne);if(!nt.exists())throw await en(Ue),new Error("تعذّر العثور على بيانات الحساب. يرجى التواصل مع الدعم.");const Ke=nt.data();if(Ke.role!=="owner")throw await en(Ue),new Error("هذا الحساب غير مسجل كحساب مطعم.");const Hr=jv(Ke);if(Hr&&!Aj.includes(Hr))throw await en(Ue),new Error("هذا الحساب مسجل كنوع مختلف. استخدم الوضع المناسب للحساب.");const An=Sj(Ke);if(An&&An!==te)throw await en(Ue),new Error("رقم السجل التجاري غير مطابق للسجل لدينا.");An||await ra(Ne,{accountType:"restaurant",commercialRegistration:te},{merge:!0}),e("/owner",{replace:!0})}catch(de){const Ne=de instanceof Error&&de.message?de.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً.";$t(Ne)}finally{A(!1)}},pe=()=>{switch(n){case"family":return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-amber-300/70",children:"برنامج الأسر المنتجة"}),c.jsx("h2",{className:"text-3xl font-extrabold text-amber-200",children:"تسجيل دخول الأسر المنتجة"}),c.jsx("p",{className:"text-sm text-amber-100/80",children:"استخدمي بيانات الدخول الخاصة بك وأدخلي رقم شهادة العمل الحر للتحقق."})]}),C&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:C}),c.jsxs("form",{onSubmit:Q,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-email",className:"block text-sm font-medium text-amber-100/90",children:"البريد الإلكتروني المسجل"}),c.jsx("input",{id:"family-email",type:"email",autoComplete:"email",required:!0,value:g,onChange:H=>w(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:_})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-password",className:"block text-sm font-medium text-amber-100/90",children:"كلمة المرور"}),c.jsx("input",{id:"family-password",type:"password",autoComplete:"current-password",required:!0,value:I,onChange:H=>R(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:_})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"family-certificate",className:"block text-sm font-medium text-amber-100/90",children:"رقم شهادة العمل الحر"}),c.jsx("input",{id:"family-certificate",type:"text",inputMode:"numeric",autoComplete:"off",value:b,onChange:H=>y(H.target.value),className:"w-full rounded-2xl border border-amber-200/30 bg-[#3a211c] px-4 py-3 text-base text-amber-50 shadow-inner placeholder:text-amber-200/50 focus:border-amber-300 focus:outline-none focus:ring-2 focus:ring-amber-400/60",disabled:_}),c.jsx("p",{className:"text-xs text-amber-100/70",children:"يمكنك العثور على الرقم في شهادة العمل الحر الصادرة من منصة العمل الحر."})]}),c.jsx("button",{type:"submit",disabled:_,className:"w-full rounded-2xl bg-amber-300/90 py-3 text-base font-semibold text-[#2c1b17] shadow-lg transition hover:bg-amber-200 focus:outline-none focus:ring-2 focus:ring-amber-400/70 disabled:cursor-not-allowed disabled:opacity-70",children:_?"جارٍ التحقق...":"تسجيل الدخول"})]})]});case"restaurant":return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-sky-300/70",children:"منصة المطاعم"}),c.jsx("h2",{className:"text-3xl font-extrabold text-sky-200",children:"تسجيل دخول المطاعم"}),c.jsx("p",{className:"text-sm text-sky-100/80",children:"أدخل بيانات حساب المطعم مع رقم السجل التجاري للتحقق من الهوية."})]}),mt&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:mt}),c.jsxs("form",{onSubmit:Z,className:"space-y-4",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-email",className:"block text-sm font-medium text-sky-100/90",children:"البريد الإلكتروني للمطعم"}),c.jsx("input",{id:"restaurant-email",type:"email",autoComplete:"email",required:!0,value:M,onChange:H=>E(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:j})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-password",className:"block text-sm font-medium text-sky-100/90",children:"كلمة المرور"}),c.jsx("input",{id:"restaurant-password",type:"password",autoComplete:"current-password",required:!0,value:x,onChange:H=>S(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:j})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-cr",className:"block text-sm font-medium text-sky-100/90",children:"رقم السجل التجاري"}),c.jsx("input",{id:"restaurant-cr",type:"text",inputMode:"numeric",autoComplete:"off",value:N,onChange:H=>k(H.target.value),className:"w-full rounded-2xl border border-sky-200/30 bg-[#13252f] px-4 py-3 text-base text-sky-50 shadow-inner placeholder:text-sky-200/50 focus:border-sky-300 focus:outline-none focus:ring-2 focus:ring-sky-400/60",disabled:j}),c.jsx("p",{className:"text-xs text-sky-100/70",children:"أدخل الرقم كما هو مسجل في وزارة التجارة."})]}),c.jsx("button",{type:"submit",disabled:j,className:"w-full rounded-2xl bg-sky-300/90 py-3 text-base font-semibold text-[#102026] shadow-lg transition hover:bg-sky-200 focus:outline-none focus:ring-2 focus:ring-sky-400/70 disabled:cursor-not-allowed disabled:opacity-70",children:j?"جارٍ التحقق...":"تسجيل الدخول"})]})]});default:return c.jsxs(c.Fragment,{children:[c.jsxs("header",{className:"space-y-2 text-center",children:[c.jsx("h2",{className:"text-3xl font-extrabold text-accent",children:"دخول العملاء والمندوبين"}),c.jsx("p",{className:"text-sm text-secondary/80",children:"سجّل دخولك باستخدام البريد الإلكتروني وكلمة المرور لاستكمال طلباتك."})]}),f&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:f}),c.jsxs("form",{onSubmit:$,className:"space-y-4",children:[c.jsx("input",{type:"email",placeholder:"الإيميل",className:"w-full rounded-xl border border-accent/30 bg-[#3c211c] p-3 text-secondary placeholder-[#f8deb0b3] focus:outline-none focus:ring-2 focus:ring-accent",value:s,onChange:H=>i(H.target.value),disabled:u,required:!0,autoComplete:"email"}),c.jsx("input",{type:"password",placeholder:"كلمة المرور",className:"w-full rounded-xl border border-accent/30 bg-[#3c211c] p-3 text-secondary placeholder-[#f8deb0b3] focus:outline-none focus:ring-2 focus:ring-accent",value:o,onChange:H=>l(H.target.value),disabled:u,required:!0,autoComplete:"current-password"}),c.jsx("button",{disabled:u,className:"w-full rounded-xl bg-accent p-3 font-bold text-primary shadow-lg transition hover:scale-105 hover:bg-[#d3a442] disabled:cursor-not-allowed disabled:opacity-70",children:u?"جارٍ الدخول...":"دخول"})]}),c.jsxs("p",{className:"mt-6 text-center text-sm text-secondary/80",children:["ليس لديك حساب؟"," ",c.jsx(xt,{className:"font-semibold text-accent hover:text-[#e0b861]",to:"/register",children:"سجّل الآن"})]})]})}};return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center gap-10 bg-gradient-to-br from-primary via-dark to-[#3a1a1a] px-4 py-16",children:[c.jsx("section",{className:"w-full max-w-4xl space-y-6",children:c.jsx("div",{className:"grid gap-3 md:grid-cols-3",children:Wr.map(H=>{const te=n===H.id,de=H.id==="family"?"border-amber-200/30 bg-[rgba(39,22,19,0.88)] text-amber-50 hover:border-amber-300 hover:shadow-amber-500/30":H.id==="restaurant"?"border-sky-200/30 bg-[rgba(12,24,30,0.9)] text-sky-50 hover:border-sky-300 hover:shadow-sky-500/30":"border-accent/30 bg-[rgba(43,26,22,0.85)] text-secondary hover:border-accent hover:shadow-amber-400/30";return c.jsxs("button",{type:"button",onClick:()=>{Yt(),r(H.id)},className:`group flex flex-col justify-between rounded-3xl border p-5 text-right shadow-xl transition focus:outline-none focus:ring-2 focus:ring-accent/60 ${de} ${te?"ring-2 ring-accent/60":"opacity-80 hover:opacity-100"}`,children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("h3",{className:"text-xl font-bold",children:H.title}),c.jsx("p",{className:"text-sm opacity-80",children:H.subtitle})]}),c.jsx("span",{className:`mt-4 inline-flex items-center justify-center rounded-2xl px-5 py-2 text-sm font-semibold transition ${H.id==="family"?"bg-amber-300/90 text-[#2c1b17]":H.id==="restaurant"?"bg-sky-300/90 text-[#102026]":"bg-accent text-primary"} ${te?"":"group-hover:scale-105 group-hover:brightness-110"}`,children:te?"الوضع الحالي":"اختيار"})]},H.id)})})}),c.jsx("div",{className:`w-full max-w-xl rounded-3xl border p-8 shadow-2xl backdrop-blur-xl ${n==="family"?"border-amber-200/30 bg-[rgba(39,22,19,0.88)] text-amber-50":n==="restaurant"?"border-sky-200/30 bg-[rgba(12,24,30,0.9)] text-sky-50":"border-accent/30 bg-[rgba(43,26,22,0.85)] text-secondary"}`,children:pe()})]})},Rj=()=>{const[t,e]=P.useState(""),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState(""),[f,p]=P.useState(!1),g=Is(),w=async I=>{if(I.preventDefault(),!u)return alert("اختر نوع الحساب");if(u==="owner"&&!o)return alert("أدخل اسم المطعم");p(!0);try{const R=await zw(Ue,t,n);await ra(Ce(ee,"users",R.user.uid),{name:s,email:t,role:u,restaurantName:u==="owner"?o:null}),g("/")}catch(R){alert(R.message)}finally{p(!1)}};return c.jsxs("div",{className:"max-w-md mx-auto bg-gradient-to-br from-gray-700 via-gray-800 to-gray-900 rounded-2xl shadow-xl p-6 text-white",children:[c.jsx("h1",{className:"text-xl font-bold mb-4 text-center",children:"إنشاء حساب"}),c.jsxs("form",{onSubmit:w,className:"space-y-3",children:[c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"الاسم",value:s,onChange:I=>i(I.target.value)}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"الإيميل",value:t,onChange:I=>e(I.target.value)}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"كلمة المرور",type:"password",value:n,onChange:I=>r(I.target.value)}),c.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:[c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="customer"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"customer",className:"hidden",onChange:()=>d("customer")})," عميل"]}),c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="courier"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"courier",className:"hidden",onChange:()=>d("courier")})," مندوب"]}),c.jsxs("label",{className:"border rounded-xl p-3 text-center cursor-pointer "+(u==="owner"?"bg-yellow-500 text-black":"bg-gray-100 text-gray-800"),children:[c.jsx("input",{type:"radio",name:"role",value:"owner",className:"hidden",onChange:()=>d("owner")})," صاحب المطعم"]})]}),u==="owner"&&c.jsx("input",{className:"w-full border rounded-xl p-3 text-black",placeholder:"اسم المطعم",value:o,onChange:I=>l(I.target.value)}),c.jsx("button",{disabled:f,className:"w-full rounded-xl p-3 bg-yellow-500 text-black font-bold hover:bg-yellow-600 transition",children:f?"...":"تسجيل"})]})]})},Zt=({allow:t,children:e})=>{const{role:n,loading:r}=It();return r?c.jsx("div",{className:"p-8 text-center",children:"جارِ التحميل..."}):!n||!t.includes(n)?c.jsx(iw,{to:"/",replace:!0}):c.jsx(c.Fragment,{children:e})},bj=()=>{const{items:t,subtotal:e,clear:n}=Hp(),{user:r}=It(),s=Is(),[i,o]=P.useState(""),[l,u]=P.useState(!1),[d,f]=P.useState(null),[p,g]=P.useState(null),w=7,I=.15,R=+(e*I).toFixed(2),b=e+R,y=b+w;P.useEffect(()=>{(async()=>{var x,S;if(t.length===0)return;let O=(x=t[0])==null?void 0:x.ownerId;if(!O&&((S=t[0])!=null&&S.id))try{const N=await Tn(Ce(ee,"menuItems",t[0].id)),k=N.exists()?N.data():null;O=(k==null?void 0:k.ownerId)||null}catch(N){console.error("خطأ في جلب بيانات الصنف:",N)}if(!O){f(null);return}const M=await Tn(Ce(ee,"restaurants",O)),E=M.exists()?M.data():null;f({id:O,name:(E==null?void 0:E.name)||"مطعم"})})()},[t]);const _=()=>{if(!navigator.geolocation)return alert("المتصفح لا يدعم تحديد الموقع");navigator.geolocation.getCurrentPosition(C=>{console.log("📍 موقعك الحالي:",C.coords),g({lat:C.coords.latitude,lng:C.coords.longitude})},C=>{console.error("خطأ في تحديد الموقع:",C),alert("تعذر تحديد الموقع. تأكد من منح إذن الوصول للموقع.")},{enableHighAccuracy:!0})},T=async()=>{var O;if(!r)return;if(t.length===0)return alert("السلة فارغة");if(!i)return alert("أدخل العنوان");if(!p)return alert("حدّد موقعك على الخريطة");let C=d==null?void 0:d.id;if(!C&&((O=t[0])!=null&&O.id)){const M=await Tn(Ce(ee,"menuItems",t[0].id)),E=M.exists()?M.data():null;C=(E==null?void 0:E.ownerId)||null}if(!C){alert("تعذر تحديد المطعم للطلب. أعد الإضافة من القائمة.");return}u(!0),await cc(Oe(ee,"orders"),{customerId:r.uid,restaurantId:C,restaurantName:(d==null?void 0:d.name)||"مطعم",items:t.map(M=>({id:M.id,name:M.name,price:M.price,qty:M.qty,ownerId:M.ownerId??C})),subtotal:e,deliveryFee:w,total:y,commissionRate:I,commissionAmount:R,totalBeforeDelivery:b,restaurantPayout:e,applicationShare:R,status:"pending",address:i,location:p,createdAt:ws(),updatedAt:ws(),paymentMethod:"cod"}),n(),u(!1),s("/orders")};return c.jsx(Zt,{allow:["customer"],children:c.jsxs("div",{className:"max-w-xl mx-auto bg-white rounded-2xl shadow p-6 text-gray-900",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"إتمام الطلب"}),c.jsx("div",{className:"border rounded-xl p-3 text-gray-800",children:t.map(C=>c.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[c.jsxs("span",{className:"text-sm",children:[C.name," × ",C.qty]}),c.jsxs("span",{className:"font-semibold",children:[(C.price*C.qty).toFixed(2)," ر.س"]})]},C.id))}),c.jsx("input",{className:"w-full border rounded-xl p-3 text-gray-900 placeholder-gray-500 mt-3",placeholder:"العنوان التفصيلي",value:i,onChange:C=>o(C.target.value)}),c.jsx("button",{onClick:_,className:"w-full mt-3 rounded-xl p-3 bg-blue-600 text-white font-semibold hover:bg-blue-700",children:"📍 تحديد موقعي الحالي"}),p&&c.jsx("iframe",{title:"خريطة الموقع",width:"100%",height:"250",style:{borderRadius:"12px",marginTop:"10px"},loading:"lazy",allowFullScreen:!0,src:`https://maps.google.com/maps?hl=ar&q=${p.lat},${p.lng}&z=15&output=embed`}),c.jsxs("div",{className:"bg-gray-50 rounded-xl p-3 text-gray-800 mt-3",children:[c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"المجموع الأساسي"}),c.jsxs("span",{children:[e.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"ضريبة التطبيق (15٪)"}),c.jsxs("span",{children:[R.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between text-sm",children:[c.jsx("span",{children:"رسوم التوصيل"}),c.jsxs("span",{children:[w.toFixed(2)," ر.س"]})]}),c.jsxs("div",{className:"flex items-center justify-between font-bold text-lg mt-1 text-gray-900",children:[c.jsx("span",{children:"الإجمالي"}),c.jsxs("span",{children:[y.toFixed(2)," ر.س"]})]}),c.jsxs("p",{className:"text-[11px] text-gray-500 mt-2",children:["يصل للمطعم ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[e.toFixed(2)," ر.س"]}),"، وتُضاف ضريبة التطبيق آلياً بقيمة ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[R.toFixed(2)," ر.س"]})," لحساب المنصة."]})]}),c.jsx("button",{disabled:l,onClick:T,className:"w-full rounded-xl p-3 bg-green-600 hover:bg-green-700 text-white font-bold mt-3",children:l?"...":"تأكيد الطلب (دفع عند الاستلام)"})]})})},Cj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState(null),[i,o]=P.useState(null);P.useEffect(()=>{if(!t)return;s(null),o(null);const u=Mt(Oe(ee,"orders"),Lr("customerId","==",t.uid),br("createdAt","desc")),d=as(u,f=>{n(f.docs.map(p=>({id:p.id,...p.data()}))),s(null)},async f=>{console.error("TrackOrders onSnapshot error:",f),s("⚠️ احتمال تحتاج Composite Index لـ customerId + createdAt. بنعرض البيانات بدون ترتيب مؤقتًا.");const p=Mt(Oe(ee,"orders"),Lr("customerId","==",t.uid)),w=(await Sn(p)).docs.map(b=>({id:b.id,...b.data()})),I=Mt(Oe(ee,"orders"),br("createdAt","desc"),mE(5));let R=[];try{R=(await Sn(I)).docs.map(y=>{var T,C,O,M;const _=y.data();return{id:y.id,customerId:_.customerId,restaurantId:_.restaurantId,createdAt:((M=(O=(C=(T=_.createdAt)==null?void 0:T.toDate)==null?void 0:C.call(T))==null?void 0:O.toISOString)==null?void 0:M.call(O))??null}})}catch{}o({uid:t.uid,fallbackCount:w.length,sample:R}),n(w)});return()=>d()},[t]);const l=u=>({pending:"قيد المراجعة",accepted:"تم القبول",preparing:"قيد التحضير",ready:"جاهز للتسليم",out_for_delivery:"في الطريق",delivered:"تم التسليم",cancelled:"ملغي"})[u]||u;return c.jsxs("div",{className:"space-y-3",children:[c.jsx("h1",{className:"text-xl font-bold",children:"طلباتي"}),r&&c.jsxs("div",{className:"text-xs bg-yellow-50 text-yellow-800 border border-yellow-200 rounded-xl p-3",children:[r,i&&c.jsxs("div",{className:"mt-1",children:[c.jsxs("div",{children:["UID: ",c.jsx("b",{children:i.uid})]}),c.jsxs("div",{children:["عدد نتائج الفولبّاك: ",c.jsx("b",{children:i.fallbackCount})]}),Array.isArray(i.sample)&&i.sample.length>0&&c.jsxs("div",{className:"mt-1",children:[c.jsx("div",{className:"font-semibold",children:"عينة (أحدث 5):"}),i.sample.map(u=>c.jsxs("div",{className:"truncate",children:["#",u.id," • customerId: ",String(u.customerId)," • restaurantId: ",String(u.restaurantId)," • createdAt: ",u.createdAt||"—"]},u.id))]})]})]}),e.map(u=>{var y;const d=Number(u.deliveryFee??0),f=Number(u.restaurantPayout??u.subtotal??0),p=Number(u.commissionRate??.15),g=u.applicationShare??u.commissionAmount??(Number.isFinite(f)?+(f*p).toFixed(2):0),w=Number(g),I=Number.isFinite(f)&&Number.isFinite(w)&&Number.isFinite(d)?f+w+d:0,R=Number(u.total??I),b=_=>Number.isFinite(_)?_.toFixed(2):"0.00";return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{className:"font-bold",children:["طلب #",u.id.slice(-6)]}),c.jsx("div",{className:"text-sm px-3 py-1 rounded-full bg-gray-900 text-white",children:l(u.status)})]}),u.restaurantName&&c.jsxs("div",{className:"mt-1 text-yellow-600 font-semibold",children:["المطعم: ",u.restaurantName]}),c.jsx("div",{className:"mt-2 text-sm text-gray-700",children:(y=u.items)==null?void 0:y.map(_=>`${_.name}×${_.qty}`).join(" • ")}),c.jsxs("div",{className:"mt-2 font-bold",children:["الإجمالي المدفوع: ",b(R)," ر.س"]}),c.jsxs("div",{className:"mt-1 text-xs text-gray-500 leading-relaxed",children:["يشمل حصة المطعم بقيمة ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[b(f)," ر.س"]})," ","وضريبة التطبيق بنسبة 15٪ بمبلغ"," ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[b(w)," ر.س"]})," بالإضافة إلى رسوم التوصيل"," ",c.jsxs("span",{className:"font-semibold text-gray-700",children:[b(d)," ر.س"]}),"."]})]},u.id)}),e.length===0&&!r&&c.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات حتى الآن."})]})},kj=()=>{const t=[{to:"/owner/menu",title:"إدارة القائمة",desc:"إضافة، تعديل أو إخفاء الأصناف والوجبات.",icon:c.jsx(_j,{className:"w-8 h-8 text-yellow-500"}),color:"from-yellow-50 to-white"},{to:"/owner/orders",title:"إدارة الطلبات",desc:"قبول الطلبات، تحديث الحالة، وتعيين المندوب.",icon:c.jsx(dj,{className:"w-8 h-8 text-green-500"}),color:"from-green-50 to-white"},{to:"/owner/edit",title:"تعديل بيانات المطعم",desc:"تغيير الاسم، رقم الجوال، المدينة والموقع.",icon:c.jsx(yj,{className:"w-8 h-8 text-blue-500"}),color:"from-blue-50 to-white"}];return c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:t.map((e,n)=>c.jsxs(xt,{to:e.to,className:`rounded-2xl shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 bg-gradient-to-br ${e.color} p-6 flex flex-col`,children:[c.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.icon,c.jsx("h3",{className:"text-lg font-extrabold text-gray-900",children:e.title})]}),c.jsx("p",{className:"text-sm text-gray-600 flex-1",children:e.desc})]},n))})},Pj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState(!0),[i,o]=P.useState({name:"",desc:"",price:0,available:!0}),l=$E(Ea,"gs://albayt-sofra.firebasestorage.app"),u=async()=>{if(!t)return;const g=Mt(Oe(ee,"menuItems"),Lr("ownerId","==",t.uid)),w=await Sn(g);n(w.docs.map(I=>({id:I.id,...I.data()}))),s(!1)};P.useEffect(()=>{u()},[t]);const d=async g=>{if(g.preventDefault(),!t)return alert("⚠️ لازم تسجل دخول أول");let w={...i,price:Number(i.price),ownerId:t.uid};if(i.file){const I=i.file,R=BE(l,"menuImages/"+Date.now()+"_"+I.name);await FE(R,I),w.imageUrl=await UE(R)}delete w.file,await cc(Oe(ee,"menuItems"),w),o({name:"",desc:"",price:0,available:!0}),u()},f=async(g,w)=>{g&&(await xi(Ce(ee,"menuItems",g),{available:!w}),u())},p=async g=>{g&&confirm("حذف الصنف نهائيًا؟")&&(await wE(Ce(ee,"menuItems",g)),u())};return r?c.jsx("div",{children:"جارِ تحميل الأصناف..."}):c.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[c.jsxs("form",{onSubmit:d,className:"bg-white rounded-2xl shadow p-6 space-y-3",children:[c.jsx("h2",{className:"text-lg font-bold",children:"إضافة صنف"}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"اسم الصنف",value:i.name,onChange:g=>o({...i,name:g.target.value})}),c.jsx("textarea",{className:"w-full border rounded-xl p-3",placeholder:"الوصف (اختياري)",value:i.desc,onChange:g=>o({...i,desc:g.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"السعر",type:"number",value:i.price,onChange:g=>o({...i,price:Number(g.target.value)})}),c.jsx("input",{className:"w-full border rounded-xl p-3",type:"file",accept:"image/*",onChange:g=>{var w;return o({...i,file:(w=g.target.files)==null?void 0:w[0]})}}),c.jsxs("label",{className:"flex items-center gap-2 text-sm",children:[c.jsx("input",{type:"checkbox",checked:i.available,onChange:g=>o({...i,available:g.target.checked})}),"متاح"]}),c.jsx("button",{className:"px-4 py-2 rounded-xl bg-gray-900 text-white",children:"حفظ"})]}),c.jsxs("div",{className:"space-y-3",children:[e.map(g=>{var w,I;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center gap-4",children:[c.jsx("img",{src:g.imageUrl||"",className:"w-20 h-20 object-cover rounded-xl bg-gray-100",onError:R=>{R.currentTarget.style.display="none"}}),c.jsxs("div",{className:"flex-1",children:[c.jsx("div",{className:"font-bold",children:g.name}),c.jsx("div",{className:"text-sm text-gray-600",children:g.desc}),c.jsxs("div",{className:"font-semibold mt-1",children:[(I=(w=g.price)==null?void 0:w.toFixed)==null?void 0:I.call(w,2)," ر.س"]})]}),c.jsx("button",{onClick:()=>f(g.id,g.available),className:"px-3 py-2 rounded-xl text-sm bg-blue-600 text-white",children:g.available?"تعطيل":"تفعيل"}),c.jsx("button",{onClick:()=>p(g.id),className:"px-3 py-2 rounded-xl text-sm bg-red-600 text-white",children:"حذف"})]},g.id)}),e.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا توجد أصناف بعد."})]})]})},Dv=t=>({pending:"⏳ قيد المراجعة",accepted:"✅ تم القبول",preparing:"👨‍🍳 قيد التحضير",ready:"📦 جاهز",out_for_delivery:"🚚 في الطريق",delivered:"🎉 تم التسليم",cancelled:"❌ ملغي"})[t]||t,jj=t=>{switch(t){case"pending":return"bg-gray-200 text-gray-800";case"accepted":return"bg-blue-200 text-blue-800";case"preparing":return"bg-yellow-200 text-yellow-800";case"ready":return"bg-purple-200 text-purple-800";case"out_for_delivery":return"bg-indigo-200 text-indigo-800";case"delivered":return"bg-green-200 text-green-800";case"cancelled":return"bg-red-200 text-red-800";default:return"bg-gray-100 text-gray-700"}},Dj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState(null),i=P.useMemo(()=>(t==null?void 0:t.uid)??null,[t]);P.useEffect(()=>{if(!i)return;s(null);const l=as(Oe(ee,"orders"),u=>{const f=u.docs.map(p=>({id:p.id,...p.data()})).filter(p=>{var I,R;const g=p.restaurantId===i,w=((R=(I=p==null?void 0:p.items)==null?void 0:I[0])==null?void 0:R.ownerId)===i;return g||w});f.sort((p,g)=>{var R,b,y,_;const w=((b=(R=p.createdAt)==null?void 0:R.toMillis)==null?void 0:b.call(R))??0;return(((_=(y=g.createdAt)==null?void 0:y.toMillis)==null?void 0:_.call(y))??0)-w}),n(f),s(null)},u=>{console.error("Firestore error:",u),s("حدثت مشكلة في جلب الطلبات.")});return()=>l()},[i]);const o=async(l,u)=>{await xi(Ce(ee,"orders",l),{status:u,updatedAt:ws()})};return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h1",{className:"text-2xl font-extrabold text-yellow-500",children:"📋 إدارة الطلبات"}),r&&c.jsx("div",{className:"text-red-500 text-sm mb-2",children:r}),e.map(l=>{var b;const u=Number(l.deliveryFee??0),d=Number(l.restaurantPayout??l.subtotal??0),f=Number(l.commissionRate??.15),p=l.applicationShare??l.commissionAmount??(Number.isFinite(d)?+(d*f).toFixed(2):0),g=Number(p),w=Number.isFinite(d)&&Number.isFinite(g)&&Number.isFinite(u)?d+g+u:0,I=Number(l.total??w),R=y=>Number.isFinite(y)?y.toFixed(2):"0.00";return c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-5 text-gray-900 space-y-4 transition hover:shadow-2xl",children:[c.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[c.jsxs("div",{className:"font-bold text-lg",children:["طلب #",l.id.slice(-6),c.jsx("span",{className:"text-gray-500 text-sm ml-2",children:(b=l.items)==null?void 0:b.map(y=>`${y.name}×${y.qty}`).join(" • ")})]}),c.jsxs("div",{className:"font-extrabold text-xl text-green-600",children:[R(I)," ر.س"]})]}),c.jsxs("div",{className:"grid gap-3 sm:grid-cols-3 text-sm text-gray-700",children:[c.jsxs("div",{className:"rounded-xl bg-yellow-50 border border-yellow-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"حصة المطعم"}),c.jsxs("p",{className:"text-base font-semibold text-primary",children:[R(d)," ر.س"]})]}),c.jsxs("div",{className:"rounded-xl bg-rose-50 border border-rose-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"ضريبة التطبيق (15٪)"}),c.jsxs("p",{className:"text-base font-semibold text-rose-600",children:[R(g)," ر.س"]})]}),c.jsxs("div",{className:"rounded-xl bg-emerald-50 border border-emerald-200 p-3",children:[c.jsx("p",{className:"text-xs text-gray-500",children:"رسوم التوصيل"}),c.jsxs("p",{className:"text-base font-semibold text-emerald-600",children:[R(u)," ر.س"]})]})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("span",{className:"text-sm font-semibold",children:"الحالة:"}),c.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-bold ${jj(l.status)}`,children:Dv(l.status||"pending")})]}),c.jsxs("div",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold",children:"العنوان:"})," ",l.address]}),l.location&&c.jsxs("div",{className:"mt-3",children:[c.jsx("h3",{className:"font-semibold text-sm text-gray-800 mb-2",children:"📍 موقع العميل:"}),c.jsx("iframe",{title:`map-${l.id}`,width:"100%",height:"250",style:{borderRadius:"12px"},loading:"lazy",allowFullScreen:!0,src:`https://www.google.com/maps?q=${l.location.lat},${l.location.lng}&hl=ar&z=15&output=embed`})]}),c.jsx("div",{className:"mt-3 grid grid-cols-2 sm:flex sm:flex-wrap gap-2",children:["accepted","preparing","ready","out_for_delivery","delivered","cancelled"].map(y=>c.jsx("button",{onClick:()=>o(l.id,y),className:"px-4 py-2 rounded-xl text-sm font-semibold bg-gray-100 hover:bg-gray-200 transition",children:Dv(y)},y))})]},l.id)}),e.length===0&&!r&&c.jsx("div",{className:"text-gray-400 text-center text-lg",children:"🚫 لا توجد طلبات حالياً."})]})},Oj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState([]);P.useEffect(()=>{const l=Mt(Oe(ee,"orders"),Lr("status","in",["ready"]),br("createdAt","desc")),u=as(l,p=>n(p.docs.map(g=>({id:g.id,...g.data()})))),d=Mt(Oe(ee,"orders"),Lr("courierId","==",(t==null?void 0:t.uid)||""),br("createdAt","desc")),f=as(d,p=>s(p.docs.map(g=>({id:g.id,...g.data()}))));return()=>{u(),f()}},[t==null?void 0:t.uid]);const i=async l=>{t&&await xi(Ce(ee,"orders",l),{courierId:t.uid,status:"out_for_delivery",updatedAt:new Date})},o=async l=>{await xi(Ce(ee,"orders",l),{status:"delivered",updatedAt:new Date})};return c.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold mb-3",children:"طلبات جاهزة للتسليم"}),c.jsxs("div",{className:"space-y-3",children:[e.map(l=>{var u,d;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6)," • ",(d=(u=l.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ر.س"]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["العنوان: ",l.address]}),c.jsx("button",{onClick:()=>i(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-gray-900 text-white text-sm",children:"استلام الطلب"})]},l.id)}),e.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا توجد طلبات جاهزة الآن."})]})]}),c.jsxs("div",{children:[c.jsx("h2",{className:"font-bold mb-3",children:"طلباتي"}),c.jsxs("div",{className:"space-y-3",children:[r.map(l=>{var u,d;return c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4",children:[c.jsxs("div",{className:"font-bold",children:["#",l.id.slice(-6)," • ",(d=(u=l.total)==null?void 0:u.toFixed)==null?void 0:d.call(u,2)," ر.س"]}),c.jsxs("div",{className:"text-sm text-gray-600",children:["العنوان: ",l.address]}),c.jsx("button",{onClick:()=>o(l.id),className:"mt-2 px-3 py-2 rounded-xl bg-green-600 text-white text-sm",children:"تم التسليم"})]},l.id)}),r.length===0&&c.jsx("div",{className:"text-gray-600",children:"لا يوجد لديك طلبات حالياً."})]})]})]})},Lj=t=>{if(t&&typeof t=="object"){const e=t;switch(e.code){case"auth/invalid-credential":case"auth/wrong-password":return"بيانات الدخول غير صحيحة.";case"auth/user-not-found":return"لا يوجد حساب مشرفة مرتبط بهذا البريد الإلكتروني.";case"auth/email-already-in-use":return"هذا البريد الإلكتروني مرتبط بحساب آخر بالفعل.";case"auth/weak-password":return"الرجاء اختيار كلمة مرور أقوى (٦ أحرف على الأقل).";default:if(e.message&&e.message.trim().length>0)return e.message}}return t instanceof Error&&t.message.trim().length>0?t.message:"حدث خطأ غير متوقع. يرجى المحاولة لاحقاً."},Vj=()=>{const[t,e]=P.useState("login"),[n,r]=P.useState(""),[s,i]=P.useState(""),[o,l]=P.useState(""),[u,d]=P.useState(!1),[f,p]=P.useState(null),g=Is(),w=P.useCallback(()=>{r(""),i(""),l(""),p(null),d(!1)},[]),I=async()=>{var T;const y=await Al(Ue,s.trim(),o),_=await Tn(Ce(ee,"users",y.user.uid));if(!_.exists()||((T=_.data())==null?void 0:T.role)!=="admin")throw await en(Ue),new Error("هذا الحساب غير مخوّل للوصول إلى لوحة المشرفات.");g("/admin/panel",{replace:!0})},R=async()=>{const y=n.trim();if(!y)throw new Error("أدخلي اسم المشرفة.");const _=s.trim().toLowerCase(),T=await zw(Ue,_,o);await T1(T.user,{displayName:y}),await ra(Ce(ee,"users",T.user.uid),{role:"admin",email:_,name:y,createdAt:ws()}),g("/admin/panel",{replace:!0})},b=async y=>{y.preventDefault(),d(!0),p(null);try{t==="login"?await I():await R()}catch(_){p(Lj(_))}finally{d(!1)}};return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 px-4 py-12",children:c.jsxs("div",{className:"mx-auto flex min-h-[75vh] max-w-2xl flex-col justify-center space-y-8 rounded-3xl border border-white/15 bg-white/10 p-10 text-white shadow-2xl backdrop-blur-xl",children:[c.jsxs("header",{className:"text-center space-y-2",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-yellow-400",children:"لوحة المشرفات"}),c.jsx("p",{className:"text-sm text-slate-200",children:"الدخول متاح للمشرفات المصرّح لهن فقط"})]}),c.jsxs("div",{className:"grid grid-cols-2 gap-2 rounded-2xl bg-white/10 p-1",children:[c.jsx("button",{type:"button",onClick:()=>{e("login"),w()},className:`rounded-2xl py-2 font-semibold transition ${t==="login"?"bg-yellow-400 text-slate-950 shadow-lg":"text-slate-200 hover:text-white"}`,disabled:u,children:"دخول المشرفة"}),c.jsx("button",{type:"button",onClick:()=>{e("register"),w()},className:`rounded-2xl py-2 font-semibold transition ${t==="register"?"bg-yellow-400 text-slate-950 shadow-lg":"text-slate-200 hover:text-white"}`,disabled:u,children:"تسجيل مشرفة جديدة"})]}),f&&c.jsx("div",{className:"rounded-2xl border border-rose-400/40 bg-rose-500/10 p-3 text-center text-sm text-rose-100",children:f}),c.jsxs("form",{className:"space-y-5",onSubmit:b,children:[t==="register"&&c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-name",className:"block text-sm font-medium text-slate-200",children:"اسم المشرفة"}),c.jsx("input",{id:"admin-name",type:"text",autoComplete:"name",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"مثال: سارة القحطاني",value:n,onChange:y=>r(y.target.value),disabled:u})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-email",className:"block text-sm font-medium text-slate-200",children:"البريد الإلكتروني"}),c.jsx("input",{id:"admin-email",type:"email",required:!0,autoComplete:"email",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"name@example.com",value:s,onChange:y=>i(y.target.value),disabled:u})]}),c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{htmlFor:"admin-password",className:"block text-sm font-medium text-slate-200",children:t==="login"?"كلمة المرور":"كلمة مرور المشرفة الجديدة"}),c.jsx("input",{id:"admin-password",type:"password",required:!0,autoComplete:t==="login"?"current-password":"new-password",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-base shadow-inner focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/60",placeholder:"••••••••",value:o,onChange:y=>l(y.target.value),disabled:u})]}),c.jsx("button",{type:"submit",disabled:u,className:"w-full rounded-2xl bg-yellow-400 py-3 text-base font-semibold text-slate-950 transition hover:bg-yellow-500 hover:shadow-lg disabled:cursor-not-allowed disabled:opacity-70",children:u?"جارٍ المعالجة...":t==="login"?"دخول المشرفة":"إنشاء حساب مشرفة"})]}),c.jsxs("div",{className:"space-y-2 text-center text-xs text-slate-300",children:[c.jsx("p",{children:"في حال واجهتِ مشكلة في الدخول يرجى التواصل مع فريق الدعم."}),c.jsx(xt,{to:"/",className:"text-yellow-300 transition hover:text-yellow-200",children:"العودة إلى الصفحة الرئيسية"})]})]})})},Mj=[{id:"overview",label:"نظرة عامة",description:"ملخص لأهم أرقام المنصة اليوم."},{id:"commission",label:"العمولة",description:"متابعة عمولة المنصة وحساب التوزيعات."},{id:"restaurants",label:"إدارة المطاعم",description:"طلبات الانضمام، حالة التفعيل، والمتابعة اليومية."},{id:"reports",label:"التقارير",description:"إحصاءات دورية واستبصارات تساعد في اتخاذ القرار."}],Cn=t=>`${t.toLocaleString("ar-SA",{minimumFractionDigits:2})} ر.س`,dl=t=>{const e=Number(t);return Number.isFinite(e)?e:0},xd=t=>{if(!t)return null;if(t instanceof Date)return Number.isNaN(t.getTime())?null:t;if(typeof t=="string"||typeof t=="number"){const e=new Date(t);return Number.isNaN(e.getTime())?null:e}if(typeof t=="object"){const e=t;if(typeof e.toDate=="function"){const n=e.toDate();return Number.isNaN(n.getTime())?null:n}if(typeof e.seconds=="number"){const n=new Date(e.seconds*1e3);return Number.isNaN(n.getTime())?null:n}}return null},Ed=t=>t?t.toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"}):"—",Ov=t=>({pending:"قيد المراجعة",accepted:"تم القبول",preparing:"قيد التحضير",ready:"جاهز",out_for_delivery:"في الطريق",delivered:"تم التسليم",cancelled:"ملغي"})[t]??t,Fj=t=>{switch(t){case"pending":return"bg-gray-100 text-gray-700";case"accepted":return"bg-blue-100 text-blue-700";case"preparing":return"bg-yellow-100 text-yellow-700";case"ready":return"bg-purple-100 text-purple-700";case"out_for_delivery":return"bg-indigo-100 text-indigo-700";case"delivered":return"bg-emerald-100 text-emerald-700";case"cancelled":return"bg-rose-100 text-rose-700";default:return"bg-slate-100 text-slate-700"}},Uj=t=>{switch(t){case"approved":return"bg-emerald-100 text-emerald-700";case"rejected":return"bg-rose-100 text-rose-700";default:return"bg-yellow-100 text-yellow-700"}},Bj=()=>{const{user:t}=It(),[e,n]=P.useState("overview"),[r,s]=P.useState([]),[i,o]=P.useState([]),[l,u]=P.useState([]),[d,f]=P.useState(!1),[p,g]=P.useState(null);P.useEffect(()=>{const y=Mt(Oe(ee,"orders"),br("createdAt","desc")),_=as(y,T=>{s(T.docs.map(C=>{const O=C.data(),M=dl(O.restaurantAmount??O.restaurantTotal??O.subtotal??O.total??0),E=dl(O.appCommission??O.platformCommission??O.commission??M*.15),x=dl(O.deliveryFee??O.delivery??0),S=dl(O.total??M+E+x);return{id:C.id,status:String(O.status??"pending"),createdAt:xd(O.createdAt),baseAmount:M,commissionAmount:E,deliveryFee:x,total:S,restaurantName:String(O.restaurantName??O.restaurant??"مطعم غير معروف"),items:Array.isArray(O.items)?O.items:[]}}))});return()=>_()},[]),P.useEffect(()=>{const y=Mt(Oe(ee,"restaurants"),br("createdAt","desc")),_=as(y,T=>{o(T.docs.map(C=>{const O=C.data();return{id:C.id,name:String(O.name??"مطعم غير معروف"),ownerName:O.ownerName?String(O.ownerName):void 0,city:O.city?String(O.city):void 0,status:O.status?String(O.status):void 0,createdAt:xd(O.createdAt)}}))});return()=>_()},[]),P.useEffect(()=>{const y=Mt(Oe(ee,"restaurantRequests"),br("createdAt","desc")),_=as(y,T=>{u(T.docs.map(C=>{const O=C.data(),M=String(O.status??"pending");return{id:C.id,name:String(O.name??"مطعم بدون اسم"),ownerName:O.ownerName?String(O.ownerName):void 0,notes:O.notes?String(O.notes):void 0,status:M,createdAt:xd(O.createdAt)}}))});return()=>_()},[]);const w=P.useMemo(()=>{const y=r.reduce((C,O)=>{if(C.restaurant+=O.baseAmount,C.commission+=O.commissionAmount,C.delivery+=O.deliveryFee,C.total+=O.total,C.count+=1,C.byStatus[O.status]=(C.byStatus[O.status]??0)+1,O.createdAt){const M=`${O.createdAt.getFullYear()}-${String(O.createdAt.getMonth()+1).padStart(2,"0")}`,E=C.byMonth.get(M)??{commission:0,payout:0,count:0};E.commission+=O.commissionAmount,E.payout+=O.baseAmount,E.count+=1,C.byMonth.set(M,E)}return C},{restaurant:0,commission:0,delivery:0,total:0,count:0,byStatus:{},byMonth:new Map}),_=Array.from(y.byMonth.entries()).map(([C,O])=>({month:C,...O})).sort((C,O)=>C.month>O.month?1:-1),T=l.filter(C=>C.status==="pending");return{...y,monthlyBreakdown:_,pendingRequests:T}},[r,l]),I=async(y,_)=>{try{await xi(Ce(ee,"restaurantRequests",y),{status:_,reviewedAt:ws()}),g({kind:"success",message:"تم تحديث حالة الطلب بنجاح."})}catch(T){console.error(T),g({kind:"error",message:"تعذر تحديث حالة الطلب، يرجى المحاولة لاحقاً."})}},R=async y=>{const _=String(y.get("name")??"").trim(),T=String(y.get("ownerName")??"").trim(),C=String(y.get("notes")??"").trim();if(!_){g({kind:"error",message:"يرجى إدخال اسم المطعم."});return}try{f(!0),await cc(Oe(ee,"restaurantRequests"),{name:_,ownerName:T||null,notes:C||null,status:"pending",createdAt:ws()}),g({kind:"success",message:"تم إرسال طلب الانضمام، وسيتم مراجعته قريباً."})}catch(O){console.error(O),g({kind:"error",message:"تعذر إرسال الطلب، يرجى المحاولة لاحقاً."})}finally{f(!1)}},b=y=>{y.preventDefault();const _=new FormData(y.currentTarget);y.currentTarget.reset(),R(_)};return P.useEffect(()=>{if(!p)return;const y=window.setTimeout(()=>g(null),4e3);return()=>window.clearTimeout(y)},[p]),t?c.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[c.jsx("header",{className:"border-b border-white/10 bg-slate-900/70 backdrop-blur",children:c.jsxs("div",{className:"mx-auto flex max-w-6xl flex-col gap-4 px-6 py-8 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h1",{className:"text-3xl font-extrabold text-yellow-400",children:"لوحة تحكم سفرة البيت"}),c.jsxs("p",{className:"text-sm text-slate-200",children:["مرحباً ",t.email??"مشرفة","! تابعي مؤشرات الأداء وطلبات الانضمام في مكان واحد."]})]}),c.jsxs("div",{className:"rounded-2xl bg-white/5 px-4 py-2 text-xs text-slate-200",children:["آخر تحديث: ",new Date().toLocaleTimeString("ar-SA")]})]})}),c.jsxs("main",{className:"mx-auto max-w-6xl px-6 py-10",children:[p&&c.jsx("div",{className:`mb-6 rounded-3xl border px-4 py-3 text-sm ${p.kind==="success"?"border-emerald-500/40 bg-emerald-500/10 text-emerald-100":"border-rose-500/40 bg-rose-500/10 text-rose-100"}`,children:p.message}),c.jsx("nav",{className:"grid gap-3 rounded-3xl bg-white/5 p-2 sm:grid-cols-2 lg:grid-cols-4",children:Mj.map(y=>c.jsxs("button",{onClick:()=>n(y.id),className:`rounded-2xl px-4 py-5 text-right transition focus:outline-none focus:ring-2 focus:ring-yellow-400/60 ${e===y.id?"bg-yellow-400 text-slate-950 shadow-lg":"bg-slate-900/60 text-slate-200 hover:bg-slate-900"}`,children:[c.jsx("p",{className:"text-base font-semibold",children:y.label}),c.jsx("p",{className:"mt-2 text-xs opacity-80",children:y.description})]},y.id))}),c.jsxs("section",{className:"mt-8 space-y-8",children:[e==="overview"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:[c.jsxs("div",{className:"rounded-3xl bg-gradient-to-br from-yellow-400 to-yellow-500 p-6 text-slate-950 shadow-lg",children:[c.jsx("p",{className:"text-sm font-medium",children:"إجمالي الطلبات"}),c.jsx("p",{className:"mt-3 text-3xl font-extrabold",children:w.count}),c.jsx("p",{className:"mt-1 text-xs text-slate-900/70",children:"آخر ٧ أيام محدثة لحظياً من فواتير المطاعم."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"حصة المنصة"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-yellow-300",children:Cn(w.commission)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"شامل جميع الطلبات المسجلة."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"مستحقات المطاعم"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-emerald-300",children:Cn(w.restaurant)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"يتم تحويلها تلقائياً بعد خصم العمولة."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"طلبات قيد المراجعة"}),c.jsx("p",{className:"mt-3 text-2xl font-bold text-sky-300",children:w.pendingRequests.length}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"طلبات انضمام المطاعم التي تنتظر الاعتماد."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsxs("div",{className:"mb-4 flex items-center justify-between",children:[c.jsx("h2",{className:"text-lg font-semibold",children:"الطلبات الأخيرة"}),c.jsx("span",{className:"text-xs text-slate-300",children:"يتم التحديث مباشرةً من Firestore"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"التاريخ"}),c.jsx("th",{className:"px-3 py-2",children:"الإجمالي"}),c.jsx("th",{className:"px-3 py-2",children:"عمولة التطبيق"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[r.slice(0,8).map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:y.restaurantName}),c.jsx("td",{className:"px-3 py-2",children:Ed(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:Cn(y.total)}),c.jsx("td",{className:"px-3 py-2",children:Cn(y.commissionAmount)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${Fj(y.status)}`,children:Ov(y.status)})})]},y.id)),r.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لا توجد طلبات مسجلة حالياً."})})]})]})})]})]}),e==="commission"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"إجمالي العمولة"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-yellow-300",children:Cn(w.commission)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"مجموع ما سيتم تحويله إلى رصيد التطبيق."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"إجمالي صافي المطاعم"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-emerald-300",children:Cn(w.restaurant)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"بعد خصم العمولة (15٪) تلقائياً من كل طلب."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:"رسوم التوصيل"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-sky-300",children:Cn(w.delivery)}),c.jsx("p",{className:"mt-1 text-xs text-slate-400",children:"للاطلاع فقط، لا تدخل ضمن عمولة المنصة."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"توزيع شهري"}),c.jsxs("div",{className:"mt-6 space-y-4",children:[w.monthlyBreakdown.length===0&&c.jsx("p",{className:"text-sm text-slate-300",children:"لا يوجد بيانات كافية حالياً."}),w.monthlyBreakdown.map(y=>c.jsxs("div",{className:"grid gap-4 rounded-2xl bg-slate-900/60 p-4 sm:grid-cols-4",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"الشهر"}),c.jsx("p",{className:"text-base font-semibold",children:y.month})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"عمولة التطبيق"}),c.jsx("p",{className:"text-sm font-medium text-yellow-300",children:Cn(y.commission)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"صافي المطاعم"}),c.jsx("p",{className:"text-sm font-medium text-emerald-300",children:Cn(y.payout)})]}),c.jsxs("div",{children:[c.jsx("p",{className:"text-xs text-slate-300",children:"عدد الطلبات"}),c.jsx("p",{className:"text-sm font-medium text-slate-100",children:y.count})]})]},y.month))]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"تفاصيل الاحتساب"}),c.jsxs("ul",{className:"mt-4 list-disc space-y-2 pr-6 text-sm text-slate-200",children:[c.jsx("li",{children:"يتم احتساب عمولة التطبيق تلقائياً بنسبة 15٪ من إجمالي الطلب قبل رسوم التوصيل."}),c.jsx("li",{children:"يظهر صافي المطعم بعد خصم العمولة مباشرة في سجل الطلب."}),c.jsx("li",{children:"يمكن تصدير الأرقام إلى التقارير الشهرية من تبويب التقارير."})]})]})]}),e==="restaurants"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"إضافة طلب انضمام جديد"}),c.jsx("p",{className:"mt-1 text-sm text-slate-300",children:"يتم إرسال الطلب إلى قائمة المراجعة للموافقة أو الرفض."}),c.jsxs("form",{className:"mt-6 grid gap-4 md:grid-cols-2",onSubmit:b,children:[c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-name",className:"text-xs text-slate-200",children:"اسم المطعم"}),c.jsx("input",{id:"restaurant-name",name:"name",required:!0,placeholder:"مطعم سفرة البيت",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsxs("div",{className:"md:col-span-1 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-owner",className:"text-xs text-slate-200",children:"اسم المالك (اختياري)"}),c.jsx("input",{id:"restaurant-owner",name:"ownerName",placeholder:"أم أحمد",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsxs("div",{className:"md:col-span-2 space-y-2",children:[c.jsx("label",{htmlFor:"restaurant-notes",className:"text-xs text-slate-200",children:"ملاحظات إضافية"}),c.jsx("textarea",{id:"restaurant-notes",name:"notes",rows:3,placeholder:"روابط السوشيال، نوع المطبخ، أوقات العمل...",className:"w-full rounded-2xl border border-white/20 bg-slate-900/70 px-4 py-3 text-sm focus:border-yellow-400 focus:outline-none focus:ring-2 focus:ring-yellow-400/70"})]}),c.jsx("div",{className:"md:col-span-2 flex justify-end",children:c.jsx("button",{type:"submit",disabled:d,className:"rounded-2xl bg-yellow-400 px-6 py-3 text-sm font-semibold text-slate-950 transition hover:bg-yellow-500 disabled:cursor-not-allowed disabled:opacity-70",children:d?"جارٍ الإرسال...":"إضافة الطلب"})})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsxs("div",{className:"mb-4 flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"طلبات الانضمام"}),c.jsxs("span",{className:"text-xs text-slate-300",children:[w.pendingRequests.length," طلب قيد المراجعة"]})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"المالكة"}),c.jsx("th",{className:"px-3 py-2",children:"التاريخ"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"}),c.jsx("th",{className:"px-3 py-2",children:"التحكم"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[l.map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:c.jsxs("div",{className:"space-y-1",children:[c.jsx("p",{children:y.name}),y.notes&&c.jsx("p",{className:"text-xs text-slate-400",children:y.notes})]})}),c.jsx("td",{className:"px-3 py-2",children:y.ownerName??"—"}),c.jsx("td",{className:"px-3 py-2",children:Ed(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:`inline-flex rounded-full px-3 py-1 text-xs font-semibold ${Uj(y.status)}`,children:y.status==="pending"?"قيد المراجعة":y.status==="approved"?"تمت الموافقة":"مرفوض"})}),c.jsx("td",{className:"px-3 py-2",children:c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsx("button",{onClick:()=>I(y.id,"approved"),className:"rounded-2xl bg-emerald-400/20 px-3 py-1 text-xs font-semibold text-emerald-200 hover:bg-emerald-400/30",children:"قبول"}),c.jsx("button",{onClick:()=>I(y.id,"rejected"),className:"rounded-2xl bg-rose-400/20 px-3 py-1 text-xs font-semibold text-rose-200 hover:bg-rose-400/30",children:"رفض"})]})})]},y.id)),l.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لا توجد طلبات حالياً."})})]})]})})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"المطاعم النشطة"}),c.jsx("div",{className:"mt-4 overflow-x-auto",children:c.jsxs("table",{className:"min-w-full text-right text-sm",children:[c.jsx("thead",{className:"text-xs uppercase text-slate-300",children:c.jsxs("tr",{className:"border-b border-white/10",children:[c.jsx("th",{className:"px-3 py-2",children:"المطعم"}),c.jsx("th",{className:"px-3 py-2",children:"المالكة"}),c.jsx("th",{className:"px-3 py-2",children:"المدينة"}),c.jsx("th",{className:"px-3 py-2",children:"تاريخ الإضافة"}),c.jsx("th",{className:"px-3 py-2",children:"الحالة"})]})}),c.jsxs("tbody",{className:"divide-y divide-white/5 text-slate-200",children:[i.map(y=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-3 py-2 font-medium",children:y.name}),c.jsx("td",{className:"px-3 py-2",children:y.ownerName??"—"}),c.jsx("td",{className:"px-3 py-2",children:y.city??"—"}),c.jsx("td",{className:"px-3 py-2",children:Ed(y.createdAt)}),c.jsx("td",{className:"px-3 py-2",children:c.jsx("span",{className:"inline-flex rounded-full bg-white/10 px-3 py-1 text-xs font-semibold",children:y.status??"نشط"})})]},y.id)),i.length===0&&c.jsx("tr",{children:c.jsx("td",{colSpan:5,className:"px-3 py-6 text-center text-slate-400",children:"لم يتم تسجيل مطاعم بعد."})})]})]})})]})]}),e==="reports"&&c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[Object.entries(w.byStatus).map(([y,_])=>c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("p",{className:"text-sm text-slate-200",children:Ov(y)}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-white",children:_}),c.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["نسبة ",(_/(w.count||1)*100).toFixed(1),"٪ من إجمالي الطلبات."]})]},y)),Object.keys(w.byStatus).length===0&&c.jsx("p",{className:"rounded-3xl bg-white/5 p-6 text-sm text-slate-300",children:"لا تتوفر بيانات كافية لإظهار التقارير."})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"ملاحظات تشغيلية"}),c.jsxs("ul",{className:"mt-4 list-disc space-y-2 pr-6 text-sm text-slate-200",children:[c.jsx("li",{children:"تحققي من الطلبات التي تحمل حالة «قيد المراجعة» أو «ملغي» للتأكد من تحديث الحالة لدى المطعم."}),c.jsx("li",{children:"قومي بمراجعة طلبات الانضمام الجديدة بشكل يومي لضمان إضافة المطاعم إلى التطبيق دون تأخير."}),c.jsx("li",{children:"استخدمي تبويب العمولة لمراجعة التحويلات قبل نهاية كل شهر."})]})]}),c.jsxs("div",{className:"rounded-3xl bg-white/5 p-6",children:[c.jsx("h3",{className:"text-lg font-semibold",children:"تصدير التقارير"}),c.jsxs("div",{className:"mt-4 grid gap-3 sm:grid-cols-2 lg:grid-cols-4",children:[c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تنزيل تقرير شهر حالي"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تقرير العمولات التفصيلي"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"تقرير أداء المطاعم"}),c.jsx("button",{className:"rounded-2xl bg-yellow-400/20 px-4 py-3 text-sm font-semibold text-yellow-200 hover:bg-yellow-400/30",children:"أرشيف الطلبات المكتمل"})]}),c.jsx("p",{className:"mt-4 text-xs text-slate-400",children:"يتم تحضير ملفات CSV قابلة للتصدير لاحقاً، حالياً الأزرار للعرض فقط وتمثل المهام القادمة للفريق التقني."})]})]})]})]})]}):c.jsx("div",{className:"min-h-screen flex items-center justify-center bg-slate-900 text-white",children:c.jsx("p",{className:"text-lg font-semibold",children:"يجب تسجيل الدخول كمشرفة للوصول إلى هذه الصفحة."})})},dn=({children:t,redirectTo:e="/login"})=>{const{user:n,loading:r}=It();return r?c.jsx("div",{className:"p-8 text-center",children:"جارِ التحميل..."}):n?c.jsx(c.Fragment,{children:t}):c.jsx(iw,{to:e,replace:!0})},$j=()=>{const{user:t}=It(),[e,n]=P.useState({name:"",phone:"",city:"",location:"",logoUrl:""}),[r,s]=P.useState(!0),[i,o]=P.useState(!1);P.useEffect(()=>{if(!t)return;(async()=>{const f=Ce(ee,"restaurants",t.uid),p=await Tn(f);p.exists()&&n(p.data()),s(!1)})()},[t]);const l=async d=>{var p;if(!t)return;const f=(p=d.target.files)==null?void 0:p[0];if(f){o(!0);try{const g=BE(X2,`restaurants/${t.uid}/logo.jpg`);await FE(g,f);const w=await UE(g);n(I=>({...I,logoUrl:w})),alert("✅ تم رفع الشعار بنجاح")}catch(g){console.error(g),alert("❌ حدث خطأ أثناء رفع الشعار")}o(!1)}},u=async d=>{if(d.preventDefault(),!t)return;const f=Ce(ee,"restaurants",t.uid);await ra(f,e,{merge:!0}),alert("✅ تم حفظ التغييرات")};return r?c.jsx("div",{children:"جارِ التحميل..."}):c.jsxs("div",{className:"max-w-md mx-auto bg-white rounded-2xl shadow p-6 space-y-3 text-gray-900",children:[c.jsx("h1",{className:"text-xl font-bold mb-4",children:"تعديل بيانات المطعم"}),c.jsxs("form",{onSubmit:u,className:"space-y-3",children:[c.jsxs("div",{className:"space-y-2",children:[c.jsx("label",{className:"block font-semibold",children:"شعار المطعم"}),e.logoUrl&&c.jsx("img",{src:e.logoUrl,alt:"شعار المطعم",className:"w-20 h-20 rounded-full object-cover border"}),c.jsx("input",{type:"file",accept:"image/*",onChange:l}),i&&c.jsx("p",{className:"text-sm text-gray-500",children:"⏳ جاري رفع الشعار..."})]}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"اسم المطعم",value:e.name,onChange:d=>n({...e,name:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"رقم الجوال",value:e.phone,onChange:d=>n({...e,phone:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"المدينة",value:e.city,onChange:d=>n({...e,city:d.target.value})}),c.jsx("input",{className:"w-full border rounded-xl p-3",placeholder:"الموقع",value:e.location,onChange:d=>n({...e,location:d.target.value})}),c.jsx("button",{className:"w-full bg-gray-900 text-white rounded-xl p-3 hover:bg-gray-800 transition",disabled:i,children:i?"جاري رفع الشعار...":"حفظ"})]})]})},zj=()=>{const{user:t}=It();return c.jsxs("div",{className:"min-h-screen flex flex-col items-center justify-center bg-gradient-to-br from-primary via-dark to-[#3a1a1a] text-center px-6 text-secondary relative overflow-hidden",children:[c.jsx("div",{className:"absolute top-0 left-0 w-80 h-80 bg-accent/10 rounded-full blur-3xl animate-pulse"}),c.jsx("div",{className:"absolute bottom-0 right-0 w-80 h-80 bg-primary/30 rounded-full blur-3xl animate-pulse"}),c.jsxs("div",{className:"relative z-10 flex flex-col items-center",children:[c.jsx("h1",{className:"text-4xl sm:text-5xl md:text-6xl font-extrabold text-accent mb-4 drop-shadow-[0_4px_10px_rgba(0,0,0,0.4)]",children:"🍗 سفرة البيت"}),c.jsx("p",{className:"text-lg sm:text-xl md:text-2xl text-secondary/90 max-w-2xl mb-8 leading-relaxed font-medium",children:"استمتع بأشهى الأكلات البيتية والبرست الطازج 😋 اطلب وجبتك بكل سهولة، وخليها توصلك لين باب بيتك 🚗💨"}),c.jsx("img",{src:"/landing.png",alt:"طبق سفرة البيت",className:"w-64 sm:w-80 md:w-96 mb-10 rounded-3xl shadow-2xl border-4 border-accent/40 object-cover hover:scale-105 transition-transform duration-300"}),t?c.jsx(xt,{to:"/restaurants",className:"px-10 py-4 rounded-full text-lg font-semibold text-primary bg-accent shadow-[0_4px_10px_rgba(0,0,0,0.3)] hover:scale-105 hover:shadow-lg transition-transform duration-300",children:"🍴 تصفح المطاعم"}):c.jsxs("div",{className:"flex flex-col items-center gap-4",children:[c.jsx(xt,{to:"/login",className:"px-10 py-4 rounded-full text-lg font-semibold text-primary bg-accent shadow-[0_4px_10px_rgba(0,0,0,0.3)] hover:scale-105 hover:shadow-lg transition-transform duration-300",children:"تسجيل الدخول"}),c.jsxs("p",{className:"text-secondary/80",children:["ماعندك حساب؟"," ",c.jsx(xt,{to:"/register",className:"text-accent font-semibold hover:underline hover:text-yellow-300 transition",children:"أنشئ حساب الآن"})]})]})]})]})},qj=()=>{const{items:t,subtotal:e,remove:n,clear:r}=Hp();return t.length===0?c.jsx("div",{className:"text-center text-gray-400 mt-20",children:"🛒 السلة فارغة"}):c.jsxs("div",{className:"max-w-3xl mx-auto space-y-4",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"🛒 سلة المشتريات"}),t.map(s=>c.jsxs("div",{className:"flex justify-between items-center bg-white text-black p-4 rounded-xl shadow",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold",children:s.name}),c.jsxs("div",{className:"text-sm text-gray-600",children:["الكمية: ",s.qty]}),c.jsxs("div",{className:"font-bold",children:[(s.price*s.qty).toFixed(2)," ر.س"]}),c.jsxs("div",{className:"text-xs text-gray-500",children:["المطعم: ",s.ownerId||"❌ غير محدد"]})]}),c.jsx("button",{onClick:()=>n(s.id),className:"px-4 py-2 rounded-xl bg-red-500 text-white hover:bg-red-600",children:"حذف"})]},s.id)),c.jsxs("div",{className:"font-bold text-xl text-right",children:["المجموع: ",e.toFixed(2)," ر.س"]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:r,className:"px-5 py-2 rounded-xl bg-gray-500 text-white",children:"🗑️ تفريغ السلة"}),c.jsx(xt,{to:"/checkout",className:"px-5 py-2 rounded-xl bg-yellow-500 text-black font-bold",children:"✅ إتمام الطلب"})]})]})},Td=[{id:1,title:"مبيعات التطبيق",amount:18500,category:"income",note:"إجمالي الطلبات المكتملة"},{id:2,title:"عمولة المتاجر",amount:4200,category:"income"},{id:3,title:"رواتب الموظفات",amount:6200,category:"expense"},{id:4,title:"استضافة المنصة",amount:950,category:"expense"},{id:5,title:"حملات تسويقية",amount:1800,category:"expense",note:"إعلانات ممولة لمدة أسبوعين"}],Wj=[{id:1,name:"أمل الغامدي",role:"إدارة عمليات",email:"amal@example.com",commission:12.5,active:!0},{id:2,name:"سارة الشهري",role:"خدمة العملاء",email:"sarah@example.com",commission:8,active:!0},{id:3,name:"جود العتيبي",role:"تسويق رقمي",email:"jood@example.com",commission:10,active:!1}],Hj=[{id:1,title:"إطلاق نظام الولاء",owner:"سارة الشهري",status:"قيد التنفيذ",progress:65,dueDate:"25 أبريل 2024"},{id:2,title:"تحديث قائمة المطاعم",owner:"أمل الغامدي",status:"مكتمل",progress:100,dueDate:"15 أبريل 2024"},{id:3,title:"حملة إعلانية لشهر رمضان",owner:"جود العتيبي",status:"متأخر",progress:35,dueDate:"10 أبريل 2024"}],Kj=[{title:"الإدارة المالية",description:"توفر لك الأرقام الأساسية نظرة سريعة على أداء المنصة؛ من خلال مقارنة الدخل والمصروفات ومراقبة صافي الربح لمعرفة أين يجب تعزيز الاستثمار أو ضبط التكاليف.",highlights:["بطاقات ملونة تبين الدخل والمصروفات وصافي الربح","جدول تفصيلي لكل بند مع الملاحظات المرتبطة به"]},{title:"قسم الموظفات",description:"يمكنك إضافة موظفة جديدة وتحديث بيانات الفريق بسهولة، مع متابعة حالة التوظيف ونسبة العمولة المحققة لكل عضو من خلال شريط التقدم.",highlights:["نموذج تسجيل يضم الاسم، الوظيفة، البريد، ونسبة العمولة","بطاقات تعرض حالة كل موظفة ونسبة تحقيق الأهداف"]},{title:"تقارير المهام",description:"تعرض البطاقات حالة كل مهمة، والمسؤولة عنها، وتاريخ التسليم المتوقع، مع مؤشرات لونية لتوضيح مستوى التقدم ودرجة الأولوية.",highlights:["وسوم الحالة بالألوان تبين المهام المكتملة والمتأخرة","شريط تقدم مرئي يساعد على قراءة نسبة الإنجاز مباشرة"]}],hl=new Intl.NumberFormat("ar-SA",{style:"currency",currency:"SAR",maximumFractionDigits:0}),Gj=()=>{const[t,e]=P.useState(Wj),[n,r]=P.useState({name:"",role:"",email:"",commission:""}),[s,i]=P.useState(null),{income:o,expense:l,net:u}=P.useMemo(()=>{const p=Td.filter(w=>w.category==="income").reduce((w,I)=>w+I.amount,0),g=Td.filter(w=>w.category==="expense").reduce((w,I)=>w+I.amount,0);return{income:p,expense:g,net:p-g}},[]),d=p=>{const{name:g,value:w}=p.target;r(I=>({...I,[g]:w}))},f=p=>{p.preventDefault();const g=n.name.trim(),w=n.role.trim(),I=n.email.trim(),R=Number(n.commission);if(!g||!w||Number.isNaN(R)){i("الرجاء تعبئة الاسم، الوظيفة، ونسبة العمولة بشكل صحيح.");return}if(R<0||R>100){i("نسبة العمولة يجب أن تكون بين 0% و 100%.");return}const b={id:Date.now(),name:g,role:w,email:I||void 0,commission:R,active:!0};e(y=>[b,...y]),r({name:"",role:"",email:"",commission:""}),i(null)};return c.jsxs("section",{className:"space-y-10",children:[c.jsxs("header",{className:"rounded-2xl bg-gradient-to-r from-[#1e293b] via-[#334155] to-[#1e293b] px-8 py-10 text-white shadow-xl",children:[c.jsxs("div",{className:"flex flex-col gap-2 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm uppercase tracking-[0.3em] text-slate-300",children:"لوحة المطور"}),c.jsx("h1",{className:"text-3xl font-bold md:text-4xl",children:"إدارة المنصة والعمليات"})]}),c.jsxs("div",{className:"text-right text-sm text-slate-200",children:[c.jsx("p",{children:"المطور المسؤول: مريم الكناني"}),c.jsx("p",{children:"📧 memwalknany976@gmail.com"}),c.jsx("p",{children:"📱 0555047703"})]})]}),c.jsx("p",{className:"mt-6 max-w-3xl text-sm text-slate-200",children:"توفر هذه اللوحة نظرة شاملة على الوضع المالي، حالة الموظفات، والتقدم في المهام التشغيلية لتسهيل متابعة عمل المنصة بشكل يومي."})]}),c.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:Kj.map(p=>c.jsxs("article",{className:"flex flex-col rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-md backdrop-blur",children:[c.jsx("h2",{className:"text-lg font-semibold text-slate-900",children:p.title}),c.jsx("p",{className:"mt-3 text-sm leading-relaxed text-slate-600",children:p.description}),c.jsx("ul",{className:"mt-4 space-y-2 text-sm text-slate-500",children:p.highlights.map(g=>c.jsxs("li",{className:"flex items-start gap-2",children:[c.jsx("span",{className:"mt-1 inline-block h-2 w-2 flex-shrink-0 rounded-full bg-primary","aria-hidden":!0}),c.jsx("span",{children:g})]},g))})]},p.title))}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"الإدارة المالية"}),c.jsx("span",{className:"rounded-full bg-emerald-100 px-4 py-1 text-sm font-medium text-emerald-700",children:"آخر تحديث: اليوم"})]}),c.jsxs("div",{className:"grid gap-6 md:grid-cols-3",children:[c.jsxs("div",{className:"rounded-xl border border-emerald-100 bg-emerald-50/60 p-5",children:[c.jsx("p",{className:"text-sm text-emerald-700",children:"إجمالي الدخل"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-emerald-900",children:hl.format(o)}),c.jsx("p",{className:"mt-2 text-xs text-emerald-800/80",children:"يشمل المبيعات، عمولات المتاجر، وخدمات إضافية"})]}),c.jsxs("div",{className:"rounded-xl border border-rose-100 bg-rose-50/60 p-5",children:[c.jsx("p",{className:"text-sm text-rose-700",children:"إجمالي المصروفات"}),c.jsx("p",{className:"mt-3 text-3xl font-bold text-rose-900",children:hl.format(l)}),c.jsx("p",{className:"mt-2 text-xs text-rose-800/80",children:"رواتب، استضافة، وحملات تسويقية"})]}),c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-slate-50 p-5",children:[c.jsx("p",{className:"text-sm text-slate-700",children:"صافي الربح"}),c.jsx("p",{className:`mt-3 text-3xl font-bold ${u>=0?"text-emerald-900":"text-rose-900"}`,children:hl.format(u)}),c.jsx("p",{className:"mt-2 text-xs text-slate-500",children:"متابعة التدفقات المالية لتحديد أولويات الاستثمار"})]})]}),c.jsx("div",{className:"mt-8 overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-slate-200 text-right",children:[c.jsx("thead",{className:"bg-slate-100 text-slate-600",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"البند"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"النوع"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"المبلغ"}),c.jsx("th",{className:"px-4 py-3 text-sm font-semibold",children:"ملاحظات"})]})}),c.jsx("tbody",{className:"divide-y divide-slate-200 bg-white text-slate-700",children:Td.map(p=>c.jsxs("tr",{className:"transition hover:bg-slate-50",children:[c.jsx("td",{className:"px-4 py-3 text-sm font-medium",children:p.title}),c.jsx("td",{className:"px-4 py-3 text-sm",children:c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.category==="income"?"bg-emerald-100 text-emerald-700":"bg-rose-100 text-rose-700"}`,children:p.category==="income"?"دخل":"مصروف"})}),c.jsx("td",{className:"px-4 py-3 text-sm font-semibold text-slate-900",children:hl.format(p.amount)}),c.jsx("td",{className:"px-4 py-3 text-xs text-slate-500",children:p.note??"—"})]},p.id))})]})})]}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex flex-col justify-between gap-4 md:flex-row md:items-center",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"قسم الموظفات"}),c.jsx("p",{className:"text-sm text-slate-500",children:"سجل وحدث بيانات الفريق، وتابع نسب العمولات لكل موظفة"})]}),c.jsxs("form",{onSubmit:f,className:"grid gap-4 rounded-xl border border-slate-200 bg-slate-50 p-5 md:grid-cols-5",children:[c.jsx("input",{name:"name",value:n.name,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"اسم الموظفة"}),c.jsx("input",{name:"role",value:n.role,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"المسمى الوظيفي"}),c.jsx("input",{name:"email",value:n.email,onChange:d,className:"rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"البريد الإلكتروني (اختياري)",type:"email"}),c.jsx("div",{className:"flex items-center gap-2",children:c.jsx("input",{name:"commission",value:n.commission,onChange:d,className:"w-full rounded-lg border border-slate-200 bg-white px-3 py-2 text-sm focus:border-primary focus:outline-none focus:ring-2 focus:ring-primary/30",placeholder:"نسبة العمولة %",type:"number",step:"0.1",min:"0",max:"100"})}),c.jsx("button",{type:"submit",className:"rounded-lg bg-primary px-4 py-2 text-sm font-semibold text-white transition hover:bg-primary/90",children:"إضافة موظفة"}),s&&c.jsx("p",{className:"md:col-span-5 text-sm font-medium text-rose-600",children:s})]}),c.jsx("div",{className:"mt-6 grid gap-4",children:t.map(p=>c.jsxs("div",{className:"rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary/40 hover:shadow",children:[c.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:p.name}),c.jsx("p",{className:"text-sm text-slate-500",children:p.role}),p.email&&c.jsx("p",{className:"text-xs text-slate-400",children:p.email})]}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.active?"bg-emerald-100 text-emerald-700":"bg-slate-200 text-slate-600"}`,children:p.active?"على رأس العمل":"موقفة مؤقتًا"}),c.jsxs("div",{className:"text-right",children:[c.jsx("p",{className:"text-xs text-slate-500",children:"نسبة العمولة"}),c.jsxs("p",{className:"text-lg font-semibold text-primary",children:[p.commission,"%"]})]})]})]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"تحقيق الأهداف"}),c.jsxs("span",{children:[Math.min(100,Math.round(p.commission*4)),"%"]})]}),c.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-slate-100",children:c.jsx("div",{className:"h-2 rounded-full bg-primary transition-all",style:{width:`${Math.min(100,Math.round(p.commission*4))}%`}})})]})]},p.id))})]}),c.jsxs("section",{className:"rounded-2xl bg-white/80 p-6 shadow-lg backdrop-blur",children:[c.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-semibold text-slate-900",children:"تقارير المهام"}),c.jsx("span",{className:"text-sm text-slate-400",children:"3 مهام نشطة هذا الأسبوع"})]}),c.jsx("div",{className:"grid gap-5 md:grid-cols-3",children:Hj.map(p=>c.jsxs("article",{className:"flex flex-col rounded-xl border border-slate-200 bg-white p-5 shadow-sm transition hover:border-primary/40 hover:shadow",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h3",{className:"text-lg font-semibold text-slate-900",children:p.title}),c.jsx("span",{className:`rounded-full px-3 py-1 text-xs font-semibold ${p.status==="مكتمل"?"bg-emerald-100 text-emerald-700":p.status==="قيد التنفيذ"?"bg-amber-100 text-amber-700":"bg-rose-100 text-rose-700"}`,children:p.status})]}),c.jsxs("p",{className:"mt-2 text-sm text-slate-500",children:["المسؤولة: ",p.owner]}),c.jsxs("p",{className:"mt-1 text-xs text-slate-400",children:["موعد التسليم: ",p.dueDate]}),c.jsxs("div",{className:"mt-4",children:[c.jsxs("div",{className:"flex items-center justify-between text-xs text-slate-500",children:[c.jsx("span",{children:"التقدم"}),c.jsxs("span",{children:[p.progress,"%"]})]}),c.jsx("div",{className:"mt-2 h-2 w-full rounded-full bg-slate-100",children:c.jsx("div",{className:`h-2 rounded-full ${p.status==="مكتمل"?"bg-emerald-500":p.status==="قيد التنفيذ"?"bg-amber-500":"bg-rose-500"}`,style:{width:`${p.progress}%`}})})]})]},p.id))})]})]})},Qj=()=>{const[t,e]=P.useState([]),[n,r]=P.useState(!0);return P.useEffect(()=>{(async()=>{const s=await Sn(Oe(ee,"restaurants"));e(s.docs.map(i=>({id:i.id,...i.data()}))),r(!1)})()},[]),n?c.jsx("div",{className:"flex items-center justify-center h-96 text-lg text-gray-300",children:"⏳ جارِ تحميل المطاعم..."}):c.jsxs("div",{className:"py-10",children:[c.jsx("h1",{className:"text-3xl font-extrabold text-center mb-8 text-yellow-400",children:"🍴 قائمة المطاعم"}),t.length===0&&c.jsx("div",{className:"text-center text-gray-400",children:"😔 لا توجد مطاعم حالياً"}),c.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>c.jsxs(xt,{to:`/menu?restaurant=${s.id}`,className:"bg-gray-800 text-white rounded-2xl shadow-lg hover:shadow-2xl hover:-translate-y-1 transform transition p-6 flex flex-col items-center text-center",children:[s.logoUrl?c.jsx("img",{src:s.logoUrl,alt:s.name,className:"w-28 h-28 object-cover rounded-full border-4 border-gray-700 mb-4"}):c.jsx("div",{className:"w-28 h-28 flex items-center justify-center bg-gray-600 rounded-full text-3xl mb-4",children:"🍴"}),c.jsx("h3",{className:"font-bold text-xl",children:s.name}),s.city&&c.jsx("p",{className:"text-sm text-gray-400 mt-1",children:s.city})]},s.id))})]})},Yj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState({}),[i,o]=P.useState(!0),[l,u]=P.useState(null);P.useEffect(()=>{if(!t)return;(async()=>{const g=(await Sn(Oe(ee,"restaurants"))).docs.map(b=>({id:b.id,...b.data()}));n(g);const w=Mt(Oe(ee,"hiringRequests"),Lr("courierId","==",t.uid)),I=await Sn(w),R={};I.docs.forEach(b=>{const y=b.data();R[y.restaurantId]={restaurantId:y.restaurantId,status:y.status}}),s(R),o(!1)})()},[t]);const d=async f=>{if(!t)return alert("سجل دخول أولاً");u(f.id),await cc(Oe(ee,"hiringRequests"),{courierId:t.uid,courierName:t.displayName||"مندوب",restaurantId:f.id,restaurantName:f.name,status:"pending",createdAt:ws()}),s(p=>({...p,[f.id]:{restaurantId:f.id,status:"pending"}})),u(null)};return i?c.jsx("div",{className:"text-center py-10 text-gray-300",children:"⏳ تحميل المطاعم..."}):c.jsxs("div",{className:"py-8",children:[c.jsxs("h1",{className:"text-3xl font-extrabold text-yellow-400 text-center mb-8 flex items-center justify-center gap-2",children:[c.jsx(ij,{className:"w-7 h-7 text-yellow-400"}),"طلبات التوظيف"]}),c.jsx("div",{className:"grid sm:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(f=>{const p=r[f.id];return c.jsxs("div",{className:"bg-gradient-to-br from-gray-800 to-gray-900 text-white rounded-2xl p-6 shadow-lg hover:shadow-2xl transition transform hover:-translate-y-1 flex flex-col items-center",children:[f.logoUrl?c.jsx("img",{src:f.logoUrl,className:"w-24 h-24 rounded-full mb-4 object-cover border-4 border-yellow-500 shadow"}):c.jsx("div",{className:"w-24 h-24 rounded-full bg-gray-600 flex items-center justify-center text-3xl mb-4",children:"🍴"}),c.jsx("h3",{className:"font-bold text-lg mb-2",children:f.name}),p?c.jsxs("span",{className:`mt-3 px-4 py-2 rounded-xl text-sm font-semibold flex items-center gap-2 ${p.status==="pending"?"bg-gray-500 text-white":p.status==="accepted"?"bg-green-500 text-white":"bg-red-500 text-white"}`,children:[p.status==="pending"&&c.jsx(fj,{className:"w-4 h-4"}),p.status==="accepted"&&c.jsx(aj,{className:"w-4 h-4"}),p.status==="rejected"&&c.jsx(uj,{className:"w-4 h-4"}),p.status==="pending"?"قيد المراجعة":p.status==="accepted"?"✅ تم القبول":"❌ مرفوض"]}):c.jsx("button",{disabled:l===f.id,onClick:()=>d(f),className:"mt-4 w-full px-4 py-2 rounded-xl bg-yellow-500 text-black font-bold shadow hover:bg-yellow-600 hover:scale-105 transition disabled:opacity-50",children:l===f.id?"⏳ جاري الإرسال...":"📩 طلب توظيف"})]},f.id)})})]})},Xj=()=>{const{user:t}=It(),[e,n]=P.useState([]),[r,s]=P.useState(!0);P.useEffect(()=>{t&&(async()=>{const o=Mt(Oe(ee,"hiringRequests"),Lr("restaurantId","==",t.uid)),l=await Sn(o);n(l.docs.map(u=>({id:u.id,...u.data()}))),s(!1)})()},[t]);const i=async(o,l)=>{await xi(Ce(ee,"hiringRequests",o),{status:l}),n(u=>u.map(d=>d.id===o?{...d,status:l}:d))};return r?c.jsx("div",{className:"text-center py-10",children:"⏳ تحميل..."}):c.jsxs("div",{className:"py-6",children:[c.jsx("h1",{className:"text-2xl font-bold text-yellow-400 text-center mb-6",children:"طلبات المندوبين"}),e.length===0?c.jsx("div",{className:"text-gray-400 text-center",children:"لا توجد طلبات"}):c.jsx("div",{className:"space-y-3",children:e.map(o=>c.jsxs("div",{className:"bg-white rounded-2xl shadow p-4 flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"font-bold",children:o.courierName}),c.jsx("div",{className:"text-sm text-gray-600",children:o.status==="pending"?"بانتظار الرد":o.status})]}),o.status==="pending"&&c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>i(o.id,"accepted"),className:"px-3 py-1 rounded bg-green-500 text-white",children:"قبول"}),c.jsx("button",{onClick:()=>i(o.id,"rejected"),className:"px-3 py-1 rounded bg-red-500 text-white",children:"رفض"})]})]},o.id))})]})},Jj=()=>{var l;const[t,e]=P.useState([]),[n,r]=P.useState(!0),[s,i]=P.useState(null);P.useEffect(()=>{(async()=>{try{i(null);const u=Mt(Oe(ee,"orders"),br("createdAt","desc"),mE(10)),f=(await Sn(u)).docs.map(p=>{var w,I,R,b,y,_;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((I=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:I.ownerId)??null,customerId:g.customerId??null,createdAtISO:((_=(y=(b=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:b.call(R))==null?void 0:y.toISOString)==null?void 0:_.call(y))??null}});e(f)}catch(u){if(String((u==null?void 0:u.message)||"").includes("index"))try{const f=(await Sn(Oe(ee,"orders"))).docs.map(p=>{var w,I,R,b,y,_;const g=p.data();return{id:p.id,restaurantId:g.restaurantId??null,firstItemOwnerId:((I=(w=g==null?void 0:g.items)==null?void 0:w[0])==null?void 0:I.ownerId)??null,customerId:g.customerId??null,createdAtISO:((_=(y=(b=(R=g.createdAt)==null?void 0:R.toDate)==null?void 0:b.call(R))==null?void 0:y.toISOString)==null?void 0:_.call(y))??null}});e(f),i("⚠️ ما فيه فهرس لـ createdAt — عرضنا البيانات بدون ترتيب.")}catch(d){i("❌ فشل الجلب حتى بدون ترتيب: "+((d==null?void 0:d.message)||d))}else i("❌ خطأ الجلب: "+((u==null?void 0:u.message)||u))}finally{r(!1)}})()},[]);const o=(l=Ea.options)==null?void 0:l.projectId;return c.jsxs("div",{className:"p-4 space-y-3",children:[c.jsx("h1",{className:"text-xl font-bold",children:"DEBUG: Orders Snapshot"}),c.jsxs("div",{className:"text-sm",children:["ProjectId: ",c.jsx("b",{children:String(o)})]}),s&&c.jsx("div",{className:"text-red-600 text-sm",children:s}),n&&c.jsx("div",{children:"⏳ Loading…"}),!n&&t.length===0&&c.jsxs("div",{className:"text-gray-600",children:["لا توجد أي مستندات في collection: ",c.jsx("code",{children:"orders"})," في هذا المشروع."]}),t.map(u=>c.jsxs("div",{className:"bg-white rounded-xl shadow p-3 text-sm",children:[c.jsxs("div",{className:"font-mono text-xs text-gray-500",children:["#",u.id]}),c.jsxs("div",{children:["restaurantId: ",c.jsx("b",{children:String(u.restaurantId)})]}),c.jsxs("div",{children:["items[0].ownerId: ",c.jsx("b",{children:String(u.firstItemOwnerId)})]}),c.jsxs("div",{children:["customerId: ",c.jsx("b",{children:String(u.customerId)})]}),c.jsxs("div",{children:["createdAt: ",c.jsx("b",{children:u.createdAtISO||"—"})]})]},u.id))]})};function Zj(){return c.jsxs("div",{className:"flex flex-col items-center justify-center min-h-screen bg-gray-100 text-center",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4",children:"تم حذف حسابك بنجاح"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"نأسف لمغادرتك 🍗 يمكنك العودة في أي وقت وإنشاء حساب جديد."}),c.jsx(xt,{to:"/",className:"text-white bg-red-500 px-6 py-2 rounded-lg hover:bg-red-600",children:"الرجوع إلى الصفحة الرئيسية"})]})}function eD(){return c.jsx("div",{className:"min-h-screen bg-gray-100 text-gray-800 px-6 py-10 leading-relaxed",children:c.jsxs("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-2xl p-8",children:[c.jsx("h1",{className:"text-2xl font-bold text-red-600 mb-4 text-center",children:"سياسة الخصوصية - 🍗 سفرة البيت"}),c.jsxs("p",{className:"mb-4",children:["نُقدّر ثقتك بتطبيق ",c.jsx("strong",{children:"سفرة البيت"})," ونسعى لحماية خصوصيتك وبياناتك الشخصية وفقًا لأفضل الممارسات ومعايير الأمان."]}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"1. جمع المعلومات"}),c.jsx("p",{className:"mb-4",children:"نقوم بجمع المعلومات التي تقدمها عند إنشاء حسابك أو عند استخدام خدماتنا، مثل الاسم، رقم الجوال، الموقع، وطلباتك داخل التطبيق. كما قد نجمع بيانات فنية مثل نوع الجهاز ونظام التشغيل لتحسين الأداء."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"2. استخدام المعلومات"}),c.jsx("p",{className:"mb-4",children:"تُستخدم المعلومات لتقديم الخدمات وتحسين تجربة المستخدم، وإرسال الإشعارات المتعلقة بالطلبات، والدعم الفني، وتطوير مميزات جديدة."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"3. حماية البيانات"}),c.jsx("p",{className:"mb-4",children:"نستخدم أنظمة حماية حديثة لتأمين بياناتك من الوصول غير المصرّح به أو التعديل أو الإفشاء. ولن نشارك معلوماتك مع أي جهة خارجية إلا بموافقتك أو وفقًا للأنظمة السارية في المملكة العربية السعودية."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"4. مشاركة المعلومات"}),c.jsx("p",{className:"mb-4",children:"قد نشارك بعض المعلومات مع مقدّمي الخدمات (مثل شركات التوصيل أو الدفع) فقط بالقدر اللازم لإتمام الطلبات، وبما يضمن سرية بياناتك."}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"5. حقوق المستخدم"}),c.jsxs("p",{className:"mb-4",children:["يمكنك في أي وقت تحديث معلوماتك الشخصية أو حذف حسابك نهائيًا من خلال إعدادات التطبيق. كما يمكنك التواصل معنا لأي استفسار يخص الخصوصية عبر:",c.jsx("strong",{children:" mymwalknany976@gmail.com "})]}),c.jsx("h2",{className:"text-xl font-semibold mt-6 mb-2 text-gray-900",children:"6. التعديلات على السياسة"}),c.jsx("p",{className:"mb-4",children:"قد نقوم بتحديث هذه السياسة من وقت لآخر، وسيتم إشعار المستخدمين بأي تغيير جوهري عبر التطبيق أو البريد الإلكتروني."}),c.jsxs("p",{className:"mt-6 text-sm text-gray-600 text-center",children:["تم آخر تحديث لهذه السياسة بتاريخ ",new Date().toLocaleDateString("ar-SA"),"."]}),c.jsx("div",{className:"mt-8 text-center",children:c.jsx(xt,{to:"/",className:"text-white bg-red-500 hover:bg-red-600 px-6 py-2 rounded-lg",children:"الرجوع إلى الصفحة الرئيسية"})})]})})}const tD=()=>c.jsx(Kp,{defaultMode:"family"}),nD=()=>c.jsx(Kp,{defaultMode:"restaurant"});function rD(){return c.jsxs("div",{className:"min-h-screen flex flex-col bg-secondary text-dark",children:[c.jsx(Ej,{}),c.jsx(wj,{}),c.jsx("main",{className:"flex-1 max-w-6xl mx-auto px-4 py-8 bg-gradient-to-br from-secondary via-[#FCEBCB] to-[#F7DDA6] rounded-xl shadow-inner",children:c.jsxs(FN,{children:[c.jsx(we,{path:"/",element:c.jsx(zj,{})}),c.jsx(we,{path:"/restaurants",element:c.jsx(Qj,{})}),c.jsx(we,{path:"/menu",element:c.jsx(Tj,{})}),c.jsx(we,{path:"/login",element:c.jsx(Kp,{})}),c.jsx(we,{path:"/login/family",element:c.jsx(tD,{})}),c.jsx(we,{path:"/login/restaurant",element:c.jsx(nD,{})}),c.jsx(we,{path:"/admin/login",element:c.jsx(Vj,{})}),c.jsx(we,{path:"/register",element:c.jsx(Rj,{})}),c.jsx(we,{path:"/cart",element:c.jsx(qj,{})}),c.jsx(we,{path:"/developer",element:c.jsx(Gj,{})}),c.jsx(we,{path:"/privacy-policy",element:c.jsx(eD,{})}),c.jsx(we,{path:"/account-deleted",element:c.jsx(Zj,{})}),c.jsx(we,{path:"/checkout",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["customer"],children:c.jsx(bj,{})})})}),c.jsx(we,{path:"/orders",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["customer"],children:c.jsx(Cj,{})})})}),c.jsx(we,{path:"/owner",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["owner"],children:c.jsx(kj,{})})})}),c.jsx(we,{path:"/owner/menu",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["owner"],children:c.jsx(Pj,{})})})}),c.jsx(we,{path:"/owner/orders",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["owner"],children:c.jsx(Dj,{})})})}),c.jsx(we,{path:"/owner/edit",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["owner"],children:c.jsx($j,{})})})}),c.jsx(we,{path:"/owner/courier-requests",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["owner"],children:c.jsx(Xj,{})})})}),c.jsx(we,{path:"/courier",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["courier"],children:c.jsx(Oj,{})})})}),c.jsx(we,{path:"/courier/hiring",element:c.jsx(dn,{children:c.jsx(Zt,{allow:["courier"],children:c.jsx(Yj,{})})})}),c.jsx(we,{path:"/admin/panel",element:c.jsx(dn,{redirectTo:"/admin/login",children:c.jsx(Zt,{allow:["admin"],children:c.jsx(Bj,{})})})}),c.jsx(we,{path:"/__debug_orders",element:c.jsx(Jj,{})})]})}),c.jsx(xj,{})]})}const sD=P.createContext(void 0),iD=({children:t})=>{const[e,n]=P.useState([]),r=i=>{n(o=>o.find(u=>u.id===i.id)?o.map(u=>u.id===i.id?{...u,qty:u.qty+1}:u):[...o,{...i,qty:1}])},s=i=>{n(o=>o.filter(l=>l.id!==i))};return c.jsx(sD.Provider,{value:{cart:e,addToCart:r,removeFromCart:s},children:t})};Id.createRoot(document.getElementById("root")).render(c.jsx(Hv.StrictMode,{children:c.jsx(HN,{children:c.jsx(J2,{children:c.jsxs(iD,{children:["   ",c.jsx(rD,{})]})})})}));
